<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Read&amp;Watch: django.db.models.sql.query.Query Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Read&amp;Watch<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classdjango_1_1db_1_1models_1_1sql_1_1query_1_1_query.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="classdjango_1_1db_1_1models_1_1sql_1_1query_1_1_query-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">django.db.models.sql.query.Query Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for django.db.models.sql.query.Query:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classdjango_1_1db_1_1models_1_1sql_1_1query_1_1_query.png" usemap="#django.db.models.sql.query.Query_map" alt=""/>
  <map id="django.db.models.sql.query.Query_map" name="django.db.models.sql.query.Query_map">
<area href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html" alt="django.db.models.expressions.BaseExpression" shape="rect" coords="456,0,750,24"/>
<area href="classdjango_1_1db_1_1models_1_1sql_1_1subqueries_1_1_aggregate_query.html" alt="django.db.models.sql.subqueries.AggregateQuery" shape="rect" coords="0,112,294,136"/>
<area href="classdjango_1_1db_1_1models_1_1sql_1_1subqueries_1_1_delete_query.html" alt="django.db.models.sql.subqueries.DeleteQuery" shape="rect" coords="304,112,598,136"/>
<area href="classdjango_1_1db_1_1models_1_1sql_1_1subqueries_1_1_insert_query.html" alt="django.db.models.sql.subqueries.InsertQuery" shape="rect" coords="608,112,902,136"/>
<area href="classdjango_1_1db_1_1models_1_1sql_1_1subqueries_1_1_update_query.html" alt="django.db.models.sql.subqueries.UpdateQuery" shape="rect" coords="912,112,1206,136"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad43bcf15b5f2c7fb290d8b3a7d92b14c" id="r_ad43bcf15b5f2c7fb290d8b3a7d92b14c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad43bcf15b5f2c7fb290d8b3a7d92b14c">__init__</a> (self, <a class="el" href="#afe3cd879bb006df199bfa106ac91ab5b">model</a>, <a class="el" href="#a51482dc46beb2bbd7625496ef1066f04">alias_cols</a>=True)</td></tr>
<tr class="separator:ad43bcf15b5f2c7fb290d8b3a7d92b14c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53ec5a7472740d502ccbe1a6e526aa26" id="r_a53ec5a7472740d502ccbe1a6e526aa26"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a53ec5a7472740d502ccbe1a6e526aa26">output_field</a> (self)</td></tr>
<tr class="separator:a53ec5a7472740d502ccbe1a6e526aa26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc65dcaee5da0f6f1b77226a173eb032" id="r_acc65dcaee5da0f6f1b77226a173eb032"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acc65dcaee5da0f6f1b77226a173eb032">base_table</a> (self)</td></tr>
<tr class="separator:acc65dcaee5da0f6f1b77226a173eb032"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a756c5c55f479e175118d8da3423b78e2" id="r_a756c5c55f479e175118d8da3423b78e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a756c5c55f479e175118d8da3423b78e2">__str__</a> (self)</td></tr>
<tr class="separator:a756c5c55f479e175118d8da3423b78e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc511462bdfefd523195177f15651d1d" id="r_afc511462bdfefd523195177f15651d1d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afc511462bdfefd523195177f15651d1d">sql_with_params</a> (self)</td></tr>
<tr class="separator:afc511462bdfefd523195177f15651d1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03b0d1ca81a588c179694300577a5dde" id="r_a03b0d1ca81a588c179694300577a5dde"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a03b0d1ca81a588c179694300577a5dde">__deepcopy__</a> (self, memo)</td></tr>
<tr class="separator:a03b0d1ca81a588c179694300577a5dde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a20fdb96a84c9314db05fec971417f0" id="r_a1a20fdb96a84c9314db05fec971417f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1a20fdb96a84c9314db05fec971417f0">get_compiler</a> (self, using=None, <a class="el" href="namespacedjango_1_1db.html#ae7b00a677e3c99c34670870d343c0341">connection</a>=None, elide_empty=True)</td></tr>
<tr class="separator:a1a20fdb96a84c9314db05fec971417f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab168d2cabe8308f77df7258d292d4975" id="r_ab168d2cabe8308f77df7258d292d4975"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab168d2cabe8308f77df7258d292d4975">get_meta</a> (self)</td></tr>
<tr class="separator:ab168d2cabe8308f77df7258d292d4975"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66b1b834ecc6355339315670d96079d7" id="r_a66b1b834ecc6355339315670d96079d7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a66b1b834ecc6355339315670d96079d7">clone</a> (self)</td></tr>
<tr class="separator:a66b1b834ecc6355339315670d96079d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3fe5320676d05bc24bd69dcfc785a8f" id="r_aa3fe5320676d05bc24bd69dcfc785a8f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa3fe5320676d05bc24bd69dcfc785a8f">chain</a> (self, klass=None)</td></tr>
<tr class="separator:aa3fe5320676d05bc24bd69dcfc785a8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af280d6a64a9e44dd71caa13a91ccf716" id="r_af280d6a64a9e44dd71caa13a91ccf716"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af280d6a64a9e44dd71caa13a91ccf716">relabeled_clone</a> (self, change_map)</td></tr>
<tr class="separator:af280d6a64a9e44dd71caa13a91ccf716"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a838bcc369ee808b360b6ab68323868e0" id="r_a838bcc369ee808b360b6ab68323868e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a838bcc369ee808b360b6ab68323868e0">get_aggregation</a> (self, using, aggregate_exprs)</td></tr>
<tr class="separator:a838bcc369ee808b360b6ab68323868e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e6c10ea949b3a1c70851e0002656a09" id="r_a4e6c10ea949b3a1c70851e0002656a09"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4e6c10ea949b3a1c70851e0002656a09">get_count</a> (self, using)</td></tr>
<tr class="separator:a4e6c10ea949b3a1c70851e0002656a09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1955c2dc1f48df3818b915fdfbb6f0f" id="r_ab1955c2dc1f48df3818b915fdfbb6f0f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab1955c2dc1f48df3818b915fdfbb6f0f">has_filters</a> (self)</td></tr>
<tr class="separator:ab1955c2dc1f48df3818b915fdfbb6f0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5c8bc324c4badfdcba3d115464be353" id="r_ae5c8bc324c4badfdcba3d115464be353"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae5c8bc324c4badfdcba3d115464be353">exists</a> (self, limit=True)</td></tr>
<tr class="separator:ae5c8bc324c4badfdcba3d115464be353"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50f87eab8046ac532fe77593491da050" id="r_a50f87eab8046ac532fe77593491da050"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a50f87eab8046ac532fe77593491da050">has_results</a> (self, using)</td></tr>
<tr class="separator:a50f87eab8046ac532fe77593491da050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2017a64b53a6a8b184261899b21895e4" id="r_a2017a64b53a6a8b184261899b21895e4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2017a64b53a6a8b184261899b21895e4">explain</a> (self, using, format=None, **options)</td></tr>
<tr class="separator:a2017a64b53a6a8b184261899b21895e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6678fb0a80123a6d6deb2e2a715d3ccb" id="r_a6678fb0a80123a6d6deb2e2a715d3ccb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6678fb0a80123a6d6deb2e2a715d3ccb">combine</a> (self, rhs, connector)</td></tr>
<tr class="separator:a6678fb0a80123a6d6deb2e2a715d3ccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe2bb140cd4be7288068076af9dfc279" id="r_afe2bb140cd4be7288068076af9dfc279"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe2bb140cd4be7288068076af9dfc279">get_select_mask</a> (self)</td></tr>
<tr class="separator:afe2bb140cd4be7288068076af9dfc279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b5b6ac99dbe8f5ac604f7802e4f6a21" id="r_a3b5b6ac99dbe8f5ac604f7802e4f6a21"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3b5b6ac99dbe8f5ac604f7802e4f6a21">table_alias</a> (self, table_name, create=False, filtered_relation=None)</td></tr>
<tr class="separator:a3b5b6ac99dbe8f5ac604f7802e4f6a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a122efab39c4bca47c0f05bd27a66ed" id="r_a6a122efab39c4bca47c0f05bd27a66ed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a122efab39c4bca47c0f05bd27a66ed">ref_alias</a> (self, alias)</td></tr>
<tr class="separator:a6a122efab39c4bca47c0f05bd27a66ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a338bc82926803f2c4b2e8d38db6d75f6" id="r_a338bc82926803f2c4b2e8d38db6d75f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a338bc82926803f2c4b2e8d38db6d75f6">unref_alias</a> (self, alias, amount=1)</td></tr>
<tr class="separator:a338bc82926803f2c4b2e8d38db6d75f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af80fd4b2dd7bd7e2a718a0aca983765d" id="r_af80fd4b2dd7bd7e2a718a0aca983765d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af80fd4b2dd7bd7e2a718a0aca983765d">promote_joins</a> (self, aliases)</td></tr>
<tr class="separator:af80fd4b2dd7bd7e2a718a0aca983765d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac22e8f56034d4ab92ff7b038bb0e64ab" id="r_ac22e8f56034d4ab92ff7b038bb0e64ab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac22e8f56034d4ab92ff7b038bb0e64ab">demote_joins</a> (self, aliases)</td></tr>
<tr class="separator:ac22e8f56034d4ab92ff7b038bb0e64ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c23dd68a9bda649b61ac0f6039265f8" id="r_a1c23dd68a9bda649b61ac0f6039265f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1c23dd68a9bda649b61ac0f6039265f8">reset_refcounts</a> (self, to_counts)</td></tr>
<tr class="separator:a1c23dd68a9bda649b61ac0f6039265f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af401365dc439a0c944fe7a1f83979101" id="r_af401365dc439a0c944fe7a1f83979101"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af401365dc439a0c944fe7a1f83979101">change_aliases</a> (self, change_map)</td></tr>
<tr class="separator:af401365dc439a0c944fe7a1f83979101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22505e1b31a024141dbd0a12425e991f" id="r_a22505e1b31a024141dbd0a12425e991f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a22505e1b31a024141dbd0a12425e991f">bump_prefix</a> (self, other_query, exclude=None)</td></tr>
<tr class="separator:a22505e1b31a024141dbd0a12425e991f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab4910cbe4b7d2f2252bdc9ba5401a45" id="r_aab4910cbe4b7d2f2252bdc9ba5401a45"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aab4910cbe4b7d2f2252bdc9ba5401a45">get_initial_alias</a> (self)</td></tr>
<tr class="separator:aab4910cbe4b7d2f2252bdc9ba5401a45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52823b11f3221cef7fc49f147d7306de" id="r_a52823b11f3221cef7fc49f147d7306de"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a52823b11f3221cef7fc49f147d7306de">count_active_tables</a> (self)</td></tr>
<tr class="separator:a52823b11f3221cef7fc49f147d7306de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1e4ff04f904de18473d47f5473572fd" id="r_ad1e4ff04f904de18473d47f5473572fd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad1e4ff04f904de18473d47f5473572fd">join</a> (self, join, reuse=None)</td></tr>
<tr class="separator:ad1e4ff04f904de18473d47f5473572fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a847f9a68370e4bce573809f03d212e57" id="r_a847f9a68370e4bce573809f03d212e57"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a847f9a68370e4bce573809f03d212e57">join_parent_model</a> (self, opts, <a class="el" href="#afe3cd879bb006df199bfa106ac91ab5b">model</a>, alias, seen)</td></tr>
<tr class="separator:a847f9a68370e4bce573809f03d212e57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e614be64d574a9815dfab53f70b4b63" id="r_a3e614be64d574a9815dfab53f70b4b63"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e614be64d574a9815dfab53f70b4b63">check_alias</a> (self, alias)</td></tr>
<tr class="separator:a3e614be64d574a9815dfab53f70b4b63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aab1bfb47a58b3e027128913ca39c49" id="r_a8aab1bfb47a58b3e027128913ca39c49"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8aab1bfb47a58b3e027128913ca39c49">add_annotation</a> (self, annotation, alias, <a class="el" href="#abf84cd6ecb7e09d95444262a0c4124be">select</a>=True)</td></tr>
<tr class="separator:a8aab1bfb47a58b3e027128913ca39c49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f7253d9010a6f0082182c39b0255e52" id="r_a9f7253d9010a6f0082182c39b0255e52"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f7253d9010a6f0082182c39b0255e52">resolve_expression</a> (self, query, *args, **kwargs)</td></tr>
<tr class="separator:a9f7253d9010a6f0082182c39b0255e52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4322802848d6052c14ff70c1e105571d" id="r_a4322802848d6052c14ff70c1e105571d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4322802848d6052c14ff70c1e105571d">get_external_cols</a> (self)</td></tr>
<tr class="separator:a4322802848d6052c14ff70c1e105571d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bc7a0ba884b52cb27356d9236e7510f" id="r_a3bc7a0ba884b52cb27356d9236e7510f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3bc7a0ba884b52cb27356d9236e7510f">get_group_by_cols</a> (self, wrapper=None)</td></tr>
<tr class="separator:a3bc7a0ba884b52cb27356d9236e7510f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dd0d17082cccfe1b5c046cc044effb2" id="r_a9dd0d17082cccfe1b5c046cc044effb2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9dd0d17082cccfe1b5c046cc044effb2">as_sql</a> (self, <a class="el" href="#a20fe8b05b7844f635809b0783d055b9b">compiler</a>, <a class="el" href="namespacedjango_1_1db.html#ae7b00a677e3c99c34670870d343c0341">connection</a>)</td></tr>
<tr class="separator:a9dd0d17082cccfe1b5c046cc044effb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a610b72d888f2079fbc9203c2520e4b04" id="r_a610b72d888f2079fbc9203c2520e4b04"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a610b72d888f2079fbc9203c2520e4b04">resolve_lookup_value</a> (self, value, can_reuse, allow_joins, summarize=False)</td></tr>
<tr class="separator:a610b72d888f2079fbc9203c2520e4b04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af317f6834aed7f19e05679df3fa4f2ea" id="r_af317f6834aed7f19e05679df3fa4f2ea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af317f6834aed7f19e05679df3fa4f2ea">solve_lookup_type</a> (self, lookup, summarize=False)</td></tr>
<tr class="separator:af317f6834aed7f19e05679df3fa4f2ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaf897d7dddc9297c1a5f1fe75a95f82" id="r_aaaf897d7dddc9297c1a5f1fe75a95f82"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaaf897d7dddc9297c1a5f1fe75a95f82">check_query_object_type</a> (self, value, opts, <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a70aeb35391ada82c2e9f02b1c3ac150c">field</a>)</td></tr>
<tr class="separator:aaaf897d7dddc9297c1a5f1fe75a95f82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a379af3abe4be45ed094044a65142c6c3" id="r_a379af3abe4be45ed094044a65142c6c3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a379af3abe4be45ed094044a65142c6c3">check_related_objects</a> (self, <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a70aeb35391ada82c2e9f02b1c3ac150c">field</a>, value, opts)</td></tr>
<tr class="separator:a379af3abe4be45ed094044a65142c6c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab86586438d12b2713c8aacfd15a129f9" id="r_ab86586438d12b2713c8aacfd15a129f9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab86586438d12b2713c8aacfd15a129f9">check_filterable</a> (self, expression)</td></tr>
<tr class="separator:ab86586438d12b2713c8aacfd15a129f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f0053066d06c4acb70e5a9e38b5e574" id="r_a6f0053066d06c4acb70e5a9e38b5e574"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6f0053066d06c4acb70e5a9e38b5e574">build_lookup</a> (self, lookups, lhs, rhs)</td></tr>
<tr class="separator:a6f0053066d06c4acb70e5a9e38b5e574"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48309b38fbbed2e2ce133b1845ffe790" id="r_a48309b38fbbed2e2ce133b1845ffe790"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a48309b38fbbed2e2ce133b1845ffe790">try_transform</a> (self, lhs, name)</td></tr>
<tr class="separator:a48309b38fbbed2e2ce133b1845ffe790"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a410421a0cb9cd386f5ea3fa1ee5093b8" id="r_a410421a0cb9cd386f5ea3fa1ee5093b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a410421a0cb9cd386f5ea3fa1ee5093b8">build_filter</a> (self, filter_expr, branch_negated=False, current_negated=False, can_reuse=None, allow_joins=True, split_subq=True, <a class="el" href="#ab86586438d12b2713c8aacfd15a129f9">check_filterable</a>=True, summarize=False, update_join_types=True)</td></tr>
<tr class="separator:a410421a0cb9cd386f5ea3fa1ee5093b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cf5b85a93ad91f593a800a05cfe44a8" id="r_a6cf5b85a93ad91f593a800a05cfe44a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6cf5b85a93ad91f593a800a05cfe44a8">add_filter</a> (self, filter_lhs, filter_rhs)</td></tr>
<tr class="separator:a6cf5b85a93ad91f593a800a05cfe44a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f2dddd1286ef7cf8474710013e6f9d1" id="r_a9f2dddd1286ef7cf8474710013e6f9d1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f2dddd1286ef7cf8474710013e6f9d1">add_q</a> (self, q_object)</td></tr>
<tr class="separator:a9f2dddd1286ef7cf8474710013e6f9d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cd85209a22990051ee2353e5a7908ae" id="r_a6cd85209a22990051ee2353e5a7908ae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6cd85209a22990051ee2353e5a7908ae">build_where</a> (self, filter_expr)</td></tr>
<tr class="separator:a6cd85209a22990051ee2353e5a7908ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ffdda5e1bad263a425d230bbe7b734d" id="r_a7ffdda5e1bad263a425d230bbe7b734d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ffdda5e1bad263a425d230bbe7b734d">clear_where</a> (self)</td></tr>
<tr class="separator:a7ffdda5e1bad263a425d230bbe7b734d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d283c44e19e76e10782e46740582cab" id="r_a3d283c44e19e76e10782e46740582cab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3d283c44e19e76e10782e46740582cab">add_filtered_relation</a> (self, filtered_relation, alias)</td></tr>
<tr class="separator:a3d283c44e19e76e10782e46740582cab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa73c0cc51b0c88c2db37eb945bc2a82" id="r_afa73c0cc51b0c88c2db37eb945bc2a82"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa73c0cc51b0c88c2db37eb945bc2a82">names_to_path</a> (self, names, opts, allow_many=True, fail_on_missing=False)</td></tr>
<tr class="separator:afa73c0cc51b0c88c2db37eb945bc2a82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a086e5083d9aa4b96e72ee6897e8906cd" id="r_a086e5083d9aa4b96e72ee6897e8906cd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a086e5083d9aa4b96e72ee6897e8906cd">setup_joins</a> (self, names, opts, alias, can_reuse=None, allow_many=True)</td></tr>
<tr class="separator:a086e5083d9aa4b96e72ee6897e8906cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c3229c139a831748fab16d4ee2e7036" id="r_a6c3229c139a831748fab16d4ee2e7036"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c3229c139a831748fab16d4ee2e7036">trim_joins</a> (self, targets, joins, path)</td></tr>
<tr class="separator:a6c3229c139a831748fab16d4ee2e7036"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04a08b4294679286562aa85841af46d6" id="r_a04a08b4294679286562aa85841af46d6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a04a08b4294679286562aa85841af46d6">resolve_ref</a> (self, name, allow_joins=True, reuse=None, summarize=False)</td></tr>
<tr class="separator:a04a08b4294679286562aa85841af46d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a383a0ff8738498cdb5394e3f04e3a00d" id="r_a383a0ff8738498cdb5394e3f04e3a00d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a383a0ff8738498cdb5394e3f04e3a00d">split_exclude</a> (self, filter_expr, can_reuse, names_with_path)</td></tr>
<tr class="separator:a383a0ff8738498cdb5394e3f04e3a00d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad210f67ad79f672a7ffa047cc0c32c3b" id="r_ad210f67ad79f672a7ffa047cc0c32c3b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad210f67ad79f672a7ffa047cc0c32c3b">set_empty</a> (self)</td></tr>
<tr class="separator:ad210f67ad79f672a7ffa047cc0c32c3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acda520ac57f8751cb3c4b2252444af81" id="r_acda520ac57f8751cb3c4b2252444af81"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acda520ac57f8751cb3c4b2252444af81">is_empty</a> (self)</td></tr>
<tr class="separator:acda520ac57f8751cb3c4b2252444af81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8fb55925902cdfb9cc408d194b71eaf" id="r_ac8fb55925902cdfb9cc408d194b71eaf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac8fb55925902cdfb9cc408d194b71eaf">set_limits</a> (self, low=None, high=None)</td></tr>
<tr class="separator:ac8fb55925902cdfb9cc408d194b71eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0529f3bff1408a024f919ecf3aacfaaa" id="r_a0529f3bff1408a024f919ecf3aacfaaa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0529f3bff1408a024f919ecf3aacfaaa">clear_limits</a> (self)</td></tr>
<tr class="separator:a0529f3bff1408a024f919ecf3aacfaaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaf2bd9644de948b97d436aacf0e53eb" id="r_adaf2bd9644de948b97d436aacf0e53eb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adaf2bd9644de948b97d436aacf0e53eb">is_sliced</a> (self)</td></tr>
<tr class="separator:adaf2bd9644de948b97d436aacf0e53eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8af8bd988d21f483b1fe6460334dffa" id="r_ae8af8bd988d21f483b1fe6460334dffa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae8af8bd988d21f483b1fe6460334dffa">has_limit_one</a> (self)</td></tr>
<tr class="separator:ae8af8bd988d21f483b1fe6460334dffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac25a5abd3c7f817e6e70995a5e69d3fd" id="r_ac25a5abd3c7f817e6e70995a5e69d3fd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac25a5abd3c7f817e6e70995a5e69d3fd">can_filter</a> (self)</td></tr>
<tr class="separator:ac25a5abd3c7f817e6e70995a5e69d3fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a950e1a491ab8386f4731dee744f10436" id="r_a950e1a491ab8386f4731dee744f10436"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a950e1a491ab8386f4731dee744f10436">clear_select_clause</a> (self)</td></tr>
<tr class="separator:a950e1a491ab8386f4731dee744f10436"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c5bc3f76ba82d1b2b8bf6365e559671" id="r_a8c5bc3f76ba82d1b2b8bf6365e559671"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8c5bc3f76ba82d1b2b8bf6365e559671">clear_select_fields</a> (self)</td></tr>
<tr class="separator:a8c5bc3f76ba82d1b2b8bf6365e559671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea3eca4a3feb8853a4ca35b90e18cecb" id="r_aea3eca4a3feb8853a4ca35b90e18cecb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aea3eca4a3feb8853a4ca35b90e18cecb">add_select_col</a> (self, col, name)</td></tr>
<tr class="separator:aea3eca4a3feb8853a4ca35b90e18cecb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d2fddd548bbd481c4b79032193338dc" id="r_a7d2fddd548bbd481c4b79032193338dc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7d2fddd548bbd481c4b79032193338dc">set_select</a> (self, cols)</td></tr>
<tr class="separator:a7d2fddd548bbd481c4b79032193338dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae71d0b630f0ab0649f64cb2de685ffe8" id="r_ae71d0b630f0ab0649f64cb2de685ffe8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae71d0b630f0ab0649f64cb2de685ffe8">add_distinct_fields</a> (self, *field_names)</td></tr>
<tr class="separator:ae71d0b630f0ab0649f64cb2de685ffe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86b6a93688b1029c5cc8095a6bc8b683" id="r_a86b6a93688b1029c5cc8095a6bc8b683"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a86b6a93688b1029c5cc8095a6bc8b683">add_fields</a> (self, field_names, allow_m2m=True)</td></tr>
<tr class="separator:a86b6a93688b1029c5cc8095a6bc8b683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac10cabc83bd112eb0127a34db545deda" id="r_ac10cabc83bd112eb0127a34db545deda"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac10cabc83bd112eb0127a34db545deda">add_ordering</a> (self, *ordering)</td></tr>
<tr class="separator:ac10cabc83bd112eb0127a34db545deda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33e167a322aa31ce3e5fbcd04ce935e0" id="r_a33e167a322aa31ce3e5fbcd04ce935e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a33e167a322aa31ce3e5fbcd04ce935e0">clear_ordering</a> (self, force=False, clear_default=True)</td></tr>
<tr class="separator:a33e167a322aa31ce3e5fbcd04ce935e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a214a1300785d8547a4c6dfe031528f87" id="r_a214a1300785d8547a4c6dfe031528f87"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a214a1300785d8547a4c6dfe031528f87">set_group_by</a> (self, allow_aliases=True)</td></tr>
<tr class="separator:a214a1300785d8547a4c6dfe031528f87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae10611f7b09a892599a602d9856275db" id="r_ae10611f7b09a892599a602d9856275db"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae10611f7b09a892599a602d9856275db">add_select_related</a> (self, fields)</td></tr>
<tr class="separator:ae10611f7b09a892599a602d9856275db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ecc00d3cec891eca57e4a1f82ff39a7" id="r_a7ecc00d3cec891eca57e4a1f82ff39a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ecc00d3cec891eca57e4a1f82ff39a7">add_extra</a> (self, <a class="el" href="#abf84cd6ecb7e09d95444262a0c4124be">select</a>, select_params, <a class="el" href="#a61ce6c23e38b5b3a29881b07d0749e41">where</a>, params, tables, <a class="el" href="#a322de97f7db6d4e86d06a32614b88c8f">order_by</a>)</td></tr>
<tr class="separator:a7ecc00d3cec891eca57e4a1f82ff39a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77cb957ca37fe40cf19bc0f8c981f757" id="r_a77cb957ca37fe40cf19bc0f8c981f757"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a77cb957ca37fe40cf19bc0f8c981f757">clear_deferred_loading</a> (self)</td></tr>
<tr class="separator:a77cb957ca37fe40cf19bc0f8c981f757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cc2dc707d0669a61a736d999e26bcaa" id="r_a0cc2dc707d0669a61a736d999e26bcaa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0cc2dc707d0669a61a736d999e26bcaa">add_deferred_loading</a> (self, field_names)</td></tr>
<tr class="separator:a0cc2dc707d0669a61a736d999e26bcaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cadc9ea9713a391ffb54ba2c3b48dcc" id="r_a6cadc9ea9713a391ffb54ba2c3b48dcc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6cadc9ea9713a391ffb54ba2c3b48dcc">add_immediate_loading</a> (self, field_names)</td></tr>
<tr class="separator:a6cadc9ea9713a391ffb54ba2c3b48dcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2cd1601d8661ccdc68beb23cdb6e257" id="r_af2cd1601d8661ccdc68beb23cdb6e257"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af2cd1601d8661ccdc68beb23cdb6e257">set_annotation_mask</a> (self, names)</td></tr>
<tr class="separator:af2cd1601d8661ccdc68beb23cdb6e257"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a925bdfb9c6f117855fd3d2bd706638be" id="r_a925bdfb9c6f117855fd3d2bd706638be"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a925bdfb9c6f117855fd3d2bd706638be">append_annotation_mask</a> (self, names)</td></tr>
<tr class="separator:a925bdfb9c6f117855fd3d2bd706638be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaa17319da484bcdc56a2c57a20e8d2a" id="r_acaa17319da484bcdc56a2c57a20e8d2a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acaa17319da484bcdc56a2c57a20e8d2a">set_extra_mask</a> (self, names)</td></tr>
<tr class="separator:acaa17319da484bcdc56a2c57a20e8d2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad70b069d63960564c354fb7ca834b4d5" id="r_ad70b069d63960564c354fb7ca834b4d5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad70b069d63960564c354fb7ca834b4d5">set_values</a> (self, fields)</td></tr>
<tr class="separator:ad70b069d63960564c354fb7ca834b4d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1aa29c1a1fec0a4c8e3e9de2c482498" id="r_ad1aa29c1a1fec0a4c8e3e9de2c482498"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad1aa29c1a1fec0a4c8e3e9de2c482498">annotation_select</a> (self)</td></tr>
<tr class="separator:ad1aa29c1a1fec0a4c8e3e9de2c482498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb9a51381c270566a530dd8ab40c3a53" id="r_aeb9a51381c270566a530dd8ab40c3a53"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeb9a51381c270566a530dd8ab40c3a53">extra_select</a> (self)</td></tr>
<tr class="separator:aeb9a51381c270566a530dd8ab40c3a53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85b3b84070f5f6971deff94e1b052e05" id="r_a85b3b84070f5f6971deff94e1b052e05"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a85b3b84070f5f6971deff94e1b052e05">trim_start</a> (self, names_with_path)</td></tr>
<tr class="separator:a85b3b84070f5f6971deff94e1b052e05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5731d585a0104037b777be1dec643a9" id="r_ac5731d585a0104037b777be1dec643a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac5731d585a0104037b777be1dec643a9">is_nullable</a> (self, <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a70aeb35391ada82c2e9f02b1c3ac150c">field</a>)</td></tr>
<tr class="separator:ac5731d585a0104037b777be1dec643a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html">django.db.models.expressions.BaseExpression</a></td></tr>
<tr class="memitem:a665fa256e98bd21b91c248cb7253b977 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a665fa256e98bd21b91c248cb7253b977"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a665fa256e98bd21b91c248cb7253b977">__init__</a> (self, <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a3e457c50f809a706ec6907a835a4f3eb">output_field</a>=None)</td></tr>
<tr class="separator:a665fa256e98bd21b91c248cb7253b977 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a358f5869c832ebf2aed91487204c80b3 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a358f5869c832ebf2aed91487204c80b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a358f5869c832ebf2aed91487204c80b3">__getstate__</a> (self)</td></tr>
<tr class="separator:a358f5869c832ebf2aed91487204c80b3 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0caedcc704934040e878b3682f901caf inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a0caedcc704934040e878b3682f901caf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a0caedcc704934040e878b3682f901caf">get_db_converters</a> (self, <a class="el" href="namespacedjango_1_1db.html#ae7b00a677e3c99c34670870d343c0341">connection</a>)</td></tr>
<tr class="separator:a0caedcc704934040e878b3682f901caf inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a052b2bf91363cc1367dbffb2b47708 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a1a052b2bf91363cc1367dbffb2b47708"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a1a052b2bf91363cc1367dbffb2b47708">get_source_expressions</a> (self)</td></tr>
<tr class="separator:a1a052b2bf91363cc1367dbffb2b47708 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b03add021efd331035bd626493723fb inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a1b03add021efd331035bd626493723fb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a1b03add021efd331035bd626493723fb">set_source_expressions</a> (self, exprs)</td></tr>
<tr class="separator:a1b03add021efd331035bd626493723fb inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af76d4a76e3f54db9a32b8d5ee2b87948 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_af76d4a76e3f54db9a32b8d5ee2b87948"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#af76d4a76e3f54db9a32b8d5ee2b87948">contains_aggregate</a> (self)</td></tr>
<tr class="separator:af76d4a76e3f54db9a32b8d5ee2b87948 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabc4ca4ab54ff580926e71248c5612ab inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_aabc4ca4ab54ff580926e71248c5612ab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#aabc4ca4ab54ff580926e71248c5612ab">contains_over_clause</a> (self)</td></tr>
<tr class="separator:aabc4ca4ab54ff580926e71248c5612ab inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5c4b142fefb4788abf2261a2582dfe9 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_af5c4b142fefb4788abf2261a2582dfe9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#af5c4b142fefb4788abf2261a2582dfe9">contains_column_references</a> (self)</td></tr>
<tr class="separator:af5c4b142fefb4788abf2261a2582dfe9 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a218f7301f2126ca595a0e79df4f91b12 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a218f7301f2126ca595a0e79df4f91b12"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a218f7301f2126ca595a0e79df4f91b12">contains_subquery</a> (self)</td></tr>
<tr class="separator:a218f7301f2126ca595a0e79df4f91b12 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1e7e6185d7c29f4712ad28f81804f98 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_ad1e7e6185d7c29f4712ad28f81804f98"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#ad1e7e6185d7c29f4712ad28f81804f98">conditional</a> (self)</td></tr>
<tr class="separator:ad1e7e6185d7c29f4712ad28f81804f98 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70aeb35391ada82c2e9f02b1c3ac150c inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a70aeb35391ada82c2e9f02b1c3ac150c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a70aeb35391ada82c2e9f02b1c3ac150c">field</a> (self)</td></tr>
<tr class="separator:a70aeb35391ada82c2e9f02b1c3ac150c inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af112651d4a6b22c6d82e1c1b03e917ae inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_af112651d4a6b22c6d82e1c1b03e917ae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#af112651d4a6b22c6d82e1c1b03e917ae">convert_value</a> (self)</td></tr>
<tr class="separator:af112651d4a6b22c6d82e1c1b03e917ae inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01659a233146096f1936ef43277a45e8 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a01659a233146096f1936ef43277a45e8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a01659a233146096f1936ef43277a45e8">get_lookup</a> (self, lookup)</td></tr>
<tr class="separator:a01659a233146096f1936ef43277a45e8 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf7a1a972ef131f35abe484b5da0a896 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_aaf7a1a972ef131f35abe484b5da0a896"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#aaf7a1a972ef131f35abe484b5da0a896">get_transform</a> (self, name)</td></tr>
<tr class="separator:aaf7a1a972ef131f35abe484b5da0a896 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd44563bb836ae57b2b9ebe2a58300df inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_abd44563bb836ae57b2b9ebe2a58300df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#abd44563bb836ae57b2b9ebe2a58300df">replace_expressions</a> (self, replacements)</td></tr>
<tr class="separator:abd44563bb836ae57b2b9ebe2a58300df inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2e17dbb760799635e642b44dde2ce20 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_aa2e17dbb760799635e642b44dde2ce20"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#aa2e17dbb760799635e642b44dde2ce20">get_refs</a> (self)</td></tr>
<tr class="separator:aa2e17dbb760799635e642b44dde2ce20 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeb404c3f264e4a520308bad3b41fabf inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_aeeb404c3f264e4a520308bad3b41fabf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#aeeb404c3f264e4a520308bad3b41fabf">copy</a> (self)</td></tr>
<tr class="separator:aeeb404c3f264e4a520308bad3b41fabf inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bc121f5809267eae0de9031ef27c854 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a9bc121f5809267eae0de9031ef27c854"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a9bc121f5809267eae0de9031ef27c854">prefix_references</a> (self, prefix)</td></tr>
<tr class="separator:a9bc121f5809267eae0de9031ef27c854 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12ff1384ded4ceeeb39de09b54a827aa inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a12ff1384ded4ceeeb39de09b54a827aa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a12ff1384ded4ceeeb39de09b54a827aa">get_source_fields</a> (self)</td></tr>
<tr class="separator:a12ff1384ded4ceeeb39de09b54a827aa inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17bb96813703c33ccb8d7d0d5228b745 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a17bb96813703c33ccb8d7d0d5228b745"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a17bb96813703c33ccb8d7d0d5228b745">asc</a> (self, **kwargs)</td></tr>
<tr class="separator:a17bb96813703c33ccb8d7d0d5228b745 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a590a5c8868ae6ed90b730b361a8fb779 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a590a5c8868ae6ed90b730b361a8fb779"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a590a5c8868ae6ed90b730b361a8fb779">desc</a> (self, **kwargs)</td></tr>
<tr class="separator:a590a5c8868ae6ed90b730b361a8fb779 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af77748c186f339d1e4c5f9168584867c inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_af77748c186f339d1e4c5f9168584867c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#af77748c186f339d1e4c5f9168584867c">reverse_ordering</a> (self)</td></tr>
<tr class="separator:af77748c186f339d1e4c5f9168584867c inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8493b4576a0e604f1dd483d0206430ac inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a8493b4576a0e604f1dd483d0206430ac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a8493b4576a0e604f1dd483d0206430ac">flatten</a> (self)</td></tr>
<tr class="separator:a8493b4576a0e604f1dd483d0206430ac inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf6f60770ae8079d64a95fdb608f6779 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_acf6f60770ae8079d64a95fdb608f6779"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#acf6f60770ae8079d64a95fdb608f6779">select_format</a> (self, compiler, sql, params)</td></tr>
<tr class="separator:acf6f60770ae8079d64a95fdb608f6779 inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1afc272c987ef8f51c3d5962121931e inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_aa1afc272c987ef8f51c3d5962121931e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#aa1afc272c987ef8f51c3d5962121931e">get_expression_for_validation</a> (self)</td></tr>
<tr class="separator:aa1afc272c987ef8f51c3d5962121931e inherit pub_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:afe3cd879bb006df199bfa106ac91ab5b" id="r_afe3cd879bb006df199bfa106ac91ab5b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe3cd879bb006df199bfa106ac91ab5b">model</a> = model</td></tr>
<tr class="separator:afe3cd879bb006df199bfa106ac91ab5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36bf1744c67968fa205908da7b0ccee8" id="r_a36bf1744c67968fa205908da7b0ccee8"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a36bf1744c67968fa205908da7b0ccee8">alias_refcount</a> = {}</td></tr>
<tr class="separator:a36bf1744c67968fa205908da7b0ccee8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fee166f7b9e7b4a91116540327c70ce" id="r_a4fee166f7b9e7b4a91116540327c70ce"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4fee166f7b9e7b4a91116540327c70ce">alias_map</a> = {}</td></tr>
<tr class="separator:a4fee166f7b9e7b4a91116540327c70ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51482dc46beb2bbd7625496ef1066f04" id="r_a51482dc46beb2bbd7625496ef1066f04"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a51482dc46beb2bbd7625496ef1066f04">alias_cols</a> = alias_cols</td></tr>
<tr class="separator:a51482dc46beb2bbd7625496ef1066f04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f77bef488266b281a583836603fa22a" id="r_a3f77bef488266b281a583836603fa22a"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3f77bef488266b281a583836603fa22a">external_aliases</a> = {}</td></tr>
<tr class="separator:a3f77bef488266b281a583836603fa22a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c307c2d6f4f862f1c83b4754440bf7a" id="r_a5c307c2d6f4f862f1c83b4754440bf7a"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c307c2d6f4f862f1c83b4754440bf7a">table_map</a> = {}</td></tr>
<tr class="separator:a5c307c2d6f4f862f1c83b4754440bf7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd0d115bb9dab5d4128ce1e852041a40" id="r_acd0d115bb9dab5d4128ce1e852041a40"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acd0d115bb9dab5d4128ce1e852041a40">used_aliases</a> = set()</td></tr>
<tr class="separator:acd0d115bb9dab5d4128ce1e852041a40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61ce6c23e38b5b3a29881b07d0749e41" id="r_a61ce6c23e38b5b3a29881b07d0749e41"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a61ce6c23e38b5b3a29881b07d0749e41">where</a> = <a class="el" href="classdjango_1_1db_1_1models_1_1sql_1_1where_1_1_where_node.html">WhereNode</a>()</td></tr>
<tr class="separator:a61ce6c23e38b5b3a29881b07d0749e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a540833da77eeaa0e17c348fb7ee88cc6" id="r_a540833da77eeaa0e17c348fb7ee88cc6"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a540833da77eeaa0e17c348fb7ee88cc6">annotations</a> = {}</td></tr>
<tr class="separator:a540833da77eeaa0e17c348fb7ee88cc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb8e75beed17296911d2bd2f3527abd2" id="r_afb8e75beed17296911d2bd2f3527abd2"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afb8e75beed17296911d2bd2f3527abd2">extra</a> = {}</td></tr>
<tr class="separator:afb8e75beed17296911d2bd2f3527abd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae51f377d771b9e9d9413946161766341" id="r_ae51f377d771b9e9d9413946161766341"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae51f377d771b9e9d9413946161766341">annotation_select</a> = self.select[0]</td></tr>
<tr class="separator:ae51f377d771b9e9d9413946161766341"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a832f925cbcf8ff8d9a1b96cea9f0e178" id="r_a832f925cbcf8ff8d9a1b96cea9f0e178"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a832f925cbcf8ff8d9a1b96cea9f0e178">is_sliced</a></td></tr>
<tr class="separator:a832f925cbcf8ff8d9a1b96cea9f0e178"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a029ecc9441ae80bb55a6426d5327fe54" id="r_a029ecc9441ae80bb55a6426d5327fe54"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a029ecc9441ae80bb55a6426d5327fe54">extra_select</a> = False</td></tr>
<tr class="separator:a029ecc9441ae80bb55a6426d5327fe54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html">django.db.models.expressions.BaseExpression</a></td></tr>
<tr class="memitem:abd2c19adcca60b88a536d9e204f672ba inherit pub_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_abd2c19adcca60b88a536d9e204f672ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#abd2c19adcca60b88a536d9e204f672ba">contains_aggregate</a></td></tr>
<tr class="separator:abd2c19adcca60b88a536d9e204f672ba inherit pub_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:aca779ebc72b6daac944930a313a89547" id="r_aca779ebc72b6daac944930a313a89547"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aca779ebc72b6daac944930a313a89547">alias_prefix</a> = &quot;T&quot;</td></tr>
<tr class="separator:aca779ebc72b6daac944930a313a89547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a734ea03198093d5c518dc44cfd08420f" id="r_a734ea03198093d5c518dc44cfd08420f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a734ea03198093d5c518dc44cfd08420f">subq_aliases</a> = frozenset([<a class="el" href="#aca779ebc72b6daac944930a313a89547">alias_prefix</a>])</td></tr>
<tr class="separator:a734ea03198093d5c518dc44cfd08420f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20fe8b05b7844f635809b0783d055b9b" id="r_a20fe8b05b7844f635809b0783d055b9b"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a20fe8b05b7844f635809b0783d055b9b">compiler</a> = &quot;SQLCompiler&quot;</td></tr>
<tr class="separator:a20fe8b05b7844f635809b0783d055b9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49ab2c4a9bafd36fb235ba31fa2e1aa3" id="r_a49ab2c4a9bafd36fb235ba31fa2e1aa3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a49ab2c4a9bafd36fb235ba31fa2e1aa3">base_table_class</a> = <a class="el" href="classdjango_1_1db_1_1models_1_1sql_1_1datastructures_1_1_base_table.html">BaseTable</a></td></tr>
<tr class="separator:a49ab2c4a9bafd36fb235ba31fa2e1aa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeedcad3ccc6661f168f048a1079c723f" id="r_aeedcad3ccc6661f168f048a1079c723f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeedcad3ccc6661f168f048a1079c723f">join_class</a> = <a class="el" href="classdjango_1_1db_1_1models_1_1sql_1_1datastructures_1_1_join.html">Join</a></td></tr>
<tr class="separator:aeedcad3ccc6661f168f048a1079c723f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44217d4e96f4e4e04826e4f5bf1b2a0a" id="r_a44217d4e96f4e4e04826e4f5bf1b2a0a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a44217d4e96f4e4e04826e4f5bf1b2a0a">default_cols</a> = True</td></tr>
<tr class="separator:a44217d4e96f4e4e04826e4f5bf1b2a0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a719ad74d2319999f9dab67226e1359f9" id="r_a719ad74d2319999f9dab67226e1359f9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a719ad74d2319999f9dab67226e1359f9">default_ordering</a> = True</td></tr>
<tr class="separator:a719ad74d2319999f9dab67226e1359f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8a05399fb8d487318593ba6f2c91f89" id="r_ac8a05399fb8d487318593ba6f2c91f89"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac8a05399fb8d487318593ba6f2c91f89">standard_ordering</a> = True</td></tr>
<tr class="separator:ac8a05399fb8d487318593ba6f2c91f89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51270a248a229a471ae75e0b64e7dc74" id="r_a51270a248a229a471ae75e0b64e7dc74"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a51270a248a229a471ae75e0b64e7dc74">filter_is_sticky</a> = False</td></tr>
<tr class="separator:a51270a248a229a471ae75e0b64e7dc74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16969a0fc24fe280b776e147dcee87d5" id="r_a16969a0fc24fe280b776e147dcee87d5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a16969a0fc24fe280b776e147dcee87d5">subquery</a> = False</td></tr>
<tr class="separator:a16969a0fc24fe280b776e147dcee87d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf84cd6ecb7e09d95444262a0c4124be" id="r_abf84cd6ecb7e09d95444262a0c4124be"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abf84cd6ecb7e09d95444262a0c4124be">select</a> = ()</td></tr>
<tr class="separator:abf84cd6ecb7e09d95444262a0c4124be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60c6927c2071dd36a8b389fc7a1ebfba" id="r_a60c6927c2071dd36a8b389fc7a1ebfba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a60c6927c2071dd36a8b389fc7a1ebfba">group_by</a> = None</td></tr>
<tr class="separator:a60c6927c2071dd36a8b389fc7a1ebfba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a322de97f7db6d4e86d06a32614b88c8f" id="r_a322de97f7db6d4e86d06a32614b88c8f"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a322de97f7db6d4e86d06a32614b88c8f">order_by</a> = ()</td></tr>
<tr class="separator:a322de97f7db6d4e86d06a32614b88c8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a590e8716652d873ab8b9ce0bda90d076" id="r_a590e8716652d873ab8b9ce0bda90d076"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a590e8716652d873ab8b9ce0bda90d076">low_mark</a> = 0</td></tr>
<tr class="separator:a590e8716652d873ab8b9ce0bda90d076"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56cbad4ce2b16cb89fc322d4ea8a2191" id="r_a56cbad4ce2b16cb89fc322d4ea8a2191"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a56cbad4ce2b16cb89fc322d4ea8a2191">high_mark</a> = None</td></tr>
<tr class="separator:a56cbad4ce2b16cb89fc322d4ea8a2191"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53617ca29165adda1d0217fdbec0914c" id="r_a53617ca29165adda1d0217fdbec0914c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a53617ca29165adda1d0217fdbec0914c">distinct</a> = False</td></tr>
<tr class="separator:a53617ca29165adda1d0217fdbec0914c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6d27aabab911740f590a7dbb369fc81" id="r_ae6d27aabab911740f590a7dbb369fc81"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae6d27aabab911740f590a7dbb369fc81">distinct_fields</a> = ()</td></tr>
<tr class="separator:ae6d27aabab911740f590a7dbb369fc81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addc823ef4848c23122ee8b141ada4aa5" id="r_addc823ef4848c23122ee8b141ada4aa5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#addc823ef4848c23122ee8b141ada4aa5">select_for_update</a> = False</td></tr>
<tr class="separator:addc823ef4848c23122ee8b141ada4aa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83a08044c6f1c8c0204cf7c6883fa867" id="r_a83a08044c6f1c8c0204cf7c6883fa867"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a83a08044c6f1c8c0204cf7c6883fa867">select_for_update_nowait</a> = False</td></tr>
<tr class="separator:a83a08044c6f1c8c0204cf7c6883fa867"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6018c0a7f7235502b37b5fb834cfdd01" id="r_a6018c0a7f7235502b37b5fb834cfdd01"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6018c0a7f7235502b37b5fb834cfdd01">select_for_update_skip_locked</a> = False</td></tr>
<tr class="separator:a6018c0a7f7235502b37b5fb834cfdd01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72b7cb58f22a3a942072c6188108ef15" id="r_a72b7cb58f22a3a942072c6188108ef15"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a72b7cb58f22a3a942072c6188108ef15">select_for_update_of</a> = ()</td></tr>
<tr class="separator:a72b7cb58f22a3a942072c6188108ef15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa20acd1da9e6d3785e4c9e670329b60d" id="r_aa20acd1da9e6d3785e4c9e670329b60d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa20acd1da9e6d3785e4c9e670329b60d">select_for_no_key_update</a> = False</td></tr>
<tr class="separator:aa20acd1da9e6d3785e4c9e670329b60d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad55728f4213693d1375da23c57f7ab3c" id="r_ad55728f4213693d1375da23c57f7ab3c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad55728f4213693d1375da23c57f7ab3c">select_related</a> = False</td></tr>
<tr class="separator:ad55728f4213693d1375da23c57f7ab3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4732e2a5cd4d70ce895a18a991ec72a4" id="r_a4732e2a5cd4d70ce895a18a991ec72a4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4732e2a5cd4d70ce895a18a991ec72a4">has_select_fields</a> = False</td></tr>
<tr class="separator:a4732e2a5cd4d70ce895a18a991ec72a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e1615e5e13beff6edb2e9655492054a" id="r_a4e1615e5e13beff6edb2e9655492054a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4e1615e5e13beff6edb2e9655492054a">max_depth</a> = 5</td></tr>
<tr class="separator:a4e1615e5e13beff6edb2e9655492054a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ef851bd59b5af5ca57a6f38cafdd20b" id="r_a2ef851bd59b5af5ca57a6f38cafdd20b"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2ef851bd59b5af5ca57a6f38cafdd20b">values_select</a> = ()</td></tr>
<tr class="separator:a2ef851bd59b5af5ca57a6f38cafdd20b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefd03905e21d553fa91f433a0baeeedf" id="r_aefd03905e21d553fa91f433a0baeeedf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aefd03905e21d553fa91f433a0baeeedf">annotation_select_mask</a> = None</td></tr>
<tr class="separator:aefd03905e21d553fa91f433a0baeeedf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6e3044a2c90ceee84fe46a5d942e222" id="r_ae6e3044a2c90ceee84fe46a5d942e222"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae6e3044a2c90ceee84fe46a5d942e222">combinator</a> = None</td></tr>
<tr class="separator:ae6e3044a2c90ceee84fe46a5d942e222"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeacc7b7a086649f39bed65fd19521ba9" id="r_aeacc7b7a086649f39bed65fd19521ba9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeacc7b7a086649f39bed65fd19521ba9">combinator_all</a> = False</td></tr>
<tr class="separator:aeacc7b7a086649f39bed65fd19521ba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ae069349b43401d60d1a1175c34d0c1" id="r_a0ae069349b43401d60d1a1175c34d0c1"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0ae069349b43401d60d1a1175c34d0c1">combined_queries</a> = ()</td></tr>
<tr class="separator:a0ae069349b43401d60d1a1175c34d0c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd8cfcc3426d3cb571d7c58ebbe566b7" id="r_abd8cfcc3426d3cb571d7c58ebbe566b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abd8cfcc3426d3cb571d7c58ebbe566b7">extra_select_mask</a> = None</td></tr>
<tr class="separator:abd8cfcc3426d3cb571d7c58ebbe566b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e38896e3acf48515cf05188387a0e8d" id="r_a7e38896e3acf48515cf05188387a0e8d"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7e38896e3acf48515cf05188387a0e8d">extra_tables</a> = ()</td></tr>
<tr class="separator:a7e38896e3acf48515cf05188387a0e8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa6ad3ee9cbff0a6b53f92d84436d555" id="r_aaa6ad3ee9cbff0a6b53f92d84436d555"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa6ad3ee9cbff0a6b53f92d84436d555">extra_order_by</a> = ()</td></tr>
<tr class="separator:aaa6ad3ee9cbff0a6b53f92d84436d555"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4f0d1a6d835daed62e4887f1029410c" id="r_ab4f0d1a6d835daed62e4887f1029410c"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab4f0d1a6d835daed62e4887f1029410c">deferred_loading</a> = (frozenset(), True)</td></tr>
<tr class="separator:ab4f0d1a6d835daed62e4887f1029410c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ca225efde2eff971d05cbabb8c329bb" id="r_a9ca225efde2eff971d05cbabb8c329bb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9ca225efde2eff971d05cbabb8c329bb">explain_info</a> = None</td></tr>
<tr class="separator:a9ca225efde2eff971d05cbabb8c329bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html">django.db.models.expressions.BaseExpression</a></td></tr>
<tr class="memitem:afd11cb40b1b99538c712a37f5bd3c67b inherit pub_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_afd11cb40b1b99538c712a37f5bd3c67b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#afd11cb40b1b99538c712a37f5bd3c67b">empty_result_set_value</a> = NotImplemented</td></tr>
<tr class="separator:afd11cb40b1b99538c712a37f5bd3c67b inherit pub_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af47ea212333b44492d4dacc00fdea5ea inherit pub_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_af47ea212333b44492d4dacc00fdea5ea"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#af47ea212333b44492d4dacc00fdea5ea">is_summary</a> = False</td></tr>
<tr class="separator:af47ea212333b44492d4dacc00fdea5ea inherit pub_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6d8f78a0bff6d7239b37d44f0888c11 inherit pub_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_ad6d8f78a0bff6d7239b37d44f0888c11"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#ad6d8f78a0bff6d7239b37d44f0888c11">filterable</a> = True</td></tr>
<tr class="separator:ad6d8f78a0bff6d7239b37d44f0888c11 inherit pub_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a293cbefa1cbf5e2a0019e658dafb9379 inherit pub_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a293cbefa1cbf5e2a0019e658dafb9379"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a293cbefa1cbf5e2a0019e658dafb9379">window_compatible</a> = False</td></tr>
<tr class="separator:a293cbefa1cbf5e2a0019e658dafb9379 inherit pub_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c328d298031143a4d985fc96b05bb7e inherit pub_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a0c328d298031143a4d985fc96b05bb7e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a0c328d298031143a4d985fc96b05bb7e">allowed_default</a> = False</td></tr>
<tr class="separator:a0c328d298031143a4d985fc96b05bb7e inherit pub_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae15494f9fb904c082ab8d412d5a4c3c1 inherit pub_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_ae15494f9fb904c082ab8d412d5a4c3c1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#ae15494f9fb904c082ab8d412d5a4c3c1">constraint_validation_compatible</a> = True</td></tr>
<tr class="separator:ae15494f9fb904c082ab8d412d5a4c3c1 inherit pub_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a3dcc4bcce2f0c9bbeac67ab1542c5a8b" id="r_a3dcc4bcce2f0c9bbeac67ab1542c5a8b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3dcc4bcce2f0c9bbeac67ab1542c5a8b">_get_col</a> (self, target, <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a70aeb35391ada82c2e9f02b1c3ac150c">field</a>, alias)</td></tr>
<tr class="separator:a3dcc4bcce2f0c9bbeac67ab1542c5a8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe9bc60be41158b2b510e592ccc1e22b" id="r_abe9bc60be41158b2b510e592ccc1e22b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abe9bc60be41158b2b510e592ccc1e22b">_get_defer_select_mask</a> (self, opts, mask, select_mask=None)</td></tr>
<tr class="separator:abe9bc60be41158b2b510e592ccc1e22b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aead5cdc0d9b363fd14b31866af05f1b7" id="r_aead5cdc0d9b363fd14b31866af05f1b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aead5cdc0d9b363fd14b31866af05f1b7">_get_only_select_mask</a> (self, opts, mask, select_mask=None)</td></tr>
<tr class="separator:aead5cdc0d9b363fd14b31866af05f1b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acba7359355d8a1af947713e9b7c495cd" id="r_acba7359355d8a1af947713e9b7c495cd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acba7359355d8a1af947713e9b7c495cd">_add_q</a> (self, q_object, <a class="el" href="#acd0d115bb9dab5d4128ce1e852041a40">used_aliases</a>, branch_negated=False, current_negated=False, allow_joins=True, split_subq=True, <a class="el" href="#ab86586438d12b2713c8aacfd15a129f9">check_filterable</a>=True, summarize=False, update_join_types=True)</td></tr>
<tr class="separator:acba7359355d8a1af947713e9b7c495cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a919a087a504aedad852388366020a2dc" id="r_a919a087a504aedad852388366020a2dc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a919a087a504aedad852388366020a2dc">_gen_cols</a> (cls, exprs, include_external=False, resolve_refs=True)</td></tr>
<tr class="separator:a919a087a504aedad852388366020a2dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dda13314034b35d8d5f11d42f927ca1" id="r_a4dda13314034b35d8d5f11d42f927ca1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4dda13314034b35d8d5f11d42f927ca1">_gen_col_aliases</a> (cls, exprs)</td></tr>
<tr class="separator:a4dda13314034b35d8d5f11d42f927ca1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pro_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html">django.db.models.expressions.BaseExpression</a></td></tr>
<tr class="memitem:a7b511e7a329578305fe40fb917e1de65 inherit pro_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a7b511e7a329578305fe40fb917e1de65"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a7b511e7a329578305fe40fb917e1de65">_parse_expressions</a> (self, *expressions)</td></tr>
<tr class="separator:a7b511e7a329578305fe40fb917e1de65 inherit pro_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad676f45033740e5caa723ce399f8850 inherit pro_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_aad676f45033740e5caa723ce399f8850"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#aad676f45033740e5caa723ce399f8850">_output_field_or_none</a> (self)</td></tr>
<tr class="separator:aad676f45033740e5caa723ce399f8850 inherit pro_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d77b67d8a2c12f240cfa67a218742d9 inherit pro_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_a4d77b67d8a2c12f240cfa67a218742d9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a4d77b67d8a2c12f240cfa67a218742d9">_resolve_output_field</a> (self)</td></tr>
<tr class="separator:a4d77b67d8a2c12f240cfa67a218742d9 inherit pro_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:af9e21be9a34753fd1055332963018286" id="r_af9e21be9a34753fd1055332963018286"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af9e21be9a34753fd1055332963018286">_filtered_relations</a> = {}</td></tr>
<tr class="separator:af9e21be9a34753fd1055332963018286"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab17237edffa475c883b5d9db2310190" id="r_aab17237edffa475c883b5d9db2310190"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aab17237edffa475c883b5d9db2310190">_lookup_joins</a> = join_info.joins</td></tr>
<tr class="separator:aab17237edffa475c883b5d9db2310190"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:ac6fb45226be27ca512ed1b046b50c6b3" id="r_ac6fb45226be27ca512ed1b046b50c6b3"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac6fb45226be27ca512ed1b046b50c6b3">_annotation_select_cache</a> = None</td></tr>
<tr class="separator:ac6fb45226be27ca512ed1b046b50c6b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11fb1d080143b80b0428bb0b70553bd2" id="r_a11fb1d080143b80b0428bb0b70553bd2"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a11fb1d080143b80b0428bb0b70553bd2">_extra_select_cache</a> = None</td></tr>
<tr class="separator:a11fb1d080143b80b0428bb0b70553bd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pro_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression')"><img src="closed.png" alt="-"/>&#160;Static Protected Attributes inherited from <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html">django.db.models.expressions.BaseExpression</a></td></tr>
<tr class="memitem:ae020f8b51c6a7797606c1745b81a5cd2 inherit pro_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_ae020f8b51c6a7797606c1745b81a5cd2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#ae020f8b51c6a7797606c1745b81a5cd2">_output_field_resolved_to_none</a> = False</td></tr>
<tr class="separator:ae020f8b51c6a7797606c1745b81a5cd2 inherit pro_static_attribs_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_static_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pro_static_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression')"><img src="closed.png" alt="-"/>&#160;Static Protected Member Functions inherited from <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html">django.db.models.expressions.BaseExpression</a></td></tr>
<tr class="memitem:ab5ceb6e73f3fb7c1af5eff8178e89497 inherit pro_static_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression" id="r_ab5ceb6e73f3fb7c1af5eff8178e89497"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#ab5ceb6e73f3fb7c1af5eff8178e89497">_convert_value_noop</a> (value, expression, <a class="el" href="namespacedjango_1_1db.html#ae7b00a677e3c99c34670870d343c0341">connection</a>)</td></tr>
<tr class="separator:ab5ceb6e73f3fb7c1af5eff8178e89497 inherit pro_static_methods_classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">A single SQL query.</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00219">219</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad43bcf15b5f2c7fb290d8b3a7d92b14c" name="ad43bcf15b5f2c7fb290d8b3a7d92b14c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad43bcf15b5f2c7fb290d8b3a7d92b14c">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.__init__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>model</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>alias_cols</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00292">292</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  292</span>    <span class="keyword">def </span>__init__(self, model, alias_cols=True):</div>
<div class="line"><span class="lineno">  293</span>        self.model = model</div>
<div class="line"><span class="lineno">  294</span>        self.alias_refcount = {}</div>
<div class="line"><span class="lineno">  295</span>        <span class="comment"># alias_map is the most important data structure regarding joins.</span></div>
<div class="line"><span class="lineno">  296</span>        <span class="comment"># It&#39;s used for recording which joins exist in the query and what</span></div>
<div class="line"><span class="lineno">  297</span>        <span class="comment"># types they are. The key is the alias of the joined table (possibly</span></div>
<div class="line"><span class="lineno">  298</span>        <span class="comment"># the table name) and the value is a Join-like object (see</span></div>
<div class="line"><span class="lineno">  299</span>        <span class="comment"># sql.datastructures.Join for more information).</span></div>
<div class="line"><span class="lineno">  300</span>        self.alias_map = {}</div>
<div class="line"><span class="lineno">  301</span>        <span class="comment"># Whether to provide alias to columns during reference resolving.</span></div>
<div class="line"><span class="lineno">  302</span>        self.alias_cols = alias_cols</div>
<div class="line"><span class="lineno">  303</span>        <span class="comment"># Sometimes the query contains references to aliases in outer queries (as</span></div>
<div class="line"><span class="lineno">  304</span>        <span class="comment"># a result of split_exclude). Correct alias quoting needs to know these</span></div>
<div class="line"><span class="lineno">  305</span>        <span class="comment"># aliases too.</span></div>
<div class="line"><span class="lineno">  306</span>        <span class="comment"># Map external tables to whether they are aliased.</span></div>
<div class="line"><span class="lineno">  307</span>        self.external_aliases = {}</div>
<div class="line"><span class="lineno">  308</span>        self.table_map = {}  <span class="comment"># Maps table names to list of aliases.</span></div>
<div class="line"><span class="lineno">  309</span>        self.used_aliases = set()</div>
<div class="line"><span class="lineno">  310</span> </div>
<div class="line"><span class="lineno">  311</span>        self.where = WhereNode()</div>
<div class="line"><span class="lineno">  312</span>        <span class="comment"># Maps alias -&gt; Annotation Expression.</span></div>
<div class="line"><span class="lineno">  313</span>        self.annotations = {}</div>
<div class="line"><span class="lineno">  314</span>        <span class="comment"># These are for extensions. The contents are more or less appended</span></div>
<div class="line"><span class="lineno">  315</span>        <span class="comment"># verbatim to the appropriate clause.</span></div>
<div class="line"><span class="lineno">  316</span>        self.extra = {}  <span class="comment"># Maps col_alias -&gt; (col_sql, params).</span></div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>        self._filtered_relations = {}</div>
<div class="line"><span class="lineno">  319</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="typing__extensions_8py_source.html#l02793">pip._vendor.typing_extensions.deprecated.__call__()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a03b0d1ca81a588c179694300577a5dde" name="a03b0d1ca81a588c179694300577a5dde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03b0d1ca81a588c179694300577a5dde">&#9670;&#160;</a></span>__deepcopy__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.__deepcopy__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>memo</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Limit the amount of work when a Query is deepcopied.</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00351">351</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  351</span>    <span class="keyword">def </span>__deepcopy__(self, memo):</div>
<div class="line"><span class="lineno">  352</span>        <span class="stringliteral">&quot;&quot;&quot;Limit the amount of work when a Query is deepcopied.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  353</span>        result = self.clone()</div>
<div class="line"><span class="lineno">  354</span>        memo[id(self)] = result</div>
<div class="line"><span class="lineno">  355</span>        <span class="keywordflow">return</span> result</div>
<div class="line"><span class="lineno">  356</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="astroid_2context_8py_source.html#l00122">astroid.context.InferenceContext.clone()</a>, <a class="el" href="geometries_8py_source.html#l00433">django.contrib.gis.gdal.geometries.OGRGeometry.clone()</a>, <a class="el" href="django_2contrib_2gis_2gdal_2raster_2source_8py_source.html#l00461">django.contrib.gis.gdal.raster.source.GDALRaster.clone()</a>, <a class="el" href="gdal_2srs_8py_source.html#l00168">django.contrib.gis.gdal.srs.SpatialReference.clone()</a>, <a class="el" href="coordseq_8py_source.html#l00176">django.contrib.gis.geos.coordseq.GEOSCoordSeq.clone()</a>, <a class="el" href="geos_2geometry_8py_source.html#l00674">django.contrib.gis.geos.geometry.GEOSGeometryBase.clone()</a>, <a class="el" href="state_8py_source.html#l00920">django.db.migrations.state.ModelState.clone()</a>, <a class="el" href="state_8py_source.html#l00548">django.db.migrations.state.ProjectState.clone()</a>, <a class="el" href="state_8py_source.html#l00678">django.db.migrations.state.StateApps.clone()</a>, <a class="el" href="db_2models_2constraints_8py_source.html#l00131">django.db.models.constraints.BaseConstraint.clone()</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00661">django.db.models.fields.Field.clone()</a>, <a class="el" href="db_2models_2indexes_8py_source.html#l00153">django.db.models.indexes.Index.clone()</a>, <a class="el" href="query__utils_8py_source.html#l00461">django.db.models.query_utils.FilteredRelation.clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, and <a class="el" href="sql_2query_8py_source.html#l00161">django.db.models.sql.query.RawQuery.clone()</a>.</p>

<p class="reference">Referenced by <a class="el" href="django_2http_2request_8py_source.html#l00618">django.http.request.QueryDict.copy()</a>.</p>

</div>
</div>
<a id="a756c5c55f479e175118d8da3423b78e2" name="a756c5c55f479e175118d8da3423b78e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a756c5c55f479e175118d8da3423b78e2">&#9670;&#160;</a></span>__str__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.__str__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return the query as a string of SQL with the parameter values
substituted in (use sql_with_params() to see the unsubstituted string).

Parameter values won't necessarily be quoted correctly, since that is
done by the database interface at execution time.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00333">333</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  333</span>    <span class="keyword">def </span>__str__(self):</div>
<div class="line"><span class="lineno">  334</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  335</span><span class="stringliteral">        Return the query as a string of SQL with the parameter values</span></div>
<div class="line"><span class="lineno">  336</span><span class="stringliteral">        substituted in (use sql_with_params() to see the unsubstituted string).</span></div>
<div class="line"><span class="lineno">  337</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  338</span><span class="stringliteral">        Parameter values won&#39;t necessarily be quoted correctly, since that is</span></div>
<div class="line"><span class="lineno">  339</span><span class="stringliteral">        done by the database interface at execution time.</span></div>
<div class="line"><span class="lineno">  340</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  341</span>        sql, params = self.sql_with_params()</div>
<div class="line"><span class="lineno">  342</span>        <span class="keywordflow">return</span> sql % params</div>
<div class="line"><span class="lineno">  343</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00344">sql_with_params()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_pdf_parser_8py_source.html#l00093">PIL.PdfParser.IndirectReference.__bytes__()</a>.</p>

</div>
</div>
<a id="acba7359355d8a1af947713e9b7c495cd" name="acba7359355d8a1af947713e9b7c495cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acba7359355d8a1af947713e9b7c495cd">&#9670;&#160;</a></span>_add_q()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query._add_q </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>q_object</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>used_aliases</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>branch_negated</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>current_negated</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>allow_joins</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>split_subq</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>check_filterable</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>summarize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>update_join_types</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Add a Q-object to the current filter.</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01620">1620</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1631</span>    ):</div>
<div class="line"><span class="lineno"> 1632</span>        <span class="stringliteral">&quot;&quot;&quot;Add a Q-object to the current filter.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1633</span>        connector = q_object.connector</div>
<div class="line"><span class="lineno"> 1634</span>        current_negated ^= q_object.negated</div>
<div class="line"><span class="lineno"> 1635</span>        branch_negated = branch_negated <span class="keywordflow">or</span> q_object.negated</div>
<div class="line"><span class="lineno"> 1636</span>        target_clause = WhereNode(connector=connector, negated=q_object.negated)</div>
<div class="line"><span class="lineno"> 1637</span>        joinpromoter = JoinPromoter(</div>
<div class="line"><span class="lineno"> 1638</span>            q_object.connector, len(q_object.children), current_negated</div>
<div class="line"><span class="lineno"> 1639</span>        )</div>
<div class="line"><span class="lineno"> 1640</span>        <span class="keywordflow">for</span> child <span class="keywordflow">in</span> q_object.children:</div>
<div class="line"><span class="lineno"> 1641</span>            child_clause, needed_inner = self.build_filter(</div>
<div class="line"><span class="lineno"> 1642</span>                child,</div>
<div class="line"><span class="lineno"> 1643</span>                can_reuse=used_aliases,</div>
<div class="line"><span class="lineno"> 1644</span>                branch_negated=branch_negated,</div>
<div class="line"><span class="lineno"> 1645</span>                current_negated=current_negated,</div>
<div class="line"><span class="lineno"> 1646</span>                allow_joins=allow_joins,</div>
<div class="line"><span class="lineno"> 1647</span>                split_subq=split_subq,</div>
<div class="line"><span class="lineno"> 1648</span>                check_filterable=check_filterable,</div>
<div class="line"><span class="lineno"> 1649</span>                summarize=summarize,</div>
<div class="line"><span class="lineno"> 1650</span>                update_join_types=update_join_types,</div>
<div class="line"><span class="lineno"> 1651</span>            )</div>
<div class="line"><span class="lineno"> 1652</span>            joinpromoter.add_votes(needed_inner)</div>
<div class="line"><span class="lineno"> 1653</span>            <span class="keywordflow">if</span> child_clause:</div>
<div class="line"><span class="lineno"> 1654</span>                target_clause.add(child_clause, connector)</div>
<div class="line"><span class="lineno"> 1655</span>        <span class="keywordflow">if</span> update_join_types:</div>
<div class="line"><span class="lineno"> 1656</span>            needed_inner = joinpromoter.update_join_types(self)</div>
<div class="line"><span class="lineno"> 1657</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1658</span>            needed_inner = []</div>
<div class="line"><span class="lineno"> 1659</span>        <span class="keywordflow">return</span> target_clause, needed_inner</div>
<div class="line"><span class="lineno"> 1660</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01439">build_filter()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01595">add_q()</a>, and <a class="el" href="sql_2query_8py_source.html#l01439">build_filter()</a>.</p>

</div>
</div>
<a id="a4dda13314034b35d8d5f11d42f927ca1" name="a4dda13314034b35d8d5f11d42f927ca1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dda13314034b35d8d5f11d42f927ca1">&#9670;&#160;</a></span>_gen_col_aliases()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query._gen_col_aliases </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cls</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>exprs</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01978">1978</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1978</span>    <span class="keyword">def </span>_gen_col_aliases(cls, exprs):</div>
<div class="line"><span class="lineno"> 1979</span>        <span class="keywordflow">yield</span> <span class="keyword">from</span> (expr.alias <span class="keywordflow">for</span> expr <span class="keywordflow">in</span> cls._gen_cols(exprs))</div>
<div class="line"><span class="lineno"> 1980</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01960">_gen_cols()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01981">resolve_ref()</a>.</p>

</div>
</div>
<a id="a919a087a504aedad852388366020a2dc" name="a919a087a504aedad852388366020a2dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a919a087a504aedad852388366020a2dc">&#9670;&#160;</a></span>_gen_cols()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query._gen_cols </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cls</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>exprs</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>include_external</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>resolve_refs</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01960">1960</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1960</span>    <span class="keyword">def </span>_gen_cols(cls, exprs, include_external=False, resolve_refs=True):</div>
<div class="line"><span class="lineno"> 1961</span>        <span class="keywordflow">for</span> expr <span class="keywordflow">in</span> exprs:</div>
<div class="line"><span class="lineno"> 1962</span>            <span class="keywordflow">if</span> isinstance(expr, Col):</div>
<div class="line"><span class="lineno"> 1963</span>                <span class="keywordflow">yield</span> expr</div>
<div class="line"><span class="lineno"> 1964</span>            <span class="keywordflow">elif</span> include_external <span class="keywordflow">and</span> callable(</div>
<div class="line"><span class="lineno"> 1965</span>                getattr(expr, <span class="stringliteral">&quot;get_external_cols&quot;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 1966</span>            ):</div>
<div class="line"><span class="lineno"> 1967</span>                <span class="keywordflow">yield</span> <span class="keyword">from</span> expr.get_external_cols()</div>
<div class="line"><span class="lineno"> 1968</span>            <span class="keywordflow">elif</span> hasattr(expr, <span class="stringliteral">&quot;get_source_expressions&quot;</span>):</div>
<div class="line"><span class="lineno"> 1969</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> resolve_refs <span class="keywordflow">and</span> isinstance(expr, Ref):</div>
<div class="line"><span class="lineno"> 1970</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 1971</span>                <span class="keywordflow">yield</span> <span class="keyword">from</span> cls._gen_cols(</div>
<div class="line"><span class="lineno"> 1972</span>                    expr.get_source_expressions(),</div>
<div class="line"><span class="lineno"> 1973</span>                    include_external=include_external,</div>
<div class="line"><span class="lineno"> 1974</span>                    resolve_refs=resolve_refs,</div>
<div class="line"><span class="lineno"> 1975</span>                )</div>
<div class="line"><span class="lineno"> 1976</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01960">_gen_cols()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01978">_gen_col_aliases()</a>, <a class="el" href="sql_2query_8py_source.html#l01960">_gen_cols()</a>, <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>, and <a class="el" href="sql_2query_8py_source.html#l01235">get_external_cols()</a>.</p>

</div>
</div>
<a id="a3dcc4bcce2f0c9bbeac67ab1542c5a8b" name="a3dcc4bcce2f0c9bbeac67ab1542c5a8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dcc4bcce2f0c9bbeac67ab1542c5a8b">&#9670;&#160;</a></span>_get_col()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query._get_col </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>target</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>field</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>alias</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00440">440</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  440</span>    <span class="keyword">def </span>_get_col(self, target, field, alias):</div>
<div class="line"><span class="lineno">  441</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.alias_cols:</div>
<div class="line"><span class="lineno">  442</span>            alias = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  443</span>        <span class="keywordflow">return</span> target.get_col(alias, field)</div>
<div class="line"><span class="lineno">  444</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00302">alias_cols</a>.</p>

</div>
</div>
<a id="abe9bc60be41158b2b510e592ccc1e22b" name="abe9bc60be41158b2b510e592ccc1e22b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe9bc60be41158b2b510e592ccc1e22b">&#9670;&#160;</a></span>_get_defer_select_mask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query._get_defer_select_mask </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>opts</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>mask</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>select_mask</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00790">790</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  790</span>    <span class="keyword">def </span>_get_defer_select_mask(self, opts, mask, select_mask=None):</div>
<div class="line"><span class="lineno">  791</span>        <span class="keywordflow">if</span> select_mask <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  792</span>            select_mask = {}</div>
<div class="line"><span class="lineno">  793</span>        select_mask[opts.pk] = {}</div>
<div class="line"><span class="lineno">  794</span>        <span class="comment"># All concrete fields and related objects that are not part of the</span></div>
<div class="line"><span class="lineno">  795</span>        <span class="comment"># defer mask must be included. If a relational field is encountered it</span></div>
<div class="line"><span class="lineno">  796</span>        <span class="comment"># gets added to the mask for it be considered if `select_related` and</span></div>
<div class="line"><span class="lineno">  797</span>        <span class="comment"># the cycle continues by recursively calling this function.</span></div>
<div class="line"><span class="lineno">  798</span>        <span class="keywordflow">for</span> field <span class="keywordflow">in</span> opts.concrete_fields + opts.related_objects:</div>
<div class="line"><span class="lineno">  799</span>            field_mask = mask.pop(field.name, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  800</span>            field_att_mask = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  801</span>            <span class="keywordflow">if</span> field_attname := getattr(field, <span class="stringliteral">&quot;attname&quot;</span>, <span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno">  802</span>                field_att_mask = mask.pop(field_attname, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  803</span>            <span class="keywordflow">if</span> field_mask <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> field_att_mask <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  804</span>                select_mask.setdefault(field, {})</div>
<div class="line"><span class="lineno">  805</span>            <span class="keywordflow">elif</span> field_mask:</div>
<div class="line"><span class="lineno">  806</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> field.is_relation:</div>
<div class="line"><span class="lineno">  807</span>                    <span class="keywordflow">raise</span> FieldError(next(iter(field_mask)))</div>
<div class="line"><span class="lineno">  808</span>                <span class="comment"># Virtual fields such as many-to-many and generic foreign keys</span></div>
<div class="line"><span class="lineno">  809</span>                <span class="comment"># cannot be effectively deferred. Historically, they were</span></div>
<div class="line"><span class="lineno">  810</span>                <span class="comment"># allowed to be passed to QuerySet.defer(). Ignore such field</span></div>
<div class="line"><span class="lineno">  811</span>                <span class="comment"># references until a layer of validation at mask alteration</span></div>
<div class="line"><span class="lineno">  812</span>                <span class="comment"># time is eventually implemented.</span></div>
<div class="line"><span class="lineno">  813</span>                <span class="keywordflow">if</span> field.many_to_many:</div>
<div class="line"><span class="lineno">  814</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  815</span>                field_select_mask = select_mask.setdefault(field, {})</div>
<div class="line"><span class="lineno">  816</span>                related_model = field.related_model._meta.concrete_model</div>
<div class="line"><span class="lineno">  817</span>                self._get_defer_select_mask(</div>
<div class="line"><span class="lineno">  818</span>                    related_model._meta, field_mask, field_select_mask</div>
<div class="line"><span class="lineno">  819</span>                )</div>
<div class="line"><span class="lineno">  820</span>        <span class="comment"># Remaining defer entries must be references to filtered relations</span></div>
<div class="line"><span class="lineno">  821</span>        <span class="comment"># otherwise they are surfaced as missing field errors.</span></div>
<div class="line"><span class="lineno">  822</span>        <span class="keywordflow">for</span> field_name, field_mask <span class="keywordflow">in</span> mask.items():</div>
<div class="line"><span class="lineno">  823</span>            <span class="keywordflow">if</span> filtered_relation := self._filtered_relations.get(field_name):</div>
<div class="line"><span class="lineno">  824</span>                relation = opts.get_field(filtered_relation.relation_name)</div>
<div class="line"><span class="lineno">  825</span>                field_select_mask = select_mask.setdefault((field_name, relation), {})</div>
<div class="line"><span class="lineno">  826</span>                related_model = relation.related_model._meta.concrete_model</div>
<div class="line"><span class="lineno">  827</span>                self._get_defer_select_mask(</div>
<div class="line"><span class="lineno">  828</span>                    related_model._meta, field_mask, field_select_mask</div>
<div class="line"><span class="lineno">  829</span>                )</div>
<div class="line"><span class="lineno">  830</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  831</span>                opts.get_field(field_name)</div>
<div class="line"><span class="lineno">  832</span>        <span class="keywordflow">return</span> select_mask</div>
<div class="line"><span class="lineno">  833</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00318">_filtered_relations</a>, and <a class="el" href="sql_2query_8py_source.html#l00790">_get_defer_select_mask()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l00790">_get_defer_select_mask()</a>, and <a class="el" href="sql_2query_8py_source.html#l00851">get_select_mask()</a>.</p>

</div>
</div>
<a id="aead5cdc0d9b363fd14b31866af05f1b7" name="aead5cdc0d9b363fd14b31866af05f1b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aead5cdc0d9b363fd14b31866af05f1b7">&#9670;&#160;</a></span>_get_only_select_mask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query._get_only_select_mask </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>opts</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>mask</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>select_mask</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00834">834</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  834</span>    <span class="keyword">def </span>_get_only_select_mask(self, opts, mask, select_mask=None):</div>
<div class="line"><span class="lineno">  835</span>        <span class="keywordflow">if</span> select_mask <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  836</span>            select_mask = {}</div>
<div class="line"><span class="lineno">  837</span>        select_mask[opts.pk] = {}</div>
<div class="line"><span class="lineno">  838</span>        <span class="comment"># Only include fields mentioned in the mask.</span></div>
<div class="line"><span class="lineno">  839</span>        <span class="keywordflow">for</span> field_name, field_mask <span class="keywordflow">in</span> mask.items():</div>
<div class="line"><span class="lineno">  840</span>            field = opts.get_field(field_name)</div>
<div class="line"><span class="lineno">  841</span>            field_select_mask = select_mask.setdefault(field, {})</div>
<div class="line"><span class="lineno">  842</span>            <span class="keywordflow">if</span> field_mask:</div>
<div class="line"><span class="lineno">  843</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> field.is_relation:</div>
<div class="line"><span class="lineno">  844</span>                    <span class="keywordflow">raise</span> FieldError(next(iter(field_mask)))</div>
<div class="line"><span class="lineno">  845</span>                related_model = field.remote_field.model._meta.concrete_model</div>
<div class="line"><span class="lineno">  846</span>                self._get_only_select_mask(</div>
<div class="line"><span class="lineno">  847</span>                    related_model._meta, field_mask, field_select_mask</div>
<div class="line"><span class="lineno">  848</span>                )</div>
<div class="line"><span class="lineno">  849</span>        <span class="keywordflow">return</span> select_mask</div>
<div class="line"><span class="lineno">  850</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00834">_get_only_select_mask()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l00834">_get_only_select_mask()</a>, and <a class="el" href="sql_2query_8py_source.html#l00851">get_select_mask()</a>.</p>

</div>
</div>
<a id="a8aab1bfb47a58b3e027128913ca39c49" name="a8aab1bfb47a58b3e027128913ca39c49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aab1bfb47a58b3e027128913ca39c49">&#9670;&#160;</a></span>add_annotation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.add_annotation </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>annotation</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>alias</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>select</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add a single annotation expression to the Query.</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01191">1191</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1191</span>    <span class="keyword">def </span>add_annotation(self, annotation, alias, select=True):</div>
<div class="line"><span class="lineno"> 1192</span>        <span class="stringliteral">&quot;&quot;&quot;Add a single annotation expression to the Query.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1193</span>        self.check_alias(alias)</div>
<div class="line"><span class="lineno"> 1194</span>        annotation = annotation.resolve_expression(self, allow_joins=<span class="keyword">True</span>, reuse=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 1195</span>        <span class="keywordflow">if</span> select:</div>
<div class="line"><span class="lineno"> 1196</span>            self.append_annotation_mask([alias])</div>
<div class="line"><span class="lineno"> 1197</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1198</span>            annotation_mask = (</div>
<div class="line"><span class="lineno"> 1199</span>                value</div>
<div class="line"><span class="lineno"> 1200</span>                <span class="keywordflow">for</span> value <span class="keywordflow">in</span> dict.fromkeys(self.annotation_select)</div>
<div class="line"><span class="lineno"> 1201</span>                <span class="keywordflow">if</span> value != alias</div>
<div class="line"><span class="lineno"> 1202</span>            )</div>
<div class="line"><span class="lineno"> 1203</span>            self.set_annotation_mask(annotation_mask)</div>
<div class="line"><span class="lineno"> 1204</span>        self.annotations[alias] = annotation</div>
<div class="line"><span class="lineno"> 1205</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00325">annotation_select</a>, <a class="el" href="sql_2query_8py_source.html#l00156">django.db.models.sql.query.RawQuery.annotation_select</a>, <a class="el" href="node__classes_8py_source.html#l00672">astroid.nodes.node_classes.Arguments.annotations</a>, <a class="el" href="sql_2query_8py_source.html#l00313">annotations</a>, <a class="el" href="sql_2query_8py_source.html#l02423">append_annotation_mask()</a>, <a class="el" href="sql_2query_8py_source.html#l01184">check_alias()</a>, and <a class="el" href="sql_2query_8py_source.html#l02415">set_annotation_mask()</a>.</p>

</div>
</div>
<a id="a0cc2dc707d0669a61a736d999e26bcaa" name="a0cc2dc707d0669a61a736d999e26bcaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cc2dc707d0669a61a736d999e26bcaa">&#9670;&#160;</a></span>add_deferred_loading()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.add_deferred_loading </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>field_names</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add the given list of model field names to the set of fields to
exclude from loading from the database when automatic column selection
is done. Add the new field names to any existing field names that
are deferred (or removed from any existing field names that are marked
as the only ones for immediate loading).
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02366">2366</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2366</span>    <span class="keyword">def </span>add_deferred_loading(self, field_names):</div>
<div class="line"><span class="lineno"> 2367</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2368</span><span class="stringliteral">        Add the given list of model field names to the set of fields to</span></div>
<div class="line"><span class="lineno"> 2369</span><span class="stringliteral">        exclude from loading from the database when automatic column selection</span></div>
<div class="line"><span class="lineno"> 2370</span><span class="stringliteral">        is done. Add the new field names to any existing field names that</span></div>
<div class="line"><span class="lineno"> 2371</span><span class="stringliteral">        are deferred (or removed from any existing field names that are marked</span></div>
<div class="line"><span class="lineno"> 2372</span><span class="stringliteral">        as the only ones for immediate loading).</span></div>
<div class="line"><span class="lineno"> 2373</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2374</span>        <span class="comment"># Fields on related models are stored in the literal double-underscore</span></div>
<div class="line"><span class="lineno"> 2375</span>        <span class="comment"># format, so that we can use a set datastructure. We do the foo__bar</span></div>
<div class="line"><span class="lineno"> 2376</span>        <span class="comment"># splitting and handling when computing the SQL column names (as part of</span></div>
<div class="line"><span class="lineno"> 2377</span>        <span class="comment"># get_columns()).</span></div>
<div class="line"><span class="lineno"> 2378</span>        existing, defer = self.deferred_loading</div>
<div class="line"><span class="lineno"> 2379</span>        <span class="keywordflow">if</span> defer:</div>
<div class="line"><span class="lineno"> 2380</span>            <span class="comment"># Add to existing deferred names.</span></div>
<div class="line"><span class="lineno"> 2381</span>            self.deferred_loading = existing.union(field_names), <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 2382</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2383</span>            <span class="comment"># Remove names from the set of any existing &quot;immediate load&quot; names.</span></div>
<div class="line"><span class="lineno"> 2384</span>            <span class="keywordflow">if</span> new_existing := existing.difference(field_names):</div>
<div class="line"><span class="lineno"> 2385</span>                self.deferred_loading = new_existing, <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 2386</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2387</span>                self.clear_deferred_loading()</div>
<div class="line"><span class="lineno"> 2388</span>                <span class="keywordflow">if</span> new_only := set(field_names).difference(existing):</div>
<div class="line"><span class="lineno"> 2389</span>                    self.deferred_loading = new_only, <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 2390</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l02362">clear_deferred_loading()</a>, and <a class="el" href="sql_2query_8py_source.html#l00288">deferred_loading</a>.</p>

</div>
</div>
<a id="ae71d0b630f0ab0649f64cb2de685ffe8" name="ae71d0b630f0ab0649f64cb2de685ffe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae71d0b630f0ab0649f64cb2de685ffe8">&#9670;&#160;</a></span>add_distinct_fields()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.add_distinct_fields </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*</td>          <td class="paramname"><span class="paramname"><em>field_names</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add and resolve the given fields to the query's "distinct on" clause.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02175">2175</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2175</span>    <span class="keyword">def </span>add_distinct_fields(self, *field_names):</div>
<div class="line"><span class="lineno"> 2176</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2177</span><span class="stringliteral">        Add and resolve the given fields to the query&#39;s &quot;distinct on&quot; clause.</span></div>
<div class="line"><span class="lineno"> 2178</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2179</span>        self.distinct_fields = field_names</div>
<div class="line"><span class="lineno"> 2180</span>        self.distinct = <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 2181</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="db_2models_2aggregates_8py_source.html#l00042">django.db.models.aggregates.Aggregate.distinct</a>, <a class="el" href="sql_2query_8py_source.html#l00254">distinct</a>, and <a class="el" href="sql_2query_8py_source.html#l00255">distinct_fields</a>.</p>

</div>
</div>
<a id="a7ecc00d3cec891eca57e4a1f82ff39a7" name="a7ecc00d3cec891eca57e4a1f82ff39a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ecc00d3cec891eca57e4a1f82ff39a7">&#9670;&#160;</a></span>add_extra()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.add_extra </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>select</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>select_params</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>where</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>params</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>tables</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>order_by</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add data to the various extra_* attributes for user-created additions
to the query.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02329">2329</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2329</span>    <span class="keyword">def </span>add_extra(self, select, select_params, where, params, tables, order_by):</div>
<div class="line"><span class="lineno"> 2330</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2331</span><span class="stringliteral">        Add data to the various extra_* attributes for user-created additions</span></div>
<div class="line"><span class="lineno"> 2332</span><span class="stringliteral">        to the query.</span></div>
<div class="line"><span class="lineno"> 2333</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2334</span>        <span class="keywordflow">if</span> select:</div>
<div class="line"><span class="lineno"> 2335</span>            <span class="comment"># We need to pair any placeholder markers in the &#39;select&#39;</span></div>
<div class="line"><span class="lineno"> 2336</span>            <span class="comment"># dictionary with their parameters in &#39;select_params&#39; so that</span></div>
<div class="line"><span class="lineno"> 2337</span>            <span class="comment"># subsequent updates to the select dictionary also adjust the</span></div>
<div class="line"><span class="lineno"> 2338</span>            <span class="comment"># parameters appropriately.</span></div>
<div class="line"><span class="lineno"> 2339</span>            select_pairs = {}</div>
<div class="line"><span class="lineno"> 2340</span>            <span class="keywordflow">if</span> select_params:</div>
<div class="line"><span class="lineno"> 2341</span>                param_iter = iter(select_params)</div>
<div class="line"><span class="lineno"> 2342</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2343</span>                param_iter = iter([])</div>
<div class="line"><span class="lineno"> 2344</span>            <span class="keywordflow">for</span> name, entry <span class="keywordflow">in</span> select.items():</div>
<div class="line"><span class="lineno"> 2345</span>                self.check_alias(name)</div>
<div class="line"><span class="lineno"> 2346</span>                entry = str(entry)</div>
<div class="line"><span class="lineno"> 2347</span>                entry_params = []</div>
<div class="line"><span class="lineno"> 2348</span>                pos = entry.find(<span class="stringliteral">&quot;%s&quot;</span>)</div>
<div class="line"><span class="lineno"> 2349</span>                <span class="keywordflow">while</span> pos != -1:</div>
<div class="line"><span class="lineno"> 2350</span>                    <span class="keywordflow">if</span> pos == 0 <span class="keywordflow">or</span> entry[pos - 1] != <span class="stringliteral">&quot;%&quot;</span>:</div>
<div class="line"><span class="lineno"> 2351</span>                        entry_params.append(next(param_iter))</div>
<div class="line"><span class="lineno"> 2352</span>                    pos = entry.find(<span class="stringliteral">&quot;%s&quot;</span>, pos + 2)</div>
<div class="line"><span class="lineno"> 2353</span>                select_pairs[name] = (entry, entry_params)</div>
<div class="line"><span class="lineno"> 2354</span>            self.extra.update(select_pairs)</div>
<div class="line"><span class="lineno"> 2355</span>        <span class="keywordflow">if</span> where <span class="keywordflow">or</span> params:</div>
<div class="line"><span class="lineno"> 2356</span>            self.where.add(ExtraWhere(where, params), AND)</div>
<div class="line"><span class="lineno"> 2357</span>        <span class="keywordflow">if</span> tables:</div>
<div class="line"><span class="lineno"> 2358</span>            self.extra_tables += tuple(tables)</div>
<div class="line"><span class="lineno"> 2359</span>        <span class="keywordflow">if</span> order_by:</div>
<div class="line"><span class="lineno"> 2360</span>            self.extra_order_by = order_by</div>
<div class="line"><span class="lineno"> 2361</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01184">check_alias()</a>, <a class="el" href="test__session_8py_source.html#l00099">dill.tests.test_session.TestNamespace.extra</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l02372">django.contrib.admin.options.InlineModelAdmin.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01606">django.db.models.expressions.Case.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01045">django.db.models.expressions.Func.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01701">django.db.models.expressions.Subquery.extra</a>, <a class="el" href="sql_2query_8py_source.html#l00316">extra</a>, <a class="el" href="sql_2query_8py_source.html#l00284">extra_order_by</a>, <a class="el" href="sql_2query_8py_source.html#l00283">extra_tables</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00086">django.db.models.sql.compiler.SQLCompiler.where</a>, and <a class="el" href="sql_2query_8py_source.html#l00311">where</a>.</p>

</div>
</div>
<a id="a86b6a93688b1029c5cc8095a6bc8b683" name="a86b6a93688b1029c5cc8095a6bc8b683"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86b6a93688b1029c5cc8095a6bc8b683">&#9670;&#160;</a></span>add_fields()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.add_fields </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>field_names</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>allow_m2m</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add the given (model) fields to the select set. Add the field names in
the order specified.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02182">2182</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2182</span>    <span class="keyword">def </span>add_fields(self, field_names, allow_m2m=True):</div>
<div class="line"><span class="lineno"> 2183</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2184</span><span class="stringliteral">        Add the given (model) fields to the select set. Add the field names in</span></div>
<div class="line"><span class="lineno"> 2185</span><span class="stringliteral">        the order specified.</span></div>
<div class="line"><span class="lineno"> 2186</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2187</span>        alias = self.get_initial_alias()</div>
<div class="line"><span class="lineno"> 2188</span>        opts = self.get_meta()</div>
<div class="line"><span class="lineno"> 2189</span> </div>
<div class="line"><span class="lineno"> 2190</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 2191</span>            cols = []</div>
<div class="line"><span class="lineno"> 2192</span>            <span class="keywordflow">for</span> name <span class="keywordflow">in</span> field_names:</div>
<div class="line"><span class="lineno"> 2193</span>                <span class="comment"># Join promotion note - we must not remove any rows here, so</span></div>
<div class="line"><span class="lineno"> 2194</span>                <span class="comment"># if there is no existing joins, use outer join.</span></div>
<div class="line"><span class="lineno"> 2195</span>                join_info = self.setup_joins(</div>
<div class="line"><span class="lineno"> 2196</span>                    name.split(LOOKUP_SEP), opts, alias, allow_many=allow_m2m</div>
<div class="line"><span class="lineno"> 2197</span>                )</div>
<div class="line"><span class="lineno"> 2198</span>                targets, final_alias, joins = self.trim_joins(</div>
<div class="line"><span class="lineno"> 2199</span>                    join_info.targets,</div>
<div class="line"><span class="lineno"> 2200</span>                    join_info.joins,</div>
<div class="line"><span class="lineno"> 2201</span>                    join_info.path,</div>
<div class="line"><span class="lineno"> 2202</span>                )</div>
<div class="line"><span class="lineno"> 2203</span>                <span class="keywordflow">for</span> target <span class="keywordflow">in</span> targets:</div>
<div class="line"><span class="lineno"> 2204</span>                    cols.append(join_info.transform_function(target, final_alias))</div>
<div class="line"><span class="lineno"> 2205</span>            <span class="keywordflow">if</span> cols:</div>
<div class="line"><span class="lineno"> 2206</span>                self.set_select(cols)</div>
<div class="line"><span class="lineno"> 2207</span>        <span class="keywordflow">except</span> MultiJoin:</div>
<div class="line"><span class="lineno"> 2208</span>            <span class="keywordflow">raise</span> FieldError(<span class="stringliteral">&quot;Invalid field name: &#39;%s&#39;&quot;</span> % name)</div>
<div class="line"><span class="lineno"> 2209</span>        <span class="keywordflow">except</span> FieldError:</div>
<div class="line"><span class="lineno"> 2210</span>            <span class="keywordflow">if</span> LOOKUP_SEP <span class="keywordflow">in</span> name:</div>
<div class="line"><span class="lineno"> 2211</span>                <span class="comment"># For lookups spanning over relationships, show the error</span></div>
<div class="line"><span class="lineno"> 2212</span>                <span class="comment"># from the model on which the lookup failed.</span></div>
<div class="line"><span class="lineno"> 2213</span>                <span class="keywordflow">raise</span></div>
<div class="line"><span class="lineno"> 2214</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2215</span>                names = sorted(</div>
<div class="line"><span class="lineno"> 2216</span>                    [</div>
<div class="line"><span class="lineno"> 2217</span>                        *get_field_names_from_opts(opts),</div>
<div class="line"><span class="lineno"> 2218</span>                        *self.extra,</div>
<div class="line"><span class="lineno"> 2219</span>                        *self.annotation_select,</div>
<div class="line"><span class="lineno"> 2220</span>                        *self._filtered_relations,</div>
<div class="line"><span class="lineno"> 2221</span>                    ]</div>
<div class="line"><span class="lineno"> 2222</span>                )</div>
<div class="line"><span class="lineno"> 2223</span>                <span class="keywordflow">raise</span> FieldError(</div>
<div class="line"><span class="lineno"> 2224</span>                    <span class="stringliteral">&quot;Cannot resolve keyword %r into field. &quot;</span></div>
<div class="line"><span class="lineno"> 2225</span>                    <span class="stringliteral">&quot;Choices are: %s&quot;</span> % (name, <span class="stringliteral">&quot;, &quot;</span>.join(names))</div>
<div class="line"><span class="lineno"> 2226</span>                )</div>
<div class="line"><span class="lineno"> 2227</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00318">_filtered_relations</a>, <a class="el" href="sql_2query_8py_source.html#l00325">annotation_select</a>, <a class="el" href="sql_2query_8py_source.html#l00156">django.db.models.sql.query.RawQuery.annotation_select</a>, <a class="el" href="test__session_8py_source.html#l00099">dill.tests.test_session.TestNamespace.extra</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l02372">django.contrib.admin.options.InlineModelAdmin.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01606">django.db.models.expressions.Case.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01045">django.db.models.expressions.Func.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01701">django.db.models.expressions.Subquery.extra</a>, <a class="el" href="sql_2query_8py_source.html#l00316">extra</a>, <a class="el" href="sql_2query_8py_source.html#l00059">django.db.models.sql.query.get_field_names_from_opts()</a>, <a class="el" href="sql_2query_8py_source.html#l01075">get_initial_alias()</a>, <a class="el" href="core_2management_2commands_2inspectdb_8py_source.html#l00376">django.core.management.commands.inspectdb.Command.get_meta()</a>, <a class="el" href="sql_2query_8py_source.html#l00366">get_meta()</a>, <a class="el" href="sql_2query_8py_source.html#l01097">join()</a>, <a class="el" href="sql_2query_8py_source.html#l02171">set_select()</a>, <a class="el" href="sql_2query_8py_source.html#l01819">setup_joins()</a>, and <a class="el" href="sql_2query_8py_source.html#l01927">trim_joins()</a>.</p>

<p class="reference">Referenced by <a class="el" href="formsets_8py_source.html#l00219">django.forms.formsets.BaseFormSet._construct_form()</a>, and <a class="el" href="formsets_8py_source.html#l00259">django.forms.formsets.BaseFormSet.empty_form()</a>.</p>

</div>
</div>
<a id="a6cf5b85a93ad91f593a800a05cfe44a8" name="a6cf5b85a93ad91f593a800a05cfe44a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cf5b85a93ad91f593a800a05cfe44a8">&#9670;&#160;</a></span>add_filter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.add_filter </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>filter_lhs</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>filter_rhs</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01592">1592</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1592</span>    <span class="keyword">def </span>add_filter(self, filter_lhs, filter_rhs):</div>
<div class="line"><span class="lineno"> 1593</span>        self.add_q(Q((filter_lhs, filter_rhs)))</div>
<div class="line"><span class="lineno"> 1594</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01595">add_q()</a>.</p>

<p class="reference">Referenced by <a class="el" href="subqueries_8py_source.html#l00026">django.db.models.sql.subqueries.DeleteQuery.delete_batch()</a>, and <a class="el" href="subqueries_8py_source.html#l00071">django.db.models.sql.subqueries.UpdateQuery.update_batch()</a>.</p>

</div>
</div>
<a id="a3d283c44e19e76e10782e46740582cab" name="a3d283c44e19e76e10782e46740582cab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d283c44e19e76e10782e46740582cab">&#9670;&#160;</a></span>add_filtered_relation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.add_filtered_relation </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>filtered_relation</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>alias</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01661">1661</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1661</span>    <span class="keyword">def </span>add_filtered_relation(self, filtered_relation, alias):</div>
<div class="line"><span class="lineno"> 1662</span>        filtered_relation.alias = alias</div>
<div class="line"><span class="lineno"> 1663</span>        relation_lookup_parts, relation_field_parts, _ = self.solve_lookup_type(</div>
<div class="line"><span class="lineno"> 1664</span>            filtered_relation.relation_name</div>
<div class="line"><span class="lineno"> 1665</span>        )</div>
<div class="line"><span class="lineno"> 1666</span>        <span class="keywordflow">if</span> relation_lookup_parts:</div>
<div class="line"><span class="lineno"> 1667</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno"> 1668</span>                <span class="stringliteral">&quot;FilteredRelation&#39;s relation_name cannot contain lookups &quot;</span></div>
<div class="line"><span class="lineno"> 1669</span>                <span class="stringliteral">&quot;(got %r).&quot;</span> % filtered_relation.relation_name</div>
<div class="line"><span class="lineno"> 1670</span>            )</div>
<div class="line"><span class="lineno"> 1671</span>        <span class="keywordflow">for</span> lookup <span class="keywordflow">in</span> get_children_from_q(filtered_relation.condition):</div>
<div class="line"><span class="lineno"> 1672</span>            lookup_parts, lookup_field_parts, _ = self.solve_lookup_type(lookup)</div>
<div class="line"><span class="lineno"> 1673</span>            shift = 2 <span class="keywordflow">if</span> <span class="keywordflow">not</span> lookup_parts <span class="keywordflow">else</span> 1</div>
<div class="line"><span class="lineno"> 1674</span>            lookup_field_path = lookup_field_parts[:-shift]</div>
<div class="line"><span class="lineno"> 1675</span>            <span class="keywordflow">for</span> idx, lookup_field_part <span class="keywordflow">in</span> enumerate(lookup_field_path):</div>
<div class="line"><span class="lineno"> 1676</span>                <span class="keywordflow">if</span> len(relation_field_parts) &gt; idx:</div>
<div class="line"><span class="lineno"> 1677</span>                    <span class="keywordflow">if</span> relation_field_parts[idx] != lookup_field_part:</div>
<div class="line"><span class="lineno"> 1678</span>                        <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno"> 1679</span>                            <span class="stringliteral">&quot;FilteredRelation&#39;s condition doesn&#39;t support &quot;</span></div>
<div class="line"><span class="lineno"> 1680</span>                            <span class="stringliteral">&quot;relations outside the %r (got %r).&quot;</span></div>
<div class="line"><span class="lineno"> 1681</span>                            % (filtered_relation.relation_name, lookup)</div>
<div class="line"><span class="lineno"> 1682</span>                        )</div>
<div class="line"><span class="lineno"> 1683</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1684</span>                    <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno"> 1685</span>                        <span class="stringliteral">&quot;FilteredRelation&#39;s condition doesn&#39;t support nested &quot;</span></div>
<div class="line"><span class="lineno"> 1686</span>                        <span class="stringliteral">&quot;relations deeper than the relation_name (got %r for &quot;</span></div>
<div class="line"><span class="lineno"> 1687</span>                        <span class="stringliteral">&quot;%r).&quot;</span> % (lookup, filtered_relation.relation_name)</div>
<div class="line"><span class="lineno"> 1688</span>                    )</div>
<div class="line"><span class="lineno"> 1689</span>        filtered_relation.condition = rename_prefix_from_q(</div>
<div class="line"><span class="lineno"> 1690</span>            filtered_relation.relation_name,</div>
<div class="line"><span class="lineno"> 1691</span>            alias,</div>
<div class="line"><span class="lineno"> 1692</span>            filtered_relation.condition,</div>
<div class="line"><span class="lineno"> 1693</span>        )</div>
<div class="line"><span class="lineno"> 1694</span>        self._filtered_relations[filtered_relation.alias] = filtered_relation</div>
<div class="line"><span class="lineno"> 1695</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00318">_filtered_relations</a>, <a class="el" href="sql_2query_8py_source.html#l00080">django.db.models.sql.query.get_children_from_q()</a>, <a class="el" href="sql_2query_8py_source.html#l00129">django.db.models.sql.query.rename_prefix_from_q()</a>, and <a class="el" href="sql_2query_8py_source.html#l01289">solve_lookup_type()</a>.</p>

</div>
</div>
<a id="a6cadc9ea9713a391ffb54ba2c3b48dcc" name="a6cadc9ea9713a391ffb54ba2c3b48dcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cadc9ea9713a391ffb54ba2c3b48dcc">&#9670;&#160;</a></span>add_immediate_loading()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.add_immediate_loading </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>field_names</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add the given list of model field names to the set of fields to
retrieve when the SQL is executed ("immediate loading" fields). The
field names replace any existing immediate loading field names. If
there are field names already specified for deferred loading, remove
those names from the new field_names before storing the new names
for immediate loading. (That is, immediate loading overrides any
existing immediate values, but respects existing deferrals.)
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02391">2391</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2391</span>    <span class="keyword">def </span>add_immediate_loading(self, field_names):</div>
<div class="line"><span class="lineno"> 2392</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2393</span><span class="stringliteral">        Add the given list of model field names to the set of fields to</span></div>
<div class="line"><span class="lineno"> 2394</span><span class="stringliteral">        retrieve when the SQL is executed (&quot;immediate loading&quot; fields). The</span></div>
<div class="line"><span class="lineno"> 2395</span><span class="stringliteral">        field names replace any existing immediate loading field names. If</span></div>
<div class="line"><span class="lineno"> 2396</span><span class="stringliteral">        there are field names already specified for deferred loading, remove</span></div>
<div class="line"><span class="lineno"> 2397</span><span class="stringliteral">        those names from the new field_names before storing the new names</span></div>
<div class="line"><span class="lineno"> 2398</span><span class="stringliteral">        for immediate loading. (That is, immediate loading overrides any</span></div>
<div class="line"><span class="lineno"> 2399</span><span class="stringliteral">        existing immediate values, but respects existing deferrals.)</span></div>
<div class="line"><span class="lineno"> 2400</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2401</span>        existing, defer = self.deferred_loading</div>
<div class="line"><span class="lineno"> 2402</span>        field_names = set(field_names)</div>
<div class="line"><span class="lineno"> 2403</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;pk&quot;</span> <span class="keywordflow">in</span> field_names:</div>
<div class="line"><span class="lineno"> 2404</span>            field_names.remove(<span class="stringliteral">&quot;pk&quot;</span>)</div>
<div class="line"><span class="lineno"> 2405</span>            field_names.add(self.get_meta().pk.name)</div>
<div class="line"><span class="lineno"> 2406</span> </div>
<div class="line"><span class="lineno"> 2407</span>        <span class="keywordflow">if</span> defer:</div>
<div class="line"><span class="lineno"> 2408</span>            <span class="comment"># Remove any existing deferred names from the current set before</span></div>
<div class="line"><span class="lineno"> 2409</span>            <span class="comment"># setting the new names.</span></div>
<div class="line"><span class="lineno"> 2410</span>            self.deferred_loading = field_names.difference(existing), <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 2411</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2412</span>            <span class="comment"># Replace any existing &quot;immediate load&quot; field names.</span></div>
<div class="line"><span class="lineno"> 2413</span>            self.deferred_loading = frozenset(field_names), <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 2414</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00288">deferred_loading</a>, <a class="el" href="core_2management_2commands_2inspectdb_8py_source.html#l00376">django.core.management.commands.inspectdb.Command.get_meta()</a>, and <a class="el" href="sql_2query_8py_source.html#l00366">get_meta()</a>.</p>

</div>
</div>
<a id="ac10cabc83bd112eb0127a34db545deda" name="ac10cabc83bd112eb0127a34db545deda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac10cabc83bd112eb0127a34db545deda">&#9670;&#160;</a></span>add_ordering()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.add_ordering </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*</td>          <td class="paramname"><span class="paramname"><em>ordering</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add items from the 'ordering' sequence to the query's "order by"
clause. These items are either field names (not column names) --
possibly with a direction prefix ('-' or '?') -- or OrderBy
expressions.

If 'ordering' is empty, clear all ordering from the query.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02228">2228</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2228</span>    <span class="keyword">def </span>add_ordering(self, *ordering):</div>
<div class="line"><span class="lineno"> 2229</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2230</span><span class="stringliteral">        Add items from the &#39;ordering&#39; sequence to the query&#39;s &quot;order by&quot;</span></div>
<div class="line"><span class="lineno"> 2231</span><span class="stringliteral">        clause. These items are either field names (not column names) --</span></div>
<div class="line"><span class="lineno"> 2232</span><span class="stringliteral">        possibly with a direction prefix (&#39;-&#39; or &#39;?&#39;) -- or OrderBy</span></div>
<div class="line"><span class="lineno"> 2233</span><span class="stringliteral">        expressions.</span></div>
<div class="line"><span class="lineno"> 2234</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 2235</span><span class="stringliteral">        If &#39;ordering&#39; is empty, clear all ordering from the query.</span></div>
<div class="line"><span class="lineno"> 2236</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2237</span>        errors = []</div>
<div class="line"><span class="lineno"> 2238</span>        <span class="keywordflow">for</span> item <span class="keywordflow">in</span> ordering:</div>
<div class="line"><span class="lineno"> 2239</span>            <span class="keywordflow">if</span> isinstance(item, str):</div>
<div class="line"><span class="lineno"> 2240</span>                <span class="keywordflow">if</span> item == <span class="stringliteral">&quot;?&quot;</span>:</div>
<div class="line"><span class="lineno"> 2241</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 2242</span>                item = item.removeprefix(<span class="stringliteral">&quot;-&quot;</span>)</div>
<div class="line"><span class="lineno"> 2243</span>                <span class="keywordflow">if</span> item <span class="keywordflow">in</span> self.annotations:</div>
<div class="line"><span class="lineno"> 2244</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 2245</span>                <span class="keywordflow">if</span> self.extra <span class="keywordflow">and</span> item <span class="keywordflow">in</span> self.extra:</div>
<div class="line"><span class="lineno"> 2246</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 2247</span>                <span class="comment"># names_to_path() validates the lookup. A descriptive</span></div>
<div class="line"><span class="lineno"> 2248</span>                <span class="comment"># FieldError will be raise if it&#39;s not.</span></div>
<div class="line"><span class="lineno"> 2249</span>                self.names_to_path(item.split(LOOKUP_SEP), self.model._meta)</div>
<div class="line"><span class="lineno"> 2250</span>            <span class="keywordflow">elif</span> <span class="keywordflow">not</span> hasattr(item, <span class="stringliteral">&quot;resolve_expression&quot;</span>):</div>
<div class="line"><span class="lineno"> 2251</span>                errors.append(item)</div>
<div class="line"><span class="lineno"> 2252</span>            <span class="keywordflow">if</span> getattr(item, <span class="stringliteral">&quot;contains_aggregate&quot;</span>, <span class="keyword">False</span>):</div>
<div class="line"><span class="lineno"> 2253</span>                <span class="keywordflow">raise</span> FieldError(</div>
<div class="line"><span class="lineno"> 2254</span>                    <span class="stringliteral">&quot;Using an aggregate in order_by() without also including &quot;</span></div>
<div class="line"><span class="lineno"> 2255</span>                    <span class="stringliteral">&quot;it in annotate() is not allowed: %s&quot;</span> % item</div>
<div class="line"><span class="lineno"> 2256</span>                )</div>
<div class="line"><span class="lineno"> 2257</span>        <span class="keywordflow">if</span> errors:</div>
<div class="line"><span class="lineno"> 2258</span>            <span class="keywordflow">raise</span> FieldError(<span class="stringliteral">&quot;Invalid order_by arguments: %s&quot;</span> % errors)</div>
<div class="line"><span class="lineno"> 2259</span>        <span class="keywordflow">if</span> ordering:</div>
<div class="line"><span class="lineno"> 2260</span>            self.order_by += ordering</div>
<div class="line"><span class="lineno"> 2261</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2262</span>            self.default_ordering = <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 2263</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="node__classes_8py_source.html#l00672">astroid.nodes.node_classes.Arguments.annotations</a>, <a class="el" href="sql_2query_8py_source.html#l00313">annotations</a>, <a class="el" href="sql_2query_8py_source.html#l00232">default_ordering</a>, <a class="el" href="test__session_8py_source.html#l00099">dill.tests.test_session.TestNamespace.extra</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l02372">django.contrib.admin.options.InlineModelAdmin.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01606">django.db.models.expressions.Case.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01045">django.db.models.expressions.Func.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01701">django.db.models.expressions.Subquery.extra</a>, <a class="el" href="sql_2query_8py_source.html#l00316">extra</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l02369">django.contrib.admin.options.InlineModelAdmin.model</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l00682">django.contrib.admin.options.ModelAdmin.model</a>, <a class="el" href="django_2contrib_2admin_2views_2main_8py_source.html#l00088">django.contrib.admin.views.main.ChangeList.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2forms_8py_source.html#l00233">django.contrib.auth.forms.BaseUserCreationForm.Meta.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2forms_8py_source.html#l00293">django.contrib.auth.forms.UserChangeForm.Meta.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2admin_8py_source.html#l00135">django.contrib.contenttypes.admin.GenericInlineModelAdmin.model</a>, <a class="el" href="django_2contrib_2contenttypes_2fields_8py_source.html#l00488">django.contrib.contenttypes.fields.GenericRelation.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2models_8py_source.html#l00136">django.contrib.contenttypes.models.ContentType.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2flatpages_2forms_8py_source.html#l00027">django.contrib.flatpages.forms.FlatpageForm.Meta.model</a>, <a class="el" href="layermapping_8py_source.html#l00128">django.contrib.gis.utils.layermapping.LayerMapping.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l01254">django.db.models.fields.CharField.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00401">django.db.models.fields.Field.model</a>, <a class="el" href="generated_8py_source.html#l00114">django.db.models.fields.generated.GeneratedField.model</a>, <a class="el" href="django_2db_2models_2fields_2json_8py_source.html#l00055">django.db.models.fields.json.JSONField.model</a>, <a class="el" href="reverse__related_8py_source.html#l00053">django.db.models.fields.reverse_related.ForeignObjectRel.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l02457">django.db.models.fields.TextField.model</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00030">django.db.models.manager.BaseManager.model</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00210">django.db.models.manager.EmptyManager.model</a>, <a class="el" href="db_2models_2options_8py_source.html#l00176">django.db.models.options.Options.model</a>, <a class="el" href="query_8py_source.html#l00297">django.db.models.query.QuerySet.model</a>, <a class="el" href="query_8py_source.html#l02058">django.db.models.query.RawQuerySet.model</a>, <a class="el" href="sql_2query_8py_source.html#l00293">model</a>, <a class="el" href="sql_2query_8py_source.html#l01696">names_to_path()</a>, <a class="el" href="contrib_2postgres_2aggregates_2mixins_8py_source.html#l00008">django.contrib.postgres.aggregates.mixins.OrderableAggMixin.order_by</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01878">django.db.models.expressions.Window.order_by</a>, and <a class="el" href="sql_2query_8py_source.html#l00251">order_by</a>.</p>

</div>
</div>
<a id="a9f2dddd1286ef7cf8474710013e6f9d1" name="a9f2dddd1286ef7cf8474710013e6f9d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f2dddd1286ef7cf8474710013e6f9d1">&#9670;&#160;</a></span>add_q()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.add_q </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>q_object</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">A preprocessor for the internal _add_q(). Responsible for doing final
join promotion.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01595">1595</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1595</span>    <span class="keyword">def </span>add_q(self, q_object):</div>
<div class="line"><span class="lineno"> 1596</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1597</span><span class="stringliteral">        A preprocessor for the internal _add_q(). Responsible for doing final</span></div>
<div class="line"><span class="lineno"> 1598</span><span class="stringliteral">        join promotion.</span></div>
<div class="line"><span class="lineno"> 1599</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1600</span>        <span class="comment"># For join promotion this case is doing an AND for the added q_object</span></div>
<div class="line"><span class="lineno"> 1601</span>        <span class="comment"># and existing conditions. So, any existing inner join forces the join</span></div>
<div class="line"><span class="lineno"> 1602</span>        <span class="comment"># type to remain inner. Existing outer joins can however be demoted.</span></div>
<div class="line"><span class="lineno"> 1603</span>        <span class="comment"># (Consider case where rel_a is LOUTER and rel_a__col=1 is added - if</span></div>
<div class="line"><span class="lineno"> 1604</span>        <span class="comment"># rel_a doesn&#39;t produce any rows, then the whole condition must fail.</span></div>
<div class="line"><span class="lineno"> 1605</span>        <span class="comment"># So, demotion is OK.</span></div>
<div class="line"><span class="lineno"> 1606</span>        existing_inner = {</div>
<div class="line"><span class="lineno"> 1607</span>            a <span class="keywordflow">for</span> a <span class="keywordflow">in</span> self.alias_map <span class="keywordflow">if</span> self.alias_map[a].join_type == INNER</div>
<div class="line"><span class="lineno"> 1608</span>        }</div>
<div class="line"><span class="lineno"> 1609</span>        clause, _ = self._add_q(q_object, self.used_aliases)</div>
<div class="line"><span class="lineno"> 1610</span>        <span class="keywordflow">if</span> clause:</div>
<div class="line"><span class="lineno"> 1611</span>            self.where.add(clause, AND)</div>
<div class="line"><span class="lineno"> 1612</span>        self.demote_joins(existing_inner)</div>
<div class="line"><span class="lineno"> 1613</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01631">_add_q()</a>, <a class="el" href="sql_2query_8py_source.html#l00300">alias_map</a>, <a class="el" href="sql_2query_8py_source.html#l00945">demote_joins()</a>, <a class="el" href="sql_2query_8py_source.html#l00309">used_aliases</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00086">django.db.models.sql.compiler.SQLCompiler.where</a>, and <a class="el" href="sql_2query_8py_source.html#l00311">where</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01592">add_filter()</a>.</p>

</div>
</div>
<a id="aea3eca4a3feb8853a4ca35b90e18cecb" name="aea3eca4a3feb8853a4ca35b90e18cecb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea3eca4a3feb8853a4ca35b90e18cecb">&#9670;&#160;</a></span>add_select_col()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.add_select_col </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>col</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>name</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02167">2167</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2167</span>    <span class="keyword">def </span>add_select_col(self, col, name):</div>
<div class="line"><span class="lineno"> 2168</span>        self.select += (col,)</div>
<div class="line"><span class="lineno"> 2169</span>        self.values_select += (name,)</div>
<div class="line"><span class="lineno"> 2170</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="contrib_2gis_2db_2backends_2base_2operations_8py_source.html#l00020">django.contrib.gis.db.backends.base.operations.BaseSpatialOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2oracle_2operations_8py_source.html#l00099">django.contrib.gis.db.backends.oracle.operations.OracleOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2postgis_2operations_8py_source.html#l00167">django.contrib.gis.db.backends.postgis.operations.PostGISOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2spatialite_2operations_8py_source.html#l00066">django.contrib.gis.db.backends.spatialite.operations.SpatiaLiteOperations.select</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00058">django.db.models.sql.compiler.SQLCompiler.select</a>, <a class="el" href="sql_2query_8py_source.html#l00243">select</a>, and <a class="el" href="sql_2query_8py_source.html#l00267">values_select</a>.</p>

</div>
</div>
<a id="ae10611f7b09a892599a602d9856275db" name="ae10611f7b09a892599a602d9856275db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae10611f7b09a892599a602d9856275db">&#9670;&#160;</a></span>add_select_related()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.add_select_related </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>fields</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Set up the select_related data structure so that we only select
certain related models (as opposed to all models, when
self.select_related=True).
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02313">2313</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2313</span>    <span class="keyword">def </span>add_select_related(self, fields):</div>
<div class="line"><span class="lineno"> 2314</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2315</span><span class="stringliteral">        Set up the select_related data structure so that we only select</span></div>
<div class="line"><span class="lineno"> 2316</span><span class="stringliteral">        certain related models (as opposed to all models, when</span></div>
<div class="line"><span class="lineno"> 2317</span><span class="stringliteral">        self.select_related=True).</span></div>
<div class="line"><span class="lineno"> 2318</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2319</span>        <span class="keywordflow">if</span> isinstance(self.select_related, bool):</div>
<div class="line"><span class="lineno"> 2320</span>            field_dict = {}</div>
<div class="line"><span class="lineno"> 2321</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2322</span>            field_dict = self.select_related</div>
<div class="line"><span class="lineno"> 2323</span>        <span class="keywordflow">for</span> field <span class="keywordflow">in</span> fields:</div>
<div class="line"><span class="lineno"> 2324</span>            d = field_dict</div>
<div class="line"><span class="lineno"> 2325</span>            <span class="keywordflow">for</span> part <span class="keywordflow">in</span> field.split(LOOKUP_SEP):</div>
<div class="line"><span class="lineno"> 2326</span>                d = d.setdefault(part, {})</div>
<div class="line"><span class="lineno"> 2327</span>        self.select_related = field_dict</div>
<div class="line"><span class="lineno"> 2328</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00261">select_related</a>.</p>

</div>
</div>
<a id="ad1aa29c1a1fec0a4c8e3e9de2c482498" name="ad1aa29c1a1fec0a4c8e3e9de2c482498"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1aa29c1a1fec0a4c8e3e9de2c482498">&#9670;&#160;</a></span>annotation_select()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.annotation_select </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return the dictionary of aggregate columns that are not masked and
should be used in the SELECT clause. Cache this result for performance.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02503">2503</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2503</span>    <span class="keyword">def </span>annotation_select(self):</div>
<div class="line"><span class="lineno"> 2504</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2505</span><span class="stringliteral">        Return the dictionary of aggregate columns that are not masked and</span></div>
<div class="line"><span class="lineno"> 2506</span><span class="stringliteral">        should be used in the SELECT clause. Cache this result for performance.</span></div>
<div class="line"><span class="lineno"> 2507</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2508</span>        <span class="keywordflow">if</span> self._annotation_select_cache <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2509</span>            <span class="keywordflow">return</span> self._annotation_select_cache</div>
<div class="line"><span class="lineno"> 2510</span>        <span class="keywordflow">elif</span> <span class="keywordflow">not</span> self.annotations:</div>
<div class="line"><span class="lineno"> 2511</span>            <span class="keywordflow">return</span> {}</div>
<div class="line"><span class="lineno"> 2512</span>        <span class="keywordflow">elif</span> self.annotation_select_mask <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2513</span>            self._annotation_select_cache = {</div>
<div class="line"><span class="lineno"> 2514</span>                k: self.annotations[k]</div>
<div class="line"><span class="lineno"> 2515</span>                <span class="keywordflow">for</span> k <span class="keywordflow">in</span> self.annotation_select_mask</div>
<div class="line"><span class="lineno"> 2516</span>                <span class="keywordflow">if</span> k <span class="keywordflow">in</span> self.annotations</div>
<div class="line"><span class="lineno"> 2517</span>            }</div>
<div class="line"><span class="lineno"> 2518</span>            <span class="keywordflow">return</span> self._annotation_select_cache</div>
<div class="line"><span class="lineno"> 2519</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2520</span>            <span class="keywordflow">return</span> self.annotations</div>
<div class="line"><span class="lineno"> 2521</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00271">_annotation_select_cache</a>, <a class="el" href="sql_2query_8py_source.html#l00270">annotation_select_mask</a>, <a class="el" href="node__classes_8py_source.html#l00672">astroid.nodes.node_classes.Arguments.annotations</a>, and <a class="el" href="sql_2query_8py_source.html#l00313">annotations</a>.</p>

</div>
</div>
<a id="a925bdfb9c6f117855fd3d2bd706638be" name="a925bdfb9c6f117855fd3d2bd706638be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a925bdfb9c6f117855fd3d2bd706638be">&#9670;&#160;</a></span>append_annotation_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.append_annotation_mask </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>names</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02423">2423</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2423</span>    <span class="keyword">def </span>append_annotation_mask(self, names):</div>
<div class="line"><span class="lineno"> 2424</span>        <span class="keywordflow">if</span> self.annotation_select_mask <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2425</span>            self.set_annotation_mask((*self.annotation_select_mask, *names))</div>
<div class="line"><span class="lineno"> 2426</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00270">annotation_select_mask</a>, and <a class="el" href="sql_2query_8py_source.html#l02415">set_annotation_mask()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01191">add_annotation()</a>, <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>, and <a class="el" href="sql_2query_8py_source.html#l02280">set_group_by()</a>.</p>

</div>
</div>
<a id="a9dd0d17082cccfe1b5c046cc044effb2" name="a9dd0d17082cccfe1b5c046cc044effb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dd0d17082cccfe1b5c046cc044effb2">&#9670;&#160;</a></span>as_sql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.as_sql </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>compiler</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>connection</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Responsible for returning a (sql, [params]) tuple to be included
in the current query.

Different backends can provide their own implementation, by
providing an `as_{vendor}` method and patching the Expression:

```
def override_as_sql(self, compiler, connection):
    # custom logic
    return super().as_sql(compiler, connection)
setattr(Expression, 'as_' + connection.vendor, override_as_sql)
```

Arguments:
 * compiler: the query compiler responsible for generating the query.
   Must have a compile method, returning a (sql, [params]) tuple.
   Calling compiler(value) will return a quoted `value`.

 * connection: the database connection used for the current query.

Return: (sql, params)
  Where `sql` is a string containing ordered sql parameters to be
  replaced with the elements of the list `params`.
</pre> 
<p>Reimplemented from <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#ad376c5a8082d66cf12725ac7ab9b0957">django.db.models.expressions.BaseExpression</a>.</p>

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01253">1253</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1253</span>    <span class="keyword">def </span>as_sql(self, compiler, connection):</div>
<div class="line"><span class="lineno"> 1254</span>        <span class="comment"># Some backends (e.g. Oracle) raise an error when a subquery contains</span></div>
<div class="line"><span class="lineno"> 1255</span>        <span class="comment"># unnecessary ORDER BY clause.</span></div>
<div class="line"><span class="lineno"> 1256</span>        <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno"> 1257</span>            self.subquery</div>
<div class="line"><span class="lineno"> 1258</span>            <span class="keywordflow">and</span> <span class="keywordflow">not</span> connection.features.ignores_unnecessary_order_by_in_subqueries</div>
<div class="line"><span class="lineno"> 1259</span>        ):</div>
<div class="line"><span class="lineno"> 1260</span>            self.clear_ordering(force=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1261</span>            <span class="keywordflow">for</span> query <span class="keywordflow">in</span> self.combined_queries:</div>
<div class="line"><span class="lineno"> 1262</span>                query.clear_ordering(force=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1263</span>        sql, params = self.get_compiler(connection=connection).as_sql()</div>
<div class="line"><span class="lineno"> 1264</span>        <span class="keywordflow">if</span> self.subquery:</div>
<div class="line"><span class="lineno"> 1265</span>            sql = <span class="stringliteral">&quot;(%s)&quot;</span> % sql</div>
<div class="line"><span class="lineno"> 1266</span>        <span class="keywordflow">return</span> sql, params</div>
<div class="line"><span class="lineno"> 1267</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01253">as_sql()</a>, <a class="el" href="sql_2query_8py_source.html#l02264">clear_ordering()</a>, <a class="el" href="sql_2query_8py_source.html#l00276">combined_queries</a>, <a class="el" href="sql_2query_8py_source.html#l00357">get_compiler()</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01695">django.db.models.expressions.Subquery.subquery</a>, and <a class="el" href="sql_2query_8py_source.html#l00236">subquery</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01253">as_sql()</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l00028">django.db.models.expressions.SQLiteNumericMixin.as_sqlite()</a>, and <a class="el" href="sql_2query_8py_source.html#l00344">sql_with_params()</a>.</p>

</div>
</div>
<a id="acc65dcaee5da0f6f1b77226a173eb032" name="acc65dcaee5da0f6f1b77226a173eb032"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc65dcaee5da0f6f1b77226a173eb032">&#9670;&#160;</a></span>base_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.base_table </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00329">329</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  329</span>    <span class="keyword">def </span>base_table(self):</div>
<div class="line"><span class="lineno">  330</span>        <span class="keywordflow">for</span> alias <span class="keywordflow">in</span> self.alias_map:</div>
<div class="line"><span class="lineno">  331</span>            <span class="keywordflow">return</span> alias</div>
<div class="line"><span class="lineno">  332</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00300">alias_map</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01075">get_initial_alias()</a>, and <a class="el" href="sql_2query_8py_source.html#l02536">trim_start()</a>.</p>

</div>
</div>
<a id="a410421a0cb9cd386f5ea3fa1ee5093b8" name="a410421a0cb9cd386f5ea3fa1ee5093b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a410421a0cb9cd386f5ea3fa1ee5093b8">&#9670;&#160;</a></span>build_filter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.build_filter </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>filter_expr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>branch_negated</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>current_negated</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>can_reuse</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>allow_joins</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>split_subq</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>check_filterable</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>summarize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>update_join_types</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Build a WhereNode for a single filter clause but don't add it
to this Query. Query.add_q() will then add this filter to the where
Node.

The 'branch_negated' tells us if the current branch contains any
negations. This will be used to determine if subqueries are needed.

The 'current_negated' is used to determine if the current filter is
negated or not and this will be used to determine if IS NULL filtering
is needed.

The difference between current_negated and branch_negated is that
branch_negated is set on first negation, but current_negated is
flipped for each negation.

Note that add_filter will not do any negating itself, that is done
upper in the code by add_q().

The 'can_reuse' is a set of reusable joins for multijoins.

The method will create a filter clause that can be added to the current
query. However, if the filter isn't added to the query then the caller
is responsible for unreffing the joins used.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01428">1428</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1439</span>    ):</div>
<div class="line"><span class="lineno"> 1440</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1441</span><span class="stringliteral">        Build a WhereNode for a single filter clause but don&#39;t add it</span></div>
<div class="line"><span class="lineno"> 1442</span><span class="stringliteral">        to this Query. Query.add_q() will then add this filter to the where</span></div>
<div class="line"><span class="lineno"> 1443</span><span class="stringliteral">        Node.</span></div>
<div class="line"><span class="lineno"> 1444</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1445</span><span class="stringliteral">        The &#39;branch_negated&#39; tells us if the current branch contains any</span></div>
<div class="line"><span class="lineno"> 1446</span><span class="stringliteral">        negations. This will be used to determine if subqueries are needed.</span></div>
<div class="line"><span class="lineno"> 1447</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1448</span><span class="stringliteral">        The &#39;current_negated&#39; is used to determine if the current filter is</span></div>
<div class="line"><span class="lineno"> 1449</span><span class="stringliteral">        negated or not and this will be used to determine if IS NULL filtering</span></div>
<div class="line"><span class="lineno"> 1450</span><span class="stringliteral">        is needed.</span></div>
<div class="line"><span class="lineno"> 1451</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1452</span><span class="stringliteral">        The difference between current_negated and branch_negated is that</span></div>
<div class="line"><span class="lineno"> 1453</span><span class="stringliteral">        branch_negated is set on first negation, but current_negated is</span></div>
<div class="line"><span class="lineno"> 1454</span><span class="stringliteral">        flipped for each negation.</span></div>
<div class="line"><span class="lineno"> 1455</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1456</span><span class="stringliteral">        Note that add_filter will not do any negating itself, that is done</span></div>
<div class="line"><span class="lineno"> 1457</span><span class="stringliteral">        upper in the code by add_q().</span></div>
<div class="line"><span class="lineno"> 1458</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1459</span><span class="stringliteral">        The &#39;can_reuse&#39; is a set of reusable joins for multijoins.</span></div>
<div class="line"><span class="lineno"> 1460</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1461</span><span class="stringliteral">        The method will create a filter clause that can be added to the current</span></div>
<div class="line"><span class="lineno"> 1462</span><span class="stringliteral">        query. However, if the filter isn&#39;t added to the query then the caller</span></div>
<div class="line"><span class="lineno"> 1463</span><span class="stringliteral">        is responsible for unreffing the joins used.</span></div>
<div class="line"><span class="lineno"> 1464</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1465</span>        <span class="keywordflow">if</span> isinstance(filter_expr, dict):</div>
<div class="line"><span class="lineno"> 1466</span>            <span class="keywordflow">raise</span> FieldError(<span class="stringliteral">&quot;Cannot parse keyword query as dict&quot;</span>)</div>
<div class="line"><span class="lineno"> 1467</span>        <span class="keywordflow">if</span> isinstance(filter_expr, Q):</div>
<div class="line"><span class="lineno"> 1468</span>            <span class="keywordflow">return</span> self._add_q(</div>
<div class="line"><span class="lineno"> 1469</span>                filter_expr,</div>
<div class="line"><span class="lineno"> 1470</span>                branch_negated=branch_negated,</div>
<div class="line"><span class="lineno"> 1471</span>                current_negated=current_negated,</div>
<div class="line"><span class="lineno"> 1472</span>                used_aliases=can_reuse,</div>
<div class="line"><span class="lineno"> 1473</span>                allow_joins=allow_joins,</div>
<div class="line"><span class="lineno"> 1474</span>                split_subq=split_subq,</div>
<div class="line"><span class="lineno"> 1475</span>                check_filterable=check_filterable,</div>
<div class="line"><span class="lineno"> 1476</span>                summarize=summarize,</div>
<div class="line"><span class="lineno"> 1477</span>                update_join_types=update_join_types,</div>
<div class="line"><span class="lineno"> 1478</span>            )</div>
<div class="line"><span class="lineno"> 1479</span>        <span class="keywordflow">if</span> hasattr(filter_expr, <span class="stringliteral">&quot;resolve_expression&quot;</span>):</div>
<div class="line"><span class="lineno"> 1480</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> getattr(filter_expr, <span class="stringliteral">&quot;conditional&quot;</span>, <span class="keyword">False</span>):</div>
<div class="line"><span class="lineno"> 1481</span>                <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Cannot filter against a non-conditional expression.&quot;</span>)</div>
<div class="line"><span class="lineno"> 1482</span>            condition = filter_expr.resolve_expression(</div>
<div class="line"><span class="lineno"> 1483</span>                self, allow_joins=allow_joins, reuse=can_reuse, summarize=summarize</div>
<div class="line"><span class="lineno"> 1484</span>            )</div>
<div class="line"><span class="lineno"> 1485</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(condition, Lookup):</div>
<div class="line"><span class="lineno"> 1486</span>                condition = self.build_lookup([<span class="stringliteral">&quot;exact&quot;</span>], condition, <span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1487</span>            <span class="keywordflow">return</span> WhereNode([condition], connector=AND), []</div>
<div class="line"><span class="lineno"> 1488</span>        arg, value = filter_expr</div>
<div class="line"><span class="lineno"> 1489</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> arg:</div>
<div class="line"><span class="lineno"> 1490</span>            <span class="keywordflow">raise</span> FieldError(<span class="stringliteral">&quot;Cannot parse keyword query %r&quot;</span> % arg)</div>
<div class="line"><span class="lineno"> 1491</span>        lookups, parts, reffed_expression = self.solve_lookup_type(arg, summarize)</div>
<div class="line"><span class="lineno"> 1492</span> </div>
<div class="line"><span class="lineno"> 1493</span>        <span class="keywordflow">if</span> check_filterable:</div>
<div class="line"><span class="lineno"> 1494</span>            self.check_filterable(reffed_expression)</div>
<div class="line"><span class="lineno"> 1495</span> </div>
<div class="line"><span class="lineno"> 1496</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> allow_joins <span class="keywordflow">and</span> len(parts) &gt; 1:</div>
<div class="line"><span class="lineno"> 1497</span>            <span class="keywordflow">raise</span> FieldError(<span class="stringliteral">&quot;Joined field references are not permitted in this query&quot;</span>)</div>
<div class="line"><span class="lineno"> 1498</span> </div>
<div class="line"><span class="lineno"> 1499</span>        pre_joins = self.alias_refcount.copy()</div>
<div class="line"><span class="lineno"> 1500</span>        value = self.resolve_lookup_value(value, can_reuse, allow_joins, summarize)</div>
<div class="line"><span class="lineno"> 1501</span>        used_joins = {</div>
<div class="line"><span class="lineno"> 1502</span>            k <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> self.alias_refcount.items() <span class="keywordflow">if</span> v &gt; pre_joins.get(k, 0)</div>
<div class="line"><span class="lineno"> 1503</span>        }</div>
<div class="line"><span class="lineno"> 1504</span> </div>
<div class="line"><span class="lineno"> 1505</span>        <span class="keywordflow">if</span> check_filterable:</div>
<div class="line"><span class="lineno"> 1506</span>            self.check_filterable(value)</div>
<div class="line"><span class="lineno"> 1507</span> </div>
<div class="line"><span class="lineno"> 1508</span>        <span class="keywordflow">if</span> reffed_expression:</div>
<div class="line"><span class="lineno"> 1509</span>            condition = self.build_lookup(lookups, reffed_expression, value)</div>
<div class="line"><span class="lineno"> 1510</span>            <span class="keywordflow">return</span> WhereNode([condition], connector=AND), []</div>
<div class="line"><span class="lineno"> 1511</span> </div>
<div class="line"><span class="lineno"> 1512</span>        opts = self.get_meta()</div>
<div class="line"><span class="lineno"> 1513</span>        alias = self.get_initial_alias()</div>
<div class="line"><span class="lineno"> 1514</span>        allow_many = <span class="keywordflow">not</span> branch_negated <span class="keywordflow">or</span> <span class="keywordflow">not</span> split_subq</div>
<div class="line"><span class="lineno"> 1515</span> </div>
<div class="line"><span class="lineno"> 1516</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1517</span>            join_info = self.setup_joins(</div>
<div class="line"><span class="lineno"> 1518</span>                parts,</div>
<div class="line"><span class="lineno"> 1519</span>                opts,</div>
<div class="line"><span class="lineno"> 1520</span>                alias,</div>
<div class="line"><span class="lineno"> 1521</span>                can_reuse=can_reuse,</div>
<div class="line"><span class="lineno"> 1522</span>                allow_many=allow_many,</div>
<div class="line"><span class="lineno"> 1523</span>            )</div>
<div class="line"><span class="lineno"> 1524</span> </div>
<div class="line"><span class="lineno"> 1525</span>            <span class="comment"># Prevent iterator from being consumed by check_related_objects()</span></div>
<div class="line"><span class="lineno"> 1526</span>            <span class="keywordflow">if</span> isinstance(value, Iterator):</div>
<div class="line"><span class="lineno"> 1527</span>                value = list(value)</div>
<div class="line"><span class="lineno"> 1528</span>            self.check_related_objects(join_info.final_field, value, join_info.opts)</div>
<div class="line"><span class="lineno"> 1529</span> </div>
<div class="line"><span class="lineno"> 1530</span>            <span class="comment"># split_exclude() needs to know which joins were generated for the</span></div>
<div class="line"><span class="lineno"> 1531</span>            <span class="comment"># lookup parts</span></div>
<div class="line"><span class="lineno"> 1532</span>            self._lookup_joins = join_info.joins</div>
<div class="line"><span class="lineno"> 1533</span>        <span class="keywordflow">except</span> MultiJoin <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno"> 1534</span>            <span class="keywordflow">return</span> self.split_exclude(filter_expr, can_reuse, e.names_with_path)</div>
<div class="line"><span class="lineno"> 1535</span> </div>
<div class="line"><span class="lineno"> 1536</span>        <span class="comment"># Update used_joins before trimming since they are reused to determine</span></div>
<div class="line"><span class="lineno"> 1537</span>        <span class="comment"># which joins could be later promoted to INNER.</span></div>
<div class="line"><span class="lineno"> 1538</span>        used_joins.update(join_info.joins)</div>
<div class="line"><span class="lineno"> 1539</span>        targets, alias, join_list = self.trim_joins(</div>
<div class="line"><span class="lineno"> 1540</span>            join_info.targets, join_info.joins, join_info.path</div>
<div class="line"><span class="lineno"> 1541</span>        )</div>
<div class="line"><span class="lineno"> 1542</span>        <span class="keywordflow">if</span> can_reuse <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1543</span>            can_reuse.update(join_list)</div>
<div class="line"><span class="lineno"> 1544</span> </div>
<div class="line"><span class="lineno"> 1545</span>        <span class="keywordflow">if</span> join_info.final_field.is_relation:</div>
<div class="line"><span class="lineno"> 1546</span>            <span class="keywordflow">if</span> len(targets) == 1:</div>
<div class="line"><span class="lineno"> 1547</span>                col = self._get_col(targets[0], join_info.final_field, alias)</div>
<div class="line"><span class="lineno"> 1548</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1549</span>                col = MultiColSource(</div>
<div class="line"><span class="lineno"> 1550</span>                    alias, targets, join_info.targets, join_info.final_field</div>
<div class="line"><span class="lineno"> 1551</span>                )</div>
<div class="line"><span class="lineno"> 1552</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1553</span>            col = self._get_col(targets[0], join_info.final_field, alias)</div>
<div class="line"><span class="lineno"> 1554</span> </div>
<div class="line"><span class="lineno"> 1555</span>        condition = self.build_lookup(lookups, col, value)</div>
<div class="line"><span class="lineno"> 1556</span>        lookup_type = condition.lookup_name</div>
<div class="line"><span class="lineno"> 1557</span>        clause = WhereNode([condition], connector=AND)</div>
<div class="line"><span class="lineno"> 1558</span> </div>
<div class="line"><span class="lineno"> 1559</span>        require_outer = (</div>
<div class="line"><span class="lineno"> 1560</span>            lookup_type == <span class="stringliteral">&quot;isnull&quot;</span> <span class="keywordflow">and</span> condition.rhs <span class="keywordflow">is</span> <span class="keyword">True</span> <span class="keywordflow">and</span> <span class="keywordflow">not</span> current_negated</div>
<div class="line"><span class="lineno"> 1561</span>        )</div>
<div class="line"><span class="lineno"> 1562</span>        <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno"> 1563</span>            current_negated</div>
<div class="line"><span class="lineno"> 1564</span>            <span class="keywordflow">and</span> (lookup_type != <span class="stringliteral">&quot;isnull&quot;</span> <span class="keywordflow">or</span> condition.rhs <span class="keywordflow">is</span> <span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1565</span>            <span class="keywordflow">and</span> condition.rhs <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1566</span>        ):</div>
<div class="line"><span class="lineno"> 1567</span>            require_outer = <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1568</span>            <span class="keywordflow">if</span> lookup_type != <span class="stringliteral">&quot;isnull&quot;</span>:</div>
<div class="line"><span class="lineno"> 1569</span>                <span class="comment"># The condition added here will be SQL like this:</span></div>
<div class="line"><span class="lineno"> 1570</span>                <span class="comment"># NOT (col IS NOT NULL), where the first NOT is added in</span></div>
<div class="line"><span class="lineno"> 1571</span>                <span class="comment"># upper layers of code. The reason for addition is that if col</span></div>
<div class="line"><span class="lineno"> 1572</span>                <span class="comment"># is null, then col != someval will result in SQL &quot;unknown&quot;</span></div>
<div class="line"><span class="lineno"> 1573</span>                <span class="comment"># which isn&#39;t the same as in Python. The Python None handling</span></div>
<div class="line"><span class="lineno"> 1574</span>                <span class="comment"># is wanted, and it can be gotten by</span></div>
<div class="line"><span class="lineno"> 1575</span>                <span class="comment"># (col IS NULL OR col != someval)</span></div>
<div class="line"><span class="lineno"> 1576</span>                <span class="comment">#   &lt;=&gt;</span></div>
<div class="line"><span class="lineno"> 1577</span>                <span class="comment"># NOT (col IS NOT NULL AND col = someval).</span></div>
<div class="line"><span class="lineno"> 1578</span>                <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno"> 1579</span>                    self.is_nullable(targets[0])</div>
<div class="line"><span class="lineno"> 1580</span>                    <span class="keywordflow">or</span> self.alias_map[join_list[-1]].join_type == LOUTER</div>
<div class="line"><span class="lineno"> 1581</span>                ):</div>
<div class="line"><span class="lineno"> 1582</span>                    lookup_class = targets[0].get_lookup(<span class="stringliteral">&quot;isnull&quot;</span>)</div>
<div class="line"><span class="lineno"> 1583</span>                    col = self._get_col(targets[0], join_info.targets[0], alias)</div>
<div class="line"><span class="lineno"> 1584</span>                    clause.add(lookup_class(col, <span class="keyword">False</span>), AND)</div>
<div class="line"><span class="lineno"> 1585</span>                <span class="comment"># If someval is a nullable column, someval IS NOT NULL is</span></div>
<div class="line"><span class="lineno"> 1586</span>                <span class="comment"># added.</span></div>
<div class="line"><span class="lineno"> 1587</span>                <span class="keywordflow">if</span> isinstance(value, Col) <span class="keywordflow">and</span> self.is_nullable(value.target):</div>
<div class="line"><span class="lineno"> 1588</span>                    lookup_class = value.target.get_lookup(<span class="stringliteral">&quot;isnull&quot;</span>)</div>
<div class="line"><span class="lineno"> 1589</span>                    clause.add(lookup_class(value, <span class="keyword">False</span>), AND)</div>
<div class="line"><span class="lineno"> 1590</span>        <span class="keywordflow">return</span> clause, used_joins <span class="keywordflow">if</span> <span class="keywordflow">not</span> require_outer <span class="keywordflow">else</span> ()</div>
<div class="line"><span class="lineno"> 1591</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01631">_add_q()</a>, <a class="el" href="sql_2query_8py_source.html#l00294">alias_refcount</a>, <a class="el" href="sql_2query_8py_source.html#l01360">build_lookup()</a>, <a class="el" href="sql_2query_8py_source.html#l01347">check_filterable()</a>, <a class="el" href="sql_2query_8py_source.html#l01324">check_related_objects()</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l00429">django.db.models.expressions.BaseExpression.copy()</a>, <a class="el" href="sql_2query_8py_source.html#l01075">get_initial_alias()</a>, <a class="el" href="core_2management_2commands_2inspectdb_8py_source.html#l00376">django.core.management.commands.inspectdb.Command.get_meta()</a>, <a class="el" href="sql_2query_8py_source.html#l00366">get_meta()</a>, <a class="el" href="sql_2query_8py_source.html#l01268">resolve_lookup_value()</a>, <a class="el" href="sql_2query_8py_source.html#l01819">setup_joins()</a>, and <a class="el" href="sql_2query_8py_source.html#l01289">solve_lookup_type()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01631">_add_q()</a>, <a class="el" href="sql_2query_8py_source.html#l01614">build_where()</a>, and <a class="el" href="sql_2query_8py_source.html#l02031">split_exclude()</a>.</p>

</div>
</div>
<a id="a6f0053066d06c4acb70e5a9e38b5e574" name="a6f0053066d06c4acb70e5a9e38b5e574"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f0053066d06c4acb70e5a9e38b5e574">&#9670;&#160;</a></span>build_lookup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.build_lookup </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>lookups</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>lhs</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>rhs</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Try to extract transforms and lookup from given lhs.

The lhs value is something that works like SQLExpression.
The rhs value is what the lookup is going to compare against.
The lookups is a list of names to extract using get_lookup()
and get_transform().
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01360">1360</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1360</span>    <span class="keyword">def </span>build_lookup(self, lookups, lhs, rhs):</div>
<div class="line"><span class="lineno"> 1361</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1362</span><span class="stringliteral">        Try to extract transforms and lookup from given lhs.</span></div>
<div class="line"><span class="lineno"> 1363</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1364</span><span class="stringliteral">        The lhs value is something that works like SQLExpression.</span></div>
<div class="line"><span class="lineno"> 1365</span><span class="stringliteral">        The rhs value is what the lookup is going to compare against.</span></div>
<div class="line"><span class="lineno"> 1366</span><span class="stringliteral">        The lookups is a list of names to extract using get_lookup()</span></div>
<div class="line"><span class="lineno"> 1367</span><span class="stringliteral">        and get_transform().</span></div>
<div class="line"><span class="lineno"> 1368</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1369</span>        <span class="comment"># __exact is the default lookup if one isn&#39;t given.</span></div>
<div class="line"><span class="lineno"> 1370</span>        *transforms, lookup_name = lookups <span class="keywordflow">or</span> [<span class="stringliteral">&quot;exact&quot;</span>]</div>
<div class="line"><span class="lineno"> 1371</span>        <span class="keywordflow">for</span> name <span class="keywordflow">in</span> transforms:</div>
<div class="line"><span class="lineno"> 1372</span>            lhs = self.try_transform(lhs, name)</div>
<div class="line"><span class="lineno"> 1373</span>        <span class="comment"># First try get_lookup() so that the lookup takes precedence if the lhs</span></div>
<div class="line"><span class="lineno"> 1374</span>        <span class="comment"># supports both transform and lookup for the name.</span></div>
<div class="line"><span class="lineno"> 1375</span>        lookup_class = lhs.get_lookup(lookup_name)</div>
<div class="line"><span class="lineno"> 1376</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> lookup_class:</div>
<div class="line"><span class="lineno"> 1377</span>            <span class="comment"># A lookup wasn&#39;t found. Try to interpret the name as a transform</span></div>
<div class="line"><span class="lineno"> 1378</span>            <span class="comment"># and do an Exact lookup against it.</span></div>
<div class="line"><span class="lineno"> 1379</span>            lhs = self.try_transform(lhs, lookup_name)</div>
<div class="line"><span class="lineno"> 1380</span>            lookup_name = <span class="stringliteral">&quot;exact&quot;</span></div>
<div class="line"><span class="lineno"> 1381</span>            lookup_class = lhs.get_lookup(lookup_name)</div>
<div class="line"><span class="lineno"> 1382</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> lookup_class:</div>
<div class="line"><span class="lineno"> 1383</span>                <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 1384</span> </div>
<div class="line"><span class="lineno"> 1385</span>        lookup = lookup_class(lhs, rhs)</div>
<div class="line"><span class="lineno"> 1386</span>        <span class="comment"># Interpret &#39;__exact=None&#39; as the sql &#39;is NULL&#39;; otherwise, reject all</span></div>
<div class="line"><span class="lineno"> 1387</span>        <span class="comment"># uses of None as a query value unless the lookup supports it.</span></div>
<div class="line"><span class="lineno"> 1388</span>        <span class="keywordflow">if</span> lookup.rhs <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> <span class="keywordflow">not</span> lookup.can_use_none_as_rhs:</div>
<div class="line"><span class="lineno"> 1389</span>            <span class="keywordflow">if</span> lookup_name <span class="keywordflow">not</span> <span class="keywordflow">in</span> (<span class="stringliteral">&quot;exact&quot;</span>, <span class="stringliteral">&quot;iexact&quot;</span>):</div>
<div class="line"><span class="lineno"> 1390</span>                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Cannot use None as a query value&quot;</span>)</div>
<div class="line"><span class="lineno"> 1391</span>            <span class="keywordflow">return</span> lhs.get_lookup(<span class="stringliteral">&quot;isnull&quot;</span>)(lhs, <span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1392</span> </div>
<div class="line"><span class="lineno"> 1393</span>        <span class="comment"># For Oracle &#39;&#39; is equivalent to null. The check must be done at this</span></div>
<div class="line"><span class="lineno"> 1394</span>        <span class="comment"># stage because join promotion can&#39;t be done in the compiler. Using</span></div>
<div class="line"><span class="lineno"> 1395</span>        <span class="comment"># DEFAULT_DB_ALIAS isn&#39;t nice but it&#39;s the best that can be done here.</span></div>
<div class="line"><span class="lineno"> 1396</span>        <span class="comment"># A similar thing is done in is_nullable(), too.</span></div>
<div class="line"><span class="lineno"> 1397</span>        <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno"> 1398</span>            lookup_name == <span class="stringliteral">&quot;exact&quot;</span></div>
<div class="line"><span class="lineno"> 1399</span>            <span class="keywordflow">and</span> lookup.rhs == <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1400</span>            <span class="keywordflow">and</span> connections[DEFAULT_DB_ALIAS].features.interprets_empty_strings_as_nulls</div>
<div class="line"><span class="lineno"> 1401</span>        ):</div>
<div class="line"><span class="lineno"> 1402</span>            <span class="keywordflow">return</span> lhs.get_lookup(<span class="stringliteral">&quot;isnull&quot;</span>)(lhs, <span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1403</span> </div>
<div class="line"><span class="lineno"> 1404</span>        <span class="keywordflow">return</span> lookup</div>
<div class="line"><span class="lineno"> 1405</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01406">try_transform()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01439">build_filter()</a>.</p>

</div>
</div>
<a id="a6cd85209a22990051ee2353e5a7908ae" name="a6cd85209a22990051ee2353e5a7908ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cd85209a22990051ee2353e5a7908ae">&#9670;&#160;</a></span>build_where()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.build_where </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>filter_expr</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01614">1614</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1614</span>    <span class="keyword">def </span>build_where(self, filter_expr):</div>
<div class="line"><span class="lineno"> 1615</span>        <span class="keywordflow">return</span> self.build_filter(filter_expr, allow_joins=<span class="keyword">False</span>)[0]</div>
<div class="line"><span class="lineno"> 1616</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01439">build_filter()</a>.</p>

</div>
</div>
<a id="a22505e1b31a024141dbd0a12425e991f" name="a22505e1b31a024141dbd0a12425e991f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22505e1b31a024141dbd0a12425e991f">&#9670;&#160;</a></span>bump_prefix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.bump_prefix </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>other_query</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>exclude</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Change the alias prefix to the next letter in the alphabet in a way
that the other query's aliases and this query's aliases will not
conflict. Even tables that previously had no alias will get an alias
after this call. To prevent changing aliases use the exclude parameter.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01020">1020</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1020</span>    <span class="keyword">def </span>bump_prefix(self, other_query, exclude=None):</div>
<div class="line"><span class="lineno"> 1021</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1022</span><span class="stringliteral">        Change the alias prefix to the next letter in the alphabet in a way</span></div>
<div class="line"><span class="lineno"> 1023</span><span class="stringliteral">        that the other query&#39;s aliases and this query&#39;s aliases will not</span></div>
<div class="line"><span class="lineno"> 1024</span><span class="stringliteral">        conflict. Even tables that previously had no alias will get an alias</span></div>
<div class="line"><span class="lineno"> 1025</span><span class="stringliteral">        after this call. To prevent changing aliases use the exclude parameter.</span></div>
<div class="line"><span class="lineno"> 1026</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1027</span> </div>
<div class="line"><span class="lineno"> 1028</span>        <span class="keyword">def </span>prefix_gen():</div>
<div class="line"><span class="lineno"> 1029</span>            <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1030</span><span class="stringliteral">            Generate a sequence of characters in alphabetical order:</span></div>
<div class="line"><span class="lineno"> 1031</span><span class="stringliteral">                -&gt; &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, ...</span></div>
<div class="line"><span class="lineno"> 1032</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1033</span><span class="stringliteral">            When the alphabet is finished, the sequence will continue with the</span></div>
<div class="line"><span class="lineno"> 1034</span><span class="stringliteral">            Cartesian product:</span></div>
<div class="line"><span class="lineno"> 1035</span><span class="stringliteral">                -&gt; &#39;AA&#39;, &#39;AB&#39;, &#39;AC&#39;, ...</span></div>
<div class="line"><span class="lineno"> 1036</span><span class="stringliteral">            &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1037</span>            alphabet = ascii_uppercase</div>
<div class="line"><span class="lineno"> 1038</span>            prefix = chr(ord(self.alias_prefix) + 1)</div>
<div class="line"><span class="lineno"> 1039</span>            <span class="keywordflow">yield</span> prefix</div>
<div class="line"><span class="lineno"> 1040</span>            <span class="keywordflow">for</span> n <span class="keywordflow">in</span> count(1):</div>
<div class="line"><span class="lineno"> 1041</span>                seq = alphabet[alphabet.index(prefix) :] <span class="keywordflow">if</span> prefix <span class="keywordflow">else</span> alphabet</div>
<div class="line"><span class="lineno"> 1042</span>                <span class="keywordflow">for</span> s <span class="keywordflow">in</span> product(seq, repeat=n):</div>
<div class="line"><span class="lineno"> 1043</span>                    <span class="keywordflow">yield</span> <span class="stringliteral">&quot;&quot;</span>.join(s)</div>
<div class="line"><span class="lineno"> 1044</span>                prefix = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1045</span> </div>
<div class="line"><span class="lineno"> 1046</span>        <span class="keywordflow">if</span> self.alias_prefix != other_query.alias_prefix:</div>
<div class="line"><span class="lineno"> 1047</span>            <span class="comment"># No clashes between self and outer query should be possible.</span></div>
<div class="line"><span class="lineno"> 1048</span>            <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 1049</span> </div>
<div class="line"><span class="lineno"> 1050</span>        <span class="comment"># Explicitly avoid infinite loop. The constant divider is based on how</span></div>
<div class="line"><span class="lineno"> 1051</span>        <span class="comment"># much depth recursive subquery references add to the stack. This value</span></div>
<div class="line"><span class="lineno"> 1052</span>        <span class="comment"># might need to be adjusted when adding or removing function calls from</span></div>
<div class="line"><span class="lineno"> 1053</span>        <span class="comment"># the code path in charge of performing these operations.</span></div>
<div class="line"><span class="lineno"> 1054</span>        local_recursion_limit = sys.getrecursionlimit() // 16</div>
<div class="line"><span class="lineno"> 1055</span>        <span class="keywordflow">for</span> pos, prefix <span class="keywordflow">in</span> enumerate(prefix_gen()):</div>
<div class="line"><span class="lineno"> 1056</span>            <span class="keywordflow">if</span> prefix <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.subq_aliases:</div>
<div class="line"><span class="lineno"> 1057</span>                self.alias_prefix = prefix</div>
<div class="line"><span class="lineno"> 1058</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 1059</span>            <span class="keywordflow">if</span> pos &gt; local_recursion_limit:</div>
<div class="line"><span class="lineno"> 1060</span>                <span class="keywordflow">raise</span> RecursionError(</div>
<div class="line"><span class="lineno"> 1061</span>                    <span class="stringliteral">&quot;Maximum recursion depth exceeded: too many subqueries.&quot;</span></div>
<div class="line"><span class="lineno"> 1062</span>                )</div>
<div class="line"><span class="lineno"> 1063</span>        self.subq_aliases = self.subq_aliases.union([self.alias_prefix])</div>
<div class="line"><span class="lineno"> 1064</span>        other_query.subq_aliases = other_query.subq_aliases.union(self.subq_aliases)</div>
<div class="line"><span class="lineno"> 1065</span>        <span class="keywordflow">if</span> exclude <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1066</span>            exclude = {}</div>
<div class="line"><span class="lineno"> 1067</span>        self.change_aliases(</div>
<div class="line"><span class="lineno"> 1068</span>            {</div>
<div class="line"><span class="lineno"> 1069</span>                alias: <span class="stringliteral">&quot;%s%d&quot;</span> % (self.alias_prefix, pos)</div>
<div class="line"><span class="lineno"> 1070</span>                <span class="keywordflow">for</span> pos, alias <span class="keywordflow">in</span> enumerate(self.alias_map)</div>
<div class="line"><span class="lineno"> 1071</span>                <span class="keywordflow">if</span> alias <span class="keywordflow">not</span> <span class="keywordflow">in</span> exclude</div>
<div class="line"><span class="lineno"> 1072</span>            }</div>
<div class="line"><span class="lineno"> 1073</span>        )</div>
<div class="line"><span class="lineno"> 1074</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00300">alias_map</a>, <a class="el" href="sql_2query_8py_source.html#l00222">alias_prefix</a>, <a class="el" href="sql_2query_8py_source.html#l00973">change_aliases()</a>, <a class="el" href="sql_2query_8py_source.html#l01097">join()</a>, and <a class="el" href="sql_2query_8py_source.html#l00224">subq_aliases</a>.</p>

</div>
</div>
<a id="ac25a5abd3c7f817e6e70995a5e69d3fd" name="ac25a5abd3c7f817e6e70995a5e69d3fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac25a5abd3c7f817e6e70995a5e69d3fd">&#9670;&#160;</a></span>can_filter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.can_filter </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return True if adding filters to this instance is still possible.

Typically, this means no limits or offsets have been put on the results.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02142">2142</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2142</span>    <span class="keyword">def </span>can_filter(self):</div>
<div class="line"><span class="lineno"> 2143</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2144</span><span class="stringliteral">        Return True if adding filters to this instance is still possible.</span></div>
<div class="line"><span class="lineno"> 2145</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 2146</span><span class="stringliteral">        Typically, this means no limits or offsets have been put on the results.</span></div>
<div class="line"><span class="lineno"> 2147</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2148</span>        <span class="keywordflow">return</span> <span class="keywordflow">not</span> self.is_sliced</div>
<div class="line"><span class="lineno"> 2149</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00685">is_sliced</a>.</p>

</div>
</div>
<a id="aa3fe5320676d05bc24bd69dcfc785a8f" name="aa3fe5320676d05bc24bd69dcfc785a8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3fe5320676d05bc24bd69dcfc785a8f">&#9670;&#160;</a></span>chain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.chain </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>klass</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return a copy of the current Query that's ready for another operation.
The klass argument changes the type of the Query, e.g. UpdateQuery.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00420">420</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  420</span>    <span class="keyword">def </span>chain(self, klass=None):</div>
<div class="line"><span class="lineno">  421</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  422</span><span class="stringliteral">        Return a copy of the current Query that&#39;s ready for another operation.</span></div>
<div class="line"><span class="lineno">  423</span><span class="stringliteral">        The klass argument changes the type of the Query, e.g. UpdateQuery.</span></div>
<div class="line"><span class="lineno">  424</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  425</span>        obj = self.clone()</div>
<div class="line"><span class="lineno">  426</span>        <span class="keywordflow">if</span> klass <span class="keywordflow">and</span> obj.__class__ != klass:</div>
<div class="line"><span class="lineno">  427</span>            obj.__class__ = klass</div>
<div class="line"><span class="lineno">  428</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> obj.filter_is_sticky:</div>
<div class="line"><span class="lineno">  429</span>            obj.used_aliases = set()</div>
<div class="line"><span class="lineno">  430</span>        obj.filter_is_sticky = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  431</span>        <span class="keywordflow">if</span> hasattr(obj, <span class="stringliteral">&quot;_setup_query&quot;</span>):</div>
<div class="line"><span class="lineno">  432</span>            obj._setup_query()</div>
<div class="line"><span class="lineno">  433</span>        <span class="keywordflow">return</span> obj</div>
<div class="line"><span class="lineno">  434</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="astroid_2context_8py_source.html#l00122">astroid.context.InferenceContext.clone()</a>, <a class="el" href="geometries_8py_source.html#l00433">django.contrib.gis.gdal.geometries.OGRGeometry.clone()</a>, <a class="el" href="django_2contrib_2gis_2gdal_2raster_2source_8py_source.html#l00461">django.contrib.gis.gdal.raster.source.GDALRaster.clone()</a>, <a class="el" href="gdal_2srs_8py_source.html#l00168">django.contrib.gis.gdal.srs.SpatialReference.clone()</a>, <a class="el" href="coordseq_8py_source.html#l00176">django.contrib.gis.geos.coordseq.GEOSCoordSeq.clone()</a>, <a class="el" href="geos_2geometry_8py_source.html#l00674">django.contrib.gis.geos.geometry.GEOSGeometryBase.clone()</a>, <a class="el" href="state_8py_source.html#l00920">django.db.migrations.state.ModelState.clone()</a>, <a class="el" href="state_8py_source.html#l00548">django.db.migrations.state.ProjectState.clone()</a>, <a class="el" href="state_8py_source.html#l00678">django.db.migrations.state.StateApps.clone()</a>, <a class="el" href="db_2models_2constraints_8py_source.html#l00131">django.db.models.constraints.BaseConstraint.clone()</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00661">django.db.models.fields.Field.clone()</a>, <a class="el" href="db_2models_2indexes_8py_source.html#l00153">django.db.models.indexes.Index.clone()</a>, <a class="el" href="query__utils_8py_source.html#l00461">django.db.models.query_utils.FilteredRelation.clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, and <a class="el" href="sql_2query_8py_source.html#l00161">django.db.models.sql.query.RawQuery.clone()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01235">get_external_cols()</a>.</p>

</div>
</div>
<a id="af401365dc439a0c944fe7a1f83979101" name="af401365dc439a0c944fe7a1f83979101"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af401365dc439a0c944fe7a1f83979101">&#9670;&#160;</a></span>change_aliases()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.change_aliases </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>change_map</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Change the aliases in change_map (which maps old-alias -&gt; new-alias),
relabelling any references to them in select columns and the where
clause.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00973">973</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  973</span>    <span class="keyword">def </span>change_aliases(self, change_map):</div>
<div class="line"><span class="lineno">  974</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  975</span><span class="stringliteral">        Change the aliases in change_map (which maps old-alias -&gt; new-alias),</span></div>
<div class="line"><span class="lineno">  976</span><span class="stringliteral">        relabelling any references to them in select columns and the where</span></div>
<div class="line"><span class="lineno">  977</span><span class="stringliteral">        clause.</span></div>
<div class="line"><span class="lineno">  978</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  979</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> change_map:</div>
<div class="line"><span class="lineno">  980</span>            <span class="keywordflow">return</span> self</div>
<div class="line"><span class="lineno">  981</span>        <span class="comment"># If keys and values of change_map were to intersect, an alias might be</span></div>
<div class="line"><span class="lineno">  982</span>        <span class="comment"># updated twice (e.g. T4 -&gt; T5, T5 -&gt; T6, so also T4 -&gt; T6) depending</span></div>
<div class="line"><span class="lineno">  983</span>        <span class="comment"># on their order in change_map.</span></div>
<div class="line"><span class="lineno">  984</span>        <span class="keyword">assert</span> set(change_map).isdisjoint(change_map.values())</div>
<div class="line"><span class="lineno">  985</span> </div>
<div class="line"><span class="lineno">  986</span>        <span class="comment"># 1. Update references in &quot;select&quot; (normal columns plus aliases),</span></div>
<div class="line"><span class="lineno">  987</span>        <span class="comment"># &quot;group by&quot; and &quot;where&quot;.</span></div>
<div class="line"><span class="lineno">  988</span>        self.where.relabel_aliases(change_map)</div>
<div class="line"><span class="lineno">  989</span>        <span class="keywordflow">if</span> isinstance(self.group_by, tuple):</div>
<div class="line"><span class="lineno">  990</span>            self.group_by = tuple(</div>
<div class="line"><span class="lineno">  991</span>                [col.relabeled_clone(change_map) <span class="keywordflow">for</span> col <span class="keywordflow">in</span> self.group_by]</div>
<div class="line"><span class="lineno">  992</span>            )</div>
<div class="line"><span class="lineno">  993</span>        self.select = tuple([col.relabeled_clone(change_map) <span class="keywordflow">for</span> col <span class="keywordflow">in</span> self.select])</div>
<div class="line"><span class="lineno">  994</span>        self.annotations = self.annotations <span class="keywordflow">and</span> {</div>
<div class="line"><span class="lineno">  995</span>            key: col.relabeled_clone(change_map)</div>
<div class="line"><span class="lineno">  996</span>            <span class="keywordflow">for</span> key, col <span class="keywordflow">in</span> self.annotations.items()</div>
<div class="line"><span class="lineno">  997</span>        }</div>
<div class="line"><span class="lineno">  998</span> </div>
<div class="line"><span class="lineno">  999</span>        <span class="comment"># 2. Rename the alias in the internal table/alias datastructures.</span></div>
<div class="line"><span class="lineno"> 1000</span>        <span class="keywordflow">for</span> old_alias, new_alias <span class="keywordflow">in</span> change_map.items():</div>
<div class="line"><span class="lineno"> 1001</span>            <span class="keywordflow">if</span> old_alias <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.alias_map:</div>
<div class="line"><span class="lineno"> 1002</span>                <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 1003</span>            alias_data = self.alias_map[old_alias].relabeled_clone(change_map)</div>
<div class="line"><span class="lineno"> 1004</span>            self.alias_map[new_alias] = alias_data</div>
<div class="line"><span class="lineno"> 1005</span>            self.alias_refcount[new_alias] = self.alias_refcount[old_alias]</div>
<div class="line"><span class="lineno"> 1006</span>            del self.alias_refcount[old_alias]</div>
<div class="line"><span class="lineno"> 1007</span>            del self.alias_map[old_alias]</div>
<div class="line"><span class="lineno"> 1008</span> </div>
<div class="line"><span class="lineno"> 1009</span>            table_aliases = self.table_map[alias_data.table_name]</div>
<div class="line"><span class="lineno"> 1010</span>            <span class="keywordflow">for</span> pos, alias <span class="keywordflow">in</span> enumerate(table_aliases):</div>
<div class="line"><span class="lineno"> 1011</span>                <span class="keywordflow">if</span> alias == old_alias:</div>
<div class="line"><span class="lineno"> 1012</span>                    table_aliases[pos] = new_alias</div>
<div class="line"><span class="lineno"> 1013</span>                    <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 1014</span>        self.external_aliases = {</div>
<div class="line"><span class="lineno"> 1015</span>            <span class="comment"># Table is aliased or it&#39;s being changed and thus is aliased.</span></div>
<div class="line"><span class="lineno"> 1016</span>            change_map.get(alias, alias): (aliased <span class="keywordflow">or</span> alias <span class="keywordflow">in</span> change_map)</div>
<div class="line"><span class="lineno"> 1017</span>            <span class="keywordflow">for</span> alias, aliased <span class="keywordflow">in</span> self.external_aliases.items()</div>
<div class="line"><span class="lineno"> 1018</span>        }</div>
<div class="line"><span class="lineno"> 1019</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00300">alias_map</a>, <a class="el" href="sql_2query_8py_source.html#l00294">alias_refcount</a>, <a class="el" href="node__classes_8py_source.html#l00672">astroid.nodes.node_classes.Arguments.annotations</a>, <a class="el" href="sql_2query_8py_source.html#l00313">annotations</a>, <a class="el" href="sql_2query_8py_source.html#l00307">external_aliases</a>, <a class="el" href="sql_2query_8py_source.html#l00250">group_by</a>, <a class="el" href="sql_2query_8py_source.html#l00435">relabeled_clone()</a>, <a class="el" href="contrib_2gis_2db_2backends_2base_2operations_8py_source.html#l00020">django.contrib.gis.db.backends.base.operations.BaseSpatialOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2oracle_2operations_8py_source.html#l00099">django.contrib.gis.db.backends.oracle.operations.OracleOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2postgis_2operations_8py_source.html#l00167">django.contrib.gis.db.backends.postgis.operations.PostGISOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2spatialite_2operations_8py_source.html#l00066">django.contrib.gis.db.backends.spatialite.operations.SpatiaLiteOperations.select</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00058">django.db.models.sql.compiler.SQLCompiler.select</a>, <a class="el" href="sql_2query_8py_source.html#l00243">select</a>, <a class="el" href="sql_2query_8py_source.html#l00308">table_map</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00086">django.db.models.sql.compiler.SQLCompiler.where</a>, and <a class="el" href="sql_2query_8py_source.html#l00311">where</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01020">bump_prefix()</a>.</p>

</div>
</div>
<a id="a3e614be64d574a9815dfab53f70b4b63" name="a3e614be64d574a9815dfab53f70b4b63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e614be64d574a9815dfab53f70b4b63">&#9670;&#160;</a></span>check_alias()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.check_alias </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>alias</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01184">1184</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1184</span>    <span class="keyword">def </span>check_alias(self, alias):</div>
<div class="line"><span class="lineno"> 1185</span>        <span class="keywordflow">if</span> FORBIDDEN_ALIAS_PATTERN.search(alias):</div>
<div class="line"><span class="lineno"> 1186</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno"> 1187</span>                <span class="stringliteral">&quot;Column aliases cannot contain whitespace characters, quotation marks, &quot;</span></div>
<div class="line"><span class="lineno"> 1188</span>                <span class="stringliteral">&quot;semicolons, or SQL comments.&quot;</span></div>
<div class="line"><span class="lineno"> 1189</span>            )</div>
<div class="line"><span class="lineno"> 1190</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01191">add_annotation()</a>, <a class="el" href="sql_2query_8py_source.html#l02329">add_extra()</a>, <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>, and <a class="el" href="sql_2query_8py_source.html#l02438">set_values()</a>.</p>

</div>
</div>
<a id="ab86586438d12b2713c8aacfd15a129f9" name="ab86586438d12b2713c8aacfd15a129f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab86586438d12b2713c8aacfd15a129f9">&#9670;&#160;</a></span>check_filterable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.check_filterable </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>expression</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Raise an error if expression cannot be used in a WHERE clause.</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01347">1347</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1347</span>    <span class="keyword">def </span>check_filterable(self, expression):</div>
<div class="line"><span class="lineno"> 1348</span>        <span class="stringliteral">&quot;&quot;&quot;Raise an error if expression cannot be used in a WHERE clause.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1349</span>        <span class="keywordflow">if</span> hasattr(expression, <span class="stringliteral">&quot;resolve_expression&quot;</span>) <span class="keywordflow">and</span> <span class="keywordflow">not</span> getattr(</div>
<div class="line"><span class="lineno"> 1350</span>            expression, <span class="stringliteral">&quot;filterable&quot;</span>, <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1351</span>        ):</div>
<div class="line"><span class="lineno"> 1352</span>            <span class="keywordflow">raise</span> NotSupportedError(</div>
<div class="line"><span class="lineno"> 1353</span>                expression.__class__.__name__ + <span class="stringliteral">&quot; is disallowed in the filter &quot;</span></div>
<div class="line"><span class="lineno"> 1354</span>                <span class="stringliteral">&quot;clause.&quot;</span></div>
<div class="line"><span class="lineno"> 1355</span>            )</div>
<div class="line"><span class="lineno"> 1356</span>        <span class="keywordflow">if</span> hasattr(expression, <span class="stringliteral">&quot;get_source_expressions&quot;</span>):</div>
<div class="line"><span class="lineno"> 1357</span>            <span class="keywordflow">for</span> expr <span class="keywordflow">in</span> expression.get_source_expressions():</div>
<div class="line"><span class="lineno"> 1358</span>                self.check_filterable(expr)</div>
<div class="line"><span class="lineno"> 1359</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01347">check_filterable()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01439">build_filter()</a>, and <a class="el" href="sql_2query_8py_source.html#l01347">check_filterable()</a>.</p>

</div>
</div>
<a id="aaaf897d7dddc9297c1a5f1fe75a95f82" name="aaaf897d7dddc9297c1a5f1fe75a95f82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaf897d7dddc9297c1a5f1fe75a95f82">&#9670;&#160;</a></span>check_query_object_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.check_query_object_type </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>opts</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>field</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check whether the object passed while querying is of the correct type.
If not, raise a ValueError specifying the wrong object.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01312">1312</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1312</span>    <span class="keyword">def </span>check_query_object_type(self, value, opts, field):</div>
<div class="line"><span class="lineno"> 1313</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1314</span><span class="stringliteral">        Check whether the object passed while querying is of the correct type.</span></div>
<div class="line"><span class="lineno"> 1315</span><span class="stringliteral">        If not, raise a ValueError specifying the wrong object.</span></div>
<div class="line"><span class="lineno"> 1316</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1317</span>        <span class="keywordflow">if</span> hasattr(value, <span class="stringliteral">&quot;_meta&quot;</span>):</div>
<div class="line"><span class="lineno"> 1318</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> check_rel_lookup_compatibility(value._meta.model, opts, field):</div>
<div class="line"><span class="lineno"> 1319</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno"> 1320</span>                    <span class="stringliteral">&#39;Cannot query &quot;%s&quot;: Must be &quot;%s&quot; instance.&#39;</span></div>
<div class="line"><span class="lineno"> 1321</span>                    % (value, opts.object_name)</div>
<div class="line"><span class="lineno"> 1322</span>                )</div>
<div class="line"><span class="lineno"> 1323</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01324">check_related_objects()</a>.</p>

</div>
</div>
<a id="a379af3abe4be45ed094044a65142c6c3" name="a379af3abe4be45ed094044a65142c6c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a379af3abe4be45ed094044a65142c6c3">&#9670;&#160;</a></span>check_related_objects()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.check_related_objects </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>field</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>opts</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check the type of object passed to query relations.</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01324">1324</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1324</span>    <span class="keyword">def </span>check_related_objects(self, field, value, opts):</div>
<div class="line"><span class="lineno"> 1325</span>        <span class="stringliteral">&quot;&quot;&quot;Check the type of object passed to query relations.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1326</span>        <span class="keywordflow">if</span> field.is_relation:</div>
<div class="line"><span class="lineno"> 1327</span>            <span class="comment"># Check that the field and the queryset use the same model in a</span></div>
<div class="line"><span class="lineno"> 1328</span>            <span class="comment"># query like .filter(author=Author.objects.all()). For example, the</span></div>
<div class="line"><span class="lineno"> 1329</span>            <span class="comment"># opts would be Author&#39;s (from the author field) and value.model</span></div>
<div class="line"><span class="lineno"> 1330</span>            <span class="comment"># would be Author.objects.all() queryset&#39;s .model (Author also).</span></div>
<div class="line"><span class="lineno"> 1331</span>            <span class="comment"># The field is the related field on the lhs side.</span></div>
<div class="line"><span class="lineno"> 1332</span>            <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno"> 1333</span>                isinstance(value, Query)</div>
<div class="line"><span class="lineno"> 1334</span>                <span class="keywordflow">and</span> <span class="keywordflow">not</span> value.has_select_fields</div>
<div class="line"><span class="lineno"> 1335</span>                <span class="keywordflow">and</span> <span class="keywordflow">not</span> check_rel_lookup_compatibility(value.model, opts, field)</div>
<div class="line"><span class="lineno"> 1336</span>            ):</div>
<div class="line"><span class="lineno"> 1337</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno"> 1338</span>                    <span class="stringliteral">&#39;Cannot use QuerySet for &quot;%s&quot;: Use a QuerySet for &quot;%s&quot;.&#39;</span></div>
<div class="line"><span class="lineno"> 1339</span>                    % (value.model._meta.object_name, opts.object_name)</div>
<div class="line"><span class="lineno"> 1340</span>                )</div>
<div class="line"><span class="lineno"> 1341</span>            <span class="keywordflow">elif</span> hasattr(value, <span class="stringliteral">&quot;_meta&quot;</span>):</div>
<div class="line"><span class="lineno"> 1342</span>                self.check_query_object_type(value, opts, field)</div>
<div class="line"><span class="lineno"> 1343</span>            <span class="keywordflow">elif</span> hasattr(value, <span class="stringliteral">&quot;__iter__&quot;</span>):</div>
<div class="line"><span class="lineno"> 1344</span>                <span class="keywordflow">for</span> v <span class="keywordflow">in</span> value:</div>
<div class="line"><span class="lineno"> 1345</span>                    self.check_query_object_type(v, opts, field)</div>
<div class="line"><span class="lineno"> 1346</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01312">check_query_object_type()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01439">build_filter()</a>.</p>

</div>
</div>
<a id="a77cb957ca37fe40cf19bc0f8c981f757" name="a77cb957ca37fe40cf19bc0f8c981f757"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77cb957ca37fe40cf19bc0f8c981f757">&#9670;&#160;</a></span>clear_deferred_loading()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.clear_deferred_loading </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Remove any fields from the deferred loading set.</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02362">2362</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2362</span>    <span class="keyword">def </span>clear_deferred_loading(self):</div>
<div class="line"><span class="lineno"> 2363</span>        <span class="stringliteral">&quot;&quot;&quot;Remove any fields from the deferred loading set.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2364</span>        self.deferred_loading = (frozenset(), <span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 2365</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00288">deferred_loading</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02366">add_deferred_loading()</a>, and <a class="el" href="sql_2query_8py_source.html#l02438">set_values()</a>.</p>

</div>
</div>
<a id="a0529f3bff1408a024f919ecf3aacfaaa" name="a0529f3bff1408a024f919ecf3aacfaaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0529f3bff1408a024f919ecf3aacfaaa">&#9670;&#160;</a></span>clear_limits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.clear_limits </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Clear any existing limits.</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02131">2131</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2131</span>    <span class="keyword">def </span>clear_limits(self):</div>
<div class="line"><span class="lineno"> 2132</span>        <span class="stringliteral">&quot;&quot;&quot;Clear any existing limits.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2133</span>        self.low_mark, self.high_mark = 0, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 2134</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00253">high_mark</a>, <a class="el" href="sql_2query_8py_source.html#l00154">django.db.models.sql.query.RawQuery.high_mark</a>, <a class="el" href="sql_2query_8py_source.html#l00252">low_mark</a>, and <a class="el" href="sql_2query_8py_source.html#l00154">django.db.models.sql.query.RawQuery.low_mark</a>.</p>

</div>
</div>
<a id="a33e167a322aa31ce3e5fbcd04ce935e0" name="a33e167a322aa31ce3e5fbcd04ce935e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33e167a322aa31ce3e5fbcd04ce935e0">&#9670;&#160;</a></span>clear_ordering()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.clear_ordering </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>force</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>clear_default</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Remove any ordering settings if the current query allows it without
side effects, set 'force' to True to clear the ordering regardless.
If 'clear_default' is True, there will be no ordering in the resulting
query (not even the model's default).
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02264">2264</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2264</span>    <span class="keyword">def </span>clear_ordering(self, force=False, clear_default=True):</div>
<div class="line"><span class="lineno"> 2265</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2266</span><span class="stringliteral">        Remove any ordering settings if the current query allows it without</span></div>
<div class="line"><span class="lineno"> 2267</span><span class="stringliteral">        side effects, set &#39;force&#39; to True to clear the ordering regardless.</span></div>
<div class="line"><span class="lineno"> 2268</span><span class="stringliteral">        If &#39;clear_default&#39; is True, there will be no ordering in the resulting</span></div>
<div class="line"><span class="lineno"> 2269</span><span class="stringliteral">        query (not even the model&#39;s default).</span></div>
<div class="line"><span class="lineno"> 2270</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2271</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> force <span class="keywordflow">and</span> (</div>
<div class="line"><span class="lineno"> 2272</span>            self.is_sliced <span class="keywordflow">or</span> self.distinct_fields <span class="keywordflow">or</span> self.select_for_update</div>
<div class="line"><span class="lineno"> 2273</span>        ):</div>
<div class="line"><span class="lineno"> 2274</span>            <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 2275</span>        self.order_by = ()</div>
<div class="line"><span class="lineno"> 2276</span>        self.extra_order_by = ()</div>
<div class="line"><span class="lineno"> 2277</span>        <span class="keywordflow">if</span> clear_default:</div>
<div class="line"><span class="lineno"> 2278</span>            self.default_ordering = <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 2279</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00232">default_ordering</a>, <a class="el" href="sql_2query_8py_source.html#l00255">distinct_fields</a>, <a class="el" href="sql_2query_8py_source.html#l00284">extra_order_by</a>, <a class="el" href="sql_2query_8py_source.html#l00685">is_sliced</a>, <a class="el" href="contrib_2postgres_2aggregates_2mixins_8py_source.html#l00008">django.contrib.postgres.aggregates.mixins.OrderableAggMixin.order_by</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01878">django.db.models.expressions.Window.order_by</a>, <a class="el" href="sql_2query_8py_source.html#l00251">order_by</a>, and <a class="el" href="sql_2query_8py_source.html#l00256">select_for_update</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01253">as_sql()</a>.</p>

</div>
</div>
<a id="a950e1a491ab8386f4731dee744f10436" name="a950e1a491ab8386f4731dee744f10436"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a950e1a491ab8386f4731dee744f10436">&#9670;&#160;</a></span>clear_select_clause()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.clear_select_clause </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Remove all fields from SELECT clause.</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02150">2150</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2150</span>    <span class="keyword">def </span>clear_select_clause(self):</div>
<div class="line"><span class="lineno"> 2151</span>        <span class="stringliteral">&quot;&quot;&quot;Remove all fields from SELECT clause.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2152</span>        self.select = ()</div>
<div class="line"><span class="lineno"> 2153</span>        self.default_cols = <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 2154</span>        self.select_related = <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 2155</span>        self.set_extra_mask(())</div>
<div class="line"><span class="lineno"> 2156</span>        self.set_annotation_mask(())</div>
<div class="line"><span class="lineno"> 2157</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00231">default_cols</a>, <a class="el" href="contrib_2gis_2db_2backends_2base_2operations_8py_source.html#l00020">django.contrib.gis.db.backends.base.operations.BaseSpatialOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2oracle_2operations_8py_source.html#l00099">django.contrib.gis.db.backends.oracle.operations.OracleOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2postgis_2operations_8py_source.html#l00167">django.contrib.gis.db.backends.postgis.operations.PostGISOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2spatialite_2operations_8py_source.html#l00066">django.contrib.gis.db.backends.spatialite.operations.SpatiaLiteOperations.select</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00058">django.db.models.sql.compiler.SQLCompiler.select</a>, <a class="el" href="sql_2query_8py_source.html#l00243">select</a>, <a class="el" href="sql_2query_8py_source.html#l00261">select_related</a>, <a class="el" href="sql_2query_8py_source.html#l02415">set_annotation_mask()</a>, and <a class="el" href="sql_2query_8py_source.html#l02427">set_extra_mask()</a>.</p>

</div>
</div>
<a id="a8c5bc3f76ba82d1b2b8bf6365e559671" name="a8c5bc3f76ba82d1b2b8bf6365e559671"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c5bc3f76ba82d1b2b8bf6365e559671">&#9670;&#160;</a></span>clear_select_fields()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.clear_select_fields </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Clear the list of fields to select (but not extra_select columns).
Some queryset types completely replace any existing list of select
columns.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02158">2158</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2158</span>    <span class="keyword">def </span>clear_select_fields(self):</div>
<div class="line"><span class="lineno"> 2159</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2160</span><span class="stringliteral">        Clear the list of fields to select (but not extra_select columns).</span></div>
<div class="line"><span class="lineno"> 2161</span><span class="stringliteral">        Some queryset types completely replace any existing list of select</span></div>
<div class="line"><span class="lineno"> 2162</span><span class="stringliteral">        columns.</span></div>
<div class="line"><span class="lineno"> 2163</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2164</span>        self.select = ()</div>
<div class="line"><span class="lineno"> 2165</span>        self.values_select = ()</div>
<div class="line"><span class="lineno"> 2166</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="contrib_2gis_2db_2backends_2base_2operations_8py_source.html#l00020">django.contrib.gis.db.backends.base.operations.BaseSpatialOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2oracle_2operations_8py_source.html#l00099">django.contrib.gis.db.backends.oracle.operations.OracleOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2postgis_2operations_8py_source.html#l00167">django.contrib.gis.db.backends.postgis.operations.PostGISOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2spatialite_2operations_8py_source.html#l00066">django.contrib.gis.db.backends.spatialite.operations.SpatiaLiteOperations.select</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00058">django.db.models.sql.compiler.SQLCompiler.select</a>, <a class="el" href="sql_2query_8py_source.html#l00243">select</a>, and <a class="el" href="sql_2query_8py_source.html#l00267">values_select</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02438">set_values()</a>.</p>

</div>
</div>
<a id="a7ffdda5e1bad263a425d230bbe7b734d" name="a7ffdda5e1bad263a425d230bbe7b734d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ffdda5e1bad263a425d230bbe7b734d">&#9670;&#160;</a></span>clear_where()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.clear_where </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01617">1617</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1617</span>    <span class="keyword">def </span>clear_where(self):</div>
<div class="line"><span class="lineno"> 1618</span>        self.where = WhereNode()</div>
<div class="line"><span class="lineno"> 1619</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="models_2sql_2compiler_8py_source.html#l00086">django.db.models.sql.compiler.SQLCompiler.where</a>, and <a class="el" href="sql_2query_8py_source.html#l00311">where</a>.</p>

<p class="reference">Referenced by <a class="el" href="subqueries_8py_source.html#l00026">django.db.models.sql.subqueries.DeleteQuery.delete_batch()</a>, and <a class="el" href="subqueries_8py_source.html#l00071">django.db.models.sql.subqueries.UpdateQuery.update_batch()</a>.</p>

</div>
</div>
<a id="a66b1b834ecc6355339315670d96079d7" name="a66b1b834ecc6355339315670d96079d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66b1b834ecc6355339315670d96079d7">&#9670;&#160;</a></span>clone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.clone </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return a copy of the current Query. A lightweight alternative to
deepcopy().
</pre> 
<p>Reimplemented in <a class="el" href="classdjango_1_1db_1_1models_1_1sql_1_1subqueries_1_1_update_query.html#a97a2fd7f7c923c7baf7641e5461cd296">django.db.models.sql.subqueries.UpdateQuery</a>.</p>

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00375">375</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  375</span>    <span class="keyword">def </span>clone(self):</div>
<div class="line"><span class="lineno">  376</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  377</span><span class="stringliteral">        Return a copy of the current Query. A lightweight alternative to</span></div>
<div class="line"><span class="lineno">  378</span><span class="stringliteral">        deepcopy().</span></div>
<div class="line"><span class="lineno">  379</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  380</span>        obj = Empty()</div>
<div class="line"><span class="lineno">  381</span>        obj.__class__ = self.__class__</div>
<div class="line"><span class="lineno">  382</span>        <span class="comment"># Copy references to everything.</span></div>
<div class="line"><span class="lineno">  383</span>        obj.__dict__ = self.__dict__.copy()</div>
<div class="line"><span class="lineno">  384</span>        <span class="comment"># Clone attributes that can&#39;t use shallow copy.</span></div>
<div class="line"><span class="lineno">  385</span>        obj.alias_refcount = self.alias_refcount.copy()</div>
<div class="line"><span class="lineno">  386</span>        obj.alias_map = self.alias_map.copy()</div>
<div class="line"><span class="lineno">  387</span>        obj.external_aliases = self.external_aliases.copy()</div>
<div class="line"><span class="lineno">  388</span>        obj.table_map = self.table_map.copy()</div>
<div class="line"><span class="lineno">  389</span>        obj.where = self.where.clone()</div>
<div class="line"><span class="lineno">  390</span>        obj.annotations = self.annotations.copy()</div>
<div class="line"><span class="lineno">  391</span>        <span class="keywordflow">if</span> self.annotation_select_mask <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  392</span>            obj.annotation_select_mask = self.annotation_select_mask.copy()</div>
<div class="line"><span class="lineno">  393</span>        <span class="keywordflow">if</span> self.combined_queries:</div>
<div class="line"><span class="lineno">  394</span>            obj.combined_queries = tuple(</div>
<div class="line"><span class="lineno">  395</span>                [query.clone() <span class="keywordflow">for</span> query <span class="keywordflow">in</span> self.combined_queries]</div>
<div class="line"><span class="lineno">  396</span>            )</div>
<div class="line"><span class="lineno">  397</span>        <span class="comment"># _annotation_select_cache cannot be copied, as doing so breaks the</span></div>
<div class="line"><span class="lineno">  398</span>        <span class="comment"># (necessary) state in which both annotations and</span></div>
<div class="line"><span class="lineno">  399</span>        <span class="comment"># _annotation_select_cache point to the same underlying objects.</span></div>
<div class="line"><span class="lineno">  400</span>        <span class="comment"># It will get re-populated in the cloned queryset the next time it&#39;s</span></div>
<div class="line"><span class="lineno">  401</span>        <span class="comment"># used.</span></div>
<div class="line"><span class="lineno">  402</span>        obj._annotation_select_cache = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  403</span>        obj.extra = self.extra.copy()</div>
<div class="line"><span class="lineno">  404</span>        <span class="keywordflow">if</span> self.extra_select_mask <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  405</span>            obj.extra_select_mask = self.extra_select_mask.copy()</div>
<div class="line"><span class="lineno">  406</span>        <span class="keywordflow">if</span> self._extra_select_cache <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  407</span>            obj._extra_select_cache = self._extra_select_cache.copy()</div>
<div class="line"><span class="lineno">  408</span>        <span class="keywordflow">if</span> self.select_related <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  409</span>            <span class="comment"># Use deepcopy because select_related stores fields in nested</span></div>
<div class="line"><span class="lineno">  410</span>            <span class="comment"># dicts.</span></div>
<div class="line"><span class="lineno">  411</span>            obj.select_related = copy.deepcopy(obj.select_related)</div>
<div class="line"><span class="lineno">  412</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;subq_aliases&quot;</span> <span class="keywordflow">in</span> self.__dict__:</div>
<div class="line"><span class="lineno">  413</span>            obj.subq_aliases = self.subq_aliases.copy()</div>
<div class="line"><span class="lineno">  414</span>        obj.used_aliases = self.used_aliases.copy()</div>
<div class="line"><span class="lineno">  415</span>        obj._filtered_relations = self._filtered_relations.copy()</div>
<div class="line"><span class="lineno">  416</span>        <span class="comment"># Clear the cached_property, if it exists.</span></div>
<div class="line"><span class="lineno">  417</span>        obj.__dict__.pop(<span class="stringliteral">&quot;base_table&quot;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  418</span>        <span class="keywordflow">return</span> obj</div>
<div class="line"><span class="lineno">  419</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="apscheduler_2triggers_2cron_2expressions_8py_source.html#l00067">apscheduler.triggers.cron.expressions.AllExpression.__class__</a>, <a class="el" href="apscheduler_2triggers_2cron_2expressions_8py_source.html#l00132">apscheduler.triggers.cron.expressions.RangeExpression.__class__</a>, <a class="el" href="apscheduler_2triggers_2cron_2fields_8py_source.html#l00112">apscheduler.triggers.cron.fields.BaseField.__class__</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l01114">django.contrib.admin.options.ModelAdmin.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2models_8py_source.html#l00432">django.contrib.auth.models.AnonymousUser.__class__</a>, <a class="el" href="field_8py_source.html#l00035">django.contrib.gis.gdal.field.Field.__class__</a>, <a class="el" href="geometries_8py_source.html#l00753">django.contrib.gis.gdal.geometries.GeometryCollection.__class__</a>, <a class="el" href="geometries_8py_source.html#l00131">django.contrib.gis.gdal.geometries.OGRGeometry.__class__</a>, <a class="el" href="geos_2geometry_8py_source.html#l00059">django.contrib.gis.geos.geometry.GEOSGeometryBase.__class__</a>, <a class="el" href="django_2contrib_2gis_2measure_8py_source.html#l00328">django.contrib.gis.measure.Distance.__class__</a>, <a class="el" href="django_2contrib_2gis_2measure_8py_source.html#l00091">django.contrib.gis.measure.MeasureBase.__class__</a>, <a class="el" href="contrib_2postgres_2constraints_8py_source.html#l00156">django.contrib.postgres.constraints.ExclusionConstraint.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2postgres_2validators_8py_source.html#l00069">django.contrib.postgres.validators.KeysValidator.__class__</a>, <a class="el" href="messages_8py_source.html#l00020">django.core.checks.messages.CheckMessage.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2core_2validators_8py_source.html#l00417">django.core.validators.BaseValidator.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2core_2validators_8py_source.html#l00606">django.core.validators.DecimalValidator.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2core_2validators_8py_source.html#l00649">django.core.validators.FileExtensionValidator.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2core_2validators_8py_source.html#l00692">django.core.validators.ProhibitNullCharactersValidator.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2migrations_2operations_2models_8py_source.html#l00545">django.db.migrations.operations.models.ModelOptionOperation.__class__</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l00907">django.db.models.expressions.F.__class__</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l00958">django.db.models.expressions.OuterRef.__class__</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01014">django.db.models.expressions.Sliced.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00735">django.db.models.fields.Field.__class__</a>, <a class="el" href="reverse__related_8py_source.html#l00156">django.db.models.fields.reverse_related.ForeignObjectRel.__class__</a>, <a class="el" href="db_2models_2indexes_8py_source.html#l00210">django.db.models.indexes.Index.__class__</a>, <a class="el" href="db_2models_2lookups_8py_source.html#l00159">django.db.models.lookups.Lookup.__class__</a>, <a class="el" href="db_2models_2lookups_8py_source.html#l00215">django.db.models.lookups.Transform.__class__</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00168">django.db.models.manager.BaseManager.__class__</a>, <a class="el" href="query_8py_source.html#l02264">django.db.models.query.Prefetch.__class__</a>, <a class="el" href="query__utils_8py_source.html#l00453">django.db.models.query_utils.FilteredRelation.__class__</a>, <a class="el" href="db_2models_2sql_2datastructures_8py_source.html#l00230">django.db.models.sql.datastructures.BaseTable.__class__</a>, <a class="el" href="db_2models_2sql_2datastructures_8py_source.html#l00174">django.db.models.sql.datastructures.Join.__class__</a>, <a class="el" href="functional_8py_source.html#l00359">django.utils.functional.LazyObject.__class__</a>, <a class="el" href="django_2utils_2tree_8py_source.html#l00073">django.utils.tree.Node.__class__</a>, <a class="el" href="dotenv_2variables_8py_source.html#l00037">dotenv.variables.Literal.__class__</a>, <a class="el" href="dotenv_2variables_8py_source.html#l00057">dotenv.variables.Variable.__class__</a>, <a class="el" href="_image_file_8py_source.html#l00388">PIL.ImageFile.StubImageFile.__class__</a>, <a class="el" href="format__control_8py_source.html#l00027">pip._internal.models.format_control.FormatControl.__class__</a>, <a class="el" href="candidates_8py_source.html#l00176">pip._internal.resolution.resolvelib.candidates._InstallRequirementBackedCandidate.__class__</a>, <a class="el" href="candidates_8py_source.html#l00468">pip._internal.resolution.resolvelib.candidates.ExtrasCandidate.__class__</a>, <a class="el" href="pip_2__vendor_2distlib_2compat_8py_source.html#l00864">pip._vendor.distlib.compat.OrderedDict.__class__</a>, <a class="el" href="ext_8py_source.html#l00059">pip._vendor.msgpack.ext.Timestamp.__class__</a>, <a class="el" href="__structures_8py_source.html#l00020">pip._vendor.packaging._structures.InfinityType.__class__</a>, <a class="el" href="__structures_8py_source.html#l00049">pip._vendor.packaging._structures.NegativeInfinityType.__class__</a>, <a class="el" href="specifiers_8py_source.html#l00357">pip._vendor.packaging.specifiers.Specifier.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2pip_2__vendor_2pkg__resources_2____init_____8py_source.html#l02953">pip._vendor.pkg_resources.Distribution.__class__</a>, <a class="el" href="__api_8py_source.html#l00062">pip._vendor.truststore._api.SSLContext.__class__()</a>, <a class="el" href="typing__extensions_8py_source.html#l01767">pip._vendor.typing_extensions._ConcatenateGenericAlias.__class__</a>, <a class="el" href="typing__extensions_8py_source.html#l02347">pip._vendor.typing_extensions._UnpackAlias.__class__</a>, <a class="el" href="typing__extensions_8py_source.html#l01708">pip._vendor.typing_extensions.ParamSpec.__class__</a>, <a class="el" href="typing__extensions_8py_source.html#l02507">pip._vendor.typing_extensions.TypeVarTuple.__class__</a>, <a class="el" href="pip_2__vendor_2urllib3_2exceptions_8py_source.html#l00029">pip._vendor.urllib3.exceptions.PoolError.__class__</a>, <a class="el" href="pip_2__vendor_2urllib3_2exceptions_8py_source.html#l00041">pip._vendor.urllib3.exceptions.RequestError.__class__</a>, <a class="el" href="container_8py_source.html#l00740">tomlkit.container.Container.__class__</a>, <a class="el" href="items_8py_source.html#l00516">tomlkit.items.Item.__class__</a>, <a class="el" href="urllib3_2exceptions_8py_source.html#l00040">urllib3.exceptions.PoolError.__class__</a>, <a class="el" href="urllib3_2exceptions_8py_source.html#l00052">urllib3.exceptions.RequestError.__class__</a>, <a class="el" href="bases_8py_source.html#l00136">astroid.bases.Proxy.__dict__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2charset__normalizer_2models_8py_source.html#l00359">charset_normalizer.models.CliDetectionResult.__dict__</a>, <a class="el" href="ansitowin32_8py_source.html#l00041">colorama.ansitowin32.StreamWrapper.__dict__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2conf_2____init_____8py_source.html#l00254">django.conf.UserSettingsHolder.__dict__</a>, <a class="el" href="django_2db_2backends_2oracle_2base_8py_source.html#l00278">django.db.backends.oracle.base.DatabaseWrapper.__dict__</a>, <a class="el" href="state_8py_source.html#l00123">django.db.migrations.state.ProjectState.__dict__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00836">django.db.models.fields.Field.__dict__</a>, <a class="el" href="db_2models_2options_8py_source.html#l00841">django.db.models.options.Options.__dict__</a>, <a class="el" href="query_8py_source.html#l00354">django.db.models.query.QuerySet.__dict__</a>, <a class="el" href="query__utils_8py_source.html#l00312">django.db.models.query_utils.RegisterLookupMixin.__dict__</a>, <a class="el" href="sql_2query_8py_source.html#l00412">__dict__</a>, <a class="el" href="sql_2query_8py_source.html#l00281">_extra_select_cache</a>, <a class="el" href="sql_2query_8py_source.html#l00318">_filtered_relations</a>, <a class="el" href="sql_2query_8py_source.html#l00300">alias_map</a>, <a class="el" href="sql_2query_8py_source.html#l00294">alias_refcount</a>, <a class="el" href="sql_2query_8py_source.html#l00270">annotation_select_mask</a>, <a class="el" href="node__classes_8py_source.html#l00672">astroid.nodes.node_classes.Arguments.annotations</a>, <a class="el" href="sql_2query_8py_source.html#l00313">annotations</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00276">combined_queries</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l00429">django.db.models.expressions.BaseExpression.copy()</a>, <a class="el" href="sql_2query_8py_source.html#l00307">external_aliases</a>, <a class="el" href="test__session_8py_source.html#l00099">dill.tests.test_session.TestNamespace.extra</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l02372">django.contrib.admin.options.InlineModelAdmin.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01606">django.db.models.expressions.Case.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01045">django.db.models.expressions.Func.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01701">django.db.models.expressions.Subquery.extra</a>, <a class="el" href="sql_2query_8py_source.html#l00316">extra</a>, <a class="el" href="sql_2query_8py_source.html#l00280">extra_select_mask</a>, <a class="el" href="sql_2query_8py_source.html#l00261">select_related</a>, <a class="el" href="sql_2query_8py_source.html#l00224">subq_aliases</a>, <a class="el" href="sql_2query_8py_source.html#l00308">table_map</a>, <a class="el" href="sql_2query_8py_source.html#l00309">used_aliases</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00086">django.db.models.sql.compiler.SQLCompiler.where</a>, and <a class="el" href="sql_2query_8py_source.html#l00311">where</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l00351">__deepcopy__()</a>, <a class="el" href="sql_2query_8py_source.html#l00420">chain()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00635">exists()</a>, <a class="el" href="sql_2query_8py_source.html#l00662">explain()</a>, <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>, <a class="el" href="sql_2query_8py_source.html#l00625">get_count()</a>, <a class="el" href="sql_2query_8py_source.html#l00435">relabeled_clone()</a>, <a class="el" href="where_8py_source.html#l00225">django.db.models.sql.where.WhereNode.relabeled_clone()</a>, <a class="el" href="sql_2query_8py_source.html#l01206">resolve_expression()</a>, and <a class="el" href="where_8py_source.html#l00286">django.db.models.sql.where.WhereNode.resolve_expression()</a>.</p>

</div>
</div>
<a id="a6678fb0a80123a6d6deb2e2a715d3ccb" name="a6678fb0a80123a6d6deb2e2a715d3ccb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6678fb0a80123a6d6deb2e2a715d3ccb">&#9670;&#160;</a></span>combine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.combine </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>rhs</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>connector</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Merge the 'rhs' query into the current one (with any 'rhs' effects
being applied *after* (that is, "to the right of") anything in the
current query. 'rhs' is not modified during a call to this function.

The 'connector' parameter describes how to connect filters from the
'rhs' query.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00674">674</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  674</span>    <span class="keyword">def </span>combine(self, rhs, connector):</div>
<div class="line"><span class="lineno">  675</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  676</span><span class="stringliteral">        Merge the &#39;rhs&#39; query into the current one (with any &#39;rhs&#39; effects</span></div>
<div class="line"><span class="lineno">  677</span><span class="stringliteral">        being applied *after* (that is, &quot;to the right of&quot;) anything in the</span></div>
<div class="line"><span class="lineno">  678</span><span class="stringliteral">        current query. &#39;rhs&#39; is not modified during a call to this function.</span></div>
<div class="line"><span class="lineno">  679</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  680</span><span class="stringliteral">        The &#39;connector&#39; parameter describes how to connect filters from the</span></div>
<div class="line"><span class="lineno">  681</span><span class="stringliteral">        &#39;rhs&#39; query.</span></div>
<div class="line"><span class="lineno">  682</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  683</span>        <span class="keywordflow">if</span> self.model != rhs.model:</div>
<div class="line"><span class="lineno">  684</span>            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Cannot combine queries on two different base models.&quot;</span>)</div>
<div class="line"><span class="lineno">  685</span>        <span class="keywordflow">if</span> self.is_sliced:</div>
<div class="line"><span class="lineno">  686</span>            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Cannot combine queries once a slice has been taken.&quot;</span>)</div>
<div class="line"><span class="lineno">  687</span>        <span class="keywordflow">if</span> self.distinct != rhs.distinct:</div>
<div class="line"><span class="lineno">  688</span>            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Cannot combine a unique query with a non-unique query.&quot;</span>)</div>
<div class="line"><span class="lineno">  689</span>        <span class="keywordflow">if</span> self.distinct_fields != rhs.distinct_fields:</div>
<div class="line"><span class="lineno">  690</span>            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Cannot combine queries with different distinct fields.&quot;</span>)</div>
<div class="line"><span class="lineno">  691</span> </div>
<div class="line"><span class="lineno">  692</span>        <span class="comment"># If lhs and rhs shares the same alias prefix, it is possible to have</span></div>
<div class="line"><span class="lineno">  693</span>        <span class="comment"># conflicting alias changes like T4 -&gt; T5, T5 -&gt; T6, which might end up</span></div>
<div class="line"><span class="lineno">  694</span>        <span class="comment"># as T4 -&gt; T6 while combining two querysets. To prevent this, change an</span></div>
<div class="line"><span class="lineno">  695</span>        <span class="comment"># alias prefix of the rhs and update current aliases accordingly,</span></div>
<div class="line"><span class="lineno">  696</span>        <span class="comment"># except if the alias is the base table since it must be present in the</span></div>
<div class="line"><span class="lineno">  697</span>        <span class="comment"># query on both sides.</span></div>
<div class="line"><span class="lineno">  698</span>        initial_alias = self.get_initial_alias()</div>
<div class="line"><span class="lineno">  699</span>        rhs = rhs.clone()</div>
<div class="line"><span class="lineno">  700</span>        rhs.bump_prefix(self, exclude={initial_alias})</div>
<div class="line"><span class="lineno">  701</span> </div>
<div class="line"><span class="lineno">  702</span>        <span class="comment"># Work out how to relabel the rhs aliases, if necessary.</span></div>
<div class="line"><span class="lineno">  703</span>        change_map = {}</div>
<div class="line"><span class="lineno">  704</span>        conjunction = connector == AND</div>
<div class="line"><span class="lineno">  705</span> </div>
<div class="line"><span class="lineno">  706</span>        <span class="comment"># Determine which existing joins can be reused. When combining the</span></div>
<div class="line"><span class="lineno">  707</span>        <span class="comment"># query with AND we must recreate all joins for m2m filters. When</span></div>
<div class="line"><span class="lineno">  708</span>        <span class="comment"># combining with OR we can reuse joins. The reason is that in AND</span></div>
<div class="line"><span class="lineno">  709</span>        <span class="comment"># case a single row can&#39;t fulfill a condition like:</span></div>
<div class="line"><span class="lineno">  710</span>        <span class="comment">#     revrel__col=1 &amp; revrel__col=2</span></div>
<div class="line"><span class="lineno">  711</span>        <span class="comment"># But, there might be two different related rows matching this</span></div>
<div class="line"><span class="lineno">  712</span>        <span class="comment"># condition. In OR case a single True is enough, so single row is</span></div>
<div class="line"><span class="lineno">  713</span>        <span class="comment"># enough, too.</span></div>
<div class="line"><span class="lineno">  714</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  715</span>        <span class="comment"># Note that we will be creating duplicate joins for non-m2m joins in</span></div>
<div class="line"><span class="lineno">  716</span>        <span class="comment"># the AND case. The results will be correct but this creates too many</span></div>
<div class="line"><span class="lineno">  717</span>        <span class="comment"># joins. This is something that could be fixed later on.</span></div>
<div class="line"><span class="lineno">  718</span>        reuse = set() <span class="keywordflow">if</span> conjunction <span class="keywordflow">else</span> set(self.alias_map)</div>
<div class="line"><span class="lineno">  719</span>        joinpromoter = JoinPromoter(connector, 2, <span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  720</span>        joinpromoter.add_votes(</div>
<div class="line"><span class="lineno">  721</span>            j <span class="keywordflow">for</span> j <span class="keywordflow">in</span> self.alias_map <span class="keywordflow">if</span> self.alias_map[j].join_type == INNER</div>
<div class="line"><span class="lineno">  722</span>        )</div>
<div class="line"><span class="lineno">  723</span>        rhs_votes = set()</div>
<div class="line"><span class="lineno">  724</span>        <span class="comment"># Now, add the joins from rhs query into the new query (skipping base</span></div>
<div class="line"><span class="lineno">  725</span>        <span class="comment"># table).</span></div>
<div class="line"><span class="lineno">  726</span>        rhs_tables = list(rhs.alias_map)[1:]</div>
<div class="line"><span class="lineno">  727</span>        <span class="keywordflow">for</span> alias <span class="keywordflow">in</span> rhs_tables:</div>
<div class="line"><span class="lineno">  728</span>            join = rhs.alias_map[alias]</div>
<div class="line"><span class="lineno">  729</span>            <span class="comment"># If the left side of the join was already relabeled, use the</span></div>
<div class="line"><span class="lineno">  730</span>            <span class="comment"># updated alias.</span></div>
<div class="line"><span class="lineno">  731</span>            join = join.relabeled_clone(change_map)</div>
<div class="line"><span class="lineno">  732</span>            new_alias = self.join(join, reuse=reuse)</div>
<div class="line"><span class="lineno">  733</span>            <span class="keywordflow">if</span> join.join_type == INNER:</div>
<div class="line"><span class="lineno">  734</span>                rhs_votes.add(new_alias)</div>
<div class="line"><span class="lineno">  735</span>            <span class="comment"># We can&#39;t reuse the same join again in the query. If we have two</span></div>
<div class="line"><span class="lineno">  736</span>            <span class="comment"># distinct joins for the same connection in rhs query, then the</span></div>
<div class="line"><span class="lineno">  737</span>            <span class="comment"># combined query must have two joins, too.</span></div>
<div class="line"><span class="lineno">  738</span>            reuse.discard(new_alias)</div>
<div class="line"><span class="lineno">  739</span>            <span class="keywordflow">if</span> alias != new_alias:</div>
<div class="line"><span class="lineno">  740</span>                change_map[alias] = new_alias</div>
<div class="line"><span class="lineno">  741</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> rhs.alias_refcount[alias]:</div>
<div class="line"><span class="lineno">  742</span>                <span class="comment"># The alias was unused in the rhs query. Unref it so that it</span></div>
<div class="line"><span class="lineno">  743</span>                <span class="comment"># will be unused in the new query, too. We have to add and</span></div>
<div class="line"><span class="lineno">  744</span>                <span class="comment"># unref the alias so that join promotion has information of</span></div>
<div class="line"><span class="lineno">  745</span>                <span class="comment"># the join type for the unused alias.</span></div>
<div class="line"><span class="lineno">  746</span>                self.unref_alias(new_alias)</div>
<div class="line"><span class="lineno">  747</span>        joinpromoter.add_votes(rhs_votes)</div>
<div class="line"><span class="lineno">  748</span>        joinpromoter.update_join_types(self)</div>
<div class="line"><span class="lineno">  749</span> </div>
<div class="line"><span class="lineno">  750</span>        <span class="comment"># Combine subqueries aliases to ensure aliases relabelling properly</span></div>
<div class="line"><span class="lineno">  751</span>        <span class="comment"># handle subqueries when combining where and select clauses.</span></div>
<div class="line"><span class="lineno">  752</span>        self.subq_aliases |= rhs.subq_aliases</div>
<div class="line"><span class="lineno">  753</span> </div>
<div class="line"><span class="lineno">  754</span>        <span class="comment"># Now relabel a copy of the rhs where-clause and add it to the current</span></div>
<div class="line"><span class="lineno">  755</span>        <span class="comment"># one.</span></div>
<div class="line"><span class="lineno">  756</span>        w = rhs.where.clone()</div>
<div class="line"><span class="lineno">  757</span>        w.relabel_aliases(change_map)</div>
<div class="line"><span class="lineno">  758</span>        self.where.add(w, connector)</div>
<div class="line"><span class="lineno">  759</span> </div>
<div class="line"><span class="lineno">  760</span>        <span class="comment"># Selection columns and extra extensions are those provided by &#39;rhs&#39;.</span></div>
<div class="line"><span class="lineno">  761</span>        <span class="keywordflow">if</span> rhs.select:</div>
<div class="line"><span class="lineno">  762</span>            self.set_select([col.relabeled_clone(change_map) <span class="keywordflow">for</span> col <span class="keywordflow">in</span> rhs.select])</div>
<div class="line"><span class="lineno">  763</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  764</span>            self.select = ()</div>
<div class="line"><span class="lineno">  765</span> </div>
<div class="line"><span class="lineno">  766</span>        <span class="keywordflow">if</span> connector == OR:</div>
<div class="line"><span class="lineno">  767</span>            <span class="comment"># It would be nice to be able to handle this, but the queries don&#39;t</span></div>
<div class="line"><span class="lineno">  768</span>            <span class="comment"># really make sense (or return consistent value sets). Not worth</span></div>
<div class="line"><span class="lineno">  769</span>            <span class="comment"># the extra complexity when you can write a real query instead.</span></div>
<div class="line"><span class="lineno">  770</span>            <span class="keywordflow">if</span> self.extra <span class="keywordflow">and</span> rhs.extra:</div>
<div class="line"><span class="lineno">  771</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  772</span>                    <span class="stringliteral">&quot;When merging querysets using &#39;or&#39;, you cannot have &quot;</span></div>
<div class="line"><span class="lineno">  773</span>                    <span class="stringliteral">&quot;extra(select=...) on both sides.&quot;</span></div>
<div class="line"><span class="lineno">  774</span>                )</div>
<div class="line"><span class="lineno">  775</span>        self.extra.update(rhs.extra)</div>
<div class="line"><span class="lineno">  776</span>        extra_select_mask = set()</div>
<div class="line"><span class="lineno">  777</span>        <span class="keywordflow">if</span> self.extra_select_mask <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  778</span>            extra_select_mask.update(self.extra_select_mask)</div>
<div class="line"><span class="lineno">  779</span>        <span class="keywordflow">if</span> rhs.extra_select_mask <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  780</span>            extra_select_mask.update(rhs.extra_select_mask)</div>
<div class="line"><span class="lineno">  781</span>        <span class="keywordflow">if</span> extra_select_mask:</div>
<div class="line"><span class="lineno">  782</span>            self.set_extra_mask(extra_select_mask)</div>
<div class="line"><span class="lineno">  783</span>        self.extra_tables += rhs.extra_tables</div>
<div class="line"><span class="lineno">  784</span> </div>
<div class="line"><span class="lineno">  785</span>        <span class="comment"># Ordering uses the &#39;rhs&#39; ordering, unless it has none, in which case</span></div>
<div class="line"><span class="lineno">  786</span>        <span class="comment"># the current ordering is used.</span></div>
<div class="line"><span class="lineno">  787</span>        self.order_by = rhs.order_by <span class="keywordflow">or</span> self.order_by</div>
<div class="line"><span class="lineno">  788</span>        self.extra_order_by = rhs.extra_order_by <span class="keywordflow">or</span> self.extra_order_by</div>
<div class="line"><span class="lineno">  789</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="contrib_2admin_2options_8py_source.html#l02369">django.contrib.admin.options.InlineModelAdmin.model</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l00682">django.contrib.admin.options.ModelAdmin.model</a>, <a class="el" href="django_2contrib_2admin_2views_2main_8py_source.html#l00088">django.contrib.admin.views.main.ChangeList.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2forms_8py_source.html#l00233">django.contrib.auth.forms.BaseUserCreationForm.Meta.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2forms_8py_source.html#l00293">django.contrib.auth.forms.UserChangeForm.Meta.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2admin_8py_source.html#l00135">django.contrib.contenttypes.admin.GenericInlineModelAdmin.model</a>, <a class="el" href="django_2contrib_2contenttypes_2fields_8py_source.html#l00488">django.contrib.contenttypes.fields.GenericRelation.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2models_8py_source.html#l00136">django.contrib.contenttypes.models.ContentType.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2flatpages_2forms_8py_source.html#l00027">django.contrib.flatpages.forms.FlatpageForm.Meta.model</a>, <a class="el" href="layermapping_8py_source.html#l00128">django.contrib.gis.utils.layermapping.LayerMapping.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l01254">django.db.models.fields.CharField.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00401">django.db.models.fields.Field.model</a>, <a class="el" href="generated_8py_source.html#l00114">django.db.models.fields.generated.GeneratedField.model</a>, <a class="el" href="django_2db_2models_2fields_2json_8py_source.html#l00055">django.db.models.fields.json.JSONField.model</a>, <a class="el" href="reverse__related_8py_source.html#l00053">django.db.models.fields.reverse_related.ForeignObjectRel.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l02457">django.db.models.fields.TextField.model</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00030">django.db.models.manager.BaseManager.model</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00210">django.db.models.manager.EmptyManager.model</a>, <a class="el" href="db_2models_2options_8py_source.html#l00176">django.db.models.options.Options.model</a>, <a class="el" href="query_8py_source.html#l00297">django.db.models.query.QuerySet.model</a>, <a class="el" href="query_8py_source.html#l02058">django.db.models.query.RawQuerySet.model</a>, and <a class="el" href="sql_2query_8py_source.html#l00293">model</a>.</p>

</div>
</div>
<a id="a52823b11f3221cef7fc49f147d7306de" name="a52823b11f3221cef7fc49f147d7306de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52823b11f3221cef7fc49f147d7306de">&#9670;&#160;</a></span>count_active_tables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.count_active_tables </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return the number of tables in this query with a non-zero reference
count. After execution, the reference counts are zeroed, so tables
added in compiler will not be seen by this method.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01089">1089</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1089</span>    <span class="keyword">def </span>count_active_tables(self):</div>
<div class="line"><span class="lineno"> 1090</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1091</span><span class="stringliteral">        Return the number of tables in this query with a non-zero reference</span></div>
<div class="line"><span class="lineno"> 1092</span><span class="stringliteral">        count. After execution, the reference counts are zeroed, so tables</span></div>
<div class="line"><span class="lineno"> 1093</span><span class="stringliteral">        added in compiler will not be seen by this method.</span></div>
<div class="line"><span class="lineno"> 1094</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1095</span>        <span class="keywordflow">return</span> len([1 <span class="keywordflow">for</span> count <span class="keywordflow">in</span> self.alias_refcount.values() <span class="keywordflow">if</span> count])</div>
<div class="line"><span class="lineno"> 1096</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00294">alias_refcount</a>.</p>

</div>
</div>
<a id="ac22e8f56034d4ab92ff7b038bb0e64ab" name="ac22e8f56034d4ab92ff7b038bb0e64ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac22e8f56034d4ab92ff7b038bb0e64ab">&#9670;&#160;</a></span>demote_joins()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.demote_joins </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>aliases</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Change join type from LOUTER to INNER for all joins in aliases.

Similarly to promote_joins(), this method must ensure no join chains
containing first an outer, then an inner join are generated. If we
are demoting b-&gt;c join in chain a LOUTER b LOUTER c then we must
demote a-&gt;b automatically, or otherwise the demotion of b-&gt;c doesn't
actually change anything in the query results. .
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00945">945</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  945</span>    <span class="keyword">def </span>demote_joins(self, aliases):</div>
<div class="line"><span class="lineno">  946</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  947</span><span class="stringliteral">        Change join type from LOUTER to INNER for all joins in aliases.</span></div>
<div class="line"><span class="lineno">  948</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  949</span><span class="stringliteral">        Similarly to promote_joins(), this method must ensure no join chains</span></div>
<div class="line"><span class="lineno">  950</span><span class="stringliteral">        containing first an outer, then an inner join are generated. If we</span></div>
<div class="line"><span class="lineno">  951</span><span class="stringliteral">        are demoting b-&gt;c join in chain a LOUTER b LOUTER c then we must</span></div>
<div class="line"><span class="lineno">  952</span><span class="stringliteral">        demote a-&gt;b automatically, or otherwise the demotion of b-&gt;c doesn&#39;t</span></div>
<div class="line"><span class="lineno">  953</span><span class="stringliteral">        actually change anything in the query results. .</span></div>
<div class="line"><span class="lineno">  954</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  955</span>        aliases = list(aliases)</div>
<div class="line"><span class="lineno">  956</span>        <span class="keywordflow">while</span> aliases:</div>
<div class="line"><span class="lineno">  957</span>            alias = aliases.pop(0)</div>
<div class="line"><span class="lineno">  958</span>            <span class="keywordflow">if</span> self.alias_map[alias].join_type == LOUTER:</div>
<div class="line"><span class="lineno">  959</span>                self.alias_map[alias] = self.alias_map[alias].demote()</div>
<div class="line"><span class="lineno">  960</span>                parent_alias = self.alias_map[alias].parent_alias</div>
<div class="line"><span class="lineno">  961</span>                <span class="keywordflow">if</span> self.alias_map[parent_alias].join_type == INNER:</div>
<div class="line"><span class="lineno">  962</span>                    aliases.append(parent_alias)</div>
<div class="line"><span class="lineno">  963</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00300">alias_map</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01595">add_q()</a>.</p>

</div>
</div>
<a id="ae5c8bc324c4badfdcba3d115464be353" name="ae5c8bc324c4badfdcba3d115464be353"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5c8bc324c4badfdcba3d115464be353">&#9670;&#160;</a></span>exists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.exists </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>limit</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00635">635</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  635</span>    <span class="keyword">def </span>exists(self, limit=True):</div>
<div class="line"><span class="lineno">  636</span>        q = self.clone()</div>
<div class="line"><span class="lineno">  637</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> (q.distinct <span class="keywordflow">and</span> q.is_sliced):</div>
<div class="line"><span class="lineno">  638</span>            <span class="keywordflow">if</span> q.group_by <span class="keywordflow">is</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">  639</span>                q.add_fields(</div>
<div class="line"><span class="lineno">  640</span>                    (f.attname <span class="keywordflow">for</span> f <span class="keywordflow">in</span> self.model._meta.concrete_fields), <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  641</span>                )</div>
<div class="line"><span class="lineno">  642</span>                <span class="comment"># Disable GROUP BY aliases to avoid orphaning references to the</span></div>
<div class="line"><span class="lineno">  643</span>                <span class="comment"># SELECT clause which is about to be cleared.</span></div>
<div class="line"><span class="lineno">  644</span>                q.set_group_by(allow_aliases=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  645</span>            q.clear_select_clause()</div>
<div class="line"><span class="lineno">  646</span>        <span class="keywordflow">if</span> q.combined_queries <span class="keywordflow">and</span> q.combinator == <span class="stringliteral">&quot;union&quot;</span>:</div>
<div class="line"><span class="lineno">  647</span>            q.combined_queries = tuple(</div>
<div class="line"><span class="lineno">  648</span>                combined_query.exists(limit=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  649</span>                <span class="keywordflow">for</span> combined_query <span class="keywordflow">in</span> q.combined_queries</div>
<div class="line"><span class="lineno">  650</span>            )</div>
<div class="line"><span class="lineno">  651</span>        q.clear_ordering(force=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  652</span>        <span class="keywordflow">if</span> limit:</div>
<div class="line"><span class="lineno">  653</span>            q.set_limits(high=1)</div>
<div class="line"><span class="lineno">  654</span>        q.add_annotation(Value(1), <span class="stringliteral">&quot;a&quot;</span>)</div>
<div class="line"><span class="lineno">  655</span>        <span class="keywordflow">return</span> q</div>
<div class="line"><span class="lineno">  656</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="astroid_2context_8py_source.html#l00122">astroid.context.InferenceContext.clone()</a>, <a class="el" href="geometries_8py_source.html#l00433">django.contrib.gis.gdal.geometries.OGRGeometry.clone()</a>, <a class="el" href="django_2contrib_2gis_2gdal_2raster_2source_8py_source.html#l00461">django.contrib.gis.gdal.raster.source.GDALRaster.clone()</a>, <a class="el" href="gdal_2srs_8py_source.html#l00168">django.contrib.gis.gdal.srs.SpatialReference.clone()</a>, <a class="el" href="coordseq_8py_source.html#l00176">django.contrib.gis.geos.coordseq.GEOSCoordSeq.clone()</a>, <a class="el" href="geos_2geometry_8py_source.html#l00674">django.contrib.gis.geos.geometry.GEOSGeometryBase.clone()</a>, <a class="el" href="state_8py_source.html#l00920">django.db.migrations.state.ModelState.clone()</a>, <a class="el" href="state_8py_source.html#l00548">django.db.migrations.state.ProjectState.clone()</a>, <a class="el" href="state_8py_source.html#l00678">django.db.migrations.state.StateApps.clone()</a>, <a class="el" href="db_2models_2constraints_8py_source.html#l00131">django.db.models.constraints.BaseConstraint.clone()</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00661">django.db.models.fields.Field.clone()</a>, <a class="el" href="db_2models_2indexes_8py_source.html#l00153">django.db.models.indexes.Index.clone()</a>, <a class="el" href="query__utils_8py_source.html#l00461">django.db.models.query_utils.FilteredRelation.clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00161">django.db.models.sql.query.RawQuery.clone()</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l02369">django.contrib.admin.options.InlineModelAdmin.model</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l00682">django.contrib.admin.options.ModelAdmin.model</a>, <a class="el" href="django_2contrib_2admin_2views_2main_8py_source.html#l00088">django.contrib.admin.views.main.ChangeList.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2forms_8py_source.html#l00233">django.contrib.auth.forms.BaseUserCreationForm.Meta.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2forms_8py_source.html#l00293">django.contrib.auth.forms.UserChangeForm.Meta.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2admin_8py_source.html#l00135">django.contrib.contenttypes.admin.GenericInlineModelAdmin.model</a>, <a class="el" href="django_2contrib_2contenttypes_2fields_8py_source.html#l00488">django.contrib.contenttypes.fields.GenericRelation.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2models_8py_source.html#l00136">django.contrib.contenttypes.models.ContentType.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2flatpages_2forms_8py_source.html#l00027">django.contrib.flatpages.forms.FlatpageForm.Meta.model</a>, <a class="el" href="layermapping_8py_source.html#l00128">django.contrib.gis.utils.layermapping.LayerMapping.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l01254">django.db.models.fields.CharField.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00401">django.db.models.fields.Field.model</a>, <a class="el" href="generated_8py_source.html#l00114">django.db.models.fields.generated.GeneratedField.model</a>, <a class="el" href="django_2db_2models_2fields_2json_8py_source.html#l00055">django.db.models.fields.json.JSONField.model</a>, <a class="el" href="reverse__related_8py_source.html#l00053">django.db.models.fields.reverse_related.ForeignObjectRel.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l02457">django.db.models.fields.TextField.model</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00030">django.db.models.manager.BaseManager.model</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00210">django.db.models.manager.EmptyManager.model</a>, <a class="el" href="db_2models_2options_8py_source.html#l00176">django.db.models.options.Options.model</a>, <a class="el" href="query_8py_source.html#l00297">django.db.models.query.QuerySet.model</a>, <a class="el" href="query_8py_source.html#l02058">django.db.models.query.RawQuerySet.model</a>, and <a class="el" href="sql_2query_8py_source.html#l00293">model</a>.</p>

<p class="reference">Referenced by <a class="el" href="storage_8py_source.html#l00333">django.contrib.staticfiles.storage.HashedFilesMixin._post_process()</a>, <a class="el" href="sql_2query_8py_source.html#l00657">has_results()</a>, and <a class="el" href="storage_8py_source.html#l00134">django.contrib.staticfiles.storage.HashedFilesMixin.hashed_name()</a>.</p>

</div>
</div>
<a id="a2017a64b53a6a8b184261899b21895e4" name="a2017a64b53a6a8b184261899b21895e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2017a64b53a6a8b184261899b21895e4">&#9670;&#160;</a></span>explain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.explain </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>using</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>format</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**</td>          <td class="paramname"><span class="paramname"><em>options</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00662">662</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  662</span>    <span class="keyword">def </span>explain(self, using, format=None, **options):</div>
<div class="line"><span class="lineno">  663</span>        q = self.clone()</div>
<div class="line"><span class="lineno">  664</span>        <span class="keywordflow">for</span> option_name <span class="keywordflow">in</span> options:</div>
<div class="line"><span class="lineno">  665</span>            <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  666</span>                <span class="keywordflow">not</span> EXPLAIN_OPTIONS_PATTERN.fullmatch(option_name)</div>
<div class="line"><span class="lineno">  667</span>                <span class="keywordflow">or</span> <span class="stringliteral">&quot;--&quot;</span> <span class="keywordflow">in</span> option_name</div>
<div class="line"><span class="lineno">  668</span>            ):</div>
<div class="line"><span class="lineno">  669</span>                <span class="keywordflow">raise</span> ValueError(f<span class="stringliteral">&quot;Invalid option name: {option_name!r}.&quot;</span>)</div>
<div class="line"><span class="lineno">  670</span>        q.explain_info = ExplainInfo(format, options)</div>
<div class="line"><span class="lineno">  671</span>        compiler = q.get_compiler(using=using)</div>
<div class="line"><span class="lineno">  672</span>        <span class="keywordflow">return</span> <span class="stringliteral">&quot;\n&quot;</span>.join(compiler.explain_query())</div>
<div class="line"><span class="lineno">  673</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="astroid_2context_8py_source.html#l00122">astroid.context.InferenceContext.clone()</a>, <a class="el" href="geometries_8py_source.html#l00433">django.contrib.gis.gdal.geometries.OGRGeometry.clone()</a>, <a class="el" href="django_2contrib_2gis_2gdal_2raster_2source_8py_source.html#l00461">django.contrib.gis.gdal.raster.source.GDALRaster.clone()</a>, <a class="el" href="gdal_2srs_8py_source.html#l00168">django.contrib.gis.gdal.srs.SpatialReference.clone()</a>, <a class="el" href="coordseq_8py_source.html#l00176">django.contrib.gis.geos.coordseq.GEOSCoordSeq.clone()</a>, <a class="el" href="geos_2geometry_8py_source.html#l00674">django.contrib.gis.geos.geometry.GEOSGeometryBase.clone()</a>, <a class="el" href="state_8py_source.html#l00920">django.db.migrations.state.ModelState.clone()</a>, <a class="el" href="state_8py_source.html#l00548">django.db.migrations.state.ProjectState.clone()</a>, <a class="el" href="state_8py_source.html#l00678">django.db.migrations.state.StateApps.clone()</a>, <a class="el" href="db_2models_2constraints_8py_source.html#l00131">django.db.models.constraints.BaseConstraint.clone()</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00661">django.db.models.fields.Field.clone()</a>, <a class="el" href="db_2models_2indexes_8py_source.html#l00153">django.db.models.indexes.Index.clone()</a>, <a class="el" href="query__utils_8py_source.html#l00461">django.db.models.query_utils.FilteredRelation.clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00161">django.db.models.sql.query.RawQuery.clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00216">django.db.models.sql.query.ExplainInfo</a>, and <a class="el" href="sql_2query_8py_source.html#l01097">join()</a>.</p>

</div>
</div>
<a id="aeb9a51381c270566a530dd8ab40c3a53" name="aeb9a51381c270566a530dd8ab40c3a53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb9a51381c270566a530dd8ab40c3a53">&#9670;&#160;</a></span>extra_select()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.extra_select </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02523">2523</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2523</span>    <span class="keyword">def </span>extra_select(self):</div>
<div class="line"><span class="lineno"> 2524</span>        <span class="keywordflow">if</span> self._extra_select_cache <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2525</span>            <span class="keywordflow">return</span> self._extra_select_cache</div>
<div class="line"><span class="lineno"> 2526</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.extra:</div>
<div class="line"><span class="lineno"> 2527</span>            <span class="keywordflow">return</span> {}</div>
<div class="line"><span class="lineno"> 2528</span>        <span class="keywordflow">elif</span> self.extra_select_mask <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2529</span>            self._extra_select_cache = {</div>
<div class="line"><span class="lineno"> 2530</span>                k: v <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> self.extra.items() <span class="keywordflow">if</span> k <span class="keywordflow">in</span> self.extra_select_mask</div>
<div class="line"><span class="lineno"> 2531</span>            }</div>
<div class="line"><span class="lineno"> 2532</span>            <span class="keywordflow">return</span> self._extra_select_cache</div>
<div class="line"><span class="lineno"> 2533</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2534</span>            <span class="keywordflow">return</span> self.extra</div>
<div class="line"><span class="lineno"> 2535</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00281">_extra_select_cache</a>, <a class="el" href="test__session_8py_source.html#l00099">dill.tests.test_session.TestNamespace.extra</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l02372">django.contrib.admin.options.InlineModelAdmin.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01606">django.db.models.expressions.Case.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01045">django.db.models.expressions.Func.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01701">django.db.models.expressions.Subquery.extra</a>, <a class="el" href="sql_2query_8py_source.html#l00316">extra</a>, and <a class="el" href="sql_2query_8py_source.html#l00280">extra_select_mask</a>.</p>

</div>
</div>
<a id="a838bcc369ee808b360b6ab68323868e0" name="a838bcc369ee808b360b6ab68323868e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a838bcc369ee808b360b6ab68323868e0">&#9670;&#160;</a></span>get_aggregation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.get_aggregation </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>using</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>aggregate_exprs</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return the dictionary with the values of the existing aggregations.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00445">445</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  445</span>    <span class="keyword">def </span>get_aggregation(self, using, aggregate_exprs):</div>
<div class="line"><span class="lineno">  446</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  447</span><span class="stringliteral">        Return the dictionary with the values of the existing aggregations.</span></div>
<div class="line"><span class="lineno">  448</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  449</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> aggregate_exprs:</div>
<div class="line"><span class="lineno">  450</span>            <span class="keywordflow">return</span> {}</div>
<div class="line"><span class="lineno">  451</span>        <span class="comment"># Store annotation mask prior to temporarily adding aggregations for</span></div>
<div class="line"><span class="lineno">  452</span>        <span class="comment"># resolving purpose to facilitate their subsequent removal.</span></div>
<div class="line"><span class="lineno">  453</span>        refs_subquery = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  454</span>        refs_window = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  455</span>        replacements = {}</div>
<div class="line"><span class="lineno">  456</span>        annotation_select_mask = self.annotation_select_mask</div>
<div class="line"><span class="lineno">  457</span>        <span class="keywordflow">for</span> alias, aggregate_expr <span class="keywordflow">in</span> aggregate_exprs.items():</div>
<div class="line"><span class="lineno">  458</span>            self.check_alias(alias)</div>
<div class="line"><span class="lineno">  459</span>            aggregate = aggregate_expr.resolve_expression(</div>
<div class="line"><span class="lineno">  460</span>                self, allow_joins=<span class="keyword">True</span>, reuse=<span class="keywordtype">None</span>, summarize=<span class="keyword">True</span></div>
<div class="line"><span class="lineno">  461</span>            )</div>
<div class="line"><span class="lineno">  462</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> aggregate.contains_aggregate:</div>
<div class="line"><span class="lineno">  463</span>                <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;%s is not an aggregate expression&quot;</span> % alias)</div>
<div class="line"><span class="lineno">  464</span>            <span class="comment"># Temporarily add aggregate to annotations to allow remaining</span></div>
<div class="line"><span class="lineno">  465</span>            <span class="comment"># members of `aggregates` to resolve against each others.</span></div>
<div class="line"><span class="lineno">  466</span>            self.append_annotation_mask([alias])</div>
<div class="line"><span class="lineno">  467</span>            aggregate_refs = aggregate.get_refs()</div>
<div class="line"><span class="lineno">  468</span>            refs_subquery |= any(</div>
<div class="line"><span class="lineno">  469</span>                getattr(self.annotations[ref], <span class="stringliteral">&quot;contains_subquery&quot;</span>, <span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  470</span>                <span class="keywordflow">for</span> ref <span class="keywordflow">in</span> aggregate_refs</div>
<div class="line"><span class="lineno">  471</span>            )</div>
<div class="line"><span class="lineno">  472</span>            refs_window |= any(</div>
<div class="line"><span class="lineno">  473</span>                getattr(self.annotations[ref], <span class="stringliteral">&quot;contains_over_clause&quot;</span>, <span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  474</span>                <span class="keywordflow">for</span> ref <span class="keywordflow">in</span> aggregate_refs</div>
<div class="line"><span class="lineno">  475</span>            )</div>
<div class="line"><span class="lineno">  476</span>            aggregate = aggregate.replace_expressions(replacements)</div>
<div class="line"><span class="lineno">  477</span>            self.annotations[alias] = aggregate</div>
<div class="line"><span class="lineno">  478</span>            replacements[Ref(alias, aggregate)] = aggregate</div>
<div class="line"><span class="lineno">  479</span>        <span class="comment"># Stash resolved aggregates now that they have been allowed to resolve</span></div>
<div class="line"><span class="lineno">  480</span>        <span class="comment"># against each other.</span></div>
<div class="line"><span class="lineno">  481</span>        aggregates = {alias: self.annotations.pop(alias) <span class="keywordflow">for</span> alias <span class="keywordflow">in</span> aggregate_exprs}</div>
<div class="line"><span class="lineno">  482</span>        self.set_annotation_mask(annotation_select_mask)</div>
<div class="line"><span class="lineno">  483</span>        <span class="comment"># Existing usage of aggregation can be determined by the presence of</span></div>
<div class="line"><span class="lineno">  484</span>        <span class="comment"># selected aggregates but also by filters against aliased aggregates.</span></div>
<div class="line"><span class="lineno">  485</span>        _, having, qualify = self.where.split_having_qualify()</div>
<div class="line"><span class="lineno">  486</span>        has_existing_aggregation = (</div>
<div class="line"><span class="lineno">  487</span>            any(</div>
<div class="line"><span class="lineno">  488</span>                getattr(annotation, <span class="stringliteral">&quot;contains_aggregate&quot;</span>, <span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  489</span>                <span class="keywordflow">for</span> annotation <span class="keywordflow">in</span> self.annotations.values()</div>
<div class="line"><span class="lineno">  490</span>            )</div>
<div class="line"><span class="lineno">  491</span>            <span class="keywordflow">or</span> having</div>
<div class="line"><span class="lineno">  492</span>        )</div>
<div class="line"><span class="lineno">  493</span>        <span class="comment"># Decide if we need to use a subquery.</span></div>
<div class="line"><span class="lineno">  494</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  495</span>        <span class="comment"># Existing aggregations would cause incorrect results as</span></div>
<div class="line"><span class="lineno">  496</span>        <span class="comment"># get_aggregation() must produce just one result and thus must not use</span></div>
<div class="line"><span class="lineno">  497</span>        <span class="comment"># GROUP BY.</span></div>
<div class="line"><span class="lineno">  498</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  499</span>        <span class="comment"># If the query has limit or distinct, or uses set operations, then</span></div>
<div class="line"><span class="lineno">  500</span>        <span class="comment"># those operations must be done in a subquery so that the query</span></div>
<div class="line"><span class="lineno">  501</span>        <span class="comment"># aggregates on the limit and/or distinct results instead of applying</span></div>
<div class="line"><span class="lineno">  502</span>        <span class="comment"># the distinct and limit after the aggregation.</span></div>
<div class="line"><span class="lineno">  503</span>        <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  504</span>            isinstance(self.group_by, tuple)</div>
<div class="line"><span class="lineno">  505</span>            <span class="keywordflow">or</span> self.is_sliced</div>
<div class="line"><span class="lineno">  506</span>            <span class="keywordflow">or</span> has_existing_aggregation</div>
<div class="line"><span class="lineno">  507</span>            <span class="keywordflow">or</span> refs_subquery</div>
<div class="line"><span class="lineno">  508</span>            <span class="keywordflow">or</span> refs_window</div>
<div class="line"><span class="lineno">  509</span>            <span class="keywordflow">or</span> qualify</div>
<div class="line"><span class="lineno">  510</span>            <span class="keywordflow">or</span> self.distinct</div>
<div class="line"><span class="lineno">  511</span>            <span class="keywordflow">or</span> self.combinator</div>
<div class="line"><span class="lineno">  512</span>        ):</div>
<div class="line"><span class="lineno">  513</span>            <span class="keyword">from</span> <a class="code hl_namespace" href="namespacedjango_1_1db_1_1models_1_1sql_1_1subqueries.html">django.db.models.sql.subqueries</a> <span class="keyword">import</span> AggregateQuery</div>
<div class="line"><span class="lineno">  514</span> </div>
<div class="line"><span class="lineno">  515</span>            inner_query = self.clone()</div>
<div class="line"><span class="lineno">  516</span>            inner_query.subquery = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  517</span>            outer_query = AggregateQuery(self.model, inner_query)</div>
<div class="line"><span class="lineno">  518</span>            inner_query.select_for_update = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  519</span>            inner_query.select_related = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  520</span>            inner_query.set_annotation_mask(self.annotation_select)</div>
<div class="line"><span class="lineno">  521</span>            <span class="comment"># Queries with distinct_fields need ordering and when a limit is</span></div>
<div class="line"><span class="lineno">  522</span>            <span class="comment"># applied we must take the slice from the ordered query. Otherwise</span></div>
<div class="line"><span class="lineno">  523</span>            <span class="comment"># no need for ordering.</span></div>
<div class="line"><span class="lineno">  524</span>            inner_query.clear_ordering(force=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  525</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> inner_query.distinct:</div>
<div class="line"><span class="lineno">  526</span>                <span class="comment"># If the inner query uses default select and it has some</span></div>
<div class="line"><span class="lineno">  527</span>                <span class="comment"># aggregate annotations, then we must make sure the inner</span></div>
<div class="line"><span class="lineno">  528</span>                <span class="comment"># query is grouped by the main model&#39;s primary key. However,</span></div>
<div class="line"><span class="lineno">  529</span>                <span class="comment"># clearing the select clause can alter results if distinct is</span></div>
<div class="line"><span class="lineno">  530</span>                <span class="comment"># used.</span></div>
<div class="line"><span class="lineno">  531</span>                <span class="keywordflow">if</span> inner_query.default_cols <span class="keywordflow">and</span> has_existing_aggregation:</div>
<div class="line"><span class="lineno">  532</span>                    inner_query.group_by = (</div>
<div class="line"><span class="lineno">  533</span>                        self.model._meta.pk.get_col(inner_query.get_initial_alias()),</div>
<div class="line"><span class="lineno">  534</span>                    )</div>
<div class="line"><span class="lineno">  535</span>                inner_query.default_cols = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  536</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> qualify <span class="keywordflow">and</span> <span class="keywordflow">not</span> self.combinator:</div>
<div class="line"><span class="lineno">  537</span>                    <span class="comment"># Mask existing annotations that are not referenced by</span></div>
<div class="line"><span class="lineno">  538</span>                    <span class="comment"># aggregates to be pushed to the outer query unless</span></div>
<div class="line"><span class="lineno">  539</span>                    <span class="comment"># filtering against window functions or if the query is</span></div>
<div class="line"><span class="lineno">  540</span>                    <span class="comment"># combined as both would require complex realiasing logic.</span></div>
<div class="line"><span class="lineno">  541</span>                    annotation_mask = set()</div>
<div class="line"><span class="lineno">  542</span>                    <span class="keywordflow">if</span> isinstance(self.group_by, tuple):</div>
<div class="line"><span class="lineno">  543</span>                        <span class="keywordflow">for</span> expr <span class="keywordflow">in</span> self.group_by:</div>
<div class="line"><span class="lineno">  544</span>                            annotation_mask |= expr.get_refs()</div>
<div class="line"><span class="lineno">  545</span>                    <span class="keywordflow">for</span> aggregate <span class="keywordflow">in</span> aggregates.values():</div>
<div class="line"><span class="lineno">  546</span>                        annotation_mask |= aggregate.get_refs()</div>
<div class="line"><span class="lineno">  547</span>                    <span class="comment"># Avoid eliding expressions that might have an incidence on</span></div>
<div class="line"><span class="lineno">  548</span>                    <span class="comment"># the implicit grouping logic.</span></div>
<div class="line"><span class="lineno">  549</span>                    <span class="keywordflow">for</span> annotation_alias, annotation <span class="keywordflow">in</span> self.annotation_select.items():</div>
<div class="line"><span class="lineno">  550</span>                        <span class="keywordflow">if</span> annotation.get_group_by_cols():</div>
<div class="line"><span class="lineno">  551</span>                            annotation_mask.add(annotation_alias)</div>
<div class="line"><span class="lineno">  552</span>                    inner_query.set_annotation_mask(annotation_mask)</div>
<div class="line"><span class="lineno">  553</span> </div>
<div class="line"><span class="lineno">  554</span>            <span class="comment"># Add aggregates to the outer AggregateQuery. This requires making</span></div>
<div class="line"><span class="lineno">  555</span>            <span class="comment"># sure all columns referenced by the aggregates are selected in the</span></div>
<div class="line"><span class="lineno">  556</span>            <span class="comment"># inner query. It is achieved by retrieving all column references</span></div>
<div class="line"><span class="lineno">  557</span>            <span class="comment"># by the aggregates, explicitly selecting them in the inner query,</span></div>
<div class="line"><span class="lineno">  558</span>            <span class="comment"># and making sure the aggregates are repointed to them.</span></div>
<div class="line"><span class="lineno">  559</span>            col_refs = {}</div>
<div class="line"><span class="lineno">  560</span>            <span class="keywordflow">for</span> alias, aggregate <span class="keywordflow">in</span> aggregates.items():</div>
<div class="line"><span class="lineno">  561</span>                replacements = {}</div>
<div class="line"><span class="lineno">  562</span>                <span class="keywordflow">for</span> col <span class="keywordflow">in</span> self._gen_cols([aggregate], resolve_refs=<span class="keyword">False</span>):</div>
<div class="line"><span class="lineno">  563</span>                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> (col_ref := col_refs.get(col)):</div>
<div class="line"><span class="lineno">  564</span>                        index = len(col_refs) + 1</div>
<div class="line"><span class="lineno">  565</span>                        col_alias = f<span class="stringliteral">&quot;__col{index}&quot;</span></div>
<div class="line"><span class="lineno">  566</span>                        col_ref = Ref(col_alias, col)</div>
<div class="line"><span class="lineno">  567</span>                        col_refs[col] = col_ref</div>
<div class="line"><span class="lineno">  568</span>                        inner_query.annotations[col_alias] = col</div>
<div class="line"><span class="lineno">  569</span>                        inner_query.append_annotation_mask([col_alias])</div>
<div class="line"><span class="lineno">  570</span>                    replacements[col] = col_ref</div>
<div class="line"><span class="lineno">  571</span>                outer_query.annotations[alias] = aggregate.replace_expressions(</div>
<div class="line"><span class="lineno">  572</span>                    replacements</div>
<div class="line"><span class="lineno">  573</span>                )</div>
<div class="line"><span class="lineno">  574</span>            <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  575</span>                inner_query.select == ()</div>
<div class="line"><span class="lineno">  576</span>                <span class="keywordflow">and</span> <span class="keywordflow">not</span> inner_query.default_cols</div>
<div class="line"><span class="lineno">  577</span>                <span class="keywordflow">and</span> <span class="keywordflow">not</span> inner_query.annotation_select_mask</div>
<div class="line"><span class="lineno">  578</span>            ):</div>
<div class="line"><span class="lineno">  579</span>                <span class="comment"># In case of Model.objects[0:3].count(), there would be no</span></div>
<div class="line"><span class="lineno">  580</span>                <span class="comment"># field selected in the inner query, yet we must use a subquery.</span></div>
<div class="line"><span class="lineno">  581</span>                <span class="comment"># So, make sure at least one field is selected.</span></div>
<div class="line"><span class="lineno">  582</span>                inner_query.select = (</div>
<div class="line"><span class="lineno">  583</span>                    self.model._meta.pk.get_col(inner_query.get_initial_alias()),</div>
<div class="line"><span class="lineno">  584</span>                )</div>
<div class="line"><span class="lineno">  585</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  586</span>            outer_query = self</div>
<div class="line"><span class="lineno">  587</span>            self.select = ()</div>
<div class="line"><span class="lineno">  588</span>            self.default_cols = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  589</span>            self.extra = {}</div>
<div class="line"><span class="lineno">  590</span>            <span class="keywordflow">if</span> self.annotations:</div>
<div class="line"><span class="lineno">  591</span>                <span class="comment"># Inline reference to existing annotations and mask them as</span></div>
<div class="line"><span class="lineno">  592</span>                <span class="comment"># they are unnecessary given only the summarized aggregations</span></div>
<div class="line"><span class="lineno">  593</span>                <span class="comment"># are requested.</span></div>
<div class="line"><span class="lineno">  594</span>                replacements = {</div>
<div class="line"><span class="lineno">  595</span>                    Ref(alias, annotation): annotation</div>
<div class="line"><span class="lineno">  596</span>                    <span class="keywordflow">for</span> alias, annotation <span class="keywordflow">in</span> self.annotations.items()</div>
<div class="line"><span class="lineno">  597</span>                }</div>
<div class="line"><span class="lineno">  598</span>                self.annotations = {</div>
<div class="line"><span class="lineno">  599</span>                    alias: aggregate.replace_expressions(replacements)</div>
<div class="line"><span class="lineno">  600</span>                    <span class="keywordflow">for</span> alias, aggregate <span class="keywordflow">in</span> aggregates.items()</div>
<div class="line"><span class="lineno">  601</span>                }</div>
<div class="line"><span class="lineno">  602</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  603</span>                self.annotations = aggregates</div>
<div class="line"><span class="lineno">  604</span>            self.set_annotation_mask(aggregates)</div>
<div class="line"><span class="lineno">  605</span> </div>
<div class="line"><span class="lineno">  606</span>        empty_set_result = [</div>
<div class="line"><span class="lineno">  607</span>            expression.empty_result_set_value</div>
<div class="line"><span class="lineno">  608</span>            <span class="keywordflow">for</span> expression <span class="keywordflow">in</span> outer_query.annotation_select.values()</div>
<div class="line"><span class="lineno">  609</span>        ]</div>
<div class="line"><span class="lineno">  610</span>        elide_empty = <span class="keywordflow">not</span> any(result <span class="keywordflow">is</span> NotImplemented <span class="keywordflow">for</span> result <span class="keywordflow">in</span> empty_set_result)</div>
<div class="line"><span class="lineno">  611</span>        outer_query.clear_ordering(force=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  612</span>        outer_query.clear_limits()</div>
<div class="line"><span class="lineno">  613</span>        outer_query.select_for_update = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  614</span>        outer_query.select_related = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  615</span>        compiler = outer_query.get_compiler(using, elide_empty=elide_empty)</div>
<div class="line"><span class="lineno">  616</span>        result = compiler.execute_sql(SINGLE)</div>
<div class="line"><span class="lineno">  617</span>        <span class="keywordflow">if</span> result <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  618</span>            result = empty_set_result</div>
<div class="line"><span class="lineno">  619</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  620</span>            converters = compiler.get_converters(outer_query.annotation_select.values())</div>
<div class="line"><span class="lineno">  621</span>            result = next(compiler.apply_converters((result,), converters))</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span>        <span class="keywordflow">return</span> dict(zip(outer_query.annotation_select, result))</div>
<div class="line"><span class="lineno">  624</span> </div>
<div class="ttc" id="anamespacedjango_1_1db_1_1models_1_1sql_1_1subqueries_html"><div class="ttname"><a href="namespacedjango_1_1db_1_1models_1_1sql_1_1subqueries.html">django.db.models.sql.subqueries</a></div><div class="ttdef"><b>Definition</b> <a href="subqueries_8py_source.html#l00001">subqueries.py:1</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01960">_gen_cols()</a>, <a class="el" href="sql_2query_8py_source.html#l00325">annotation_select</a>, <a class="el" href="sql_2query_8py_source.html#l00156">django.db.models.sql.query.RawQuery.annotation_select</a>, <a class="el" href="sql_2query_8py_source.html#l00270">annotation_select_mask</a>, <a class="el" href="node__classes_8py_source.html#l00672">astroid.nodes.node_classes.Arguments.annotations</a>, <a class="el" href="sql_2query_8py_source.html#l00313">annotations</a>, <a class="el" href="sql_2query_8py_source.html#l02423">append_annotation_mask()</a>, <a class="el" href="sql_2query_8py_source.html#l01184">check_alias()</a>, <a class="el" href="astroid_2context_8py_source.html#l00122">astroid.context.InferenceContext.clone()</a>, <a class="el" href="geometries_8py_source.html#l00433">django.contrib.gis.gdal.geometries.OGRGeometry.clone()</a>, <a class="el" href="django_2contrib_2gis_2gdal_2raster_2source_8py_source.html#l00461">django.contrib.gis.gdal.raster.source.GDALRaster.clone()</a>, <a class="el" href="gdal_2srs_8py_source.html#l00168">django.contrib.gis.gdal.srs.SpatialReference.clone()</a>, <a class="el" href="coordseq_8py_source.html#l00176">django.contrib.gis.geos.coordseq.GEOSCoordSeq.clone()</a>, <a class="el" href="geos_2geometry_8py_source.html#l00674">django.contrib.gis.geos.geometry.GEOSGeometryBase.clone()</a>, <a class="el" href="state_8py_source.html#l00920">django.db.migrations.state.ModelState.clone()</a>, <a class="el" href="state_8py_source.html#l00548">django.db.migrations.state.ProjectState.clone()</a>, <a class="el" href="state_8py_source.html#l00678">django.db.migrations.state.StateApps.clone()</a>, <a class="el" href="db_2models_2constraints_8py_source.html#l00131">django.db.models.constraints.BaseConstraint.clone()</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00661">django.db.models.fields.Field.clone()</a>, <a class="el" href="db_2models_2indexes_8py_source.html#l00153">django.db.models.indexes.Index.clone()</a>, <a class="el" href="query__utils_8py_source.html#l00461">django.db.models.query_utils.FilteredRelation.clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00161">django.db.models.sql.query.RawQuery.clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00274">combinator</a>, <a class="el" href="sql_2query_8py_source.html#l00231">default_cols</a>, <a class="el" href="db_2models_2aggregates_8py_source.html#l00042">django.db.models.aggregates.Aggregate.distinct</a>, <a class="el" href="sql_2query_8py_source.html#l00254">distinct</a>, <a class="el" href="test__session_8py_source.html#l00099">dill.tests.test_session.TestNamespace.extra</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l02372">django.contrib.admin.options.InlineModelAdmin.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01606">django.db.models.expressions.Case.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01045">django.db.models.expressions.Func.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01701">django.db.models.expressions.Subquery.extra</a>, <a class="el" href="sql_2query_8py_source.html#l00316">extra</a>, <a class="el" href="sql_2query_8py_source.html#l00250">group_by</a>, <a class="el" href="sql_2query_8py_source.html#l00685">is_sliced</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l02369">django.contrib.admin.options.InlineModelAdmin.model</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l00682">django.contrib.admin.options.ModelAdmin.model</a>, <a class="el" href="django_2contrib_2admin_2views_2main_8py_source.html#l00088">django.contrib.admin.views.main.ChangeList.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2forms_8py_source.html#l00233">django.contrib.auth.forms.BaseUserCreationForm.Meta.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2forms_8py_source.html#l00293">django.contrib.auth.forms.UserChangeForm.Meta.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2admin_8py_source.html#l00135">django.contrib.contenttypes.admin.GenericInlineModelAdmin.model</a>, <a class="el" href="django_2contrib_2contenttypes_2fields_8py_source.html#l00488">django.contrib.contenttypes.fields.GenericRelation.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2models_8py_source.html#l00136">django.contrib.contenttypes.models.ContentType.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2flatpages_2forms_8py_source.html#l00027">django.contrib.flatpages.forms.FlatpageForm.Meta.model</a>, <a class="el" href="layermapping_8py_source.html#l00128">django.contrib.gis.utils.layermapping.LayerMapping.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l01254">django.db.models.fields.CharField.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00401">django.db.models.fields.Field.model</a>, <a class="el" href="generated_8py_source.html#l00114">django.db.models.fields.generated.GeneratedField.model</a>, <a class="el" href="django_2db_2models_2fields_2json_8py_source.html#l00055">django.db.models.fields.json.JSONField.model</a>, <a class="el" href="reverse__related_8py_source.html#l00053">django.db.models.fields.reverse_related.ForeignObjectRel.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l02457">django.db.models.fields.TextField.model</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00030">django.db.models.manager.BaseManager.model</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00210">django.db.models.manager.EmptyManager.model</a>, <a class="el" href="db_2models_2options_8py_source.html#l00176">django.db.models.options.Options.model</a>, <a class="el" href="query_8py_source.html#l00297">django.db.models.query.QuerySet.model</a>, <a class="el" href="query_8py_source.html#l02058">django.db.models.query.RawQuerySet.model</a>, <a class="el" href="sql_2query_8py_source.html#l00293">model</a>, <a class="el" href="contrib_2gis_2db_2backends_2base_2operations_8py_source.html#l00020">django.contrib.gis.db.backends.base.operations.BaseSpatialOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2oracle_2operations_8py_source.html#l00099">django.contrib.gis.db.backends.oracle.operations.OracleOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2postgis_2operations_8py_source.html#l00167">django.contrib.gis.db.backends.postgis.operations.PostGISOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2spatialite_2operations_8py_source.html#l00066">django.contrib.gis.db.backends.spatialite.operations.SpatiaLiteOperations.select</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00058">django.db.models.sql.compiler.SQLCompiler.select</a>, <a class="el" href="sql_2query_8py_source.html#l00243">select</a>, <a class="el" href="sql_2query_8py_source.html#l02415">set_annotation_mask()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00086">django.db.models.sql.compiler.SQLCompiler.where</a>, and <a class="el" href="sql_2query_8py_source.html#l00311">where</a>.</p>

</div>
</div>
<a id="a1a20fdb96a84c9314db05fec971417f0" name="a1a20fdb96a84c9314db05fec971417f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a20fdb96a84c9314db05fec971417f0">&#9670;&#160;</a></span>get_compiler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.get_compiler </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>using</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>connection</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>elide_empty</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00357">357</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  357</span>    <span class="keyword">def </span>get_compiler(self, using=None, connection=None, elide_empty=True):</div>
<div class="line"><span class="lineno">  358</span>        <span class="keywordflow">if</span> using <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> connection <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  359</span>            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Need either using or connection&quot;</span>)</div>
<div class="line"><span class="lineno">  360</span>        <span class="keywordflow">if</span> using:</div>
<div class="line"><span class="lineno">  361</span>            connection = connections[using]</div>
<div class="line"><span class="lineno">  362</span>        <span class="keywordflow">return</span> connection.ops.compiler(self.compiler)(</div>
<div class="line"><span class="lineno">  363</span>            self, connection, using, elide_empty</div>
<div class="line"><span class="lineno">  364</span>        )</div>
<div class="line"><span class="lineno">  365</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ddl__references_8py_source.html#l00241">django.db.backends.ddl_references.Expressions.compiler</a>, and <a class="el" href="sql_2query_8py_source.html#l00226">compiler</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01253">as_sql()</a>, <a class="el" href="sql_2query_8py_source.html#l00344">sql_with_params()</a>, and <a class="el" href="subqueries_8py_source.html#l00071">django.db.models.sql.subqueries.UpdateQuery.update_batch()</a>.</p>

</div>
</div>
<a id="a4e6c10ea949b3a1c70851e0002656a09" name="a4e6c10ea949b3a1c70851e0002656a09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e6c10ea949b3a1c70851e0002656a09">&#9670;&#160;</a></span>get_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.get_count </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>using</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Perform a COUNT() query using the current filter constraints.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00625">625</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  625</span>    <span class="keyword">def </span>get_count(self, using):</div>
<div class="line"><span class="lineno">  626</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  627</span><span class="stringliteral">        Perform a COUNT() query using the current filter constraints.</span></div>
<div class="line"><span class="lineno">  628</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  629</span>        obj = self.clone()</div>
<div class="line"><span class="lineno">  630</span>        <span class="keywordflow">return</span> obj.get_aggregation(using, {<span class="stringliteral">&quot;__count&quot;</span>: Count(<span class="stringliteral">&quot;*&quot;</span>)})[<span class="stringliteral">&quot;__count&quot;</span>]</div>
<div class="line"><span class="lineno">  631</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="astroid_2context_8py_source.html#l00122">astroid.context.InferenceContext.clone()</a>, <a class="el" href="geometries_8py_source.html#l00433">django.contrib.gis.gdal.geometries.OGRGeometry.clone()</a>, <a class="el" href="django_2contrib_2gis_2gdal_2raster_2source_8py_source.html#l00461">django.contrib.gis.gdal.raster.source.GDALRaster.clone()</a>, <a class="el" href="gdal_2srs_8py_source.html#l00168">django.contrib.gis.gdal.srs.SpatialReference.clone()</a>, <a class="el" href="coordseq_8py_source.html#l00176">django.contrib.gis.geos.coordseq.GEOSCoordSeq.clone()</a>, <a class="el" href="geos_2geometry_8py_source.html#l00674">django.contrib.gis.geos.geometry.GEOSGeometryBase.clone()</a>, <a class="el" href="state_8py_source.html#l00920">django.db.migrations.state.ModelState.clone()</a>, <a class="el" href="state_8py_source.html#l00548">django.db.migrations.state.ProjectState.clone()</a>, <a class="el" href="state_8py_source.html#l00678">django.db.migrations.state.StateApps.clone()</a>, <a class="el" href="db_2models_2constraints_8py_source.html#l00131">django.db.models.constraints.BaseConstraint.clone()</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00661">django.db.models.fields.Field.clone()</a>, <a class="el" href="db_2models_2indexes_8py_source.html#l00153">django.db.models.indexes.Index.clone()</a>, <a class="el" href="query__utils_8py_source.html#l00461">django.db.models.query_utils.FilteredRelation.clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, and <a class="el" href="sql_2query_8py_source.html#l00161">django.db.models.sql.query.RawQuery.clone()</a>.</p>

</div>
</div>
<a id="a4322802848d6052c14ff70c1e105571d" name="a4322802848d6052c14ff70c1e105571d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4322802848d6052c14ff70c1e105571d">&#9670;&#160;</a></span>get_external_cols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.get_external_cols </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01235">1235</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1235</span>    <span class="keyword">def </span>get_external_cols(self):</div>
<div class="line"><span class="lineno"> 1236</span>        exprs = chain(self.annotations.values(), self.where.children)</div>
<div class="line"><span class="lineno"> 1237</span>        <span class="keywordflow">return</span> [</div>
<div class="line"><span class="lineno"> 1238</span>            col</div>
<div class="line"><span class="lineno"> 1239</span>            <span class="keywordflow">for</span> col <span class="keywordflow">in</span> self._gen_cols(exprs, include_external=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1240</span>            <span class="keywordflow">if</span> col.alias <span class="keywordflow">in</span> self.external_aliases</div>
<div class="line"><span class="lineno"> 1241</span>        ]</div>
<div class="line"><span class="lineno"> 1242</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01960">_gen_cols()</a>, <a class="el" href="node__classes_8py_source.html#l00672">astroid.nodes.node_classes.Arguments.annotations</a>, <a class="el" href="sql_2query_8py_source.html#l00313">annotations</a>, <a class="el" href="sql_2query_8py_source.html#l00420">chain()</a>, <a class="el" href="sql_2query_8py_source.html#l00307">external_aliases</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00086">django.db.models.sql.compiler.SQLCompiler.where</a>, and <a class="el" href="sql_2query_8py_source.html#l00311">where</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01243">get_group_by_cols()</a>.</p>

</div>
</div>
<a id="a3bc7a0ba884b52cb27356d9236e7510f" name="a3bc7a0ba884b52cb27356d9236e7510f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bc7a0ba884b52cb27356d9236e7510f">&#9670;&#160;</a></span>get_group_by_cols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.get_group_by_cols </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>wrapper</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a119d068044db8666b428aa7a614a900b">django.db.models.expressions.BaseExpression</a>.</p>

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01243">1243</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1243</span>    <span class="keyword">def </span>get_group_by_cols(self, wrapper=None):</div>
<div class="line"><span class="lineno"> 1244</span>        <span class="comment"># If wrapper is referenced by an alias for an explicit GROUP BY through</span></div>
<div class="line"><span class="lineno"> 1245</span>        <span class="comment"># values() a reference to this expression and not the self must be</span></div>
<div class="line"><span class="lineno"> 1246</span>        <span class="comment"># returned to ensure external column references are not grouped against</span></div>
<div class="line"><span class="lineno"> 1247</span>        <span class="comment"># as well.</span></div>
<div class="line"><span class="lineno"> 1248</span>        external_cols = self.get_external_cols()</div>
<div class="line"><span class="lineno"> 1249</span>        <span class="keywordflow">if</span> any(col.possibly_multivalued <span class="keywordflow">for</span> col <span class="keywordflow">in</span> external_cols):</div>
<div class="line"><span class="lineno"> 1250</span>            <span class="keywordflow">return</span> [wrapper <span class="keywordflow">or</span> self]</div>
<div class="line"><span class="lineno"> 1251</span>        <span class="keywordflow">return</span> external_cols</div>
<div class="line"><span class="lineno"> 1252</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01722">django.db.models.expressions.Subquery.get_external_cols()</a>, and <a class="el" href="sql_2query_8py_source.html#l01235">get_external_cols()</a>.</p>

</div>
</div>
<a id="aab4910cbe4b7d2f2252bdc9ba5401a45" name="aab4910cbe4b7d2f2252bdc9ba5401a45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab4910cbe4b7d2f2252bdc9ba5401a45">&#9670;&#160;</a></span>get_initial_alias()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.get_initial_alias </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return the first alias for this query, after increasing its reference
count.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01075">1075</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1075</span>    <span class="keyword">def </span>get_initial_alias(self):</div>
<div class="line"><span class="lineno"> 1076</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1077</span><span class="stringliteral">        Return the first alias for this query, after increasing its reference</span></div>
<div class="line"><span class="lineno"> 1078</span><span class="stringliteral">        count.</span></div>
<div class="line"><span class="lineno"> 1079</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1080</span>        <span class="keywordflow">if</span> self.alias_map:</div>
<div class="line"><span class="lineno"> 1081</span>            alias = self.base_table</div>
<div class="line"><span class="lineno"> 1082</span>            self.ref_alias(alias)</div>
<div class="line"><span class="lineno"> 1083</span>        <span class="keywordflow">elif</span> self.model:</div>
<div class="line"><span class="lineno"> 1084</span>            alias = self.join(self.base_table_class(self.get_meta().db_table, <span class="keywordtype">None</span>))</div>
<div class="line"><span class="lineno"> 1085</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1086</span>            alias = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1087</span>        <span class="keywordflow">return</span> alias</div>
<div class="line"><span class="lineno"> 1088</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00300">alias_map</a>, <a class="el" href="sql_2query_8py_source.html#l00329">base_table()</a>, <a class="el" href="sql_2query_8py_source.html#l00228">base_table_class</a>, <a class="el" href="core_2management_2commands_2inspectdb_8py_source.html#l00376">django.core.management.commands.inspectdb.Command.get_meta()</a>, <a class="el" href="sql_2query_8py_source.html#l00366">get_meta()</a>, <a class="el" href="sql_2query_8py_source.html#l01097">join()</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l02369">django.contrib.admin.options.InlineModelAdmin.model</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l00682">django.contrib.admin.options.ModelAdmin.model</a>, <a class="el" href="django_2contrib_2admin_2views_2main_8py_source.html#l00088">django.contrib.admin.views.main.ChangeList.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2forms_8py_source.html#l00233">django.contrib.auth.forms.BaseUserCreationForm.Meta.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2forms_8py_source.html#l00293">django.contrib.auth.forms.UserChangeForm.Meta.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2admin_8py_source.html#l00135">django.contrib.contenttypes.admin.GenericInlineModelAdmin.model</a>, <a class="el" href="django_2contrib_2contenttypes_2fields_8py_source.html#l00488">django.contrib.contenttypes.fields.GenericRelation.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2models_8py_source.html#l00136">django.contrib.contenttypes.models.ContentType.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2flatpages_2forms_8py_source.html#l00027">django.contrib.flatpages.forms.FlatpageForm.Meta.model</a>, <a class="el" href="layermapping_8py_source.html#l00128">django.contrib.gis.utils.layermapping.LayerMapping.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l01254">django.db.models.fields.CharField.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00401">django.db.models.fields.Field.model</a>, <a class="el" href="generated_8py_source.html#l00114">django.db.models.fields.generated.GeneratedField.model</a>, <a class="el" href="django_2db_2models_2fields_2json_8py_source.html#l00055">django.db.models.fields.json.JSONField.model</a>, <a class="el" href="reverse__related_8py_source.html#l00053">django.db.models.fields.reverse_related.ForeignObjectRel.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l02457">django.db.models.fields.TextField.model</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00030">django.db.models.manager.BaseManager.model</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00210">django.db.models.manager.EmptyManager.model</a>, <a class="el" href="db_2models_2options_8py_source.html#l00176">django.db.models.options.Options.model</a>, <a class="el" href="query_8py_source.html#l00297">django.db.models.query.QuerySet.model</a>, <a class="el" href="query_8py_source.html#l02058">django.db.models.query.RawQuerySet.model</a>, <a class="el" href="sql_2query_8py_source.html#l00293">model</a>, and <a class="el" href="sql_2query_8py_source.html#l00900">ref_alias()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02182">add_fields()</a>, <a class="el" href="sql_2query_8py_source.html#l01439">build_filter()</a>, and <a class="el" href="sql_2query_8py_source.html#l01981">resolve_ref()</a>.</p>

</div>
</div>
<a id="ab168d2cabe8308f77df7258d292d4975" name="ab168d2cabe8308f77df7258d292d4975"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab168d2cabe8308f77df7258d292d4975">&#9670;&#160;</a></span>get_meta()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.get_meta </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return the Options instance (the model._meta) from which to start
processing. Normally, this is self.model._meta, but it can be changed
by subclasses.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00366">366</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  366</span>    <span class="keyword">def </span>get_meta(self):</div>
<div class="line"><span class="lineno">  367</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  368</span><span class="stringliteral">        Return the Options instance (the model._meta) from which to start</span></div>
<div class="line"><span class="lineno">  369</span><span class="stringliteral">        processing. Normally, this is self.model._meta, but it can be changed</span></div>
<div class="line"><span class="lineno">  370</span><span class="stringliteral">        by subclasses.</span></div>
<div class="line"><span class="lineno">  371</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  372</span>        <span class="keywordflow">if</span> self.model:</div>
<div class="line"><span class="lineno">  373</span>            <span class="keywordflow">return</span> self.model._meta</div>
<div class="line"><span class="lineno">  374</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="contrib_2admin_2options_8py_source.html#l02369">django.contrib.admin.options.InlineModelAdmin.model</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l00682">django.contrib.admin.options.ModelAdmin.model</a>, <a class="el" href="django_2contrib_2admin_2views_2main_8py_source.html#l00088">django.contrib.admin.views.main.ChangeList.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2forms_8py_source.html#l00233">django.contrib.auth.forms.BaseUserCreationForm.Meta.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2forms_8py_source.html#l00293">django.contrib.auth.forms.UserChangeForm.Meta.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2admin_8py_source.html#l00135">django.contrib.contenttypes.admin.GenericInlineModelAdmin.model</a>, <a class="el" href="django_2contrib_2contenttypes_2fields_8py_source.html#l00488">django.contrib.contenttypes.fields.GenericRelation.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2models_8py_source.html#l00136">django.contrib.contenttypes.models.ContentType.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2flatpages_2forms_8py_source.html#l00027">django.contrib.flatpages.forms.FlatpageForm.Meta.model</a>, <a class="el" href="layermapping_8py_source.html#l00128">django.contrib.gis.utils.layermapping.LayerMapping.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l01254">django.db.models.fields.CharField.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00401">django.db.models.fields.Field.model</a>, <a class="el" href="generated_8py_source.html#l00114">django.db.models.fields.generated.GeneratedField.model</a>, <a class="el" href="django_2db_2models_2fields_2json_8py_source.html#l00055">django.db.models.fields.json.JSONField.model</a>, <a class="el" href="reverse__related_8py_source.html#l00053">django.db.models.fields.reverse_related.ForeignObjectRel.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l02457">django.db.models.fields.TextField.model</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00030">django.db.models.manager.BaseManager.model</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00210">django.db.models.manager.EmptyManager.model</a>, <a class="el" href="db_2models_2options_8py_source.html#l00176">django.db.models.options.Options.model</a>, <a class="el" href="query_8py_source.html#l00297">django.db.models.query.QuerySet.model</a>, <a class="el" href="query_8py_source.html#l02058">django.db.models.query.RawQuerySet.model</a>, and <a class="el" href="sql_2query_8py_source.html#l00293">model</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02182">add_fields()</a>, <a class="el" href="sql_2query_8py_source.html#l02391">add_immediate_loading()</a>, <a class="el" href="subqueries_8py_source.html#l00080">django.db.models.sql.subqueries.UpdateQuery.add_update_values()</a>, <a class="el" href="sql_2query_8py_source.html#l01439">build_filter()</a>, <a class="el" href="subqueries_8py_source.html#l00026">django.db.models.sql.subqueries.DeleteQuery.delete_batch()</a>, <a class="el" href="sql_2query_8py_source.html#l01075">get_initial_alias()</a>, <a class="el" href="sql_2query_8py_source.html#l00851">get_select_mask()</a>, <a class="el" href="sql_2query_8py_source.html#l01981">resolve_ref()</a>, and <a class="el" href="sql_2query_8py_source.html#l01289">solve_lookup_type()</a>.</p>

</div>
</div>
<a id="afe2bb140cd4be7288068076af9dfc279" name="afe2bb140cd4be7288068076af9dfc279"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe2bb140cd4be7288068076af9dfc279">&#9670;&#160;</a></span>get_select_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.get_select_mask </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Convert the self.deferred_loading data structure to an alternate data
structure, describing the field that *will* be loaded. This is used to
compute the columns to select from the database and also by the
QuerySet class to work out which fields are being initialized on each
model. Models that have all their fields included aren't mentioned in
the result, only those that have field restrictions in place.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00851">851</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  851</span>    <span class="keyword">def </span>get_select_mask(self):</div>
<div class="line"><span class="lineno">  852</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  853</span><span class="stringliteral">        Convert the self.deferred_loading data structure to an alternate data</span></div>
<div class="line"><span class="lineno">  854</span><span class="stringliteral">        structure, describing the field that *will* be loaded. This is used to</span></div>
<div class="line"><span class="lineno">  855</span><span class="stringliteral">        compute the columns to select from the database and also by the</span></div>
<div class="line"><span class="lineno">  856</span><span class="stringliteral">        QuerySet class to work out which fields are being initialized on each</span></div>
<div class="line"><span class="lineno">  857</span><span class="stringliteral">        model. Models that have all their fields included aren&#39;t mentioned in</span></div>
<div class="line"><span class="lineno">  858</span><span class="stringliteral">        the result, only those that have field restrictions in place.</span></div>
<div class="line"><span class="lineno">  859</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  860</span>        field_names, defer = self.deferred_loading</div>
<div class="line"><span class="lineno">  861</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> field_names:</div>
<div class="line"><span class="lineno">  862</span>            <span class="keywordflow">return</span> {}</div>
<div class="line"><span class="lineno">  863</span>        mask = {}</div>
<div class="line"><span class="lineno">  864</span>        <span class="keywordflow">for</span> field_name <span class="keywordflow">in</span> field_names:</div>
<div class="line"><span class="lineno">  865</span>            part_mask = mask</div>
<div class="line"><span class="lineno">  866</span>            <span class="keywordflow">for</span> part <span class="keywordflow">in</span> field_name.split(LOOKUP_SEP):</div>
<div class="line"><span class="lineno">  867</span>                part_mask = part_mask.setdefault(part, {})</div>
<div class="line"><span class="lineno">  868</span>        opts = self.get_meta()</div>
<div class="line"><span class="lineno">  869</span>        <span class="keywordflow">if</span> defer:</div>
<div class="line"><span class="lineno">  870</span>            <span class="keywordflow">return</span> self._get_defer_select_mask(opts, mask)</div>
<div class="line"><span class="lineno">  871</span>        <span class="keywordflow">return</span> self._get_only_select_mask(opts, mask)</div>
<div class="line"><span class="lineno">  872</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00790">_get_defer_select_mask()</a>, <a class="el" href="sql_2query_8py_source.html#l00834">_get_only_select_mask()</a>, <a class="el" href="sql_2query_8py_source.html#l00288">deferred_loading</a>, <a class="el" href="core_2management_2commands_2inspectdb_8py_source.html#l00376">django.core.management.commands.inspectdb.Command.get_meta()</a>, and <a class="el" href="sql_2query_8py_source.html#l00366">get_meta()</a>.</p>

</div>
</div>
<a id="ab1955c2dc1f48df3818b915fdfbb6f0f" name="ab1955c2dc1f48df3818b915fdfbb6f0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1955c2dc1f48df3818b915fdfbb6f0f">&#9670;&#160;</a></span>has_filters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.has_filters </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00632">632</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  632</span>    <span class="keyword">def </span>has_filters(self):</div>
<div class="line"><span class="lineno">  633</span>        <span class="keywordflow">return</span> self.where</div>
<div class="line"><span class="lineno">  634</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="models_2sql_2compiler_8py_source.html#l00086">django.db.models.sql.compiler.SQLCompiler.where</a>, and <a class="el" href="sql_2query_8py_source.html#l00311">where</a>.</p>

</div>
</div>
<a id="ae8af8bd988d21f483b1fe6460334dffa" name="ae8af8bd988d21f483b1fe6460334dffa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8af8bd988d21f483b1fe6460334dffa">&#9670;&#160;</a></span>has_limit_one()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.has_limit_one </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02139">2139</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2139</span>    <span class="keyword">def </span>has_limit_one(self):</div>
<div class="line"><span class="lineno"> 2140</span>        <span class="keywordflow">return</span> self.high_mark <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> (self.high_mark - self.low_mark) == 1</div>
<div class="line"><span class="lineno"> 2141</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00253">high_mark</a>, <a class="el" href="sql_2query_8py_source.html#l00154">django.db.models.sql.query.RawQuery.high_mark</a>, <a class="el" href="sql_2query_8py_source.html#l00252">low_mark</a>, and <a class="el" href="sql_2query_8py_source.html#l00154">django.db.models.sql.query.RawQuery.low_mark</a>.</p>

</div>
</div>
<a id="a50f87eab8046ac532fe77593491da050" name="a50f87eab8046ac532fe77593491da050"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50f87eab8046ac532fe77593491da050">&#9670;&#160;</a></span>has_results()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.has_results </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>using</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00657">657</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  657</span>    <span class="keyword">def </span>has_results(self, using):</div>
<div class="line"><span class="lineno">  658</span>        q = self.exists(using)</div>
<div class="line"><span class="lineno">  659</span>        compiler = q.get_compiler(using=using)</div>
<div class="line"><span class="lineno">  660</span>        <span class="keywordflow">return</span> compiler.has_results()</div>
<div class="line"><span class="lineno">  661</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="django_2contrib_2sessions_2backends_2base_8py_source.html#l00450">django.contrib.sessions.backends.base.SessionBase.exists()</a>, <a class="el" href="django_2contrib_2sessions_2backends_2base_8py_source.html#l00459">django.contrib.sessions.backends.base.SessionBase.exists</a>, <a class="el" href="django_2contrib_2sessions_2backends_2cache_8py_source.html#l00115">django.contrib.sessions.backends.cache.SessionStore.exists()</a>, <a class="el" href="cached__db_8py_source.html#l00074">django.contrib.sessions.backends.cached_db.SessionStore.exists()</a>, <a class="el" href="contrib_2sessions_2backends_2db_8py_source.html#l00062">django.contrib.sessions.backends.db.SessionStore.exists()</a>, <a class="el" href="file_8py_source.html#l00189">django.contrib.sessions.backends.file.SessionStore.exists()</a>, <a class="el" href="signed__cookies_8py_source.html#l00051">django.contrib.sessions.backends.signed_cookies.SessionStore.exists()</a>, <a class="el" href="django_2core_2files_2storage_2base_8py_source.html#l00150">django.core.files.storage.base.Storage.exists()</a>, <a class="el" href="django_2core_2files_2storage_2filesystem_8py_source.html#l00205">django.core.files.storage.filesystem.FileSystemStorage.exists()</a>, <a class="el" href="django_2core_2files_2storage_2memory_8py_source.html#l00262">django.core.files.storage.memory.InMemoryStorage.exists()</a>, <a class="el" href="query_8py_source.html#l01283">django.db.models.query.QuerySet.exists()</a>, <a class="el" href="query_8py_source.html#l01292">django.db.models.query.QuerySet.exists</a>, and <a class="el" href="sql_2query_8py_source.html#l00635">exists()</a>.</p>

</div>
</div>
<a id="acda520ac57f8751cb3c4b2252444af81" name="acda520ac57f8751cb3c4b2252444af81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acda520ac57f8751cb3c4b2252444af81">&#9670;&#160;</a></span>is_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.is_empty </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02105">2105</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2105</span>    <span class="keyword">def </span>is_empty(self):</div>
<div class="line"><span class="lineno"> 2106</span>        <span class="keywordflow">return</span> any(isinstance(c, NothingNode) <span class="keywordflow">for</span> c <span class="keywordflow">in</span> self.where.children)</div>
<div class="line"><span class="lineno"> 2107</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="models_2sql_2compiler_8py_source.html#l00086">django.db.models.sql.compiler.SQLCompiler.where</a>, and <a class="el" href="sql_2query_8py_source.html#l00311">where</a>.</p>

</div>
</div>
<a id="ac5731d585a0104037b777be1dec643a9" name="ac5731d585a0104037b777be1dec643a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5731d585a0104037b777be1dec643a9">&#9670;&#160;</a></span>is_nullable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.is_nullable </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>field</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check if the given field should be treated as nullable.

Some backends treat '' as null and Django treats such fields as
nullable for those backends. In such situations field.null can be
False even if we should treat the field as nullable.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02613">2613</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2613</span>    <span class="keyword">def </span>is_nullable(self, field):</div>
<div class="line"><span class="lineno"> 2614</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2615</span><span class="stringliteral">        Check if the given field should be treated as nullable.</span></div>
<div class="line"><span class="lineno"> 2616</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 2617</span><span class="stringliteral">        Some backends treat &#39;&#39; as null and Django treats such fields as</span></div>
<div class="line"><span class="lineno"> 2618</span><span class="stringliteral">        nullable for those backends. In such situations field.null can be</span></div>
<div class="line"><span class="lineno"> 2619</span><span class="stringliteral">        False even if we should treat the field as nullable.</span></div>
<div class="line"><span class="lineno"> 2620</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2621</span>        <span class="comment"># We need to use DEFAULT_DB_ALIAS here, as QuerySet does not have</span></div>
<div class="line"><span class="lineno"> 2622</span>        <span class="comment"># (nor should it have) knowledge of which connection is going to be</span></div>
<div class="line"><span class="lineno"> 2623</span>        <span class="comment"># used. The proper fix would be to defer all decisions where</span></div>
<div class="line"><span class="lineno"> 2624</span>        <span class="comment"># is_nullable() is needed to the compiler stage, but that is not easy</span></div>
<div class="line"><span class="lineno"> 2625</span>        <span class="comment"># to do currently.</span></div>
<div class="line"><span class="lineno"> 2626</span>        <span class="keywordflow">return</span> field.null <span class="keywordflow">or</span> (</div>
<div class="line"><span class="lineno"> 2627</span>            field.empty_strings_allowed</div>
<div class="line"><span class="lineno"> 2628</span>            <span class="keywordflow">and</span> connections[DEFAULT_DB_ALIAS].features.interprets_empty_strings_as_nulls</div>
<div class="line"><span class="lineno"> 2629</span>        )</div>
<div class="line"><span class="lineno"> 2630</span> </div>
<div class="line"><span class="lineno"> 2631</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01819">setup_joins()</a>.</p>

</div>
</div>
<a id="adaf2bd9644de948b97d436aacf0e53eb" name="adaf2bd9644de948b97d436aacf0e53eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaf2bd9644de948b97d436aacf0e53eb">&#9670;&#160;</a></span>is_sliced()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.is_sliced </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02136">2136</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2136</span>    <span class="keyword">def </span>is_sliced(self):</div>
<div class="line"><span class="lineno"> 2137</span>        <span class="keywordflow">return</span> self.low_mark != 0 <span class="keywordflow">or</span> self.high_mark <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 2138</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00253">high_mark</a>, <a class="el" href="sql_2query_8py_source.html#l00154">django.db.models.sql.query.RawQuery.high_mark</a>, <a class="el" href="sql_2query_8py_source.html#l00252">low_mark</a>, and <a class="el" href="sql_2query_8py_source.html#l00154">django.db.models.sql.query.RawQuery.low_mark</a>.</p>

</div>
</div>
<a id="ad1e4ff04f904de18473d47f5473572fd" name="ad1e4ff04f904de18473d47f5473572fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1e4ff04f904de18473d47f5473572fd">&#9670;&#160;</a></span>join()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.join </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>join</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>reuse</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return an alias for the 'join', either reusing an existing alias for
that join or creating a new one. 'join' is either a base_table_class or
join_class.

The 'reuse' parameter can be either None which means all joins are
reusable, or it can be a set containing the aliases that can be reused.

A join is always created as LOUTER if the lhs alias is LOUTER to make
sure chains like t1 LOUTER t2 INNER t3 aren't generated. All new
joins are created as LOUTER if the join is nullable.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01097">1097</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1097</span>    <span class="keyword">def </span>join(self, join, reuse=None):</div>
<div class="line"><span class="lineno"> 1098</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1099</span><span class="stringliteral">        Return an alias for the &#39;join&#39;, either reusing an existing alias for</span></div>
<div class="line"><span class="lineno"> 1100</span><span class="stringliteral">        that join or creating a new one. &#39;join&#39; is either a base_table_class or</span></div>
<div class="line"><span class="lineno"> 1101</span><span class="stringliteral">        join_class.</span></div>
<div class="line"><span class="lineno"> 1102</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1103</span><span class="stringliteral">        The &#39;reuse&#39; parameter can be either None which means all joins are</span></div>
<div class="line"><span class="lineno"> 1104</span><span class="stringliteral">        reusable, or it can be a set containing the aliases that can be reused.</span></div>
<div class="line"><span class="lineno"> 1105</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1106</span><span class="stringliteral">        A join is always created as LOUTER if the lhs alias is LOUTER to make</span></div>
<div class="line"><span class="lineno"> 1107</span><span class="stringliteral">        sure chains like t1 LOUTER t2 INNER t3 aren&#39;t generated. All new</span></div>
<div class="line"><span class="lineno"> 1108</span><span class="stringliteral">        joins are created as LOUTER if the join is nullable.</span></div>
<div class="line"><span class="lineno"> 1109</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1110</span>        reuse_aliases = [</div>
<div class="line"><span class="lineno"> 1111</span>            a</div>
<div class="line"><span class="lineno"> 1112</span>            <span class="keywordflow">for</span> a, j <span class="keywordflow">in</span> self.alias_map.items()</div>
<div class="line"><span class="lineno"> 1113</span>            <span class="keywordflow">if</span> (reuse <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> a <span class="keywordflow">in</span> reuse) <span class="keywordflow">and</span> j == join</div>
<div class="line"><span class="lineno"> 1114</span>        ]</div>
<div class="line"><span class="lineno"> 1115</span>        <span class="keywordflow">if</span> reuse_aliases:</div>
<div class="line"><span class="lineno"> 1116</span>            <span class="keywordflow">if</span> join.table_alias <span class="keywordflow">in</span> reuse_aliases:</div>
<div class="line"><span class="lineno"> 1117</span>                reuse_alias = join.table_alias</div>
<div class="line"><span class="lineno"> 1118</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1119</span>                <span class="comment"># Reuse the most recent alias of the joined table</span></div>
<div class="line"><span class="lineno"> 1120</span>                <span class="comment"># (a many-to-many relation may be joined multiple times).</span></div>
<div class="line"><span class="lineno"> 1121</span>                reuse_alias = reuse_aliases[-1]</div>
<div class="line"><span class="lineno"> 1122</span>            self.ref_alias(reuse_alias)</div>
<div class="line"><span class="lineno"> 1123</span>            <span class="keywordflow">return</span> reuse_alias</div>
<div class="line"><span class="lineno"> 1124</span> </div>
<div class="line"><span class="lineno"> 1125</span>        <span class="comment"># No reuse is possible, so we need a new alias.</span></div>
<div class="line"><span class="lineno"> 1126</span>        alias, _ = self.table_alias(</div>
<div class="line"><span class="lineno"> 1127</span>            join.table_name, create=<span class="keyword">True</span>, filtered_relation=join.filtered_relation</div>
<div class="line"><span class="lineno"> 1128</span>        )</div>
<div class="line"><span class="lineno"> 1129</span>        <span class="keywordflow">if</span> join.join_type:</div>
<div class="line"><span class="lineno"> 1130</span>            <span class="keywordflow">if</span> self.alias_map[join.parent_alias].join_type == LOUTER <span class="keywordflow">or</span> join.nullable:</div>
<div class="line"><span class="lineno"> 1131</span>                join_type = LOUTER</div>
<div class="line"><span class="lineno"> 1132</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1133</span>                join_type = INNER</div>
<div class="line"><span class="lineno"> 1134</span>            join.join_type = join_type</div>
<div class="line"><span class="lineno"> 1135</span>        join.table_alias = alias</div>
<div class="line"><span class="lineno"> 1136</span>        self.alias_map[alias] = join</div>
<div class="line"><span class="lineno"> 1137</span>        <span class="keywordflow">if</span> filtered_relation := join.filtered_relation:</div>
<div class="line"><span class="lineno"> 1138</span>            resolve_reuse = reuse</div>
<div class="line"><span class="lineno"> 1139</span>            <span class="keywordflow">if</span> resolve_reuse <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1140</span>                resolve_reuse = set(reuse) | {alias}</div>
<div class="line"><span class="lineno"> 1141</span>            joins_len = len(self.alias_map)</div>
<div class="line"><span class="lineno"> 1142</span>            join.filtered_relation = filtered_relation.resolve_expression(</div>
<div class="line"><span class="lineno"> 1143</span>                self, reuse=resolve_reuse</div>
<div class="line"><span class="lineno"> 1144</span>            )</div>
<div class="line"><span class="lineno"> 1145</span>            <span class="comment"># Some joins were during expression resolving, they must be present</span></div>
<div class="line"><span class="lineno"> 1146</span>            <span class="comment"># before the one we just added.</span></div>
<div class="line"><span class="lineno"> 1147</span>            <span class="keywordflow">if</span> joins_len &lt; len(self.alias_map):</div>
<div class="line"><span class="lineno"> 1148</span>                self.alias_map[alias] = self.alias_map.pop(alias)</div>
<div class="line"><span class="lineno"> 1149</span>        <span class="keywordflow">return</span> alias</div>
<div class="line"><span class="lineno"> 1150</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00300">alias_map</a>, <a class="el" href="sql_2query_8py_source.html#l00900">ref_alias()</a>, <a class="el" href="db_2models_2sql_2datastructures_8py_source.html#l00214">django.db.models.sql.datastructures.BaseTable.table_alias</a>, <a class="el" href="db_2models_2sql_2datastructures_8py_source.html#l00063">django.db.models.sql.datastructures.Join.table_alias</a>, and <a class="el" href="sql_2query_8py_source.html#l00873">table_alias()</a>.</p>

<p class="reference">Referenced by <a class="el" href="progress_8py_source.html#l00098">pip._vendor.rich.progress._TrackThread.__exit__()</a>, <a class="el" href="sql_2query_8py_source.html#l02182">add_fields()</a>, <a class="el" href="sql_2query_8py_source.html#l01020">bump_prefix()</a>, <a class="el" href="sql_2query_8py_source.html#l00662">explain()</a>, <a class="el" href="sql_2query_8py_source.html#l01075">get_initial_alias()</a>, <a class="el" href="sql_2query_8py_source.html#l01696">names_to_path()</a>, <a class="el" href="sql_2query_8py_source.html#l01819">setup_joins()</a>, <a class="el" href="testcases_8py_source.html#l01748">django.test.testcases.LiveServerThread.terminate()</a>, and <a class="el" href="sql_2query_8py_source.html#l01406">try_transform()</a>.</p>

</div>
</div>
<a id="a847f9a68370e4bce573809f03d212e57" name="a847f9a68370e4bce573809f03d212e57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a847f9a68370e4bce573809f03d212e57">&#9670;&#160;</a></span>join_parent_model()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.join_parent_model </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>opts</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>model</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>alias</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>seen</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Make sure the given 'model' is joined in the query. If 'model' isn't
a parent of 'opts' or if it is None this method is a no-op.

The 'alias' is the root alias for starting the join, 'seen' is a dict
of model -&gt; alias of existing joins. It must also contain a mapping
of None -&gt; some alias. This will be returned in the no-op case.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01151">1151</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1151</span>    <span class="keyword">def </span>join_parent_model(self, opts, model, alias, seen):</div>
<div class="line"><span class="lineno"> 1152</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1153</span><span class="stringliteral">        Make sure the given &#39;model&#39; is joined in the query. If &#39;model&#39; isn&#39;t</span></div>
<div class="line"><span class="lineno"> 1154</span><span class="stringliteral">        a parent of &#39;opts&#39; or if it is None this method is a no-op.</span></div>
<div class="line"><span class="lineno"> 1155</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1156</span><span class="stringliteral">        The &#39;alias&#39; is the root alias for starting the join, &#39;seen&#39; is a dict</span></div>
<div class="line"><span class="lineno"> 1157</span><span class="stringliteral">        of model -&gt; alias of existing joins. It must also contain a mapping</span></div>
<div class="line"><span class="lineno"> 1158</span><span class="stringliteral">        of None -&gt; some alias. This will be returned in the no-op case.</span></div>
<div class="line"><span class="lineno"> 1159</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1160</span>        <span class="keywordflow">if</span> model <span class="keywordflow">in</span> seen:</div>
<div class="line"><span class="lineno"> 1161</span>            <span class="keywordflow">return</span> seen[model]</div>
<div class="line"><span class="lineno"> 1162</span>        chain = opts.get_base_chain(model)</div>
<div class="line"><span class="lineno"> 1163</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> chain:</div>
<div class="line"><span class="lineno"> 1164</span>            <span class="keywordflow">return</span> alias</div>
<div class="line"><span class="lineno"> 1165</span>        curr_opts = opts</div>
<div class="line"><span class="lineno"> 1166</span>        <span class="keywordflow">for</span> int_model <span class="keywordflow">in</span> chain:</div>
<div class="line"><span class="lineno"> 1167</span>            <span class="keywordflow">if</span> int_model <span class="keywordflow">in</span> seen:</div>
<div class="line"><span class="lineno"> 1168</span>                curr_opts = int_model._meta</div>
<div class="line"><span class="lineno"> 1169</span>                alias = seen[int_model]</div>
<div class="line"><span class="lineno"> 1170</span>                <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 1171</span>            <span class="comment"># Proxy model have elements in base chain</span></div>
<div class="line"><span class="lineno"> 1172</span>            <span class="comment"># with no parents, assign the new options</span></div>
<div class="line"><span class="lineno"> 1173</span>            <span class="comment"># object and skip to the next base in that</span></div>
<div class="line"><span class="lineno"> 1174</span>            <span class="comment"># case</span></div>
<div class="line"><span class="lineno"> 1175</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> curr_opts.parents[int_model]:</div>
<div class="line"><span class="lineno"> 1176</span>                curr_opts = int_model._meta</div>
<div class="line"><span class="lineno"> 1177</span>                <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 1178</span>            link_field = curr_opts.get_ancestor_link(int_model)</div>
<div class="line"><span class="lineno"> 1179</span>            join_info = self.setup_joins([link_field.name], curr_opts, alias)</div>
<div class="line"><span class="lineno"> 1180</span>            curr_opts = int_model._meta</div>
<div class="line"><span class="lineno"> 1181</span>            alias = seen[int_model] = join_info.joins[-1]</div>
<div class="line"><span class="lineno"> 1182</span>        <span class="keywordflow">return</span> alias <span class="keywordflow">or</span> seen[<span class="keywordtype">None</span>]</div>
<div class="line"><span class="lineno"> 1183</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01819">setup_joins()</a>.</p>

</div>
</div>
<a id="afa73c0cc51b0c88c2db37eb945bc2a82" name="afa73c0cc51b0c88c2db37eb945bc2a82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa73c0cc51b0c88c2db37eb945bc2a82">&#9670;&#160;</a></span>names_to_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.names_to_path </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>names</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>opts</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>allow_many</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>fail_on_missing</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Walk the list of names and turns them into PathInfo tuples. A single
name in 'names' can generate multiple PathInfos (m2m, for example).

'names' is the path of names to travel, 'opts' is the model Options we
start the name resolving from, 'allow_many' is as for setup_joins().
If fail_on_missing is set to True, then a name that can't be resolved
will generate a FieldError.

Return a list of PathInfo tuples. In addition return the final field
(the last used join field) and target (which is a field guaranteed to
contain the same value as the final field). Finally, return those names
that weren't found (which are likely transforms and the final lookup).
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01696">1696</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1696</span>    <span class="keyword">def </span>names_to_path(self, names, opts, allow_many=True, fail_on_missing=False):</div>
<div class="line"><span class="lineno"> 1697</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1698</span><span class="stringliteral">        Walk the list of names and turns them into PathInfo tuples. A single</span></div>
<div class="line"><span class="lineno"> 1699</span><span class="stringliteral">        name in &#39;names&#39; can generate multiple PathInfos (m2m, for example).</span></div>
<div class="line"><span class="lineno"> 1700</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1701</span><span class="stringliteral">        &#39;names&#39; is the path of names to travel, &#39;opts&#39; is the model Options we</span></div>
<div class="line"><span class="lineno"> 1702</span><span class="stringliteral">        start the name resolving from, &#39;allow_many&#39; is as for setup_joins().</span></div>
<div class="line"><span class="lineno"> 1703</span><span class="stringliteral">        If fail_on_missing is set to True, then a name that can&#39;t be resolved</span></div>
<div class="line"><span class="lineno"> 1704</span><span class="stringliteral">        will generate a FieldError.</span></div>
<div class="line"><span class="lineno"> 1705</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1706</span><span class="stringliteral">        Return a list of PathInfo tuples. In addition return the final field</span></div>
<div class="line"><span class="lineno"> 1707</span><span class="stringliteral">        (the last used join field) and target (which is a field guaranteed to</span></div>
<div class="line"><span class="lineno"> 1708</span><span class="stringliteral">        contain the same value as the final field). Finally, return those names</span></div>
<div class="line"><span class="lineno"> 1709</span><span class="stringliteral">        that weren&#39;t found (which are likely transforms and the final lookup).</span></div>
<div class="line"><span class="lineno"> 1710</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1711</span>        path, names_with_path = [], []</div>
<div class="line"><span class="lineno"> 1712</span>        <span class="keywordflow">for</span> pos, name <span class="keywordflow">in</span> enumerate(names):</div>
<div class="line"><span class="lineno"> 1713</span>            cur_names_with_path = (name, [])</div>
<div class="line"><span class="lineno"> 1714</span>            <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;pk&quot;</span> <span class="keywordflow">and</span> opts <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1715</span>                name = opts.pk.name</div>
<div class="line"><span class="lineno"> 1716</span> </div>
<div class="line"><span class="lineno"> 1717</span>            field = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1718</span>            filtered_relation = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1719</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1720</span>                <span class="keywordflow">if</span> opts <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1721</span>                    <span class="keywordflow">raise</span> FieldDoesNotExist</div>
<div class="line"><span class="lineno"> 1722</span>                field = opts.get_field(name)</div>
<div class="line"><span class="lineno"> 1723</span>            <span class="keywordflow">except</span> FieldDoesNotExist:</div>
<div class="line"><span class="lineno"> 1724</span>                <span class="keywordflow">if</span> name <span class="keywordflow">in</span> self.annotation_select:</div>
<div class="line"><span class="lineno"> 1725</span>                    field = self.annotation_select[name].output_field</div>
<div class="line"><span class="lineno"> 1726</span>                <span class="keywordflow">elif</span> name <span class="keywordflow">in</span> self._filtered_relations <span class="keywordflow">and</span> pos == 0:</div>
<div class="line"><span class="lineno"> 1727</span>                    filtered_relation = self._filtered_relations[name]</div>
<div class="line"><span class="lineno"> 1728</span>                    <span class="keywordflow">if</span> LOOKUP_SEP <span class="keywordflow">in</span> filtered_relation.relation_name:</div>
<div class="line"><span class="lineno"> 1729</span>                        parts = filtered_relation.relation_name.split(LOOKUP_SEP)</div>
<div class="line"><span class="lineno"> 1730</span>                        filtered_relation_path, field, _, _ = self.names_to_path(</div>
<div class="line"><span class="lineno"> 1731</span>                            parts,</div>
<div class="line"><span class="lineno"> 1732</span>                            opts,</div>
<div class="line"><span class="lineno"> 1733</span>                            allow_many,</div>
<div class="line"><span class="lineno"> 1734</span>                            fail_on_missing,</div>
<div class="line"><span class="lineno"> 1735</span>                        )</div>
<div class="line"><span class="lineno"> 1736</span>                        path.extend(filtered_relation_path[:-1])</div>
<div class="line"><span class="lineno"> 1737</span>                    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1738</span>                        field = opts.get_field(filtered_relation.relation_name)</div>
<div class="line"><span class="lineno"> 1739</span>            <span class="keywordflow">if</span> field <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1740</span>                <span class="comment"># Fields that contain one-to-many relations with a generic</span></div>
<div class="line"><span class="lineno"> 1741</span>                <span class="comment"># model (like a GenericForeignKey) cannot generate reverse</span></div>
<div class="line"><span class="lineno"> 1742</span>                <span class="comment"># relations and therefore cannot be used for reverse querying.</span></div>
<div class="line"><span class="lineno"> 1743</span>                <span class="keywordflow">if</span> field.is_relation <span class="keywordflow">and</span> <span class="keywordflow">not</span> field.related_model:</div>
<div class="line"><span class="lineno"> 1744</span>                    <span class="keywordflow">raise</span> FieldError(</div>
<div class="line"><span class="lineno"> 1745</span>                        <span class="stringliteral">&quot;Field %r does not generate an automatic reverse &quot;</span></div>
<div class="line"><span class="lineno"> 1746</span>                        <span class="stringliteral">&quot;relation and therefore cannot be used for reverse &quot;</span></div>
<div class="line"><span class="lineno"> 1747</span>                        <span class="stringliteral">&quot;querying. If it is a GenericForeignKey, consider &quot;</span></div>
<div class="line"><span class="lineno"> 1748</span>                        <span class="stringliteral">&quot;adding a GenericRelation.&quot;</span> % name</div>
<div class="line"><span class="lineno"> 1749</span>                    )</div>
<div class="line"><span class="lineno"> 1750</span>                <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1751</span>                    model = field.model._meta.concrete_model</div>
<div class="line"><span class="lineno"> 1752</span>                <span class="keywordflow">except</span> AttributeError:</div>
<div class="line"><span class="lineno"> 1753</span>                    <span class="comment"># QuerySet.annotate() may introduce fields that aren&#39;t</span></div>
<div class="line"><span class="lineno"> 1754</span>                    <span class="comment"># attached to a model.</span></div>
<div class="line"><span class="lineno"> 1755</span>                    model = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1756</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1757</span>                <span class="comment"># We didn&#39;t find the current field, so move position back</span></div>
<div class="line"><span class="lineno"> 1758</span>                <span class="comment"># one step.</span></div>
<div class="line"><span class="lineno"> 1759</span>                pos -= 1</div>
<div class="line"><span class="lineno"> 1760</span>                <span class="keywordflow">if</span> pos == -1 <span class="keywordflow">or</span> fail_on_missing:</div>
<div class="line"><span class="lineno"> 1761</span>                    available = sorted(</div>
<div class="line"><span class="lineno"> 1762</span>                        [</div>
<div class="line"><span class="lineno"> 1763</span>                            *get_field_names_from_opts(opts),</div>
<div class="line"><span class="lineno"> 1764</span>                            *self.annotation_select,</div>
<div class="line"><span class="lineno"> 1765</span>                            *self._filtered_relations,</div>
<div class="line"><span class="lineno"> 1766</span>                        ]</div>
<div class="line"><span class="lineno"> 1767</span>                    )</div>
<div class="line"><span class="lineno"> 1768</span>                    <span class="keywordflow">raise</span> FieldError(</div>
<div class="line"><span class="lineno"> 1769</span>                        <span class="stringliteral">&quot;Cannot resolve keyword &#39;%s&#39; into field. &quot;</span></div>
<div class="line"><span class="lineno"> 1770</span>                        <span class="stringliteral">&quot;Choices are: %s&quot;</span> % (name, <span class="stringliteral">&quot;, &quot;</span>.join(available))</div>
<div class="line"><span class="lineno"> 1771</span>                    )</div>
<div class="line"><span class="lineno"> 1772</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 1773</span>            <span class="comment"># Check if we need any joins for concrete inheritance cases (the</span></div>
<div class="line"><span class="lineno"> 1774</span>            <span class="comment"># field lives in parent, but we are currently in one of its</span></div>
<div class="line"><span class="lineno"> 1775</span>            <span class="comment"># children)</span></div>
<div class="line"><span class="lineno"> 1776</span>            <span class="keywordflow">if</span> opts <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> model <span class="keywordflow">is</span> <span class="keywordflow">not</span> opts.model:</div>
<div class="line"><span class="lineno"> 1777</span>                path_to_parent = opts.get_path_to_parent(model)</div>
<div class="line"><span class="lineno"> 1778</span>                <span class="keywordflow">if</span> path_to_parent:</div>
<div class="line"><span class="lineno"> 1779</span>                    path.extend(path_to_parent)</div>
<div class="line"><span class="lineno"> 1780</span>                    cur_names_with_path[1].extend(path_to_parent)</div>
<div class="line"><span class="lineno"> 1781</span>                    opts = path_to_parent[-1].to_opts</div>
<div class="line"><span class="lineno"> 1782</span>            <span class="keywordflow">if</span> hasattr(field, <span class="stringliteral">&quot;path_infos&quot;</span>):</div>
<div class="line"><span class="lineno"> 1783</span>                <span class="keywordflow">if</span> filtered_relation:</div>
<div class="line"><span class="lineno"> 1784</span>                    pathinfos = field.get_path_info(filtered_relation)</div>
<div class="line"><span class="lineno"> 1785</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1786</span>                    pathinfos = field.path_infos</div>
<div class="line"><span class="lineno"> 1787</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> allow_many:</div>
<div class="line"><span class="lineno"> 1788</span>                    <span class="keywordflow">for</span> inner_pos, p <span class="keywordflow">in</span> enumerate(pathinfos):</div>
<div class="line"><span class="lineno"> 1789</span>                        <span class="keywordflow">if</span> p.m2m:</div>
<div class="line"><span class="lineno"> 1790</span>                            cur_names_with_path[1].extend(pathinfos[0 : inner_pos + 1])</div>
<div class="line"><span class="lineno"> 1791</span>                            names_with_path.append(cur_names_with_path)</div>
<div class="line"><span class="lineno"> 1792</span>                            <span class="keywordflow">raise</span> MultiJoin(pos + 1, names_with_path)</div>
<div class="line"><span class="lineno"> 1793</span>                last = pathinfos[-1]</div>
<div class="line"><span class="lineno"> 1794</span>                path.extend(pathinfos)</div>
<div class="line"><span class="lineno"> 1795</span>                final_field = last.join_field</div>
<div class="line"><span class="lineno"> 1796</span>                opts = last.to_opts</div>
<div class="line"><span class="lineno"> 1797</span>                targets = last.target_fields</div>
<div class="line"><span class="lineno"> 1798</span>                cur_names_with_path[1].extend(pathinfos)</div>
<div class="line"><span class="lineno"> 1799</span>                names_with_path.append(cur_names_with_path)</div>
<div class="line"><span class="lineno"> 1800</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1801</span>                <span class="comment"># Local non-relational field.</span></div>
<div class="line"><span class="lineno"> 1802</span>                final_field = field</div>
<div class="line"><span class="lineno"> 1803</span>                targets = (field,)</div>
<div class="line"><span class="lineno"> 1804</span>                <span class="keywordflow">if</span> fail_on_missing <span class="keywordflow">and</span> pos + 1 != len(names):</div>
<div class="line"><span class="lineno"> 1805</span>                    <span class="keywordflow">raise</span> FieldError(</div>
<div class="line"><span class="lineno"> 1806</span>                        <span class="stringliteral">&quot;Cannot resolve keyword %r into field. Join on &#39;%s&#39;&quot;</span></div>
<div class="line"><span class="lineno"> 1807</span>                        <span class="stringliteral">&quot; not permitted.&quot;</span> % (names[pos + 1], name)</div>
<div class="line"><span class="lineno"> 1808</span>                    )</div>
<div class="line"><span class="lineno"> 1809</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 1810</span>        <span class="keywordflow">return</span> path, final_field, targets, names[pos + 1 :]</div>
<div class="line"><span class="lineno"> 1811</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00318">_filtered_relations</a>, <a class="el" href="sql_2query_8py_source.html#l00325">annotation_select</a>, <a class="el" href="sql_2query_8py_source.html#l00156">django.db.models.sql.query.RawQuery.annotation_select</a>, <a class="el" href="sql_2query_8py_source.html#l00059">django.db.models.sql.query.get_field_names_from_opts()</a>, <a class="el" href="sql_2query_8py_source.html#l01097">join()</a>, and <a class="el" href="sql_2query_8py_source.html#l01696">names_to_path()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02228">add_ordering()</a>, <a class="el" href="sql_2query_8py_source.html#l01696">names_to_path()</a>, <a class="el" href="sql_2query_8py_source.html#l01819">setup_joins()</a>, and <a class="el" href="sql_2query_8py_source.html#l01289">solve_lookup_type()</a>.</p>

</div>
</div>
<a id="a53ec5a7472740d502ccbe1a6e526aa26" name="a53ec5a7472740d502ccbe1a6e526aa26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53ec5a7472740d502ccbe1a6e526aa26">&#9670;&#160;</a></span>output_field()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.output_field </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a3e457c50f809a706ec6907a835a4f3eb">django.db.models.expressions.BaseExpression</a>.</p>

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00321">321</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  321</span>    <span class="keyword">def </span>output_field(self):</div>
<div class="line"><span class="lineno">  322</span>        <span class="keywordflow">if</span> len(self.select) == 1:</div>
<div class="line"><span class="lineno">  323</span>            select = self.select[0]</div>
<div class="line"><span class="lineno">  324</span>            <span class="keywordflow">return</span> getattr(select, <span class="stringliteral">&quot;target&quot;</span>, <span class="keywordtype">None</span>) <span class="keywordflow">or</span> select.field</div>
<div class="line"><span class="lineno">  325</span>        <span class="keywordflow">elif</span> len(self.annotation_select) == 1:</div>
<div class="line"><span class="lineno">  326</span>            <span class="keywordflow">return</span> next(iter(self.annotation_select.values())).output_field</div>
<div class="line"><span class="lineno">  327</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="contrib_2gis_2db_2backends_2base_2operations_8py_source.html#l00020">django.contrib.gis.db.backends.base.operations.BaseSpatialOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2oracle_2operations_8py_source.html#l00099">django.contrib.gis.db.backends.oracle.operations.OracleOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2postgis_2operations_8py_source.html#l00167">django.contrib.gis.db.backends.postgis.operations.PostGISOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2spatialite_2operations_8py_source.html#l00066">django.contrib.gis.db.backends.spatialite.operations.SpatiaLiteOperations.select</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00058">django.db.models.sql.compiler.SQLCompiler.select</a>, and <a class="el" href="sql_2query_8py_source.html#l00243">select</a>.</p>

<p class="reference">Referenced by <a class="el" href="where_8py_source.html#l00299">django.db.models.sql.where.WhereNode._output_field_or_none()</a>, <a class="el" href="db_2models_2functions_2mixins_8py_source.html#l00029">django.db.models.functions.mixins.FixDurationInputMixin.as_mysql()</a>, <a class="el" href="db_2models_2functions_2mixins_8py_source.html#l00035">django.db.models.functions.mixins.FixDurationInputMixin.as_oracle()</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l00028">django.db.models.expressions.SQLiteNumericMixin.as_sqlite()</a>, <a class="el" href="where_8py_source.html#l00310">django.db.models.sql.where.WhereNode.get_db_converters()</a>, <a class="el" href="query__utils_8py_source.html#l00273">django.db.models.query_utils.RegisterLookupMixin.get_lookup()</a>, <a class="el" href="where_8py_source.html#l00313">django.db.models.sql.where.WhereNode.get_lookup()</a>, and <a class="el" href="query__utils_8py_source.html#l00283">django.db.models.query_utils.RegisterLookupMixin.get_transform()</a>.</p>

</div>
</div>
<a id="af80fd4b2dd7bd7e2a718a0aca983765d" name="af80fd4b2dd7bd7e2a718a0aca983765d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af80fd4b2dd7bd7e2a718a0aca983765d">&#9670;&#160;</a></span>promote_joins()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.promote_joins </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>aliases</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Promote recursively the join type of given aliases and its children to
an outer join. If 'unconditional' is False, only promote the join if
it is nullable or the parent join is an outer join.

The children promotion is done to avoid join chains that contain a LOUTER
b INNER c. So, if we have currently a INNER b INNER c and a-&gt;b is promoted,
then we must also promote b-&gt;c automatically, or otherwise the promotion
of a-&gt;b doesn't actually change anything in the query results.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00908">908</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  908</span>    <span class="keyword">def </span>promote_joins(self, aliases):</div>
<div class="line"><span class="lineno">  909</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  910</span><span class="stringliteral">        Promote recursively the join type of given aliases and its children to</span></div>
<div class="line"><span class="lineno">  911</span><span class="stringliteral">        an outer join. If &#39;unconditional&#39; is False, only promote the join if</span></div>
<div class="line"><span class="lineno">  912</span><span class="stringliteral">        it is nullable or the parent join is an outer join.</span></div>
<div class="line"><span class="lineno">  913</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  914</span><span class="stringliteral">        The children promotion is done to avoid join chains that contain a LOUTER</span></div>
<div class="line"><span class="lineno">  915</span><span class="stringliteral">        b INNER c. So, if we have currently a INNER b INNER c and a-&gt;b is promoted,</span></div>
<div class="line"><span class="lineno">  916</span><span class="stringliteral">        then we must also promote b-&gt;c automatically, or otherwise the promotion</span></div>
<div class="line"><span class="lineno">  917</span><span class="stringliteral">        of a-&gt;b doesn&#39;t actually change anything in the query results.</span></div>
<div class="line"><span class="lineno">  918</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  919</span>        aliases = list(aliases)</div>
<div class="line"><span class="lineno">  920</span>        <span class="keywordflow">while</span> aliases:</div>
<div class="line"><span class="lineno">  921</span>            alias = aliases.pop(0)</div>
<div class="line"><span class="lineno">  922</span>            <span class="keywordflow">if</span> self.alias_map[alias].join_type <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  923</span>                <span class="comment"># This is the base table (first FROM entry) - this table</span></div>
<div class="line"><span class="lineno">  924</span>                <span class="comment"># isn&#39;t really joined at all in the query, so we should not</span></div>
<div class="line"><span class="lineno">  925</span>                <span class="comment"># alter its join type.</span></div>
<div class="line"><span class="lineno">  926</span>                <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  927</span>            <span class="comment"># Only the first alias (skipped above) should have None join_type</span></div>
<div class="line"><span class="lineno">  928</span>            <span class="keyword">assert</span> self.alias_map[alias].join_type <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  929</span>            parent_alias = self.alias_map[alias].parent_alias</div>
<div class="line"><span class="lineno">  930</span>            parent_louter = (</div>
<div class="line"><span class="lineno">  931</span>                parent_alias <span class="keywordflow">and</span> self.alias_map[parent_alias].join_type == LOUTER</div>
<div class="line"><span class="lineno">  932</span>            )</div>
<div class="line"><span class="lineno">  933</span>            already_louter = self.alias_map[alias].join_type == LOUTER</div>
<div class="line"><span class="lineno">  934</span>            <span class="keywordflow">if</span> (self.alias_map[alias].nullable <span class="keywordflow">or</span> parent_louter) <span class="keywordflow">and</span> <span class="keywordflow">not</span> already_louter:</div>
<div class="line"><span class="lineno">  935</span>                self.alias_map[alias] = self.alias_map[alias].promote()</div>
<div class="line"><span class="lineno">  936</span>                <span class="comment"># Join type of &#39;alias&#39; changed, so re-examine all aliases that</span></div>
<div class="line"><span class="lineno">  937</span>                <span class="comment"># refer to this one.</span></div>
<div class="line"><span class="lineno">  938</span>                aliases.extend(</div>
<div class="line"><span class="lineno">  939</span>                    join</div>
<div class="line"><span class="lineno">  940</span>                    <span class="keywordflow">for</span> join <span class="keywordflow">in</span> self.alias_map</div>
<div class="line"><span class="lineno">  941</span>                    <span class="keywordflow">if</span> self.alias_map[join].parent_alias == alias</div>
<div class="line"><span class="lineno">  942</span>                    <span class="keywordflow">and</span> join <span class="keywordflow">not</span> <span class="keywordflow">in</span> aliases</div>
<div class="line"><span class="lineno">  943</span>                )</div>
<div class="line"><span class="lineno">  944</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00300">alias_map</a>.</p>

</div>
</div>
<a id="a6a122efab39c4bca47c0f05bd27a66ed" name="a6a122efab39c4bca47c0f05bd27a66ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a122efab39c4bca47c0f05bd27a66ed">&#9670;&#160;</a></span>ref_alias()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.ref_alias </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>alias</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Increases the reference count for this alias.</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00900">900</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  900</span>    <span class="keyword">def </span>ref_alias(self, alias):</div>
<div class="line"><span class="lineno">  901</span>        <span class="stringliteral">&quot;&quot;&quot;Increases the reference count for this alias.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  902</span>        self.alias_refcount[alias] += 1</div>
<div class="line"><span class="lineno">  903</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00294">alias_refcount</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01075">get_initial_alias()</a>, and <a class="el" href="sql_2query_8py_source.html#l01097">join()</a>.</p>

</div>
</div>
<a id="af280d6a64a9e44dd71caa13a91ccf716" name="af280d6a64a9e44dd71caa13a91ccf716"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af280d6a64a9e44dd71caa13a91ccf716">&#9670;&#160;</a></span>relabeled_clone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.relabeled_clone </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>change_map</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a9ab1678dec9695e3a5afc9cc18b4a9f7">django.db.models.expressions.BaseExpression</a>.</p>

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00435">435</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  435</span>    <span class="keyword">def </span>relabeled_clone(self, change_map):</div>
<div class="line"><span class="lineno">  436</span>        clone = self.clone()</div>
<div class="line"><span class="lineno">  437</span>        clone.change_aliases(change_map)</div>
<div class="line"><span class="lineno">  438</span>        <span class="keywordflow">return</span> clone</div>
<div class="line"><span class="lineno">  439</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="astroid_2context_8py_source.html#l00122">astroid.context.InferenceContext.clone()</a>, <a class="el" href="geometries_8py_source.html#l00433">django.contrib.gis.gdal.geometries.OGRGeometry.clone()</a>, <a class="el" href="django_2contrib_2gis_2gdal_2raster_2source_8py_source.html#l00461">django.contrib.gis.gdal.raster.source.GDALRaster.clone()</a>, <a class="el" href="gdal_2srs_8py_source.html#l00168">django.contrib.gis.gdal.srs.SpatialReference.clone()</a>, <a class="el" href="coordseq_8py_source.html#l00176">django.contrib.gis.geos.coordseq.GEOSCoordSeq.clone()</a>, <a class="el" href="geos_2geometry_8py_source.html#l00674">django.contrib.gis.geos.geometry.GEOSGeometryBase.clone()</a>, <a class="el" href="state_8py_source.html#l00920">django.db.migrations.state.ModelState.clone()</a>, <a class="el" href="state_8py_source.html#l00548">django.db.migrations.state.ProjectState.clone()</a>, <a class="el" href="state_8py_source.html#l00678">django.db.migrations.state.StateApps.clone()</a>, <a class="el" href="db_2models_2constraints_8py_source.html#l00131">django.db.models.constraints.BaseConstraint.clone()</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00661">django.db.models.fields.Field.clone()</a>, <a class="el" href="db_2models_2indexes_8py_source.html#l00153">django.db.models.indexes.Index.clone()</a>, <a class="el" href="query__utils_8py_source.html#l00461">django.db.models.query_utils.FilteredRelation.clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, and <a class="el" href="sql_2query_8py_source.html#l00161">django.db.models.sql.query.RawQuery.clone()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l00973">change_aliases()</a>.</p>

</div>
</div>
<a id="a1c23dd68a9bda649b61ac0f6039265f8" name="a1c23dd68a9bda649b61ac0f6039265f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c23dd68a9bda649b61ac0f6039265f8">&#9670;&#160;</a></span>reset_refcounts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.reset_refcounts </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>to_counts</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Reset reference counts for aliases so that they match the value passed
in `to_counts`.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00964">964</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  964</span>    <span class="keyword">def </span>reset_refcounts(self, to_counts):</div>
<div class="line"><span class="lineno">  965</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  966</span><span class="stringliteral">        Reset reference counts for aliases so that they match the value passed</span></div>
<div class="line"><span class="lineno">  967</span><span class="stringliteral">        in `to_counts`.</span></div>
<div class="line"><span class="lineno">  968</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  969</span>        <span class="keywordflow">for</span> alias, cur_refcount <span class="keywordflow">in</span> self.alias_refcount.copy().items():</div>
<div class="line"><span class="lineno">  970</span>            unref_amount = cur_refcount - to_counts.get(alias, 0)</div>
<div class="line"><span class="lineno">  971</span>            self.unref_alias(alias, unref_amount)</div>
<div class="line"><span class="lineno">  972</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00294">alias_refcount</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l00429">django.db.models.expressions.BaseExpression.copy()</a>, and <a class="el" href="sql_2query_8py_source.html#l00904">unref_alias()</a>.</p>

</div>
</div>
<a id="a9f7253d9010a6f0082182c39b0255e52" name="a9f7253d9010a6f0082182c39b0255e52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f7253d9010a6f0082182c39b0255e52">&#9670;&#160;</a></span>resolve_expression()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.resolve_expression </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>query</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*</td>          <td class="paramname"><span class="paramname"><em>allow_joins</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**</td>          <td class="paramname"><span class="paramname"><em>reuse</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Provide the chance to do any preprocessing or validation before being
added to the query.

Arguments:
 * query: the backend query implementation
 * allow_joins: boolean allowing or denying use of joins
   in this query
 * reuse: a set of reusable joins for multijoins
 * summarize: a terminal aggregate clause
 * for_save: whether this expression about to be used in a save or update

Return: an Expression to be added to the query.
</pre> 
<p>Reimplemented from <a class="el" href="classdjango_1_1db_1_1models_1_1expressions_1_1_base_expression.html#a38c470f127d1b9a72293ca0d3090ba41">django.db.models.expressions.BaseExpression</a>.</p>

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01206">1206</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1206</span>    <span class="keyword">def </span>resolve_expression(self, query, *args, **kwargs):</div>
<div class="line"><span class="lineno"> 1207</span>        clone = self.clone()</div>
<div class="line"><span class="lineno"> 1208</span>        <span class="comment"># Subqueries need to use a different set of aliases than the outer query.</span></div>
<div class="line"><span class="lineno"> 1209</span>        clone.bump_prefix(query)</div>
<div class="line"><span class="lineno"> 1210</span>        clone.subquery = <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1211</span>        clone.where.resolve_expression(query, *args, **kwargs)</div>
<div class="line"><span class="lineno"> 1212</span>        <span class="comment"># Resolve combined queries.</span></div>
<div class="line"><span class="lineno"> 1213</span>        <span class="keywordflow">if</span> clone.combinator:</div>
<div class="line"><span class="lineno"> 1214</span>            clone.combined_queries = tuple(</div>
<div class="line"><span class="lineno"> 1215</span>                [</div>
<div class="line"><span class="lineno"> 1216</span>                    combined_query.resolve_expression(query, *args, **kwargs)</div>
<div class="line"><span class="lineno"> 1217</span>                    <span class="keywordflow">for</span> combined_query <span class="keywordflow">in</span> clone.combined_queries</div>
<div class="line"><span class="lineno"> 1218</span>                ]</div>
<div class="line"><span class="lineno"> 1219</span>            )</div>
<div class="line"><span class="lineno"> 1220</span>        <span class="keywordflow">for</span> key, value <span class="keywordflow">in</span> clone.annotations.items():</div>
<div class="line"><span class="lineno"> 1221</span>            resolved = value.resolve_expression(query, *args, **kwargs)</div>
<div class="line"><span class="lineno"> 1222</span>            <span class="keywordflow">if</span> hasattr(resolved, <span class="stringliteral">&quot;external_aliases&quot;</span>):</div>
<div class="line"><span class="lineno"> 1223</span>                resolved.external_aliases.update(clone.external_aliases)</div>
<div class="line"><span class="lineno"> 1224</span>            clone.annotations[key] = resolved</div>
<div class="line"><span class="lineno"> 1225</span>        <span class="comment"># Outer query&#39;s aliases are considered external.</span></div>
<div class="line"><span class="lineno"> 1226</span>        <span class="keywordflow">for</span> alias, table <span class="keywordflow">in</span> query.alias_map.items():</div>
<div class="line"><span class="lineno"> 1227</span>            clone.external_aliases[alias] = (</div>
<div class="line"><span class="lineno"> 1228</span>                isinstance(table, Join)</div>
<div class="line"><span class="lineno"> 1229</span>                <span class="keywordflow">and</span> table.join_field.related_model._meta.db_table != alias</div>
<div class="line"><span class="lineno"> 1230</span>            ) <span class="keywordflow">or</span> (</div>
<div class="line"><span class="lineno"> 1231</span>                isinstance(table, BaseTable) <span class="keywordflow">and</span> table.table_name != table.table_alias</div>
<div class="line"><span class="lineno"> 1232</span>            )</div>
<div class="line"><span class="lineno"> 1233</span>        <span class="keywordflow">return</span> clone</div>
<div class="line"><span class="lineno"> 1234</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="astroid_2context_8py_source.html#l00122">astroid.context.InferenceContext.clone()</a>, <a class="el" href="geometries_8py_source.html#l00433">django.contrib.gis.gdal.geometries.OGRGeometry.clone()</a>, <a class="el" href="django_2contrib_2gis_2gdal_2raster_2source_8py_source.html#l00461">django.contrib.gis.gdal.raster.source.GDALRaster.clone()</a>, <a class="el" href="gdal_2srs_8py_source.html#l00168">django.contrib.gis.gdal.srs.SpatialReference.clone()</a>, <a class="el" href="coordseq_8py_source.html#l00176">django.contrib.gis.geos.coordseq.GEOSCoordSeq.clone()</a>, <a class="el" href="geos_2geometry_8py_source.html#l00674">django.contrib.gis.geos.geometry.GEOSGeometryBase.clone()</a>, <a class="el" href="state_8py_source.html#l00920">django.db.migrations.state.ModelState.clone()</a>, <a class="el" href="state_8py_source.html#l00548">django.db.migrations.state.ProjectState.clone()</a>, <a class="el" href="state_8py_source.html#l00678">django.db.migrations.state.StateApps.clone()</a>, <a class="el" href="db_2models_2constraints_8py_source.html#l00131">django.db.models.constraints.BaseConstraint.clone()</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00661">django.db.models.fields.Field.clone()</a>, <a class="el" href="db_2models_2indexes_8py_source.html#l00153">django.db.models.indexes.Index.clone()</a>, <a class="el" href="query__utils_8py_source.html#l00461">django.db.models.query_utils.FilteredRelation.clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, and <a class="el" href="sql_2query_8py_source.html#l00161">django.db.models.sql.query.RawQuery.clone()</a>.</p>

<p class="reference">Referenced by <a class="el" href="defaulttags_8py_source.html#l00367">django.template.defaulttags.RegroupNode.render()</a>.</p>

</div>
</div>
<a id="a610b72d888f2079fbc9203c2520e4b04" name="a610b72d888f2079fbc9203c2520e4b04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a610b72d888f2079fbc9203c2520e4b04">&#9670;&#160;</a></span>resolve_lookup_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.resolve_lookup_value </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>can_reuse</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>allow_joins</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>summarize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01268">1268</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1268</span>    <span class="keyword">def </span>resolve_lookup_value(self, value, can_reuse, allow_joins, summarize=False):</div>
<div class="line"><span class="lineno"> 1269</span>        <span class="keywordflow">if</span> hasattr(value, <span class="stringliteral">&quot;resolve_expression&quot;</span>):</div>
<div class="line"><span class="lineno"> 1270</span>            value = value.resolve_expression(</div>
<div class="line"><span class="lineno"> 1271</span>                self,</div>
<div class="line"><span class="lineno"> 1272</span>                reuse=can_reuse,</div>
<div class="line"><span class="lineno"> 1273</span>                allow_joins=allow_joins,</div>
<div class="line"><span class="lineno"> 1274</span>                summarize=summarize,</div>
<div class="line"><span class="lineno"> 1275</span>            )</div>
<div class="line"><span class="lineno"> 1276</span>        <span class="keywordflow">elif</span> isinstance(value, (list, tuple)):</div>
<div class="line"><span class="lineno"> 1277</span>            <span class="comment"># The items of the iterable may be expressions and therefore need</span></div>
<div class="line"><span class="lineno"> 1278</span>            <span class="comment"># to be resolved independently.</span></div>
<div class="line"><span class="lineno"> 1279</span>            values = (</div>
<div class="line"><span class="lineno"> 1280</span>                self.resolve_lookup_value(sub_value, can_reuse, allow_joins, summarize)</div>
<div class="line"><span class="lineno"> 1281</span>                <span class="keywordflow">for</span> sub_value <span class="keywordflow">in</span> value</div>
<div class="line"><span class="lineno"> 1282</span>            )</div>
<div class="line"><span class="lineno"> 1283</span>            type_ = type(value)</div>
<div class="line"><span class="lineno"> 1284</span>            <span class="keywordflow">if</span> hasattr(type_, <span class="stringliteral">&quot;_make&quot;</span>):  <span class="comment"># namedtuple</span></div>
<div class="line"><span class="lineno"> 1285</span>                <span class="keywordflow">return</span> type_(*values)</div>
<div class="line"><span class="lineno"> 1286</span>            <span class="keywordflow">return</span> type_(values)</div>
<div class="line"><span class="lineno"> 1287</span>        <span class="keywordflow">return</span> value</div>
<div class="line"><span class="lineno"> 1288</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01268">resolve_lookup_value()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01439">build_filter()</a>, and <a class="el" href="sql_2query_8py_source.html#l01268">resolve_lookup_value()</a>.</p>

</div>
</div>
<a id="a04a08b4294679286562aa85841af46d6" name="a04a08b4294679286562aa85841af46d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04a08b4294679286562aa85841af46d6">&#9670;&#160;</a></span>resolve_ref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.resolve_ref </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>allow_joins</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>reuse</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>summarize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01981">1981</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1981</span>    <span class="keyword">def </span>resolve_ref(self, name, allow_joins=True, reuse=None, summarize=False):</div>
<div class="line"><span class="lineno"> 1982</span>        annotation = self.annotations.get(name)</div>
<div class="line"><span class="lineno"> 1983</span>        <span class="keywordflow">if</span> annotation <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1984</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> allow_joins:</div>
<div class="line"><span class="lineno"> 1985</span>                <span class="keywordflow">for</span> alias <span class="keywordflow">in</span> self._gen_col_aliases([annotation]):</div>
<div class="line"><span class="lineno"> 1986</span>                    <span class="keywordflow">if</span> isinstance(self.alias_map[alias], Join):</div>
<div class="line"><span class="lineno"> 1987</span>                        <span class="keywordflow">raise</span> FieldError(</div>
<div class="line"><span class="lineno"> 1988</span>                            <span class="stringliteral">&quot;Joined field references are not permitted in this query&quot;</span></div>
<div class="line"><span class="lineno"> 1989</span>                        )</div>
<div class="line"><span class="lineno"> 1990</span>            <span class="keywordflow">if</span> summarize:</div>
<div class="line"><span class="lineno"> 1991</span>                <span class="comment"># Summarize currently means we are doing an aggregate() query</span></div>
<div class="line"><span class="lineno"> 1992</span>                <span class="comment"># which is executed as a wrapped subquery if any of the</span></div>
<div class="line"><span class="lineno"> 1993</span>                <span class="comment"># aggregate() elements reference an existing annotation. In</span></div>
<div class="line"><span class="lineno"> 1994</span>                <span class="comment"># that case we need to return a Ref to the subquery&#39;s annotation.</span></div>
<div class="line"><span class="lineno"> 1995</span>                <span class="keywordflow">if</span> name <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.annotation_select:</div>
<div class="line"><span class="lineno"> 1996</span>                    <span class="keywordflow">raise</span> FieldError(</div>
<div class="line"><span class="lineno"> 1997</span>                        <span class="stringliteral">&quot;Cannot aggregate over the &#39;%s&#39; alias. Use annotate() &quot;</span></div>
<div class="line"><span class="lineno"> 1998</span>                        <span class="stringliteral">&quot;to promote it.&quot;</span> % name</div>
<div class="line"><span class="lineno"> 1999</span>                    )</div>
<div class="line"><span class="lineno"> 2000</span>                <span class="keywordflow">return</span> Ref(name, self.annotation_select[name])</div>
<div class="line"><span class="lineno"> 2001</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2002</span>                <span class="keywordflow">return</span> annotation</div>
<div class="line"><span class="lineno"> 2003</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2004</span>            field_list = name.split(LOOKUP_SEP)</div>
<div class="line"><span class="lineno"> 2005</span>            annotation = self.annotations.get(field_list[0])</div>
<div class="line"><span class="lineno"> 2006</span>            <span class="keywordflow">if</span> annotation <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2007</span>                <span class="keywordflow">for</span> transform <span class="keywordflow">in</span> field_list[1:]:</div>
<div class="line"><span class="lineno"> 2008</span>                    annotation = self.try_transform(annotation, transform)</div>
<div class="line"><span class="lineno"> 2009</span>                <span class="keywordflow">return</span> annotation</div>
<div class="line"><span class="lineno"> 2010</span>            join_info = self.setup_joins(</div>
<div class="line"><span class="lineno"> 2011</span>                field_list, self.get_meta(), self.get_initial_alias(), can_reuse=reuse</div>
<div class="line"><span class="lineno"> 2012</span>            )</div>
<div class="line"><span class="lineno"> 2013</span>            targets, final_alias, join_list = self.trim_joins(</div>
<div class="line"><span class="lineno"> 2014</span>                join_info.targets, join_info.joins, join_info.path</div>
<div class="line"><span class="lineno"> 2015</span>            )</div>
<div class="line"><span class="lineno"> 2016</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> allow_joins <span class="keywordflow">and</span> len(join_list) &gt; 1:</div>
<div class="line"><span class="lineno"> 2017</span>                <span class="keywordflow">raise</span> FieldError(</div>
<div class="line"><span class="lineno"> 2018</span>                    <span class="stringliteral">&quot;Joined field references are not permitted in this query&quot;</span></div>
<div class="line"><span class="lineno"> 2019</span>                )</div>
<div class="line"><span class="lineno"> 2020</span>            <span class="keywordflow">if</span> len(targets) &gt; 1:</div>
<div class="line"><span class="lineno"> 2021</span>                <span class="keywordflow">raise</span> FieldError(</div>
<div class="line"><span class="lineno"> 2022</span>                    <span class="stringliteral">&quot;Referencing multicolumn fields with F() objects isn&#39;t supported&quot;</span></div>
<div class="line"><span class="lineno"> 2023</span>                )</div>
<div class="line"><span class="lineno"> 2024</span>            <span class="comment"># Verify that the last lookup in name is a field or a transform:</span></div>
<div class="line"><span class="lineno"> 2025</span>            <span class="comment"># transform_function() raises FieldError if not.</span></div>
<div class="line"><span class="lineno"> 2026</span>            transform = join_info.transform_function(targets[0], final_alias)</div>
<div class="line"><span class="lineno"> 2027</span>            <span class="keywordflow">if</span> reuse <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2028</span>                reuse.update(join_list)</div>
<div class="line"><span class="lineno"> 2029</span>            <span class="keywordflow">return</span> transform</div>
<div class="line"><span class="lineno"> 2030</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01978">_gen_col_aliases()</a>, <a class="el" href="sql_2query_8py_source.html#l00300">alias_map</a>, <a class="el" href="sql_2query_8py_source.html#l00325">annotation_select</a>, <a class="el" href="sql_2query_8py_source.html#l00156">django.db.models.sql.query.RawQuery.annotation_select</a>, <a class="el" href="node__classes_8py_source.html#l00672">astroid.nodes.node_classes.Arguments.annotations</a>, <a class="el" href="sql_2query_8py_source.html#l00313">annotations</a>, <a class="el" href="sql_2query_8py_source.html#l01075">get_initial_alias()</a>, <a class="el" href="core_2management_2commands_2inspectdb_8py_source.html#l00376">django.core.management.commands.inspectdb.Command.get_meta()</a>, <a class="el" href="sql_2query_8py_source.html#l00366">get_meta()</a>, <a class="el" href="sql_2query_8py_source.html#l01819">setup_joins()</a>, <a class="el" href="sql_2query_8py_source.html#l01927">trim_joins()</a>, and <a class="el" href="sql_2query_8py_source.html#l01406">try_transform()</a>.</p>

</div>
</div>
<a id="af2cd1601d8661ccdc68beb23cdb6e257" name="af2cd1601d8661ccdc68beb23cdb6e257"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2cd1601d8661ccdc68beb23cdb6e257">&#9670;&#160;</a></span>set_annotation_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.set_annotation_mask </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>names</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Set the mask of annotations that will be returned by the SELECT.</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02415">2415</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2415</span>    <span class="keyword">def </span>set_annotation_mask(self, names):</div>
<div class="line"><span class="lineno"> 2416</span>        <span class="stringliteral">&quot;&quot;&quot;Set the mask of annotations that will be returned by the SELECT.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2417</span>        <span class="keywordflow">if</span> names <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2418</span>            self.annotation_select_mask = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 2419</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2420</span>            self.annotation_select_mask = list(dict.fromkeys(names))</div>
<div class="line"><span class="lineno"> 2421</span>        self._annotation_select_cache = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 2422</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00271">_annotation_select_cache</a>, and <a class="el" href="sql_2query_8py_source.html#l00270">annotation_select_mask</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01191">add_annotation()</a>, <a class="el" href="sql_2query_8py_source.html#l02423">append_annotation_mask()</a>, <a class="el" href="sql_2query_8py_source.html#l02150">clear_select_clause()</a>, and <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>.</p>

</div>
</div>
<a id="ad210f67ad79f672a7ffa047cc0c32c3b" name="ad210f67ad79f672a7ffa047cc0c32c3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad210f67ad79f672a7ffa047cc0c32c3b">&#9670;&#160;</a></span>set_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.set_empty </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02100">2100</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2100</span>    <span class="keyword">def </span>set_empty(self):</div>
<div class="line"><span class="lineno"> 2101</span>        self.where.add(NothingNode(), AND)</div>
<div class="line"><span class="lineno"> 2102</span>        <span class="keywordflow">for</span> query <span class="keywordflow">in</span> self.combined_queries:</div>
<div class="line"><span class="lineno"> 2103</span>            query.set_empty()</div>
<div class="line"><span class="lineno"> 2104</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00276">combined_queries</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00086">django.db.models.sql.compiler.SQLCompiler.where</a>, and <a class="el" href="sql_2query_8py_source.html#l00311">where</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02108">set_limits()</a>.</p>

</div>
</div>
<a id="acaa17319da484bcdc56a2c57a20e8d2a" name="acaa17319da484bcdc56a2c57a20e8d2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaa17319da484bcdc56a2c57a20e8d2a">&#9670;&#160;</a></span>set_extra_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.set_extra_mask </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>names</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Set the mask of extra select items that will be returned by SELECT.
Don't remove them from the Query since they might be used later.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02427">2427</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2427</span>    <span class="keyword">def </span>set_extra_mask(self, names):</div>
<div class="line"><span class="lineno"> 2428</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2429</span><span class="stringliteral">        Set the mask of extra select items that will be returned by SELECT.</span></div>
<div class="line"><span class="lineno"> 2430</span><span class="stringliteral">        Don&#39;t remove them from the Query since they might be used later.</span></div>
<div class="line"><span class="lineno"> 2431</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2432</span>        <span class="keywordflow">if</span> names <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2433</span>            self.extra_select_mask = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 2434</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2435</span>            self.extra_select_mask = set(names)</div>
<div class="line"><span class="lineno"> 2436</span>        self._extra_select_cache = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 2437</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00281">_extra_select_cache</a>, and <a class="el" href="sql_2query_8py_source.html#l00280">extra_select_mask</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02150">clear_select_clause()</a>.</p>

</div>
</div>
<a id="a214a1300785d8547a4c6dfe031528f87" name="a214a1300785d8547a4c6dfe031528f87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a214a1300785d8547a4c6dfe031528f87">&#9670;&#160;</a></span>set_group_by()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.set_group_by </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>allow_aliases</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Expand the GROUP BY clause required by the query.

This will usually be the set of all non-aggregate fields in the
return data. If the database backend supports grouping by the
primary key, and the query would be equivalent, the optimization
will be made automatically.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02280">2280</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2280</span>    <span class="keyword">def </span>set_group_by(self, allow_aliases=True):</div>
<div class="line"><span class="lineno"> 2281</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2282</span><span class="stringliteral">        Expand the GROUP BY clause required by the query.</span></div>
<div class="line"><span class="lineno"> 2283</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 2284</span><span class="stringliteral">        This will usually be the set of all non-aggregate fields in the</span></div>
<div class="line"><span class="lineno"> 2285</span><span class="stringliteral">        return data. If the database backend supports grouping by the</span></div>
<div class="line"><span class="lineno"> 2286</span><span class="stringliteral">        primary key, and the query would be equivalent, the optimization</span></div>
<div class="line"><span class="lineno"> 2287</span><span class="stringliteral">        will be made automatically.</span></div>
<div class="line"><span class="lineno"> 2288</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2289</span>        <span class="keywordflow">if</span> allow_aliases <span class="keywordflow">and</span> self.values_select:</div>
<div class="line"><span class="lineno"> 2290</span>            <span class="comment"># If grouping by aliases is allowed assign selected value aliases</span></div>
<div class="line"><span class="lineno"> 2291</span>            <span class="comment"># by moving them to annotations.</span></div>
<div class="line"><span class="lineno"> 2292</span>            group_by_annotations = {}</div>
<div class="line"><span class="lineno"> 2293</span>            values_select = {}</div>
<div class="line"><span class="lineno"> 2294</span>            <span class="keywordflow">for</span> alias, expr <span class="keywordflow">in</span> zip(self.values_select, self.select):</div>
<div class="line"><span class="lineno"> 2295</span>                <span class="keywordflow">if</span> isinstance(expr, Col):</div>
<div class="line"><span class="lineno"> 2296</span>                    values_select[alias] = expr</div>
<div class="line"><span class="lineno"> 2297</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2298</span>                    group_by_annotations[alias] = expr</div>
<div class="line"><span class="lineno"> 2299</span>            self.annotations = {**group_by_annotations, **self.annotations}</div>
<div class="line"><span class="lineno"> 2300</span>            self.append_annotation_mask(group_by_annotations)</div>
<div class="line"><span class="lineno"> 2301</span>            self.select = tuple(values_select.values())</div>
<div class="line"><span class="lineno"> 2302</span>            self.values_select = tuple(values_select)</div>
<div class="line"><span class="lineno"> 2303</span>        group_by = list(self.select)</div>
<div class="line"><span class="lineno"> 2304</span>        <span class="keywordflow">for</span> alias, annotation <span class="keywordflow">in</span> self.annotation_select.items():</div>
<div class="line"><span class="lineno"> 2305</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> (group_by_cols := annotation.get_group_by_cols()):</div>
<div class="line"><span class="lineno"> 2306</span>                <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 2307</span>            <span class="keywordflow">if</span> allow_aliases <span class="keywordflow">and</span> <span class="keywordflow">not</span> annotation.contains_aggregate:</div>
<div class="line"><span class="lineno"> 2308</span>                group_by.append(Ref(alias, annotation))</div>
<div class="line"><span class="lineno"> 2309</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2310</span>                group_by.extend(group_by_cols)</div>
<div class="line"><span class="lineno"> 2311</span>        self.group_by = tuple(group_by)</div>
<div class="line"><span class="lineno"> 2312</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00325">annotation_select</a>, <a class="el" href="sql_2query_8py_source.html#l00156">django.db.models.sql.query.RawQuery.annotation_select</a>, <a class="el" href="node__classes_8py_source.html#l00672">astroid.nodes.node_classes.Arguments.annotations</a>, <a class="el" href="sql_2query_8py_source.html#l00313">annotations</a>, <a class="el" href="sql_2query_8py_source.html#l02423">append_annotation_mask()</a>, <a class="el" href="sql_2query_8py_source.html#l00250">group_by</a>, <a class="el" href="contrib_2gis_2db_2backends_2base_2operations_8py_source.html#l00020">django.contrib.gis.db.backends.base.operations.BaseSpatialOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2oracle_2operations_8py_source.html#l00099">django.contrib.gis.db.backends.oracle.operations.OracleOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2postgis_2operations_8py_source.html#l00167">django.contrib.gis.db.backends.postgis.operations.PostGISOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2spatialite_2operations_8py_source.html#l00066">django.contrib.gis.db.backends.spatialite.operations.SpatiaLiteOperations.select</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00058">django.db.models.sql.compiler.SQLCompiler.select</a>, <a class="el" href="sql_2query_8py_source.html#l00243">select</a>, and <a class="el" href="sql_2query_8py_source.html#l00267">values_select</a>.</p>

</div>
</div>
<a id="ac8fb55925902cdfb9cc408d194b71eaf" name="ac8fb55925902cdfb9cc408d194b71eaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8fb55925902cdfb9cc408d194b71eaf">&#9670;&#160;</a></span>set_limits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.set_limits </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>low</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>high</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Adjust the limits on the rows retrieved. Use low/high to set these,
as it makes it more Pythonic to read and write. When the SQL query is
created, convert them to the appropriate offset and limit values.

Apply any limits passed in here to the existing constraints. Add low
to the current low value and clamp both to any existing high value.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02108">2108</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2108</span>    <span class="keyword">def </span>set_limits(self, low=None, high=None):</div>
<div class="line"><span class="lineno"> 2109</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2110</span><span class="stringliteral">        Adjust the limits on the rows retrieved. Use low/high to set these,</span></div>
<div class="line"><span class="lineno"> 2111</span><span class="stringliteral">        as it makes it more Pythonic to read and write. When the SQL query is</span></div>
<div class="line"><span class="lineno"> 2112</span><span class="stringliteral">        created, convert them to the appropriate offset and limit values.</span></div>
<div class="line"><span class="lineno"> 2113</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 2114</span><span class="stringliteral">        Apply any limits passed in here to the existing constraints. Add low</span></div>
<div class="line"><span class="lineno"> 2115</span><span class="stringliteral">        to the current low value and clamp both to any existing high value.</span></div>
<div class="line"><span class="lineno"> 2116</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2117</span>        <span class="keywordflow">if</span> high <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2118</span>            <span class="keywordflow">if</span> self.high_mark <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2119</span>                self.high_mark = min(self.high_mark, self.low_mark + high)</div>
<div class="line"><span class="lineno"> 2120</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2121</span>                self.high_mark = self.low_mark + high</div>
<div class="line"><span class="lineno"> 2122</span>        <span class="keywordflow">if</span> low <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2123</span>            <span class="keywordflow">if</span> self.high_mark <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2124</span>                self.low_mark = min(self.high_mark, self.low_mark + low)</div>
<div class="line"><span class="lineno"> 2125</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2126</span>                self.low_mark = self.low_mark + low</div>
<div class="line"><span class="lineno"> 2127</span> </div>
<div class="line"><span class="lineno"> 2128</span>        <span class="keywordflow">if</span> self.low_mark == self.high_mark:</div>
<div class="line"><span class="lineno"> 2129</span>            self.set_empty()</div>
<div class="line"><span class="lineno"> 2130</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00253">high_mark</a>, <a class="el" href="sql_2query_8py_source.html#l00154">django.db.models.sql.query.RawQuery.high_mark</a>, <a class="el" href="sql_2query_8py_source.html#l00252">low_mark</a>, <a class="el" href="sql_2query_8py_source.html#l00154">django.db.models.sql.query.RawQuery.low_mark</a>, and <a class="el" href="sql_2query_8py_source.html#l02100">set_empty()</a>.</p>

</div>
</div>
<a id="a7d2fddd548bbd481c4b79032193338dc" name="a7d2fddd548bbd481c4b79032193338dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d2fddd548bbd481c4b79032193338dc">&#9670;&#160;</a></span>set_select()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.set_select </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cols</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02171">2171</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2171</span>    <span class="keyword">def </span>set_select(self, cols):</div>
<div class="line"><span class="lineno"> 2172</span>        self.default_cols = <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 2173</span>        self.select = tuple(cols)</div>
<div class="line"><span class="lineno"> 2174</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00231">default_cols</a>, <a class="el" href="contrib_2gis_2db_2backends_2base_2operations_8py_source.html#l00020">django.contrib.gis.db.backends.base.operations.BaseSpatialOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2oracle_2operations_8py_source.html#l00099">django.contrib.gis.db.backends.oracle.operations.OracleOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2postgis_2operations_8py_source.html#l00167">django.contrib.gis.db.backends.postgis.operations.PostGISOperations.select</a>, <a class="el" href="contrib_2gis_2db_2backends_2spatialite_2operations_8py_source.html#l00066">django.contrib.gis.db.backends.spatialite.operations.SpatiaLiteOperations.select</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00058">django.db.models.sql.compiler.SQLCompiler.select</a>, and <a class="el" href="sql_2query_8py_source.html#l00243">select</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02182">add_fields()</a>, and <a class="el" href="sql_2query_8py_source.html#l02536">trim_start()</a>.</p>

</div>
</div>
<a id="ad70b069d63960564c354fb7ca834b4d5" name="ad70b069d63960564c354fb7ca834b4d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad70b069d63960564c354fb7ca834b4d5">&#9670;&#160;</a></span>set_values()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.set_values </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>fields</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02438">2438</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2438</span>    <span class="keyword">def </span>set_values(self, fields):</div>
<div class="line"><span class="lineno"> 2439</span>        self.select_related = <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 2440</span>        self.clear_deferred_loading()</div>
<div class="line"><span class="lineno"> 2441</span>        self.clear_select_fields()</div>
<div class="line"><span class="lineno"> 2442</span>        self.has_select_fields = <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 2443</span> </div>
<div class="line"><span class="lineno"> 2444</span>        <span class="keywordflow">if</span> fields:</div>
<div class="line"><span class="lineno"> 2445</span>            <span class="keywordflow">for</span> field <span class="keywordflow">in</span> fields:</div>
<div class="line"><span class="lineno"> 2446</span>                self.check_alias(field)</div>
<div class="line"><span class="lineno"> 2447</span>            field_names = []</div>
<div class="line"><span class="lineno"> 2448</span>            extra_names = []</div>
<div class="line"><span class="lineno"> 2449</span>            annotation_names = []</div>
<div class="line"><span class="lineno"> 2450</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.extra <span class="keywordflow">and</span> <span class="keywordflow">not</span> self.annotations:</div>
<div class="line"><span class="lineno"> 2451</span>                <span class="comment"># Shortcut - if there are no extra or annotations, then</span></div>
<div class="line"><span class="lineno"> 2452</span>                <span class="comment"># the values() clause must be just field names.</span></div>
<div class="line"><span class="lineno"> 2453</span>                field_names = list(fields)</div>
<div class="line"><span class="lineno"> 2454</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2455</span>                self.default_cols = <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 2456</span>                <span class="keywordflow">for</span> f <span class="keywordflow">in</span> fields:</div>
<div class="line"><span class="lineno"> 2457</span>                    <span class="keywordflow">if</span> f <span class="keywordflow">in</span> self.extra_select:</div>
<div class="line"><span class="lineno"> 2458</span>                        extra_names.append(f)</div>
<div class="line"><span class="lineno"> 2459</span>                    <span class="keywordflow">elif</span> f <span class="keywordflow">in</span> self.annotation_select:</div>
<div class="line"><span class="lineno"> 2460</span>                        annotation_names.append(f)</div>
<div class="line"><span class="lineno"> 2461</span>                    <span class="keywordflow">elif</span> f <span class="keywordflow">in</span> self.annotations:</div>
<div class="line"><span class="lineno"> 2462</span>                        <span class="keywordflow">raise</span> FieldError(</div>
<div class="line"><span class="lineno"> 2463</span>                            f<span class="stringliteral">&quot;Cannot select the &#39;{f}&#39; alias. Use annotate() to &quot;</span></div>
<div class="line"><span class="lineno"> 2464</span>                            <span class="stringliteral">&quot;promote it.&quot;</span></div>
<div class="line"><span class="lineno"> 2465</span>                        )</div>
<div class="line"><span class="lineno"> 2466</span>                    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2467</span>                        <span class="comment"># Call `names_to_path` to ensure a FieldError including</span></div>
<div class="line"><span class="lineno"> 2468</span>                        <span class="comment"># annotations about to be masked as valid choices if</span></div>
<div class="line"><span class="lineno"> 2469</span>                        <span class="comment"># `f` is not resolvable.</span></div>
<div class="line"><span class="lineno"> 2470</span>                        <span class="keywordflow">if</span> self.annotation_select:</div>
<div class="line"><span class="lineno"> 2471</span>                            self.names_to_path(f.split(LOOKUP_SEP), self.model._meta)</div>
<div class="line"><span class="lineno"> 2472</span>                        field_names.append(f)</div>
<div class="line"><span class="lineno"> 2473</span>            self.set_extra_mask(extra_names)</div>
<div class="line"><span class="lineno"> 2474</span>            self.set_annotation_mask(annotation_names)</div>
<div class="line"><span class="lineno"> 2475</span>            selected = frozenset(field_names + extra_names + annotation_names)</div>
<div class="line"><span class="lineno"> 2476</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2477</span>            field_names = [f.attname <span class="keywordflow">for</span> f <span class="keywordflow">in</span> self.model._meta.concrete_fields]</div>
<div class="line"><span class="lineno"> 2478</span>            selected = frozenset(field_names)</div>
<div class="line"><span class="lineno"> 2479</span>        <span class="comment"># Selected annotations must be known before setting the GROUP BY</span></div>
<div class="line"><span class="lineno"> 2480</span>        <span class="comment"># clause.</span></div>
<div class="line"><span class="lineno"> 2481</span>        <span class="keywordflow">if</span> self.group_by <span class="keywordflow">is</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno"> 2482</span>            self.add_fields(</div>
<div class="line"><span class="lineno"> 2483</span>                (f.attname <span class="keywordflow">for</span> f <span class="keywordflow">in</span> self.model._meta.concrete_fields), <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 2484</span>            )</div>
<div class="line"><span class="lineno"> 2485</span>            <span class="comment"># Disable GROUP BY aliases to avoid orphaning references to the</span></div>
<div class="line"><span class="lineno"> 2486</span>            <span class="comment"># SELECT clause which is about to be cleared.</span></div>
<div class="line"><span class="lineno"> 2487</span>            self.set_group_by(allow_aliases=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 2488</span>            self.clear_select_fields()</div>
<div class="line"><span class="lineno"> 2489</span>        <span class="keywordflow">elif</span> self.group_by:</div>
<div class="line"><span class="lineno"> 2490</span>            <span class="comment"># Resolve GROUP BY annotation references if they are not part of</span></div>
<div class="line"><span class="lineno"> 2491</span>            <span class="comment"># the selected fields anymore.</span></div>
<div class="line"><span class="lineno"> 2492</span>            group_by = []</div>
<div class="line"><span class="lineno"> 2493</span>            <span class="keywordflow">for</span> expr <span class="keywordflow">in</span> self.group_by:</div>
<div class="line"><span class="lineno"> 2494</span>                <span class="keywordflow">if</span> isinstance(expr, Ref) <span class="keywordflow">and</span> expr.refs <span class="keywordflow">not</span> <span class="keywordflow">in</span> selected:</div>
<div class="line"><span class="lineno"> 2495</span>                    expr = self.annotations[expr.refs]</div>
<div class="line"><span class="lineno"> 2496</span>                group_by.append(expr)</div>
<div class="line"><span class="lineno"> 2497</span>            self.group_by = tuple(group_by)</div>
<div class="line"><span class="lineno"> 2498</span> </div>
<div class="line"><span class="lineno"> 2499</span>        self.values_select = tuple(field_names)</div>
<div class="line"><span class="lineno"> 2500</span>        self.add_fields(field_names, <span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 2501</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="node__classes_8py_source.html#l00672">astroid.nodes.node_classes.Arguments.annotations</a>, <a class="el" href="sql_2query_8py_source.html#l00313">annotations</a>, <a class="el" href="sql_2query_8py_source.html#l01184">check_alias()</a>, <a class="el" href="sql_2query_8py_source.html#l02362">clear_deferred_loading()</a>, <a class="el" href="sql_2query_8py_source.html#l02158">clear_select_fields()</a>, <a class="el" href="sql_2query_8py_source.html#l00231">default_cols</a>, <a class="el" href="test__session_8py_source.html#l00099">dill.tests.test_session.TestNamespace.extra</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l02372">django.contrib.admin.options.InlineModelAdmin.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01606">django.db.models.expressions.Case.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01045">django.db.models.expressions.Func.extra</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01701">django.db.models.expressions.Subquery.extra</a>, <a class="el" href="sql_2query_8py_source.html#l00316">extra</a>, <a class="el" href="sql_2query_8py_source.html#l00262">has_select_fields</a>, and <a class="el" href="sql_2query_8py_source.html#l00261">select_related</a>.</p>

</div>
</div>
<a id="a086e5083d9aa4b96e72ee6897e8906cd" name="a086e5083d9aa4b96e72ee6897e8906cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a086e5083d9aa4b96e72ee6897e8906cd">&#9670;&#160;</a></span>setup_joins()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.setup_joins </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>names</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>opts</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>alias</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>can_reuse</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>allow_many</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compute the necessary table joins for the passage through the fields
given in 'names'. 'opts' is the Options class for the current model
(which gives the table we are starting from), 'alias' is the alias for
the table to start the joining from.

The 'can_reuse' defines the reverse foreign key joins we can reuse. It
can be None in which case all joins are reusable or a set of aliases
that can be reused. Note that non-reverse foreign keys are always
reusable when using setup_joins().

If 'allow_many' is False, then any reverse foreign key seen will
generate a MultiJoin exception.

Return the final field involved in the joins, the target field (used
for any 'where' constraint), the final 'opts' value, the joins, the
field path traveled to generate the joins, and a transform function
that takes a field and alias and is equivalent to `field.get_col(alias)`
in the simple case but wraps field transforms if they were included in
names.

The target field is the field containing the concrete value. Final
field can be something different, for example foreign key pointing to
that value. Final field is needed for example in some value
conversions (convert 'obj' in fk__id=obj to pk val using the foreign
key field for example).
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01812">1812</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1819</span>    ):</div>
<div class="line"><span class="lineno"> 1820</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1821</span><span class="stringliteral">        Compute the necessary table joins for the passage through the fields</span></div>
<div class="line"><span class="lineno"> 1822</span><span class="stringliteral">        given in &#39;names&#39;. &#39;opts&#39; is the Options class for the current model</span></div>
<div class="line"><span class="lineno"> 1823</span><span class="stringliteral">        (which gives the table we are starting from), &#39;alias&#39; is the alias for</span></div>
<div class="line"><span class="lineno"> 1824</span><span class="stringliteral">        the table to start the joining from.</span></div>
<div class="line"><span class="lineno"> 1825</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1826</span><span class="stringliteral">        The &#39;can_reuse&#39; defines the reverse foreign key joins we can reuse. It</span></div>
<div class="line"><span class="lineno"> 1827</span><span class="stringliteral">        can be None in which case all joins are reusable or a set of aliases</span></div>
<div class="line"><span class="lineno"> 1828</span><span class="stringliteral">        that can be reused. Note that non-reverse foreign keys are always</span></div>
<div class="line"><span class="lineno"> 1829</span><span class="stringliteral">        reusable when using setup_joins().</span></div>
<div class="line"><span class="lineno"> 1830</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1831</span><span class="stringliteral">        If &#39;allow_many&#39; is False, then any reverse foreign key seen will</span></div>
<div class="line"><span class="lineno"> 1832</span><span class="stringliteral">        generate a MultiJoin exception.</span></div>
<div class="line"><span class="lineno"> 1833</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1834</span><span class="stringliteral">        Return the final field involved in the joins, the target field (used</span></div>
<div class="line"><span class="lineno"> 1835</span><span class="stringliteral">        for any &#39;where&#39; constraint), the final &#39;opts&#39; value, the joins, the</span></div>
<div class="line"><span class="lineno"> 1836</span><span class="stringliteral">        field path traveled to generate the joins, and a transform function</span></div>
<div class="line"><span class="lineno"> 1837</span><span class="stringliteral">        that takes a field and alias and is equivalent to `field.get_col(alias)`</span></div>
<div class="line"><span class="lineno"> 1838</span><span class="stringliteral">        in the simple case but wraps field transforms if they were included in</span></div>
<div class="line"><span class="lineno"> 1839</span><span class="stringliteral">        names.</span></div>
<div class="line"><span class="lineno"> 1840</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1841</span><span class="stringliteral">        The target field is the field containing the concrete value. Final</span></div>
<div class="line"><span class="lineno"> 1842</span><span class="stringliteral">        field can be something different, for example foreign key pointing to</span></div>
<div class="line"><span class="lineno"> 1843</span><span class="stringliteral">        that value. Final field is needed for example in some value</span></div>
<div class="line"><span class="lineno"> 1844</span><span class="stringliteral">        conversions (convert &#39;obj&#39; in fk__id=obj to pk val using the foreign</span></div>
<div class="line"><span class="lineno"> 1845</span><span class="stringliteral">        key field for example).</span></div>
<div class="line"><span class="lineno"> 1846</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1847</span>        joins = [alias]</div>
<div class="line"><span class="lineno"> 1848</span>        <span class="comment"># The transform can&#39;t be applied yet, as joins must be trimmed later.</span></div>
<div class="line"><span class="lineno"> 1849</span>        <span class="comment"># To avoid making every caller of this method look up transforms</span></div>
<div class="line"><span class="lineno"> 1850</span>        <span class="comment"># directly, compute transforms here and create a partial that converts</span></div>
<div class="line"><span class="lineno"> 1851</span>        <span class="comment"># fields to the appropriate wrapped version.</span></div>
<div class="line"><span class="lineno"> 1852</span> </div>
<div class="line"><span class="lineno"> 1853</span>        <span class="keyword">def </span>final_transformer(field, alias):</div>
<div class="line"><span class="lineno"> 1854</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.alias_cols:</div>
<div class="line"><span class="lineno"> 1855</span>                alias = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1856</span>            <span class="keywordflow">return</span> field.get_col(alias)</div>
<div class="line"><span class="lineno"> 1857</span> </div>
<div class="line"><span class="lineno"> 1858</span>        <span class="comment"># Try resolving all the names as fields first. If there&#39;s an error,</span></div>
<div class="line"><span class="lineno"> 1859</span>        <span class="comment"># treat trailing names as lookups until a field can be resolved.</span></div>
<div class="line"><span class="lineno"> 1860</span>        last_field_exception = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1861</span>        <span class="keywordflow">for</span> pivot <span class="keywordflow">in</span> range(len(names), 0, -1):</div>
<div class="line"><span class="lineno"> 1862</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1863</span>                path, final_field, targets, rest = self.names_to_path(</div>
<div class="line"><span class="lineno"> 1864</span>                    names[:pivot],</div>
<div class="line"><span class="lineno"> 1865</span>                    opts,</div>
<div class="line"><span class="lineno"> 1866</span>                    allow_many,</div>
<div class="line"><span class="lineno"> 1867</span>                    fail_on_missing=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 1868</span>                )</div>
<div class="line"><span class="lineno"> 1869</span>            <span class="keywordflow">except</span> FieldError <span class="keyword">as</span> exc:</div>
<div class="line"><span class="lineno"> 1870</span>                <span class="keywordflow">if</span> pivot == 1:</div>
<div class="line"><span class="lineno"> 1871</span>                    <span class="comment"># The first item cannot be a lookup, so it&#39;s safe</span></div>
<div class="line"><span class="lineno"> 1872</span>                    <span class="comment"># to raise the field error here.</span></div>
<div class="line"><span class="lineno"> 1873</span>                    <span class="keywordflow">raise</span></div>
<div class="line"><span class="lineno"> 1874</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1875</span>                    last_field_exception = exc</div>
<div class="line"><span class="lineno"> 1876</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1877</span>                <span class="comment"># The transforms are the remaining items that couldn&#39;t be</span></div>
<div class="line"><span class="lineno"> 1878</span>                <span class="comment"># resolved into fields.</span></div>
<div class="line"><span class="lineno"> 1879</span>                transforms = names[pivot:]</div>
<div class="line"><span class="lineno"> 1880</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 1881</span>        <span class="keywordflow">for</span> name <span class="keywordflow">in</span> transforms:</div>
<div class="line"><span class="lineno"> 1882</span> </div>
<div class="line"><span class="lineno"> 1883</span>            <span class="keyword">def </span>transform(field, alias, *, name, previous):</div>
<div class="line"><span class="lineno"> 1884</span>                <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1885</span>                    wrapped = previous(field, alias)</div>
<div class="line"><span class="lineno"> 1886</span>                    <span class="keywordflow">return</span> self.try_transform(wrapped, name)</div>
<div class="line"><span class="lineno"> 1887</span>                <span class="keywordflow">except</span> FieldError:</div>
<div class="line"><span class="lineno"> 1888</span>                    <span class="comment"># FieldError is raised if the transform doesn&#39;t exist.</span></div>
<div class="line"><span class="lineno"> 1889</span>                    <span class="keywordflow">if</span> isinstance(final_field, Field) <span class="keywordflow">and</span> last_field_exception:</div>
<div class="line"><span class="lineno"> 1890</span>                        <span class="keywordflow">raise</span> last_field_exception</div>
<div class="line"><span class="lineno"> 1891</span>                    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1892</span>                        <span class="keywordflow">raise</span></div>
<div class="line"><span class="lineno"> 1893</span> </div>
<div class="line"><span class="lineno"> 1894</span>            final_transformer = functools.partial(</div>
<div class="line"><span class="lineno"> 1895</span>                transform, name=name, previous=final_transformer</div>
<div class="line"><span class="lineno"> 1896</span>            )</div>
<div class="line"><span class="lineno"> 1897</span>            final_transformer.has_transforms = <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1898</span>        <span class="comment"># Then, add the path to the query&#39;s joins. Note that we can&#39;t trim</span></div>
<div class="line"><span class="lineno"> 1899</span>        <span class="comment"># joins at this stage - we will need the information about join type</span></div>
<div class="line"><span class="lineno"> 1900</span>        <span class="comment"># of the trimmed joins.</span></div>
<div class="line"><span class="lineno"> 1901</span>        <span class="keywordflow">for</span> join <span class="keywordflow">in</span> path:</div>
<div class="line"><span class="lineno"> 1902</span>            <span class="keywordflow">if</span> join.filtered_relation:</div>
<div class="line"><span class="lineno"> 1903</span>                filtered_relation = join.filtered_relation.clone()</div>
<div class="line"><span class="lineno"> 1904</span>                table_alias = filtered_relation.alias</div>
<div class="line"><span class="lineno"> 1905</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1906</span>                filtered_relation = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1907</span>                table_alias = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1908</span>            opts = join.to_opts</div>
<div class="line"><span class="lineno"> 1909</span>            <span class="keywordflow">if</span> join.direct:</div>
<div class="line"><span class="lineno"> 1910</span>                nullable = self.is_nullable(join.join_field)</div>
<div class="line"><span class="lineno"> 1911</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1912</span>                nullable = <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1913</span>            connection = self.join_class(</div>
<div class="line"><span class="lineno"> 1914</span>                opts.db_table,</div>
<div class="line"><span class="lineno"> 1915</span>                alias,</div>
<div class="line"><span class="lineno"> 1916</span>                table_alias,</div>
<div class="line"><span class="lineno"> 1917</span>                INNER,</div>
<div class="line"><span class="lineno"> 1918</span>                join.join_field,</div>
<div class="line"><span class="lineno"> 1919</span>                nullable,</div>
<div class="line"><span class="lineno"> 1920</span>                filtered_relation=filtered_relation,</div>
<div class="line"><span class="lineno"> 1921</span>            )</div>
<div class="line"><span class="lineno"> 1922</span>            reuse = can_reuse <span class="keywordflow">if</span> join.m2m <span class="keywordflow">else</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1923</span>            alias = self.join(connection, reuse=reuse)</div>
<div class="line"><span class="lineno"> 1924</span>            joins.append(alias)</div>
<div class="line"><span class="lineno"> 1925</span>        <span class="keywordflow">return</span> JoinInfo(final_field, targets, opts, joins, path, final_transformer)</div>
<div class="line"><span class="lineno"> 1926</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00302">alias_cols</a>, <a class="el" href="sql_2query_8py_source.html#l02613">is_nullable()</a>, <a class="el" href="sql_2query_8py_source.html#l01097">join()</a>, <a class="el" href="sql_2query_8py_source.html#l00229">join_class</a>, <a class="el" href="sql_2query_8py_source.html#l00137">django.db.models.sql.query.JoinInfo</a>, <a class="el" href="sql_2query_8py_source.html#l01696">names_to_path()</a>, and <a class="el" href="sql_2query_8py_source.html#l01406">try_transform()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02182">add_fields()</a>, <a class="el" href="sql_2query_8py_source.html#l01439">build_filter()</a>, <a class="el" href="sql_2query_8py_source.html#l01151">join_parent_model()</a>, and <a class="el" href="sql_2query_8py_source.html#l01981">resolve_ref()</a>.</p>

</div>
</div>
<a id="af317f6834aed7f19e05679df3fa4f2ea" name="af317f6834aed7f19e05679df3fa4f2ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af317f6834aed7f19e05679df3fa4f2ea">&#9670;&#160;</a></span>solve_lookup_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.solve_lookup_type </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>lookup</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>summarize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Solve the lookup type from the lookup (e.g.: 'foobar__id__icontains').
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01289">1289</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1289</span>    <span class="keyword">def </span>solve_lookup_type(self, lookup, summarize=False):</div>
<div class="line"><span class="lineno"> 1290</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1291</span><span class="stringliteral">        Solve the lookup type from the lookup (e.g.: &#39;foobar__id__icontains&#39;).</span></div>
<div class="line"><span class="lineno"> 1292</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1293</span>        lookup_splitted = lookup.split(LOOKUP_SEP)</div>
<div class="line"><span class="lineno"> 1294</span>        <span class="keywordflow">if</span> self.annotations:</div>
<div class="line"><span class="lineno"> 1295</span>            annotation, expression_lookups = refs_expression(</div>
<div class="line"><span class="lineno"> 1296</span>                lookup_splitted, self.annotations</div>
<div class="line"><span class="lineno"> 1297</span>            )</div>
<div class="line"><span class="lineno"> 1298</span>            <span class="keywordflow">if</span> annotation:</div>
<div class="line"><span class="lineno"> 1299</span>                expression = self.annotations[annotation]</div>
<div class="line"><span class="lineno"> 1300</span>                <span class="keywordflow">if</span> summarize:</div>
<div class="line"><span class="lineno"> 1301</span>                    expression = Ref(annotation, expression)</div>
<div class="line"><span class="lineno"> 1302</span>                <span class="keywordflow">return</span> expression_lookups, (), expression</div>
<div class="line"><span class="lineno"> 1303</span>        _, field, _, lookup_parts = self.names_to_path(lookup_splitted, self.get_meta())</div>
<div class="line"><span class="lineno"> 1304</span>        field_parts = lookup_splitted[0 : len(lookup_splitted) - len(lookup_parts)]</div>
<div class="line"><span class="lineno"> 1305</span>        <span class="keywordflow">if</span> len(lookup_parts) &gt; 1 <span class="keywordflow">and</span> <span class="keywordflow">not</span> field_parts:</div>
<div class="line"><span class="lineno"> 1306</span>            <span class="keywordflow">raise</span> FieldError(</div>
<div class="line"><span class="lineno"> 1307</span>                <span class="stringliteral">&#39;Invalid lookup &quot;%s&quot; for model %s&quot;.&#39;</span></div>
<div class="line"><span class="lineno"> 1308</span>                % (lookup, self.get_meta().model.__name__)</div>
<div class="line"><span class="lineno"> 1309</span>            )</div>
<div class="line"><span class="lineno"> 1310</span>        <span class="keywordflow">return</span> lookup_parts, field_parts, <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 1311</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="node__classes_8py_source.html#l00672">astroid.nodes.node_classes.Arguments.annotations</a>, <a class="el" href="sql_2query_8py_source.html#l00313">annotations</a>, <a class="el" href="core_2management_2commands_2inspectdb_8py_source.html#l00376">django.core.management.commands.inspectdb.Command.get_meta()</a>, <a class="el" href="sql_2query_8py_source.html#l00366">get_meta()</a>, and <a class="el" href="sql_2query_8py_source.html#l01696">names_to_path()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01661">add_filtered_relation()</a>, and <a class="el" href="sql_2query_8py_source.html#l01439">build_filter()</a>.</p>

</div>
</div>
<a id="a383a0ff8738498cdb5394e3f04e3a00d" name="a383a0ff8738498cdb5394e3f04e3a00d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a383a0ff8738498cdb5394e3f04e3a00d">&#9670;&#160;</a></span>split_exclude()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.split_exclude </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>filter_expr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>can_reuse</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>names_with_path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">When doing an exclude against any kind of N-to-many relation, we need
to use a subquery. This method constructs the nested query, given the
original exclude filter (filter_expr) and the portion up to the first
N-to-many relation field.

For example, if the origin filter is ~Q(child__name='foo'), filter_expr
is ('child__name', 'foo') and can_reuse is a set of joins usable for
filters in the original query.

We will turn this into equivalent of:
    WHERE NOT EXISTS(
        SELECT 1
        FROM child
        WHERE name = 'foo' AND child.parent_id = parent.id
        LIMIT 1
    )
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02031">2031</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2031</span>    <span class="keyword">def </span>split_exclude(self, filter_expr, can_reuse, names_with_path):</div>
<div class="line"><span class="lineno"> 2032</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2033</span><span class="stringliteral">        When doing an exclude against any kind of N-to-many relation, we need</span></div>
<div class="line"><span class="lineno"> 2034</span><span class="stringliteral">        to use a subquery. This method constructs the nested query, given the</span></div>
<div class="line"><span class="lineno"> 2035</span><span class="stringliteral">        original exclude filter (filter_expr) and the portion up to the first</span></div>
<div class="line"><span class="lineno"> 2036</span><span class="stringliteral">        N-to-many relation field.</span></div>
<div class="line"><span class="lineno"> 2037</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 2038</span><span class="stringliteral">        For example, if the origin filter is ~Q(child__name=&#39;foo&#39;), filter_expr</span></div>
<div class="line"><span class="lineno"> 2039</span><span class="stringliteral">        is (&#39;child__name&#39;, &#39;foo&#39;) and can_reuse is a set of joins usable for</span></div>
<div class="line"><span class="lineno"> 2040</span><span class="stringliteral">        filters in the original query.</span></div>
<div class="line"><span class="lineno"> 2041</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 2042</span><span class="stringliteral">        We will turn this into equivalent of:</span></div>
<div class="line"><span class="lineno"> 2043</span><span class="stringliteral">            WHERE NOT EXISTS(</span></div>
<div class="line"><span class="lineno"> 2044</span><span class="stringliteral">                SELECT 1</span></div>
<div class="line"><span class="lineno"> 2045</span><span class="stringliteral">                FROM child</span></div>
<div class="line"><span class="lineno"> 2046</span><span class="stringliteral">                WHERE name = &#39;foo&#39; AND child.parent_id = parent.id</span></div>
<div class="line"><span class="lineno"> 2047</span><span class="stringliteral">                LIMIT 1</span></div>
<div class="line"><span class="lineno"> 2048</span><span class="stringliteral">            )</span></div>
<div class="line"><span class="lineno"> 2049</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2050</span>        <span class="comment"># Generate the inner query.</span></div>
<div class="line"><span class="lineno"> 2051</span>        query = self.__class__(self.model)</div>
<div class="line"><span class="lineno"> 2052</span>        query._filtered_relations = self._filtered_relations</div>
<div class="line"><span class="lineno"> 2053</span>        filter_lhs, filter_rhs = filter_expr</div>
<div class="line"><span class="lineno"> 2054</span>        <span class="keywordflow">if</span> isinstance(filter_rhs, OuterRef):</div>
<div class="line"><span class="lineno"> 2055</span>            filter_rhs = OuterRef(filter_rhs)</div>
<div class="line"><span class="lineno"> 2056</span>        <span class="keywordflow">elif</span> isinstance(filter_rhs, F):</div>
<div class="line"><span class="lineno"> 2057</span>            filter_rhs = OuterRef(filter_rhs.name)</div>
<div class="line"><span class="lineno"> 2058</span>        query.add_filter(filter_lhs, filter_rhs)</div>
<div class="line"><span class="lineno"> 2059</span>        query.clear_ordering(force=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 2060</span>        <span class="comment"># Try to have as simple as possible subquery -&gt; trim leading joins from</span></div>
<div class="line"><span class="lineno"> 2061</span>        <span class="comment"># the subquery.</span></div>
<div class="line"><span class="lineno"> 2062</span>        trimmed_prefix, contains_louter = query.trim_start(names_with_path)</div>
<div class="line"><span class="lineno"> 2063</span> </div>
<div class="line"><span class="lineno"> 2064</span>        col = query.select[0]</div>
<div class="line"><span class="lineno"> 2065</span>        select_field = col.target</div>
<div class="line"><span class="lineno"> 2066</span>        alias = col.alias</div>
<div class="line"><span class="lineno"> 2067</span>        <span class="keywordflow">if</span> alias <span class="keywordflow">in</span> can_reuse:</div>
<div class="line"><span class="lineno"> 2068</span>            pk = select_field.model._meta.pk</div>
<div class="line"><span class="lineno"> 2069</span>            <span class="comment"># Need to add a restriction so that outer query&#39;s filters are in effect for</span></div>
<div class="line"><span class="lineno"> 2070</span>            <span class="comment"># the subquery, too.</span></div>
<div class="line"><span class="lineno"> 2071</span>            query.bump_prefix(self)</div>
<div class="line"><span class="lineno"> 2072</span>            lookup_class = select_field.get_lookup(<span class="stringliteral">&quot;exact&quot;</span>)</div>
<div class="line"><span class="lineno"> 2073</span>            <span class="comment"># Note that the query.select[0].alias is different from alias</span></div>
<div class="line"><span class="lineno"> 2074</span>            <span class="comment"># due to bump_prefix above.</span></div>
<div class="line"><span class="lineno"> 2075</span>            lookup = lookup_class(pk.get_col(query.select[0].alias), pk.get_col(alias))</div>
<div class="line"><span class="lineno"> 2076</span>            query.where.add(lookup, AND)</div>
<div class="line"><span class="lineno"> 2077</span>            query.external_aliases[alias] = <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 2078</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2079</span>            lookup_class = select_field.get_lookup(<span class="stringliteral">&quot;exact&quot;</span>)</div>
<div class="line"><span class="lineno"> 2080</span>            lookup = lookup_class(col, ResolvedOuterRef(trimmed_prefix))</div>
<div class="line"><span class="lineno"> 2081</span>            query.where.add(lookup, AND)</div>
<div class="line"><span class="lineno"> 2082</span> </div>
<div class="line"><span class="lineno"> 2083</span>        condition, needed_inner = self.build_filter(Exists(query))</div>
<div class="line"><span class="lineno"> 2084</span> </div>
<div class="line"><span class="lineno"> 2085</span>        <span class="keywordflow">if</span> contains_louter:</div>
<div class="line"><span class="lineno"> 2086</span>            or_null_condition, _ = self.build_filter(</div>
<div class="line"><span class="lineno"> 2087</span>                (<span class="stringliteral">&quot;%s__isnull&quot;</span> % trimmed_prefix, <span class="keyword">True</span>),</div>
<div class="line"><span class="lineno"> 2088</span>                current_negated=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 2089</span>                branch_negated=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 2090</span>                can_reuse=can_reuse,</div>
<div class="line"><span class="lineno"> 2091</span>            )</div>
<div class="line"><span class="lineno"> 2092</span>            condition.add(or_null_condition, OR)</div>
<div class="line"><span class="lineno"> 2093</span>            <span class="comment"># Note that the end result will be:</span></div>
<div class="line"><span class="lineno"> 2094</span>            <span class="comment">#   NOT EXISTS (inner_q) OR outercol IS NULL</span></div>
<div class="line"><span class="lineno"> 2095</span>            <span class="comment"># this might look crazy but due to how NULL works, this seems to be</span></div>
<div class="line"><span class="lineno"> 2096</span>            <span class="comment"># correct. If the IS NULL check is removed, then if outercol</span></div>
<div class="line"><span class="lineno"> 2097</span>            <span class="comment"># IS NULL we will not match the row.</span></div>
<div class="line"><span class="lineno"> 2098</span>        <span class="keywordflow">return</span> condition, needed_inner</div>
<div class="line"><span class="lineno"> 2099</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="apscheduler_2triggers_2cron_2expressions_8py_source.html#l00067">apscheduler.triggers.cron.expressions.AllExpression.__class__</a>, <a class="el" href="apscheduler_2triggers_2cron_2expressions_8py_source.html#l00132">apscheduler.triggers.cron.expressions.RangeExpression.__class__</a>, <a class="el" href="apscheduler_2triggers_2cron_2fields_8py_source.html#l00112">apscheduler.triggers.cron.fields.BaseField.__class__</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l01114">django.contrib.admin.options.ModelAdmin.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2models_8py_source.html#l00432">django.contrib.auth.models.AnonymousUser.__class__</a>, <a class="el" href="field_8py_source.html#l00035">django.contrib.gis.gdal.field.Field.__class__</a>, <a class="el" href="geometries_8py_source.html#l00753">django.contrib.gis.gdal.geometries.GeometryCollection.__class__</a>, <a class="el" href="geometries_8py_source.html#l00131">django.contrib.gis.gdal.geometries.OGRGeometry.__class__</a>, <a class="el" href="geos_2geometry_8py_source.html#l00059">django.contrib.gis.geos.geometry.GEOSGeometryBase.__class__</a>, <a class="el" href="django_2contrib_2gis_2measure_8py_source.html#l00328">django.contrib.gis.measure.Distance.__class__</a>, <a class="el" href="django_2contrib_2gis_2measure_8py_source.html#l00091">django.contrib.gis.measure.MeasureBase.__class__</a>, <a class="el" href="contrib_2postgres_2constraints_8py_source.html#l00156">django.contrib.postgres.constraints.ExclusionConstraint.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2postgres_2validators_8py_source.html#l00069">django.contrib.postgres.validators.KeysValidator.__class__</a>, <a class="el" href="messages_8py_source.html#l00020">django.core.checks.messages.CheckMessage.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2core_2validators_8py_source.html#l00417">django.core.validators.BaseValidator.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2core_2validators_8py_source.html#l00606">django.core.validators.DecimalValidator.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2core_2validators_8py_source.html#l00649">django.core.validators.FileExtensionValidator.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2core_2validators_8py_source.html#l00692">django.core.validators.ProhibitNullCharactersValidator.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2migrations_2operations_2models_8py_source.html#l00545">django.db.migrations.operations.models.ModelOptionOperation.__class__</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l00907">django.db.models.expressions.F.__class__</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l00958">django.db.models.expressions.OuterRef.__class__</a>, <a class="el" href="django_2db_2models_2expressions_8py_source.html#l01014">django.db.models.expressions.Sliced.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00735">django.db.models.fields.Field.__class__</a>, <a class="el" href="reverse__related_8py_source.html#l00156">django.db.models.fields.reverse_related.ForeignObjectRel.__class__</a>, <a class="el" href="db_2models_2indexes_8py_source.html#l00210">django.db.models.indexes.Index.__class__</a>, <a class="el" href="db_2models_2lookups_8py_source.html#l00159">django.db.models.lookups.Lookup.__class__</a>, <a class="el" href="db_2models_2lookups_8py_source.html#l00215">django.db.models.lookups.Transform.__class__</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00168">django.db.models.manager.BaseManager.__class__</a>, <a class="el" href="query_8py_source.html#l02264">django.db.models.query.Prefetch.__class__</a>, <a class="el" href="query__utils_8py_source.html#l00453">django.db.models.query_utils.FilteredRelation.__class__</a>, <a class="el" href="db_2models_2sql_2datastructures_8py_source.html#l00230">django.db.models.sql.datastructures.BaseTable.__class__</a>, <a class="el" href="db_2models_2sql_2datastructures_8py_source.html#l00174">django.db.models.sql.datastructures.Join.__class__</a>, <a class="el" href="functional_8py_source.html#l00359">django.utils.functional.LazyObject.__class__</a>, <a class="el" href="django_2utils_2tree_8py_source.html#l00073">django.utils.tree.Node.__class__</a>, <a class="el" href="dotenv_2variables_8py_source.html#l00037">dotenv.variables.Literal.__class__</a>, <a class="el" href="dotenv_2variables_8py_source.html#l00057">dotenv.variables.Variable.__class__</a>, <a class="el" href="_image_file_8py_source.html#l00388">PIL.ImageFile.StubImageFile.__class__</a>, <a class="el" href="format__control_8py_source.html#l00027">pip._internal.models.format_control.FormatControl.__class__</a>, <a class="el" href="candidates_8py_source.html#l00176">pip._internal.resolution.resolvelib.candidates._InstallRequirementBackedCandidate.__class__</a>, <a class="el" href="candidates_8py_source.html#l00468">pip._internal.resolution.resolvelib.candidates.ExtrasCandidate.__class__</a>, <a class="el" href="pip_2__vendor_2distlib_2compat_8py_source.html#l00864">pip._vendor.distlib.compat.OrderedDict.__class__</a>, <a class="el" href="ext_8py_source.html#l00059">pip._vendor.msgpack.ext.Timestamp.__class__</a>, <a class="el" href="__structures_8py_source.html#l00020">pip._vendor.packaging._structures.InfinityType.__class__</a>, <a class="el" href="__structures_8py_source.html#l00049">pip._vendor.packaging._structures.NegativeInfinityType.__class__</a>, <a class="el" href="specifiers_8py_source.html#l00357">pip._vendor.packaging.specifiers.Specifier.__class__</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2pip_2__vendor_2pkg__resources_2____init_____8py_source.html#l02953">pip._vendor.pkg_resources.Distribution.__class__</a>, <a class="el" href="__api_8py_source.html#l00062">pip._vendor.truststore._api.SSLContext.__class__()</a>, <a class="el" href="typing__extensions_8py_source.html#l01767">pip._vendor.typing_extensions._ConcatenateGenericAlias.__class__</a>, <a class="el" href="typing__extensions_8py_source.html#l02347">pip._vendor.typing_extensions._UnpackAlias.__class__</a>, <a class="el" href="typing__extensions_8py_source.html#l01708">pip._vendor.typing_extensions.ParamSpec.__class__</a>, <a class="el" href="typing__extensions_8py_source.html#l02507">pip._vendor.typing_extensions.TypeVarTuple.__class__</a>, <a class="el" href="pip_2__vendor_2urllib3_2exceptions_8py_source.html#l00029">pip._vendor.urllib3.exceptions.PoolError.__class__</a>, <a class="el" href="pip_2__vendor_2urllib3_2exceptions_8py_source.html#l00041">pip._vendor.urllib3.exceptions.RequestError.__class__</a>, <a class="el" href="container_8py_source.html#l00740">tomlkit.container.Container.__class__</a>, <a class="el" href="items_8py_source.html#l00516">tomlkit.items.Item.__class__</a>, <a class="el" href="urllib3_2exceptions_8py_source.html#l00040">urllib3.exceptions.PoolError.__class__</a>, <a class="el" href="urllib3_2exceptions_8py_source.html#l00052">urllib3.exceptions.RequestError.__class__</a>, <a class="el" href="sql_2query_8py_source.html#l00318">_filtered_relations</a>, <a class="el" href="sql_2query_8py_source.html#l01439">build_filter()</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l02369">django.contrib.admin.options.InlineModelAdmin.model</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l00682">django.contrib.admin.options.ModelAdmin.model</a>, <a class="el" href="django_2contrib_2admin_2views_2main_8py_source.html#l00088">django.contrib.admin.views.main.ChangeList.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2forms_8py_source.html#l00233">django.contrib.auth.forms.BaseUserCreationForm.Meta.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2auth_2forms_8py_source.html#l00293">django.contrib.auth.forms.UserChangeForm.Meta.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2admin_8py_source.html#l00135">django.contrib.contenttypes.admin.GenericInlineModelAdmin.model</a>, <a class="el" href="django_2contrib_2contenttypes_2fields_8py_source.html#l00488">django.contrib.contenttypes.fields.GenericRelation.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2models_8py_source.html#l00136">django.contrib.contenttypes.models.ContentType.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2flatpages_2forms_8py_source.html#l00027">django.contrib.flatpages.forms.FlatpageForm.Meta.model</a>, <a class="el" href="layermapping_8py_source.html#l00128">django.contrib.gis.utils.layermapping.LayerMapping.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l01254">django.db.models.fields.CharField.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l00401">django.db.models.fields.Field.model</a>, <a class="el" href="generated_8py_source.html#l00114">django.db.models.fields.generated.GeneratedField.model</a>, <a class="el" href="django_2db_2models_2fields_2json_8py_source.html#l00055">django.db.models.fields.json.JSONField.model</a>, <a class="el" href="reverse__related_8py_source.html#l00053">django.db.models.fields.reverse_related.ForeignObjectRel.model</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2fields_2____init_____8py_source.html#l02457">django.db.models.fields.TextField.model</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00030">django.db.models.manager.BaseManager.model</a>, <a class="el" href="django_2db_2models_2manager_8py_source.html#l00210">django.db.models.manager.EmptyManager.model</a>, <a class="el" href="db_2models_2options_8py_source.html#l00176">django.db.models.options.Options.model</a>, <a class="el" href="query_8py_source.html#l00297">django.db.models.query.QuerySet.model</a>, <a class="el" href="query_8py_source.html#l02058">django.db.models.query.RawQuerySet.model</a>, and <a class="el" href="sql_2query_8py_source.html#l00293">model</a>.</p>

</div>
</div>
<a id="afc511462bdfefd523195177f15651d1d" name="afc511462bdfefd523195177f15651d1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc511462bdfefd523195177f15651d1d">&#9670;&#160;</a></span>sql_with_params()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.sql_with_params </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return the query as an SQL string and the parameters that will be
substituted into the query.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00344">344</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  344</span>    <span class="keyword">def </span>sql_with_params(self):</div>
<div class="line"><span class="lineno">  345</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  346</span><span class="stringliteral">        Return the query as an SQL string and the parameters that will be</span></div>
<div class="line"><span class="lineno">  347</span><span class="stringliteral">        substituted into the query.</span></div>
<div class="line"><span class="lineno">  348</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  349</span>        <span class="keywordflow">return</span> self.get_compiler(DEFAULT_DB_ALIAS).as_sql()</div>
<div class="line"><span class="lineno">  350</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01253">as_sql()</a>, and <a class="el" href="sql_2query_8py_source.html#l00357">get_compiler()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l00333">__str__()</a>.</p>

</div>
</div>
<a id="a3b5b6ac99dbe8f5ac604f7802e4f6a21" name="a3b5b6ac99dbe8f5ac604f7802e4f6a21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b5b6ac99dbe8f5ac604f7802e4f6a21">&#9670;&#160;</a></span>table_alias()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.table_alias </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>table_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>create</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>filtered_relation</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return a table alias for the given table_name and whether this is a
new alias or not.

If 'create' is true, a new alias is always created. Otherwise, the
most recently created alias for the table (if one exists) is reused.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00873">873</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  873</span>    <span class="keyword">def </span>table_alias(self, table_name, create=False, filtered_relation=None):</div>
<div class="line"><span class="lineno">  874</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  875</span><span class="stringliteral">        Return a table alias for the given table_name and whether this is a</span></div>
<div class="line"><span class="lineno">  876</span><span class="stringliteral">        new alias or not.</span></div>
<div class="line"><span class="lineno">  877</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  878</span><span class="stringliteral">        If &#39;create&#39; is true, a new alias is always created. Otherwise, the</span></div>
<div class="line"><span class="lineno">  879</span><span class="stringliteral">        most recently created alias for the table (if one exists) is reused.</span></div>
<div class="line"><span class="lineno">  880</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  881</span>        alias_list = self.table_map.get(table_name)</div>
<div class="line"><span class="lineno">  882</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> create <span class="keywordflow">and</span> alias_list:</div>
<div class="line"><span class="lineno">  883</span>            alias = alias_list[0]</div>
<div class="line"><span class="lineno">  884</span>            self.alias_refcount[alias] += 1</div>
<div class="line"><span class="lineno">  885</span>            <span class="keywordflow">return</span> alias, <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  886</span> </div>
<div class="line"><span class="lineno">  887</span>        <span class="comment"># Create a new alias for this table.</span></div>
<div class="line"><span class="lineno">  888</span>        <span class="keywordflow">if</span> alias_list:</div>
<div class="line"><span class="lineno">  889</span>            alias = <span class="stringliteral">&quot;%s%d&quot;</span> % (self.alias_prefix, len(self.alias_map) + 1)</div>
<div class="line"><span class="lineno">  890</span>            alias_list.append(alias)</div>
<div class="line"><span class="lineno">  891</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  892</span>            <span class="comment"># The first occurrence of a table uses the table name directly.</span></div>
<div class="line"><span class="lineno">  893</span>            alias = (</div>
<div class="line"><span class="lineno">  894</span>                filtered_relation.alias <span class="keywordflow">if</span> filtered_relation <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">else</span> table_name</div>
<div class="line"><span class="lineno">  895</span>            )</div>
<div class="line"><span class="lineno">  896</span>            self.table_map[table_name] = [alias]</div>
<div class="line"><span class="lineno">  897</span>        self.alias_refcount[alias] = 1</div>
<div class="line"><span class="lineno">  898</span>        <span class="keywordflow">return</span> alias, <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  899</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00300">alias_map</a>, <a class="el" href="sql_2query_8py_source.html#l00222">alias_prefix</a>, <a class="el" href="sql_2query_8py_source.html#l00294">alias_refcount</a>, and <a class="el" href="sql_2query_8py_source.html#l00308">table_map</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01097">join()</a>.</p>

</div>
</div>
<a id="a6c3229c139a831748fab16d4ee2e7036" name="a6c3229c139a831748fab16d4ee2e7036"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c3229c139a831748fab16d4ee2e7036">&#9670;&#160;</a></span>trim_joins()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.trim_joins </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>targets</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>joins</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">The 'target' parameter is the final field being joined to, 'joins'
is the full list of join aliases. The 'path' contain the PathInfos
used to create the joins.

Return the final target field and table alias and the new active
joins.

Always trim any direct join if the target column is already in the
previous table. Can't trim reverse joins as it's unknown if there's
anything on the other side of the join.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01927">1927</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1927</span>    <span class="keyword">def </span>trim_joins(self, targets, joins, path):</div>
<div class="line"><span class="lineno"> 1928</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1929</span><span class="stringliteral">        The &#39;target&#39; parameter is the final field being joined to, &#39;joins&#39;</span></div>
<div class="line"><span class="lineno"> 1930</span><span class="stringliteral">        is the full list of join aliases. The &#39;path&#39; contain the PathInfos</span></div>
<div class="line"><span class="lineno"> 1931</span><span class="stringliteral">        used to create the joins.</span></div>
<div class="line"><span class="lineno"> 1932</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1933</span><span class="stringliteral">        Return the final target field and table alias and the new active</span></div>
<div class="line"><span class="lineno"> 1934</span><span class="stringliteral">        joins.</span></div>
<div class="line"><span class="lineno"> 1935</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1936</span><span class="stringliteral">        Always trim any direct join if the target column is already in the</span></div>
<div class="line"><span class="lineno"> 1937</span><span class="stringliteral">        previous table. Can&#39;t trim reverse joins as it&#39;s unknown if there&#39;s</span></div>
<div class="line"><span class="lineno"> 1938</span><span class="stringliteral">        anything on the other side of the join.</span></div>
<div class="line"><span class="lineno"> 1939</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1940</span>        joins = joins[:]</div>
<div class="line"><span class="lineno"> 1941</span>        <span class="keywordflow">for</span> pos, info <span class="keywordflow">in</span> enumerate(reversed(path)):</div>
<div class="line"><span class="lineno"> 1942</span>            <span class="keywordflow">if</span> len(joins) == 1 <span class="keywordflow">or</span> <span class="keywordflow">not</span> info.direct:</div>
<div class="line"><span class="lineno"> 1943</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 1944</span>            <span class="keywordflow">if</span> info.filtered_relation:</div>
<div class="line"><span class="lineno"> 1945</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 1946</span>            join_targets = {t.column <span class="keywordflow">for</span> t <span class="keywordflow">in</span> info.join_field.foreign_related_fields}</div>
<div class="line"><span class="lineno"> 1947</span>            cur_targets = {t.column <span class="keywordflow">for</span> t <span class="keywordflow">in</span> targets}</div>
<div class="line"><span class="lineno"> 1948</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> cur_targets.issubset(join_targets):</div>
<div class="line"><span class="lineno"> 1949</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 1950</span>            targets_dict = {</div>
<div class="line"><span class="lineno"> 1951</span>                r[1].column: r[0]</div>
<div class="line"><span class="lineno"> 1952</span>                <span class="keywordflow">for</span> r <span class="keywordflow">in</span> info.join_field.related_fields</div>
<div class="line"><span class="lineno"> 1953</span>                <span class="keywordflow">if</span> r[1].column <span class="keywordflow">in</span> cur_targets</div>
<div class="line"><span class="lineno"> 1954</span>            }</div>
<div class="line"><span class="lineno"> 1955</span>            targets = tuple(targets_dict[t.column] <span class="keywordflow">for</span> t <span class="keywordflow">in</span> targets)</div>
<div class="line"><span class="lineno"> 1956</span>            self.unref_alias(joins.pop())</div>
<div class="line"><span class="lineno"> 1957</span>        <span class="keywordflow">return</span> targets, joins[-1], joins</div>
<div class="line"><span class="lineno"> 1958</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00904">unref_alias()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02182">add_fields()</a>, and <a class="el" href="sql_2query_8py_source.html#l01981">resolve_ref()</a>.</p>

</div>
</div>
<a id="a85b3b84070f5f6971deff94e1b052e05" name="a85b3b84070f5f6971deff94e1b052e05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85b3b84070f5f6971deff94e1b052e05">&#9670;&#160;</a></span>trim_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.trim_start </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>names_with_path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Trim joins from the start of the join path. The candidates for trim
are the PathInfos in names_with_path structure that are m2m joins.

Also set the select column so the start matches the join.

This method is meant to be used for generating the subquery joins &amp;
cols in split_exclude().

Return a lookup usable for doing outerq.filter(lookup=self) and a
boolean indicating if the joins in the prefix contain a LEFT OUTER join.
_</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02536">2536</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2536</span>    <span class="keyword">def </span>trim_start(self, names_with_path):</div>
<div class="line"><span class="lineno"> 2537</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2538</span><span class="stringliteral">        Trim joins from the start of the join path. The candidates for trim</span></div>
<div class="line"><span class="lineno"> 2539</span><span class="stringliteral">        are the PathInfos in names_with_path structure that are m2m joins.</span></div>
<div class="line"><span class="lineno"> 2540</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 2541</span><span class="stringliteral">        Also set the select column so the start matches the join.</span></div>
<div class="line"><span class="lineno"> 2542</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 2543</span><span class="stringliteral">        This method is meant to be used for generating the subquery joins &amp;</span></div>
<div class="line"><span class="lineno"> 2544</span><span class="stringliteral">        cols in split_exclude().</span></div>
<div class="line"><span class="lineno"> 2545</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 2546</span><span class="stringliteral">        Return a lookup usable for doing outerq.filter(lookup=self) and a</span></div>
<div class="line"><span class="lineno"> 2547</span><span class="stringliteral">        boolean indicating if the joins in the prefix contain a LEFT OUTER join.</span></div>
<div class="line"><span class="lineno"> 2548</span><span class="stringliteral">        _&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2549</span>        all_paths = []</div>
<div class="line"><span class="lineno"> 2550</span>        <span class="keywordflow">for</span> _, paths <span class="keywordflow">in</span> names_with_path:</div>
<div class="line"><span class="lineno"> 2551</span>            all_paths.extend(paths)</div>
<div class="line"><span class="lineno"> 2552</span>        contains_louter = <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 2553</span>        <span class="comment"># Trim and operate only on tables that were generated for</span></div>
<div class="line"><span class="lineno"> 2554</span>        <span class="comment"># the lookup part of the query. That is, avoid trimming</span></div>
<div class="line"><span class="lineno"> 2555</span>        <span class="comment"># joins generated for F() expressions.</span></div>
<div class="line"><span class="lineno"> 2556</span>        lookup_tables = [</div>
<div class="line"><span class="lineno"> 2557</span>            t <span class="keywordflow">for</span> t <span class="keywordflow">in</span> self.alias_map <span class="keywordflow">if</span> t <span class="keywordflow">in</span> self._lookup_joins <span class="keywordflow">or</span> t == self.base_table</div>
<div class="line"><span class="lineno"> 2558</span>        ]</div>
<div class="line"><span class="lineno"> 2559</span>        <span class="keywordflow">for</span> trimmed_paths, path <span class="keywordflow">in</span> enumerate(all_paths):</div>
<div class="line"><span class="lineno"> 2560</span>            <span class="keywordflow">if</span> path.m2m:</div>
<div class="line"><span class="lineno"> 2561</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 2562</span>            <span class="keywordflow">if</span> self.alias_map[lookup_tables[trimmed_paths + 1]].join_type == LOUTER:</div>
<div class="line"><span class="lineno"> 2563</span>                contains_louter = <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 2564</span>            alias = lookup_tables[trimmed_paths]</div>
<div class="line"><span class="lineno"> 2565</span>            self.unref_alias(alias)</div>
<div class="line"><span class="lineno"> 2566</span>        <span class="comment"># The path.join_field is a Rel, lets get the other side&#39;s field</span></div>
<div class="line"><span class="lineno"> 2567</span>        join_field = path.join_field.field</div>
<div class="line"><span class="lineno"> 2568</span>        <span class="comment"># Build the filter prefix.</span></div>
<div class="line"><span class="lineno"> 2569</span>        paths_in_prefix = trimmed_paths</div>
<div class="line"><span class="lineno"> 2570</span>        trimmed_prefix = []</div>
<div class="line"><span class="lineno"> 2571</span>        <span class="keywordflow">for</span> name, path <span class="keywordflow">in</span> names_with_path:</div>
<div class="line"><span class="lineno"> 2572</span>            <span class="keywordflow">if</span> paths_in_prefix - len(path) &lt; 0:</div>
<div class="line"><span class="lineno"> 2573</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 2574</span>            trimmed_prefix.append(name)</div>
<div class="line"><span class="lineno"> 2575</span>            paths_in_prefix -= len(path)</div>
<div class="line"><span class="lineno"> 2576</span>        trimmed_prefix.append(join_field.foreign_related_fields[0].name)</div>
<div class="line"><span class="lineno"> 2577</span>        trimmed_prefix = LOOKUP_SEP.join(trimmed_prefix)</div>
<div class="line"><span class="lineno"> 2578</span>        <span class="comment"># Lets still see if we can trim the first join from the inner query</span></div>
<div class="line"><span class="lineno"> 2579</span>        <span class="comment"># (that is, self). We can&#39;t do this for:</span></div>
<div class="line"><span class="lineno"> 2580</span>        <span class="comment"># - LEFT JOINs because we would miss those rows that have nothing on</span></div>
<div class="line"><span class="lineno"> 2581</span>        <span class="comment">#   the outer side,</span></div>
<div class="line"><span class="lineno"> 2582</span>        <span class="comment"># - INNER JOINs from filtered relations because we would miss their</span></div>
<div class="line"><span class="lineno"> 2583</span>        <span class="comment">#   filters.</span></div>
<div class="line"><span class="lineno"> 2584</span>        first_join = self.alias_map[lookup_tables[trimmed_paths + 1]]</div>
<div class="line"><span class="lineno"> 2585</span>        <span class="keywordflow">if</span> first_join.join_type != LOUTER <span class="keywordflow">and</span> <span class="keywordflow">not</span> first_join.filtered_relation:</div>
<div class="line"><span class="lineno"> 2586</span>            select_fields = [r[0] <span class="keywordflow">for</span> r <span class="keywordflow">in</span> join_field.related_fields]</div>
<div class="line"><span class="lineno"> 2587</span>            select_alias = lookup_tables[trimmed_paths + 1]</div>
<div class="line"><span class="lineno"> 2588</span>            self.unref_alias(lookup_tables[trimmed_paths])</div>
<div class="line"><span class="lineno"> 2589</span>            extra_restriction = join_field.get_extra_restriction(</div>
<div class="line"><span class="lineno"> 2590</span>                <span class="keywordtype">None</span>, lookup_tables[trimmed_paths + 1]</div>
<div class="line"><span class="lineno"> 2591</span>            )</div>
<div class="line"><span class="lineno"> 2592</span>            <span class="keywordflow">if</span> extra_restriction:</div>
<div class="line"><span class="lineno"> 2593</span>                self.where.add(extra_restriction, AND)</div>
<div class="line"><span class="lineno"> 2594</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2595</span>            <span class="comment"># TODO: It might be possible to trim more joins from the start of the</span></div>
<div class="line"><span class="lineno"> 2596</span>            <span class="comment"># inner query if it happens to have a longer join chain containing the</span></div>
<div class="line"><span class="lineno"> 2597</span>            <span class="comment"># values in select_fields. Lets punt this one for now.</span></div>
<div class="line"><span class="lineno"> 2598</span>            select_fields = [r[1] <span class="keywordflow">for</span> r <span class="keywordflow">in</span> join_field.related_fields]</div>
<div class="line"><span class="lineno"> 2599</span>            select_alias = lookup_tables[trimmed_paths]</div>
<div class="line"><span class="lineno"> 2600</span>        <span class="comment"># The found starting point is likely a join_class instead of a</span></div>
<div class="line"><span class="lineno"> 2601</span>        <span class="comment"># base_table_class reference. But the first entry in the query&#39;s FROM</span></div>
<div class="line"><span class="lineno"> 2602</span>        <span class="comment"># clause must not be a JOIN.</span></div>
<div class="line"><span class="lineno"> 2603</span>        <span class="keywordflow">for</span> table <span class="keywordflow">in</span> self.alias_map:</div>
<div class="line"><span class="lineno"> 2604</span>            <span class="keywordflow">if</span> self.alias_refcount[table] &gt; 0:</div>
<div class="line"><span class="lineno"> 2605</span>                self.alias_map[table] = self.base_table_class(</div>
<div class="line"><span class="lineno"> 2606</span>                    self.alias_map[table].table_name,</div>
<div class="line"><span class="lineno"> 2607</span>                    table,</div>
<div class="line"><span class="lineno"> 2608</span>                )</div>
<div class="line"><span class="lineno"> 2609</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 2610</span>        self.set_select([f.get_col(select_alias) <span class="keywordflow">for</span> f <span class="keywordflow">in</span> select_fields])</div>
<div class="line"><span class="lineno"> 2611</span>        <span class="keywordflow">return</span> trimmed_prefix, contains_louter</div>
<div class="line"><span class="lineno"> 2612</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01532">_lookup_joins</a>, <a class="el" href="sql_2query_8py_source.html#l00300">alias_map</a>, <a class="el" href="sql_2query_8py_source.html#l00294">alias_refcount</a>, <a class="el" href="sql_2query_8py_source.html#l00329">base_table()</a>, <a class="el" href="sql_2query_8py_source.html#l00228">base_table_class</a>, <a class="el" href="sql_2query_8py_source.html#l02171">set_select()</a>, <a class="el" href="sql_2query_8py_source.html#l00904">unref_alias()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00086">django.db.models.sql.compiler.SQLCompiler.where</a>, and <a class="el" href="sql_2query_8py_source.html#l00311">where</a>.</p>

</div>
</div>
<a id="a48309b38fbbed2e2ce133b1845ffe790" name="a48309b38fbbed2e2ce133b1845ffe790"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48309b38fbbed2e2ce133b1845ffe790">&#9670;&#160;</a></span>try_transform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.try_transform </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>lhs</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>name</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Helper method for build_lookup(). Try to fetch and initialize
a transform for name parameter from lhs.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01406">1406</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1406</span>    <span class="keyword">def </span>try_transform(self, lhs, name):</div>
<div class="line"><span class="lineno"> 1407</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1408</span><span class="stringliteral">        Helper method for build_lookup(). Try to fetch and initialize</span></div>
<div class="line"><span class="lineno"> 1409</span><span class="stringliteral">        a transform for name parameter from lhs.</span></div>
<div class="line"><span class="lineno"> 1410</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1411</span>        transform_class = lhs.get_transform(name)</div>
<div class="line"><span class="lineno"> 1412</span>        <span class="keywordflow">if</span> transform_class:</div>
<div class="line"><span class="lineno"> 1413</span>            <span class="keywordflow">return</span> transform_class(lhs)</div>
<div class="line"><span class="lineno"> 1414</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1415</span>            output_field = lhs.output_field.__class__</div>
<div class="line"><span class="lineno"> 1416</span>            suggested_lookups = difflib.get_close_matches(</div>
<div class="line"><span class="lineno"> 1417</span>                name, lhs.output_field.get_lookups()</div>
<div class="line"><span class="lineno"> 1418</span>            )</div>
<div class="line"><span class="lineno"> 1419</span>            <span class="keywordflow">if</span> suggested_lookups:</div>
<div class="line"><span class="lineno"> 1420</span>                suggestion = <span class="stringliteral">&quot;, perhaps you meant %s?&quot;</span> % <span class="stringliteral">&quot; or &quot;</span>.join(suggested_lookups)</div>
<div class="line"><span class="lineno"> 1421</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1422</span>                suggestion = <span class="stringliteral">&quot;.&quot;</span></div>
<div class="line"><span class="lineno"> 1423</span>            <span class="keywordflow">raise</span> FieldError(</div>
<div class="line"><span class="lineno"> 1424</span>                <span class="stringliteral">&quot;Unsupported lookup &#39;%s&#39; for %s or join on the field not &quot;</span></div>
<div class="line"><span class="lineno"> 1425</span>                <span class="stringliteral">&quot;permitted%s&quot;</span> % (name, output_field.__name__, suggestion)</div>
<div class="line"><span class="lineno"> 1426</span>            )</div>
<div class="line"><span class="lineno"> 1427</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l01097">join()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01360">build_lookup()</a>, <a class="el" href="sql_2query_8py_source.html#l01981">resolve_ref()</a>, and <a class="el" href="sql_2query_8py_source.html#l01819">setup_joins()</a>.</p>

</div>
</div>
<a id="a338bc82926803f2c4b2e8d38db6d75f6" name="a338bc82926803f2c4b2e8d38db6d75f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a338bc82926803f2c4b2e8d38db6d75f6">&#9670;&#160;</a></span>unref_alias()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.unref_alias </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>alias</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>amount</em></span><span class="paramdefsep"> = </span><span class="paramdefval">1</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Decreases the reference count for this alias.</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00904">904</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  904</span>    <span class="keyword">def </span>unref_alias(self, alias, amount=1):</div>
<div class="line"><span class="lineno">  905</span>        <span class="stringliteral">&quot;&quot;&quot;Decreases the reference count for this alias.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  906</span>        self.alias_refcount[alias] -= amount</div>
<div class="line"><span class="lineno">  907</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l00294">alias_refcount</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l00964">reset_refcounts()</a>, <a class="el" href="sql_2query_8py_source.html#l01927">trim_joins()</a>, and <a class="el" href="sql_2query_8py_source.html#l02536">trim_start()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac6fb45226be27ca512ed1b046b50c6b3" name="ac6fb45226be27ca512ed1b046b50c6b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6fb45226be27ca512ed1b046b50c6b3">&#9670;&#160;</a></span>_annotation_select_cache</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dict django.db.models.sql.query.Query._annotation_select_cache = None</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00271">271</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02503">annotation_select()</a>, and <a class="el" href="sql_2query_8py_source.html#l02415">set_annotation_mask()</a>.</p>

</div>
</div>
<a id="a11fb1d080143b80b0428bb0b70553bd2" name="a11fb1d080143b80b0428bb0b70553bd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11fb1d080143b80b0428bb0b70553bd2">&#9670;&#160;</a></span>_extra_select_cache</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dict django.db.models.sql.query.Query._extra_select_cache = None</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00281">281</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, <a class="el" href="sql_2query_8py_source.html#l02523">extra_select()</a>, and <a class="el" href="sql_2query_8py_source.html#l02427">set_extra_mask()</a>.</p>

</div>
</div>
<a id="af9e21be9a34753fd1055332963018286" name="af9e21be9a34753fd1055332963018286"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9e21be9a34753fd1055332963018286">&#9670;&#160;</a></span>_filtered_relations</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dict django.db.models.sql.query.Query._filtered_relations = {}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00318">318</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l00790">_get_defer_select_mask()</a>, <a class="el" href="sql_2query_8py_source.html#l02182">add_fields()</a>, <a class="el" href="sql_2query_8py_source.html#l01661">add_filtered_relation()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, <a class="el" href="sql_2query_8py_source.html#l01696">names_to_path()</a>, and <a class="el" href="sql_2query_8py_source.html#l02031">split_exclude()</a>.</p>

</div>
</div>
<a id="aab17237edffa475c883b5d9db2310190" name="aab17237edffa475c883b5d9db2310190"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab17237edffa475c883b5d9db2310190">&#9670;&#160;</a></span>_lookup_joins</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query._lookup_joins = join_info.joins</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l01532">1532</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02536">trim_start()</a>.</p>

</div>
</div>
<a id="a51482dc46beb2bbd7625496ef1066f04" name="a51482dc46beb2bbd7625496ef1066f04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51482dc46beb2bbd7625496ef1066f04">&#9670;&#160;</a></span>alias_cols</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.alias_cols = alias_cols</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00302">302</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l00440">_get_col()</a>, and <a class="el" href="sql_2query_8py_source.html#l01819">setup_joins()</a>.</p>

</div>
</div>
<a id="a4fee166f7b9e7b4a91116540327c70ce" name="a4fee166f7b9e7b4a91116540327c70ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fee166f7b9e7b4a91116540327c70ce">&#9670;&#160;</a></span>alias_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.alias_map = {}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00300">300</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01595">add_q()</a>, <a class="el" href="sql_2query_8py_source.html#l00329">base_table()</a>, <a class="el" href="sql_2query_8py_source.html#l01020">bump_prefix()</a>, <a class="el" href="sql_2query_8py_source.html#l00973">change_aliases()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00945">demote_joins()</a>, <a class="el" href="sql_2query_8py_source.html#l01075">get_initial_alias()</a>, <a class="el" href="sql_2query_8py_source.html#l01097">join()</a>, <a class="el" href="sql_2query_8py_source.html#l00908">promote_joins()</a>, <a class="el" href="sql_2query_8py_source.html#l01981">resolve_ref()</a>, <a class="el" href="sql_2query_8py_source.html#l00873">table_alias()</a>, and <a class="el" href="sql_2query_8py_source.html#l02536">trim_start()</a>.</p>

</div>
</div>
<a id="aca779ebc72b6daac944930a313a89547" name="aca779ebc72b6daac944930a313a89547"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca779ebc72b6daac944930a313a89547">&#9670;&#160;</a></span>alias_prefix</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.alias_prefix = &quot;T&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00222">222</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01020">bump_prefix()</a>, and <a class="el" href="sql_2query_8py_source.html#l00873">table_alias()</a>.</p>

</div>
</div>
<a id="a36bf1744c67968fa205908da7b0ccee8" name="a36bf1744c67968fa205908da7b0ccee8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36bf1744c67968fa205908da7b0ccee8">&#9670;&#160;</a></span>alias_refcount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dict django.db.models.sql.query.Query.alias_refcount = {}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00294">294</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01439">build_filter()</a>, <a class="el" href="sql_2query_8py_source.html#l00973">change_aliases()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, <a class="el" href="sql_2query_8py_source.html#l01089">count_active_tables()</a>, <a class="el" href="sql_2query_8py_source.html#l00900">ref_alias()</a>, <a class="el" href="sql_2query_8py_source.html#l00964">reset_refcounts()</a>, <a class="el" href="sql_2query_8py_source.html#l00873">table_alias()</a>, <a class="el" href="sql_2query_8py_source.html#l02536">trim_start()</a>, and <a class="el" href="sql_2query_8py_source.html#l00904">unref_alias()</a>.</p>

</div>
</div>
<a id="ae51f377d771b9e9d9413946161766341" name="ae51f377d771b9e9d9413946161766341"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae51f377d771b9e9d9413946161766341">&#9670;&#160;</a></span>annotation_select</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.annotation_select = self.select[0]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00325">325</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01191">add_annotation()</a>, <a class="el" href="sql_2query_8py_source.html#l02182">add_fields()</a>, <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>, <a class="el" href="sql_2query_8py_source.html#l01696">names_to_path()</a>, <a class="el" href="sql_2query_8py_source.html#l01981">resolve_ref()</a>, and <a class="el" href="sql_2query_8py_source.html#l02280">set_group_by()</a>.</p>

</div>
</div>
<a id="aefd03905e21d553fa91f433a0baeeedf" name="aefd03905e21d553fa91f433a0baeeedf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefd03905e21d553fa91f433a0baeeedf">&#9670;&#160;</a></span>annotation_select_mask</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.annotation_select_mask = None</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00270">270</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02503">annotation_select()</a>, <a class="el" href="sql_2query_8py_source.html#l02423">append_annotation_mask()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>, and <a class="el" href="sql_2query_8py_source.html#l02415">set_annotation_mask()</a>.</p>

</div>
</div>
<a id="a540833da77eeaa0e17c348fb7ee88cc6" name="a540833da77eeaa0e17c348fb7ee88cc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a540833da77eeaa0e17c348fb7ee88cc6">&#9670;&#160;</a></span>annotations</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dict django.db.models.sql.query.Query.annotations = {}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00313">313</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01191">add_annotation()</a>, <a class="el" href="sql_2query_8py_source.html#l02228">add_ordering()</a>, <a class="el" href="sql_2query_8py_source.html#l02503">annotation_select()</a>, <a class="el" href="sql_2query_8py_source.html#l00973">change_aliases()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>, <a class="el" href="sql_2query_8py_source.html#l01235">get_external_cols()</a>, <a class="el" href="sql_2query_8py_source.html#l01981">resolve_ref()</a>, <a class="el" href="sql_2query_8py_source.html#l02280">set_group_by()</a>, <a class="el" href="sql_2query_8py_source.html#l02438">set_values()</a>, and <a class="el" href="sql_2query_8py_source.html#l01289">solve_lookup_type()</a>.</p>

</div>
</div>
<a id="a49ab2c4a9bafd36fb235ba31fa2e1aa3" name="a49ab2c4a9bafd36fb235ba31fa2e1aa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49ab2c4a9bafd36fb235ba31fa2e1aa3">&#9670;&#160;</a></span>base_table_class</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.base_table_class = <a class="el" href="classdjango_1_1db_1_1models_1_1sql_1_1datastructures_1_1_base_table.html">BaseTable</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00228">228</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01075">get_initial_alias()</a>, and <a class="el" href="sql_2query_8py_source.html#l02536">trim_start()</a>.</p>

</div>
</div>
<a id="ae6e3044a2c90ceee84fe46a5d942e222" name="ae6e3044a2c90ceee84fe46a5d942e222"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6e3044a2c90ceee84fe46a5d942e222">&#9670;&#160;</a></span>combinator</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.combinator = None</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00274">274</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>.</p>

</div>
</div>
<a id="aeacc7b7a086649f39bed65fd19521ba9" name="aeacc7b7a086649f39bed65fd19521ba9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeacc7b7a086649f39bed65fd19521ba9">&#9670;&#160;</a></span>combinator_all</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool django.db.models.sql.query.Query.combinator_all = False</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00275">275</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

</div>
</div>
<a id="a0ae069349b43401d60d1a1175c34d0c1" name="a0ae069349b43401d60d1a1175c34d0c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ae069349b43401d60d1a1175c34d0c1">&#9670;&#160;</a></span>combined_queries</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tuple django.db.models.sql.query.Query.combined_queries = ()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00276">276</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01253">as_sql()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, and <a class="el" href="sql_2query_8py_source.html#l02100">set_empty()</a>.</p>

</div>
</div>
<a id="a20fe8b05b7844f635809b0783d055b9b" name="a20fe8b05b7844f635809b0783d055b9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20fe8b05b7844f635809b0783d055b9b">&#9670;&#160;</a></span>compiler</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.compiler = &quot;SQLCompiler&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00226">226</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l00357">get_compiler()</a>.</p>

</div>
</div>
<a id="a44217d4e96f4e4e04826e4f5bf1b2a0a" name="a44217d4e96f4e4e04826e4f5bf1b2a0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44217d4e96f4e4e04826e4f5bf1b2a0a">&#9670;&#160;</a></span>default_cols</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool django.db.models.sql.query.Query.default_cols = True</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00231">231</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02150">clear_select_clause()</a>, <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>, <a class="el" href="sql_2query_8py_source.html#l02171">set_select()</a>, and <a class="el" href="sql_2query_8py_source.html#l02438">set_values()</a>.</p>

</div>
</div>
<a id="a719ad74d2319999f9dab67226e1359f9" name="a719ad74d2319999f9dab67226e1359f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a719ad74d2319999f9dab67226e1359f9">&#9670;&#160;</a></span>default_ordering</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool django.db.models.sql.query.Query.default_ordering = True</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00232">232</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02228">add_ordering()</a>, and <a class="el" href="sql_2query_8py_source.html#l02264">clear_ordering()</a>.</p>

</div>
</div>
<a id="ab4f0d1a6d835daed62e4887f1029410c" name="ab4f0d1a6d835daed62e4887f1029410c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4f0d1a6d835daed62e4887f1029410c">&#9670;&#160;</a></span>deferred_loading</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tuple django.db.models.sql.query.Query.deferred_loading = (frozenset(), True)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00288">288</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02366">add_deferred_loading()</a>, <a class="el" href="sql_2query_8py_source.html#l02391">add_immediate_loading()</a>, <a class="el" href="sql_2query_8py_source.html#l02362">clear_deferred_loading()</a>, and <a class="el" href="sql_2query_8py_source.html#l00851">get_select_mask()</a>.</p>

</div>
</div>
<a id="a53617ca29165adda1d0217fdbec0914c" name="a53617ca29165adda1d0217fdbec0914c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53617ca29165adda1d0217fdbec0914c">&#9670;&#160;</a></span>distinct</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool django.db.models.sql.query.Query.distinct = False</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00254">254</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02175">add_distinct_fields()</a>, and <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>.</p>

</div>
</div>
<a id="ae6d27aabab911740f590a7dbb369fc81" name="ae6d27aabab911740f590a7dbb369fc81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6d27aabab911740f590a7dbb369fc81">&#9670;&#160;</a></span>distinct_fields</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tuple django.db.models.sql.query.Query.distinct_fields = ()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00255">255</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02175">add_distinct_fields()</a>, and <a class="el" href="sql_2query_8py_source.html#l02264">clear_ordering()</a>.</p>

</div>
</div>
<a id="a9ca225efde2eff971d05cbabb8c329bb" name="a9ca225efde2eff971d05cbabb8c329bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ca225efde2eff971d05cbabb8c329bb">&#9670;&#160;</a></span>explain_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.explain_info = None</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00290">290</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

</div>
</div>
<a id="a3f77bef488266b281a583836603fa22a" name="a3f77bef488266b281a583836603fa22a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f77bef488266b281a583836603fa22a">&#9670;&#160;</a></span>external_aliases</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dict django.db.models.sql.query.Query.external_aliases = {}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00307">307</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l00973">change_aliases()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, and <a class="el" href="sql_2query_8py_source.html#l01235">get_external_cols()</a>.</p>

</div>
</div>
<a id="afb8e75beed17296911d2bd2f3527abd2" name="afb8e75beed17296911d2bd2f3527abd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb8e75beed17296911d2bd2f3527abd2">&#9670;&#160;</a></span>extra</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dict django.db.models.sql.query.Query.extra = {}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00316">316</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02329">add_extra()</a>, <a class="el" href="sql_2query_8py_source.html#l02182">add_fields()</a>, <a class="el" href="sql_2query_8py_source.html#l02228">add_ordering()</a>, <a class="el" href="contrib_2gis_2db_2models_2functions_8py_source.html#l00144">django.contrib.gis.db.models.functions.OracleToleranceMixin.as_oracle()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, <a class="el" href="test_2client_8py_source.html#l01679">django.test.client.AsyncClient.delete()</a>, <a class="el" href="test_2client_8py_source.html#l01322">django.test.client.Client.delete()</a>, <a class="el" href="sql_2query_8py_source.html#l02523">extra_select()</a>, <a class="el" href="test_2client_8py_source.html#l01482">django.test.client.AsyncClient.get()</a>, <a class="el" href="test_2client_8py_source.html#l01125">django.test.client.Client.get()</a>, <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>, <a class="el" href="test_2client_8py_source.html#l01545">django.test.client.AsyncClient.head()</a>, <a class="el" href="test_2client_8py_source.html#l01188">django.test.client.Client.head()</a>, <a class="el" href="test_2client_8py_source.html#l01574">django.test.client.AsyncClient.options()</a>, <a class="el" href="test_2client_8py_source.html#l01217">django.test.client.Client.options()</a>, <a class="el" href="test_2client_8py_source.html#l01644">django.test.client.AsyncClient.patch()</a>, <a class="el" href="test_2client_8py_source.html#l01287">django.test.client.Client.patch()</a>, <a class="el" href="test_2client_8py_source.html#l01511">django.test.client.AsyncClient.post()</a>, <a class="el" href="test_2client_8py_source.html#l01154">django.test.client.Client.post()</a>, <a class="el" href="test_2client_8py_source.html#l01609">django.test.client.AsyncClient.put()</a>, <a class="el" href="test_2client_8py_source.html#l01252">django.test.client.Client.put()</a>, <a class="el" href="sql_2query_8py_source.html#l02438">set_values()</a>, <a class="el" href="formsets_8py_source.html#l00171">django.forms.formsets.BaseFormSet.total_form_count()</a>, <a class="el" href="test_2client_8py_source.html#l01713">django.test.client.AsyncClient.trace()</a>, and <a class="el" href="test_2client_8py_source.html#l01356">django.test.client.Client.trace()</a>.</p>

</div>
</div>
<a id="aaa6ad3ee9cbff0a6b53f92d84436d555" name="aaa6ad3ee9cbff0a6b53f92d84436d555"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa6ad3ee9cbff0a6b53f92d84436d555">&#9670;&#160;</a></span>extra_order_by</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tuple django.db.models.sql.query.Query.extra_order_by = ()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00284">284</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02329">add_extra()</a>, and <a class="el" href="sql_2query_8py_source.html#l02264">clear_ordering()</a>.</p>

</div>
</div>
<a id="a029ecc9441ae80bb55a6426d5327fe54" name="a029ecc9441ae80bb55a6426d5327fe54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a029ecc9441ae80bb55a6426d5327fe54">&#9670;&#160;</a></span>extra_select</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.extra_select = False</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02457">2457</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

</div>
</div>
<a id="abd8cfcc3426d3cb571d7c58ebbe566b7" name="abd8cfcc3426d3cb571d7c58ebbe566b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd8cfcc3426d3cb571d7c58ebbe566b7">&#9670;&#160;</a></span>extra_select_mask</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.extra_select_mask = None</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00280">280</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, <a class="el" href="sql_2query_8py_source.html#l02523">extra_select()</a>, and <a class="el" href="sql_2query_8py_source.html#l02427">set_extra_mask()</a>.</p>

</div>
</div>
<a id="a7e38896e3acf48515cf05188387a0e8d" name="a7e38896e3acf48515cf05188387a0e8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e38896e3acf48515cf05188387a0e8d">&#9670;&#160;</a></span>extra_tables</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tuple django.db.models.sql.query.Query.extra_tables = ()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00283">283</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02329">add_extra()</a>.</p>

</div>
</div>
<a id="a51270a248a229a471ae75e0b64e7dc74" name="a51270a248a229a471ae75e0b64e7dc74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51270a248a229a471ae75e0b64e7dc74">&#9670;&#160;</a></span>filter_is_sticky</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool django.db.models.sql.query.Query.filter_is_sticky = False</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00235">235</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

</div>
</div>
<a id="a60c6927c2071dd36a8b389fc7a1ebfba" name="a60c6927c2071dd36a8b389fc7a1ebfba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60c6927c2071dd36a8b389fc7a1ebfba">&#9670;&#160;</a></span>group_by</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.group_by = None</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00250">250</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l00973">change_aliases()</a>, <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>, and <a class="el" href="sql_2query_8py_source.html#l02280">set_group_by()</a>.</p>

</div>
</div>
<a id="a4732e2a5cd4d70ce895a18a991ec72a4" name="a4732e2a5cd4d70ce895a18a991ec72a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4732e2a5cd4d70ce895a18a991ec72a4">&#9670;&#160;</a></span>has_select_fields</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool django.db.models.sql.query.Query.has_select_fields = False</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00262">262</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02438">set_values()</a>.</p>

</div>
</div>
<a id="a56cbad4ce2b16cb89fc322d4ea8a2191" name="a56cbad4ce2b16cb89fc322d4ea8a2191"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56cbad4ce2b16cb89fc322d4ea8a2191">&#9670;&#160;</a></span>high_mark</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int django.db.models.sql.query.Query.high_mark = None</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00253">253</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02131">clear_limits()</a>, <a class="el" href="sql_2query_8py_source.html#l02139">has_limit_one()</a>, <a class="el" href="sql_2query_8py_source.html#l02136">is_sliced()</a>, and <a class="el" href="sql_2query_8py_source.html#l02108">set_limits()</a>.</p>

</div>
</div>
<a id="a832f925cbcf8ff8d9a1b96cea9f0e178" name="a832f925cbcf8ff8d9a1b96cea9f0e178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a832f925cbcf8ff8d9a1b96cea9f0e178">&#9670;&#160;</a></span>is_sliced</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.is_sliced</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00685">685</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02142">can_filter()</a>, <a class="el" href="sql_2query_8py_source.html#l02264">clear_ordering()</a>, and <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>.</p>

</div>
</div>
<a id="aeedcad3ccc6661f168f048a1079c723f" name="aeedcad3ccc6661f168f048a1079c723f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeedcad3ccc6661f168f048a1079c723f">&#9670;&#160;</a></span>join_class</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.join_class = <a class="el" href="classdjango_1_1db_1_1models_1_1sql_1_1datastructures_1_1_join.html">Join</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00229">229</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01819">setup_joins()</a>.</p>

</div>
</div>
<a id="a590e8716652d873ab8b9ce0bda90d076" name="a590e8716652d873ab8b9ce0bda90d076"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a590e8716652d873ab8b9ce0bda90d076">&#9670;&#160;</a></span>low_mark</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.low_mark = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00252">252</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02131">clear_limits()</a>, <a class="el" href="sql_2query_8py_source.html#l02139">has_limit_one()</a>, <a class="el" href="sql_2query_8py_source.html#l02136">is_sliced()</a>, and <a class="el" href="sql_2query_8py_source.html#l02108">set_limits()</a>.</p>

</div>
</div>
<a id="a4e1615e5e13beff6edb2e9655492054a" name="a4e1615e5e13beff6edb2e9655492054a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e1615e5e13beff6edb2e9655492054a">&#9670;&#160;</a></span>max_depth</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int django.db.models.sql.query.Query.max_depth = 5</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00264">264</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="pretty_8py_source.html#l00297">pip._vendor.rich.pretty.Pretty.__rich_console__()</a>, and <a class="el" href="pretty_8py_source.html#l00332">pip._vendor.rich.pretty.Pretty.__rich_measure__()</a>.</p>

</div>
</div>
<a id="afe3cd879bb006df199bfa106ac91ab5b" name="afe3cd879bb006df199bfa106ac91ab5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe3cd879bb006df199bfa106ac91ab5b">&#9670;&#160;</a></span>model</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.model = model</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00293">293</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2forms_8py_source.html#l00021">django.contrib.contenttypes.forms.BaseGenericInlineFormSet.__init__()</a>, <a class="el" href="contrib_2sessions_2backends_2db_8py_source.html#l00043">django.contrib.sessions.backends.db.SessionStore._aget_session_from_db()</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2forms_2models_8py_source.html#l00714">django.forms.models.BaseModelFormSet._construct_form()</a>, <a class="el" href="contrib_2sessions_2backends_2db_8py_source.html#l00032">django.contrib.sessions.backends.db.SessionStore._get_session_from_db()</a>, <a class="el" href="contrib_2sessions_2backends_2db_8py_source.html#l00106">django.contrib.sessions.backends.db.SessionStore.acreate_model_instance()</a>, <a class="el" href="sql_2query_8py_source.html#l02228">add_ordering()</a>, <a class="el" href="contrib_2sessions_2backends_2db_8py_source.html#l00179">django.contrib.sessions.backends.db.SessionStore.adelete()</a>, <a class="el" href="contrib_2sessions_2backends_2db_8py_source.html#l00065">django.contrib.sessions.backends.db.SessionStore.aexists()</a>, <a class="el" href="contrib_2sessions_2backends_2db_8py_source.html#l00139">django.contrib.sessions.backends.db.SessionStore.asave()</a>, <a class="el" href="sql_2query_8py_source.html#l00674">combine()</a>, <a class="el" href="contrib_2sessions_2backends_2db_8py_source.html#l00094">django.contrib.sessions.backends.db.SessionStore.create_model_instance()</a>, <a class="el" href="contrib_2sessions_2backends_2db_8py_source.html#l00169">django.contrib.sessions.backends.db.SessionStore.delete()</a>, <a class="el" href="contrib_2sessions_2backends_2db_8py_source.html#l00062">django.contrib.sessions.backends.db.SessionStore.exists()</a>, <a class="el" href="sql_2query_8py_source.html#l00635">exists()</a>, <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2contrib_2contenttypes_2forms_8py_source.html#l00055">django.contrib.contenttypes.forms.BaseGenericInlineFormSet.get_default_prefix()</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2forms_2models_8py_source.html#l01149">django.forms.models.BaseInlineFormSet.get_default_prefix()</a>, <a class="el" href="sql_2query_8py_source.html#l01075">get_initial_alias()</a>, <a class="el" href="sql_2query_8py_source.html#l00366">get_meta()</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l00430">django.contrib.admin.options.BaseModelAdmin.get_queryset()</a>, <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2forms_2models_8py_source.html#l00748">django.forms.models.BaseModelFormSet.get_queryset()</a>, <a class="el" href="detail_8py_source.html#l00061">django.views.generic.detail.SingleObjectMixin.get_queryset()</a>, <a class="el" href="django_2views_2generic_2list_8py_source.html#l00022">django.views.generic.list.MultipleObjectMixin.get_queryset()</a>, <a class="el" href="contrib_2admin_2options_8py_source.html#l00452">django.contrib.admin.options.BaseModelAdmin.lookup_allowed()</a>, <a class="el" href="contrib_2sessions_2backends_2db_8py_source.html#l00114">django.contrib.sessions.backends.db.SessionStore.save()</a>, <a class="el" href="sql_2query_8py_source.html#l02031">split_exclude()</a>, and <a class="el" href="views_2generic_2dates_8py_source.html#l00260">django.views.generic.dates.DateMixin.uses_datetime_field()</a>.</p>

</div>
</div>
<a id="a322de97f7db6d4e86d06a32614b88c8f" name="a322de97f7db6d4e86d06a32614b88c8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a322de97f7db6d4e86d06a32614b88c8f">&#9670;&#160;</a></span>order_by</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tuple django.db.models.sql.query.Query.order_by = ()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00251">251</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02228">add_ordering()</a>, <a class="el" href="sql_2query_8py_source.html#l02264">clear_ordering()</a>, and <a class="el" href="query_8py_source.html#l01103">django.db.models.query.QuerySet.last()</a>.</p>

</div>
</div>
<a id="abf84cd6ecb7e09d95444262a0c4124be" name="abf84cd6ecb7e09d95444262a0c4124be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf84cd6ecb7e09d95444262a0c4124be">&#9670;&#160;</a></span>select</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.select = ()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00243">243</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02167">add_select_col()</a>, <a class="el" href="sql_2query_8py_source.html#l00973">change_aliases()</a>, <a class="el" href="sql_2query_8py_source.html#l02150">clear_select_clause()</a>, <a class="el" href="sql_2query_8py_source.html#l02158">clear_select_fields()</a>, <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>, <a class="el" href="sql_2query_8py_source.html#l00321">output_field()</a>, <a class="el" href="sql_2query_8py_source.html#l02280">set_group_by()</a>, and <a class="el" href="sql_2query_8py_source.html#l02171">set_select()</a>.</p>

</div>
</div>
<a id="aa20acd1da9e6d3785e4c9e670329b60d" name="aa20acd1da9e6d3785e4c9e670329b60d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa20acd1da9e6d3785e4c9e670329b60d">&#9670;&#160;</a></span>select_for_no_key_update</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool django.db.models.sql.query.Query.select_for_no_key_update = False</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00260">260</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

</div>
</div>
<a id="addc823ef4848c23122ee8b141ada4aa5" name="addc823ef4848c23122ee8b141ada4aa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addc823ef4848c23122ee8b141ada4aa5">&#9670;&#160;</a></span>select_for_update</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool django.db.models.sql.query.Query.select_for_update = False</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00256">256</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02264">clear_ordering()</a>, and <a class="el" href="query_8py_source.html#l00969">django.db.models.query.QuerySet.update_or_create()</a>.</p>

</div>
</div>
<a id="a83a08044c6f1c8c0204cf7c6883fa867" name="a83a08044c6f1c8c0204cf7c6883fa867"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83a08044c6f1c8c0204cf7c6883fa867">&#9670;&#160;</a></span>select_for_update_nowait</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool django.db.models.sql.query.Query.select_for_update_nowait = False</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00257">257</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

</div>
</div>
<a id="a72b7cb58f22a3a942072c6188108ef15" name="a72b7cb58f22a3a942072c6188108ef15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72b7cb58f22a3a942072c6188108ef15">&#9670;&#160;</a></span>select_for_update_of</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tuple django.db.models.sql.query.Query.select_for_update_of = ()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00259">259</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

</div>
</div>
<a id="a6018c0a7f7235502b37b5fb834cfdd01" name="a6018c0a7f7235502b37b5fb834cfdd01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6018c0a7f7235502b37b5fb834cfdd01">&#9670;&#160;</a></span>select_for_update_skip_locked</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool django.db.models.sql.query.Query.select_for_update_skip_locked = False</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00258">258</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

</div>
</div>
<a id="ad55728f4213693d1375da23c57f7ab3c" name="ad55728f4213693d1375da23c57f7ab3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad55728f4213693d1375da23c57f7ab3c">&#9670;&#160;</a></span>select_related</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.select_related = False</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00261">261</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02313">add_select_related()</a>, <a class="el" href="sql_2query_8py_source.html#l02150">clear_select_clause()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, and <a class="el" href="sql_2query_8py_source.html#l02438">set_values()</a>.</p>

</div>
</div>
<a id="ac8a05399fb8d487318593ba6f2c91f89" name="ac8a05399fb8d487318593ba6f2c91f89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8a05399fb8d487318593ba6f2c91f89">&#9670;&#160;</a></span>standard_ordering</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool django.db.models.sql.query.Query.standard_ordering = True</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00233">233</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

</div>
</div>
<a id="a734ea03198093d5c518dc44cfd08420f" name="a734ea03198093d5c518dc44cfd08420f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a734ea03198093d5c518dc44cfd08420f">&#9670;&#160;</a></span>subq_aliases</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.subq_aliases = frozenset([<a class="el" href="#aca779ebc72b6daac944930a313a89547">alias_prefix</a>])</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00224">224</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01020">bump_prefix()</a>, and <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>.</p>

</div>
</div>
<a id="a16969a0fc24fe280b776e147dcee87d5" name="a16969a0fc24fe280b776e147dcee87d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16969a0fc24fe280b776e147dcee87d5">&#9670;&#160;</a></span>subquery</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool django.db.models.sql.query.Query.subquery = False</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00236">236</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01253">as_sql()</a>.</p>

</div>
</div>
<a id="a5c307c2d6f4f862f1c83b4754440bf7a" name="a5c307c2d6f4f862f1c83b4754440bf7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c307c2d6f4f862f1c83b4754440bf7a">&#9670;&#160;</a></span>table_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dict django.db.models.sql.query.Query.table_map = {}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00308">308</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l00973">change_aliases()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, and <a class="el" href="sql_2query_8py_source.html#l00873">table_alias()</a>.</p>

</div>
</div>
<a id="acd0d115bb9dab5d4128ce1e852041a40" name="acd0d115bb9dab5d4128ce1e852041a40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd0d115bb9dab5d4128ce1e852041a40">&#9670;&#160;</a></span>used_aliases</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.used_aliases = set()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00309">309</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l01595">add_q()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, and <a class="el" href="runner_8py_source.html#l00499">django.test.runner.ParallelTestSuite.run()</a>.</p>

</div>
</div>
<a id="a2ef851bd59b5af5ca57a6f38cafdd20b" name="a2ef851bd59b5af5ca57a6f38cafdd20b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ef851bd59b5af5ca57a6f38cafdd20b">&#9670;&#160;</a></span>values_select</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.values_select = ()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00267">267</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02167">add_select_col()</a>, <a class="el" href="sql_2query_8py_source.html#l02158">clear_select_fields()</a>, and <a class="el" href="sql_2query_8py_source.html#l02280">set_group_by()</a>.</p>

</div>
</div>
<a id="a61ce6c23e38b5b3a29881b07d0749e41" name="a61ce6c23e38b5b3a29881b07d0749e41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61ce6c23e38b5b3a29881b07d0749e41">&#9670;&#160;</a></span>where</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.Query.where = <a class="el" href="classdjango_1_1db_1_1models_1_1sql_1_1where_1_1_where_node.html">WhereNode</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l00311">311</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02329">add_extra()</a>, <a class="el" href="sql_2query_8py_source.html#l01595">add_q()</a>, <a class="el" href="sql_2query_8py_source.html#l00973">change_aliases()</a>, <a class="el" href="sql_2query_8py_source.html#l01617">clear_where()</a>, <a class="el" href="sql_2query_8py_source.html#l00375">clone()</a>, <a class="el" href="subqueries_8py_source.html#l00026">django.db.models.sql.subqueries.DeleteQuery.delete_batch()</a>, <a class="el" href="sql_2query_8py_source.html#l00445">get_aggregation()</a>, <a class="el" href="sql_2query_8py_source.html#l01235">get_external_cols()</a>, <a class="el" href="sql_2query_8py_source.html#l00632">has_filters()</a>, <a class="el" href="sql_2query_8py_source.html#l02105">is_empty()</a>, <a class="el" href="sql_2query_8py_source.html#l02100">set_empty()</a>, and <a class="el" href="sql_2query_8py_source.html#l02536">trim_start()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>project/ENV/Lib/site-packages/django/db/models/sql/<a class="el" href="sql_2query_8py_source.html">query.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacedjango.html">django</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1db.html">db</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1db_1_1models.html">models</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1db_1_1models_1_1sql.html">sql</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1db_1_1models_1_1sql_1_1query.html">query</a></li><li class="navelem"><a class="el" href="classdjango_1_1db_1_1models_1_1sql_1_1query_1_1_query.html">Query</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
