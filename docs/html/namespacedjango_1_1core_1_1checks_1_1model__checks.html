<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Read&amp;Watch: django.core.checks.model_checks Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Read&amp;Watch<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('namespacedjango_1_1core_1_1checks_1_1model__checks.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">django.core.checks.model_checks Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2b974f0b59721f0e59ac2257f60a06b0" id="r_a2b974f0b59721f0e59ac2257f60a06b0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2b974f0b59721f0e59ac2257f60a06b0">check_all_models</a> (app_configs=None, **kwargs)</td></tr>
<tr class="separator:a2b974f0b59721f0e59ac2257f60a06b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1790debe79f3669e948d099c0e8ee6f1" id="r_a1790debe79f3669e948d099c0e8ee6f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1790debe79f3669e948d099c0e8ee6f1">_check_lazy_references</a> (apps, ignore=None)</td></tr>
<tr class="separator:a1790debe79f3669e948d099c0e8ee6f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23d6c6ee1d333a9dafd75e64ed9fd1f6" id="r_a23d6c6ee1d333a9dafd75e64ed9fd1f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a23d6c6ee1d333a9dafd75e64ed9fd1f6">check_lazy_references</a> (app_configs=None, **kwargs)</td></tr>
<tr class="separator:a23d6c6ee1d333a9dafd75e64ed9fd1f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1790debe79f3669e948d099c0e8ee6f1" name="a1790debe79f3669e948d099c0e8ee6f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1790debe79f3669e948d099c0e8ee6f1">&#9670;&#160;</a></span>_check_lazy_references()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.core.checks.model_checks._check_lazy_references </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>apps</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>ignore</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Ensure all lazy (i.e. string) model references have been resolved.

Lazy references are used in various places throughout Django, primarily in
related fields and model signals. Identify those common cases and provide
more helpful error messages for them.

The ignore parameter is used by StateApps to exclude swappable models from
this check.
</pre> 
<p class="definition">Definition at line <a class="el" href="model__checks_8py_source.html#l00093">93</a> of file <a class="el" href="model__checks_8py_source.html">model_checks.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   93</span><span class="keyword">def </span>_check_lazy_references(apps, ignore=None):</div>
<div class="line"><span class="lineno">   94</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   95</span><span class="stringliteral">    Ensure all lazy (i.e. string) model references have been resolved.</span></div>
<div class="line"><span class="lineno">   96</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   97</span><span class="stringliteral">    Lazy references are used in various places throughout Django, primarily in</span></div>
<div class="line"><span class="lineno">   98</span><span class="stringliteral">    related fields and model signals. Identify those common cases and provide</span></div>
<div class="line"><span class="lineno">   99</span><span class="stringliteral">    more helpful error messages for them.</span></div>
<div class="line"><span class="lineno">  100</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  101</span><span class="stringliteral">    The ignore parameter is used by StateApps to exclude swappable models from</span></div>
<div class="line"><span class="lineno">  102</span><span class="stringliteral">    this check.</span></div>
<div class="line"><span class="lineno">  103</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  104</span>    pending_models = set(apps._pending_operations) - (ignore <span class="keywordflow">or</span> set())</div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span>    <span class="comment"># Short circuit if there aren&#39;t any errors.</span></div>
<div class="line"><span class="lineno">  107</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> pending_models:</div>
<div class="line"><span class="lineno">  108</span>        <span class="keywordflow">return</span> []</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>    <span class="keyword">from</span> <a class="code hl_namespace" href="namespacedjango_1_1db_1_1models.html">django.db.models</a> <span class="keyword">import</span> signals</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>    model_signals = {</div>
<div class="line"><span class="lineno">  113</span>        signal: name</div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">for</span> name, signal <span class="keywordflow">in</span> vars(signals).items()</div>
<div class="line"><span class="lineno">  115</span>        <span class="keywordflow">if</span> isinstance(signal, signals.ModelSignal)</div>
<div class="line"><span class="lineno">  116</span>    }</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>    <span class="keyword">def </span>extract_operation(obj):</div>
<div class="line"><span class="lineno">  119</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  120</span><span class="stringliteral">        Take a callable found in Apps._pending_operations and identify the</span></div>
<div class="line"><span class="lineno">  121</span><span class="stringliteral">        original callable passed to Apps.lazy_model_operation(). If that</span></div>
<div class="line"><span class="lineno">  122</span><span class="stringliteral">        callable was a partial, return the inner, non-partial function and</span></div>
<div class="line"><span class="lineno">  123</span><span class="stringliteral">        any arguments and keyword arguments that were supplied with it.</span></div>
<div class="line"><span class="lineno">  124</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  125</span><span class="stringliteral">        obj is a callback defined locally in Apps.lazy_model_operation() and</span></div>
<div class="line"><span class="lineno">  126</span><span class="stringliteral">        annotated there with a `func` attribute so as to imitate a partial.</span></div>
<div class="line"><span class="lineno">  127</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  128</span>        operation, args, keywords = obj, [], {}</div>
<div class="line"><span class="lineno">  129</span>        <span class="keywordflow">while</span> hasattr(operation, <span class="stringliteral">&quot;func&quot;</span>):</div>
<div class="line"><span class="lineno">  130</span>            args.extend(getattr(operation, <span class="stringliteral">&quot;args&quot;</span>, []))</div>
<div class="line"><span class="lineno">  131</span>            keywords.update(getattr(operation, <span class="stringliteral">&quot;keywords&quot;</span>, {}))</div>
<div class="line"><span class="lineno">  132</span>            operation = operation.func</div>
<div class="line"><span class="lineno">  133</span>        <span class="keywordflow">return</span> operation, args, keywords</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>    <span class="keyword">def </span>app_model_error(model_key):</div>
<div class="line"><span class="lineno">  136</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  137</span>            apps.get_app_config(model_key[0])</div>
<div class="line"><span class="lineno">  138</span>            model_error = <span class="stringliteral">&quot;app &#39;%s&#39; doesn&#39;t provide model &#39;%s&#39;&quot;</span> % model_key</div>
<div class="line"><span class="lineno">  139</span>        <span class="keywordflow">except</span> LookupError:</div>
<div class="line"><span class="lineno">  140</span>            model_error = <span class="stringliteral">&quot;app &#39;%s&#39; isn&#39;t installed&quot;</span> % model_key[0]</div>
<div class="line"><span class="lineno">  141</span>        <span class="keywordflow">return</span> model_error</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>    <span class="comment"># Here are several functions which return CheckMessage instances for the</span></div>
<div class="line"><span class="lineno">  144</span>    <span class="comment"># most common usages of lazy operations throughout Django. These functions</span></div>
<div class="line"><span class="lineno">  145</span>    <span class="comment"># take the model that was being waited on as an (app_label, modelname)</span></div>
<div class="line"><span class="lineno">  146</span>    <span class="comment"># pair, the original lazy function, and its positional and keyword args as</span></div>
<div class="line"><span class="lineno">  147</span>    <span class="comment"># determined by extract_operation().</span></div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>    <span class="keyword">def </span>field_error(model_key, func, args, keywords):</div>
<div class="line"><span class="lineno">  150</span>        error_msg = (</div>
<div class="line"><span class="lineno">  151</span>            <span class="stringliteral">&quot;The field %(field)s was declared with a lazy reference &quot;</span></div>
<div class="line"><span class="lineno">  152</span>            <span class="stringliteral">&quot;to &#39;%(model)s&#39;, but %(model_error)s.&quot;</span></div>
<div class="line"><span class="lineno">  153</span>        )</div>
<div class="line"><span class="lineno">  154</span>        params = {</div>
<div class="line"><span class="lineno">  155</span>            <span class="stringliteral">&quot;model&quot;</span>: <span class="stringliteral">&quot;.&quot;</span>.join(model_key),</div>
<div class="line"><span class="lineno">  156</span>            <span class="stringliteral">&quot;field&quot;</span>: keywords[<span class="stringliteral">&quot;field&quot;</span>],</div>
<div class="line"><span class="lineno">  157</span>            <span class="stringliteral">&quot;model_error&quot;</span>: app_model_error(model_key),</div>
<div class="line"><span class="lineno">  158</span>        }</div>
<div class="line"><span class="lineno">  159</span>        <span class="keywordflow">return</span> Error(error_msg % params, obj=keywords[<span class="stringliteral">&quot;field&quot;</span>], id=<span class="stringliteral">&quot;fields.E307&quot;</span>)</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>    <span class="keyword">def </span>signal_connect_error(model_key, func, args, keywords):</div>
<div class="line"><span class="lineno">  162</span>        error_msg = (</div>
<div class="line"><span class="lineno">  163</span>            <span class="stringliteral">&quot;%(receiver)s was connected to the &#39;%(signal)s&#39; signal with a &quot;</span></div>
<div class="line"><span class="lineno">  164</span>            <span class="stringliteral">&quot;lazy reference to the sender &#39;%(model)s&#39;, but %(model_error)s.&quot;</span></div>
<div class="line"><span class="lineno">  165</span>        )</div>
<div class="line"><span class="lineno">  166</span>        receiver = args[0]</div>
<div class="line"><span class="lineno">  167</span>        <span class="comment"># The receiver is either a function or an instance of class</span></div>
<div class="line"><span class="lineno">  168</span>        <span class="comment"># defining a `__call__` method.</span></div>
<div class="line"><span class="lineno">  169</span>        <span class="keywordflow">if</span> isinstance(receiver, types.FunctionType):</div>
<div class="line"><span class="lineno">  170</span>            description = <span class="stringliteral">&quot;The function &#39;%s&#39;&quot;</span> % receiver.__name__</div>
<div class="line"><span class="lineno">  171</span>        <span class="keywordflow">elif</span> isinstance(receiver, types.MethodType):</div>
<div class="line"><span class="lineno">  172</span>            description = <span class="stringliteral">&quot;Bound method &#39;%s.%s&#39;&quot;</span> % (</div>
<div class="line"><span class="lineno">  173</span>                receiver.__self__.__class__.__name__,</div>
<div class="line"><span class="lineno">  174</span>                receiver.__name__,</div>
<div class="line"><span class="lineno">  175</span>            )</div>
<div class="line"><span class="lineno">  176</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  177</span>            description = <span class="stringliteral">&quot;An instance of class &#39;%s&#39;&quot;</span> % receiver.__class__.__name__</div>
<div class="line"><span class="lineno">  178</span>        signal_name = model_signals.get(func.__self__, <span class="stringliteral">&quot;unknown&quot;</span>)</div>
<div class="line"><span class="lineno">  179</span>        params = {</div>
<div class="line"><span class="lineno">  180</span>            <span class="stringliteral">&quot;model&quot;</span>: <span class="stringliteral">&quot;.&quot;</span>.join(model_key),</div>
<div class="line"><span class="lineno">  181</span>            <span class="stringliteral">&quot;receiver&quot;</span>: description,</div>
<div class="line"><span class="lineno">  182</span>            <span class="stringliteral">&quot;signal&quot;</span>: signal_name,</div>
<div class="line"><span class="lineno">  183</span>            <span class="stringliteral">&quot;model_error&quot;</span>: app_model_error(model_key),</div>
<div class="line"><span class="lineno">  184</span>        }</div>
<div class="line"><span class="lineno">  185</span>        <span class="keywordflow">return</span> Error(error_msg % params, obj=receiver.__module__, id=<span class="stringliteral">&quot;signals.E001&quot;</span>)</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>    <span class="keyword">def </span>default_error(model_key, func, args, keywords):</div>
<div class="line"><span class="lineno">  188</span>        error_msg = (</div>
<div class="line"><span class="lineno">  189</span>            <span class="stringliteral">&quot;%(op)s contains a lazy reference to %(model)s, but %(model_error)s.&quot;</span></div>
<div class="line"><span class="lineno">  190</span>        )</div>
<div class="line"><span class="lineno">  191</span>        params = {</div>
<div class="line"><span class="lineno">  192</span>            <span class="stringliteral">&quot;op&quot;</span>: func,</div>
<div class="line"><span class="lineno">  193</span>            <span class="stringliteral">&quot;model&quot;</span>: <span class="stringliteral">&quot;.&quot;</span>.join(model_key),</div>
<div class="line"><span class="lineno">  194</span>            <span class="stringliteral">&quot;model_error&quot;</span>: app_model_error(model_key),</div>
<div class="line"><span class="lineno">  195</span>        }</div>
<div class="line"><span class="lineno">  196</span>        <span class="keywordflow">return</span> Error(error_msg % params, obj=func, id=<span class="stringliteral">&quot;models.E022&quot;</span>)</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>    <span class="comment"># Maps common uses of lazy operations to corresponding error functions</span></div>
<div class="line"><span class="lineno">  199</span>    <span class="comment"># defined above. If a key maps to None, no error will be produced.</span></div>
<div class="line"><span class="lineno">  200</span>    <span class="comment"># default_error() will be used for usages that don&#39;t appear in this dict.</span></div>
<div class="line"><span class="lineno">  201</span>    known_lazy = {</div>
<div class="line"><span class="lineno">  202</span>        (<span class="stringliteral">&quot;django.db.models.fields.related&quot;</span>, <span class="stringliteral">&quot;resolve_related_class&quot;</span>): field_error,</div>
<div class="line"><span class="lineno">  203</span>        (<span class="stringliteral">&quot;django.db.models.fields.related&quot;</span>, <span class="stringliteral">&quot;set_managed&quot;</span>): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno">  204</span>        (<span class="stringliteral">&quot;django.dispatch.dispatcher&quot;</span>, <span class="stringliteral">&quot;connect&quot;</span>): signal_connect_error,</div>
<div class="line"><span class="lineno">  205</span>    }</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>    <span class="keyword">def </span>build_error(model_key, func, args, keywords):</div>
<div class="line"><span class="lineno">  208</span>        key = (func.__module__, func.__name__)</div>
<div class="line"><span class="lineno">  209</span>        error_fn = known_lazy.get(key, default_error)</div>
<div class="line"><span class="lineno">  210</span>        <span class="keywordflow">return</span> error_fn(model_key, func, args, keywords) <span class="keywordflow">if</span> error_fn <span class="keywordflow">else</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>    <span class="keywordflow">return</span> sorted(</div>
<div class="line"><span class="lineno">  213</span>        filter(</div>
<div class="line"><span class="lineno">  214</span>            <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno">  215</span>            (</div>
<div class="line"><span class="lineno">  216</span>                build_error(model_key, *extract_operation(func))</div>
<div class="line"><span class="lineno">  217</span>                <span class="keywordflow">for</span> model_key <span class="keywordflow">in</span> pending_models</div>
<div class="line"><span class="lineno">  218</span>                <span class="keywordflow">for</span> func <span class="keywordflow">in</span> apps._pending_operations[model_key]</div>
<div class="line"><span class="lineno">  219</span>            ),</div>
<div class="line"><span class="lineno">  220</span>        ),</div>
<div class="line"><span class="lineno">  221</span>        key=<span class="keyword">lambda</span> error: error.msg,</div>
<div class="line"><span class="lineno">  222</span>    )</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span><span class="preprocessor">@register(Tags.models)</span></div>
<div class="ttc" id="anamespacedjango_1_1db_1_1models_html"><div class="ttname"><a href="namespacedjango_1_1db_1_1models.html">django.db.models</a></div><div class="ttdef"><b>Definition</b> <a href="_e_n_v_2_lib_2site-packages_2django_2db_2models_2____init_____8py_source.html#l00001">__init__.py:1</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="model__checks_8py_source.html#l00226">check_lazy_references()</a>.</p>

</div>
</div>
<a id="a2b974f0b59721f0e59ac2257f60a06b0" name="a2b974f0b59721f0e59ac2257f60a06b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b974f0b59721f0e59ac2257f60a06b0">&#9670;&#160;</a></span>check_all_models()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.core.checks.model_checks.check_all_models </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>app_configs</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**</td>          <td class="paramname"><span class="paramname"><em>kwargs</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="model__checks_8py_source.html#l00012">12</a> of file <a class="el" href="model__checks_8py_source.html">model_checks.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   12</span><span class="keyword">def </span>check_all_models(app_configs=None, **kwargs):</div>
<div class="line"><span class="lineno">   13</span>    db_table_models = defaultdict(list)</div>
<div class="line"><span class="lineno">   14</span>    indexes = defaultdict(list)</div>
<div class="line"><span class="lineno">   15</span>    constraints = defaultdict(list)</div>
<div class="line"><span class="lineno">   16</span>    errors = []</div>
<div class="line"><span class="lineno">   17</span>    <span class="keywordflow">if</span> app_configs <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   18</span>        models = apps.get_models()</div>
<div class="line"><span class="lineno">   19</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   20</span>        models = chain.from_iterable(</div>
<div class="line"><span class="lineno">   21</span>            app_config.get_models() <span class="keywordflow">for</span> app_config <span class="keywordflow">in</span> app_configs</div>
<div class="line"><span class="lineno">   22</span>        )</div>
<div class="line"><span class="lineno">   23</span>    <span class="keywordflow">for</span> model <span class="keywordflow">in</span> models:</div>
<div class="line"><span class="lineno">   24</span>        <span class="keywordflow">if</span> model._meta.managed <span class="keywordflow">and</span> <span class="keywordflow">not</span> model._meta.proxy:</div>
<div class="line"><span class="lineno">   25</span>            db_table_models[model._meta.db_table].append(model._meta.label)</div>
<div class="line"><span class="lineno">   26</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> inspect.ismethod(model.check):</div>
<div class="line"><span class="lineno">   27</span>            errors.append(</div>
<div class="line"><span class="lineno">   28</span>                Error(</div>
<div class="line"><span class="lineno">   29</span>                    <span class="stringliteral">&quot;The &#39;%s.check()&#39; class method is currently overridden by %r.&quot;</span></div>
<div class="line"><span class="lineno">   30</span>                    % (model.__name__, model.check),</div>
<div class="line"><span class="lineno">   31</span>                    obj=model,</div>
<div class="line"><span class="lineno">   32</span>                    id=<span class="stringliteral">&quot;models.E020&quot;</span>,</div>
<div class="line"><span class="lineno">   33</span>                )</div>
<div class="line"><span class="lineno">   34</span>            )</div>
<div class="line"><span class="lineno">   35</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   36</span>            errors.extend(model.check(**kwargs))</div>
<div class="line"><span class="lineno">   37</span>        <span class="keywordflow">for</span> model_index <span class="keywordflow">in</span> model._meta.indexes:</div>
<div class="line"><span class="lineno">   38</span>            indexes[model_index.name].append(model._meta.label)</div>
<div class="line"><span class="lineno">   39</span>        <span class="keywordflow">for</span> model_constraint <span class="keywordflow">in</span> model._meta.constraints:</div>
<div class="line"><span class="lineno">   40</span>            constraints[model_constraint.name].append(model._meta.label)</div>
<div class="line"><span class="lineno">   41</span>    <span class="keywordflow">if</span> settings.DATABASE_ROUTERS:</div>
<div class="line"><span class="lineno">   42</span>        error_class, error_id = Warning, <span class="stringliteral">&quot;models.W035&quot;</span></div>
<div class="line"><span class="lineno">   43</span>        error_hint = (</div>
<div class="line"><span class="lineno">   44</span>            <span class="stringliteral">&quot;You have configured settings.DATABASE_ROUTERS. Verify that %s &quot;</span></div>
<div class="line"><span class="lineno">   45</span>            <span class="stringliteral">&quot;are correctly routed to separate databases.&quot;</span></div>
<div class="line"><span class="lineno">   46</span>        )</div>
<div class="line"><span class="lineno">   47</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   48</span>        error_class, error_id = Error, <span class="stringliteral">&quot;models.E028&quot;</span></div>
<div class="line"><span class="lineno">   49</span>        error_hint = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   50</span>    <span class="keywordflow">for</span> db_table, model_labels <span class="keywordflow">in</span> db_table_models.items():</div>
<div class="line"><span class="lineno">   51</span>        <span class="keywordflow">if</span> len(model_labels) != 1:</div>
<div class="line"><span class="lineno">   52</span>            model_labels_str = <span class="stringliteral">&quot;, &quot;</span>.join(model_labels)</div>
<div class="line"><span class="lineno">   53</span>            errors.append(</div>
<div class="line"><span class="lineno">   54</span>                error_class(</div>
<div class="line"><span class="lineno">   55</span>                    <span class="stringliteral">&quot;db_table &#39;%s&#39; is used by multiple models: %s.&quot;</span></div>
<div class="line"><span class="lineno">   56</span>                    % (db_table, model_labels_str),</div>
<div class="line"><span class="lineno">   57</span>                    obj=db_table,</div>
<div class="line"><span class="lineno">   58</span>                    hint=(error_hint % model_labels_str) <span class="keywordflow">if</span> error_hint <span class="keywordflow">else</span> <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno">   59</span>                    id=error_id,</div>
<div class="line"><span class="lineno">   60</span>                )</div>
<div class="line"><span class="lineno">   61</span>            )</div>
<div class="line"><span class="lineno">   62</span>    <span class="keywordflow">for</span> index_name, model_labels <span class="keywordflow">in</span> indexes.items():</div>
<div class="line"><span class="lineno">   63</span>        <span class="keywordflow">if</span> len(model_labels) &gt; 1:</div>
<div class="line"><span class="lineno">   64</span>            model_labels = set(model_labels)</div>
<div class="line"><span class="lineno">   65</span>            errors.append(</div>
<div class="line"><span class="lineno">   66</span>                Error(</div>
<div class="line"><span class="lineno">   67</span>                    <span class="stringliteral">&quot;index name &#39;%s&#39; is not unique %s %s.&quot;</span></div>
<div class="line"><span class="lineno">   68</span>                    % (</div>
<div class="line"><span class="lineno">   69</span>                        index_name,</div>
<div class="line"><span class="lineno">   70</span>                        <span class="stringliteral">&quot;for model&quot;</span> <span class="keywordflow">if</span> len(model_labels) == 1 <span class="keywordflow">else</span> <span class="stringliteral">&quot;among models:&quot;</span>,</div>
<div class="line"><span class="lineno">   71</span>                        <span class="stringliteral">&quot;, &quot;</span>.join(sorted(model_labels)),</div>
<div class="line"><span class="lineno">   72</span>                    ),</div>
<div class="line"><span class="lineno">   73</span>                    id=<span class="stringliteral">&quot;models.E029&quot;</span> <span class="keywordflow">if</span> len(model_labels) == 1 <span class="keywordflow">else</span> <span class="stringliteral">&quot;models.E030&quot;</span>,</div>
<div class="line"><span class="lineno">   74</span>                ),</div>
<div class="line"><span class="lineno">   75</span>            )</div>
<div class="line"><span class="lineno">   76</span>    <span class="keywordflow">for</span> constraint_name, model_labels <span class="keywordflow">in</span> constraints.items():</div>
<div class="line"><span class="lineno">   77</span>        <span class="keywordflow">if</span> len(model_labels) &gt; 1:</div>
<div class="line"><span class="lineno">   78</span>            model_labels = set(model_labels)</div>
<div class="line"><span class="lineno">   79</span>            errors.append(</div>
<div class="line"><span class="lineno">   80</span>                Error(</div>
<div class="line"><span class="lineno">   81</span>                    <span class="stringliteral">&quot;constraint name &#39;%s&#39; is not unique %s %s.&quot;</span></div>
<div class="line"><span class="lineno">   82</span>                    % (</div>
<div class="line"><span class="lineno">   83</span>                        constraint_name,</div>
<div class="line"><span class="lineno">   84</span>                        <span class="stringliteral">&quot;for model&quot;</span> <span class="keywordflow">if</span> len(model_labels) == 1 <span class="keywordflow">else</span> <span class="stringliteral">&quot;among models:&quot;</span>,</div>
<div class="line"><span class="lineno">   85</span>                        <span class="stringliteral">&quot;, &quot;</span>.join(sorted(model_labels)),</div>
<div class="line"><span class="lineno">   86</span>                    ),</div>
<div class="line"><span class="lineno">   87</span>                    id=<span class="stringliteral">&quot;models.E031&quot;</span> <span class="keywordflow">if</span> len(model_labels) == 1 <span class="keywordflow">else</span> <span class="stringliteral">&quot;models.E032&quot;</span>,</div>
<div class="line"><span class="lineno">   88</span>                ),</div>
<div class="line"><span class="lineno">   89</span>            )</div>
<div class="line"><span class="lineno">   90</span>    <span class="keywordflow">return</span> errors</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a23d6c6ee1d333a9dafd75e64ed9fd1f6" name="a23d6c6ee1d333a9dafd75e64ed9fd1f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23d6c6ee1d333a9dafd75e64ed9fd1f6">&#9670;&#160;</a></span>check_lazy_references()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.core.checks.model_checks.check_lazy_references </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>app_configs</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**</td>          <td class="paramname"><span class="paramname"><em>kwargs</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="model__checks_8py_source.html#l00226">226</a> of file <a class="el" href="model__checks_8py_source.html">model_checks.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  226</span><span class="keyword">def </span>check_lazy_references(app_configs=None, **kwargs):</div>
<div class="line"><span class="lineno">  227</span>    <span class="keywordflow">return</span> _check_lazy_references(apps)</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="model__checks_8py_source.html#l00093">_check_lazy_references()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacedjango.html">django</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1core.html">core</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1core_1_1checks.html">checks</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1core_1_1checks_1_1model__checks.html">model_checks</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
