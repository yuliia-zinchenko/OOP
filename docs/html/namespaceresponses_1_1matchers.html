<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Read&amp;Watch: responses.matchers Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Read&amp;Watch<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('namespaceresponses_1_1matchers.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">responses.matchers Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a19bf7db11a4f863336cdf73e32d7f394" id="r_a19bf7db11a4f863336cdf73e32d7f394"><td class="memItemLeft" align="right" valign="top">Mapping[Any, Any]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a19bf7db11a4f863336cdf73e32d7f394">_filter_dict_recursively</a> (Mapping[Any, Any] dict1, Mapping[Any, Any] dict2)</td></tr>
<tr class="separator:a19bf7db11a4f863336cdf73e32d7f394"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb71e3b4549f33d09e5979c2c57a46f3" id="r_acb71e3b4549f33d09e5979c2c57a46f3"><td class="memItemLeft" align="right" valign="top">Callable[..., Any]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acb71e3b4549f33d09e5979c2c57a46f3">body_matcher</a> (str params, *, bool allow_blank=False)</td></tr>
<tr class="separator:acb71e3b4549f33d09e5979c2c57a46f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ebf963eff288d91f61b8f283343d127" id="r_a4ebf963eff288d91f61b8f283343d127"><td class="memItemLeft" align="right" valign="top">Callable[..., Any]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4ebf963eff288d91f61b8f283343d127">urlencoded_params_matcher</a> (Optional[Mapping[str, str]] params, *, bool allow_blank=False)</td></tr>
<tr class="separator:a4ebf963eff288d91f61b8f283343d127"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5f4e4357736fd602504e225aa0b32bd" id="r_ac5f4e4357736fd602504e225aa0b32bd"><td class="memItemLeft" align="right" valign="top">Callable[..., Any]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac5f4e4357736fd602504e225aa0b32bd">json_params_matcher</a> (Optional[Union[Mapping[str, Any], List[Any]]] params, *, bool strict_match=True)</td></tr>
<tr class="separator:ac5f4e4357736fd602504e225aa0b32bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6fffd079ba88d011a8d3c04c778103e" id="r_ad6fffd079ba88d011a8d3c04c778103e"><td class="memItemLeft" align="right" valign="top">Callable[..., Any]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad6fffd079ba88d011a8d3c04c778103e">fragment_identifier_matcher</a> (Optional[str] identifier)</td></tr>
<tr class="separator:ad6fffd079ba88d011a8d3c04c778103e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bce054d6b4bf4959f47e4ed1d8a3113" id="r_a1bce054d6b4bf4959f47e4ed1d8a3113"><td class="memItemLeft" align="right" valign="top">Callable[..., Any]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1bce054d6b4bf4959f47e4ed1d8a3113">query_param_matcher</a> (Optional[MutableMapping[str, Any]] params, *, bool strict_match=True)</td></tr>
<tr class="separator:a1bce054d6b4bf4959f47e4ed1d8a3113"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44317c4ec18c5eefaaf34be9021b5123" id="r_a44317c4ec18c5eefaaf34be9021b5123"><td class="memItemLeft" align="right" valign="top">Callable[..., Any]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a44317c4ec18c5eefaaf34be9021b5123">query_string_matcher</a> (Optional[str] query)</td></tr>
<tr class="separator:a44317c4ec18c5eefaaf34be9021b5123"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5da8ef74dcd57531937979464502617" id="r_ab5da8ef74dcd57531937979464502617"><td class="memItemLeft" align="right" valign="top">Callable[..., Any]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab5da8ef74dcd57531937979464502617">request_kwargs_matcher</a> (Optional[Mapping[str, Any]] kwargs)</td></tr>
<tr class="separator:ab5da8ef74dcd57531937979464502617"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c133d93fb785cde1b9486a9b3619423" id="r_a0c133d93fb785cde1b9486a9b3619423"><td class="memItemLeft" align="right" valign="top">Callable[..., Any]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c133d93fb785cde1b9486a9b3619423">multipart_matcher</a> (Mapping[str, Any] files, Optional[Mapping[str, str]] data=None)</td></tr>
<tr class="separator:a0c133d93fb785cde1b9486a9b3619423"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1c16e645753566cdd02e43bc2a15900" id="r_ae1c16e645753566cdd02e43bc2a15900"><td class="memItemLeft" align="right" valign="top">Callable[..., Any]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae1c16e645753566cdd02e43bc2a15900">header_matcher</a> (Mapping[str, Union[str, Pattern[str]]] headers, bool strict_match=False)</td></tr>
<tr class="separator:ae1c16e645753566cdd02e43bc2a15900"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a19bf7db11a4f863336cdf73e32d7f394" name="a19bf7db11a4f863336cdf73e32d7f394"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19bf7db11a4f863336cdf73e32d7f394">&#9670;&#160;</a></span>_filter_dict_recursively()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"> Mapping[Any, Any] responses.matchers._filter_dict_recursively </td>
          <td>(</td>
          <td class="paramtype">Mapping[Any, Any]</td>          <td class="paramname"><span class="paramname"><em>dict1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Mapping[Any, Any]
</td>          <td class="paramname"><span class="paramname"><em>dict2</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="matchers_8py_source.html#l00021">21</a> of file <a class="el" href="matchers_8py_source.html">matchers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   23</span>) -&gt; Mapping[Any, Any]:</div>
<div class="line"><span class="lineno">   24</span>    filtered_dict = {}</div>
<div class="line"><span class="lineno">   25</span>    <span class="keywordflow">for</span> k, val <span class="keywordflow">in</span> dict1.items():</div>
<div class="line"><span class="lineno">   26</span>        <span class="keywordflow">if</span> k <span class="keywordflow">in</span> dict2:</div>
<div class="line"><span class="lineno">   27</span>            <span class="keywordflow">if</span> isinstance(val, dict):</div>
<div class="line"><span class="lineno">   28</span>                val = _filter_dict_recursively(val, dict2[k])</div>
<div class="line"><span class="lineno">   29</span>            filtered_dict[k] = val</div>
<div class="line"><span class="lineno">   30</span> </div>
<div class="line"><span class="lineno">   31</span>    <span class="keywordflow">return</span> filtered_dict</div>
<div class="line"><span class="lineno">   32</span> </div>
<div class="line"><span class="lineno">   33</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="matchers_8py_source.html#l00023">_filter_dict_recursively()</a>.</p>

<p class="reference">Referenced by <a class="el" href="matchers_8py_source.html#l00023">_filter_dict_recursively()</a>, and <a class="el" href="matchers_8py_source.html#l00081">json_params_matcher()</a>.</p>

</div>
</div>
<a id="acb71e3b4549f33d09e5979c2c57a46f3" name="acb71e3b4549f33d09e5979c2c57a46f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb71e3b4549f33d09e5979c2c57a46f3">&#9670;&#160;</a></span>body_matcher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Callable[..., Any] responses.matchers.body_matcher </td>
          <td>(</td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>params</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool </td>          <td class="paramname"><span class="paramname"><em>allow_blank</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="matchers_8py_source.html#l00034">34</a> of file <a class="el" href="matchers_8py_source.html">matchers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   34</span><span class="keyword">def </span>body_matcher(params: str, *, allow_blank: bool = <span class="keyword">False</span>) -&gt; Callable[..., Any]:</div>
<div class="line"><span class="lineno">   35</span>    <span class="keyword">def </span>match(request: PreparedRequest) -&gt; Tuple[bool, str]:</div>
<div class="line"><span class="lineno">   36</span>        reason = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">   37</span>        <span class="keywordflow">if</span> isinstance(request.body, bytes):</div>
<div class="line"><span class="lineno">   38</span>            request_body = request.body.decode(<span class="stringliteral">&quot;utf-8&quot;</span>)</div>
<div class="line"><span class="lineno">   39</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   40</span>            request_body = str(request.body)</div>
<div class="line"><span class="lineno">   41</span>        valid = <span class="keyword">True</span> <span class="keywordflow">if</span> request_body == params <span class="keywordflow">else</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">   42</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> valid:</div>
<div class="line"><span class="lineno">   43</span>            reason = f<span class="stringliteral">&quot;request.body doesn&#39;t match {params} doesn&#39;t match {request_body}&quot;</span></div>
<div class="line"><span class="lineno">   44</span>        <span class="keywordflow">return</span> valid, reason</div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   46</span>    <span class="keywordflow">return</span> match</div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad6fffd079ba88d011a8d3c04c778103e" name="ad6fffd079ba88d011a8d3c04c778103e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6fffd079ba88d011a8d3c04c778103e">&#9670;&#160;</a></span>fragment_identifier_matcher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Callable[..., Any] responses.matchers.fragment_identifier_matcher </td>
          <td>(</td>
          <td class="paramtype">Optional[str]</td>          <td class="paramname"><span class="paramname"><em>identifier</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="matchers_8py_source.html#l00143">143</a> of file <a class="el" href="matchers_8py_source.html">matchers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  143</span><span class="keyword">def </span>fragment_identifier_matcher(identifier: Optional[str]) -&gt; Callable[..., Any]:</div>
<div class="line"><span class="lineno">  144</span>    <span class="keyword">def </span>match(request: PreparedRequest) -&gt; Tuple[bool, str]:</div>
<div class="line"><span class="lineno">  145</span>        reason = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  146</span>        url_fragment = urlparse(request.url).fragment</div>
<div class="line"><span class="lineno">  147</span>        <span class="keywordflow">if</span> identifier:</div>
<div class="line"><span class="lineno">  148</span>            url_fragment_qsl = sorted(parse_qsl(url_fragment))  <span class="comment"># type: ignore[type-var]</span></div>
<div class="line"><span class="lineno">  149</span>            identifier_qsl = sorted(parse_qsl(identifier))</div>
<div class="line"><span class="lineno">  150</span>            valid = identifier_qsl == url_fragment_qsl</div>
<div class="line"><span class="lineno">  151</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  152</span>            valid = <span class="keywordflow">not</span> url_fragment</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> valid:</div>
<div class="line"><span class="lineno">  155</span>            reason = (</div>
<div class="line"><span class="lineno">  156</span>                <span class="stringliteral">&quot;URL fragment identifier is different: &quot;</span>  <span class="comment"># type: ignore[str-bytes-safe]</span></div>
<div class="line"><span class="lineno">  157</span>                f<span class="stringliteral">&quot;{identifier} doesn&#39;t match {url_fragment}&quot;</span></div>
<div class="line"><span class="lineno">  158</span>            )</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>        <span class="keywordflow">return</span> valid, reason</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>    <span class="keywordflow">return</span> match</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae1c16e645753566cdd02e43bc2a15900" name="ae1c16e645753566cdd02e43bc2a15900"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1c16e645753566cdd02e43bc2a15900">&#9670;&#160;</a></span>header_matcher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Callable[..., Any] responses.matchers.header_matcher </td>
          <td>(</td>
          <td class="paramtype">Mapping[str, Union[str, Pattern[str]]]</td>          <td class="paramname"><span class="paramname"><em>headers</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool </td>          <td class="paramname"><span class="paramname"><em>strict_match</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Matcher to match 'headers' argument in request using the responses library.

Because ``requests`` will send several standard headers in addition to what
was specified by your code, request headers that are additional to the ones
passed to the matcher are ignored by default. You can change this behaviour
by passing ``strict_match=True``.

:param headers: (dict), same as provided to request
:param strict_match: (bool), whether headers in addition to those specified
                     in the matcher should cause the match to fail.
:return: (func) matcher
</pre> 
<p class="definition">Definition at line <a class="el" href="matchers_8py_source.html#l00362">362</a> of file <a class="el" href="matchers_8py_source.html">matchers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  364</span>) -&gt; Callable[..., Any]:</div>
<div class="line"><span class="lineno">  365</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  366</span><span class="stringliteral">    Matcher to match &#39;headers&#39; argument in request using the responses library.</span></div>
<div class="line"><span class="lineno">  367</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  368</span><span class="stringliteral">    Because ``requests`` will send several standard headers in addition to what</span></div>
<div class="line"><span class="lineno">  369</span><span class="stringliteral">    was specified by your code, request headers that are additional to the ones</span></div>
<div class="line"><span class="lineno">  370</span><span class="stringliteral">    passed to the matcher are ignored by default. You can change this behaviour</span></div>
<div class="line"><span class="lineno">  371</span><span class="stringliteral">    by passing ``strict_match=True``.</span></div>
<div class="line"><span class="lineno">  372</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  373</span><span class="stringliteral">    :param headers: (dict), same as provided to request</span></div>
<div class="line"><span class="lineno">  374</span><span class="stringliteral">    :param strict_match: (bool), whether headers in addition to those specified</span></div>
<div class="line"><span class="lineno">  375</span><span class="stringliteral">                         in the matcher should cause the match to fail.</span></div>
<div class="line"><span class="lineno">  376</span><span class="stringliteral">    :return: (func) matcher</span></div>
<div class="line"><span class="lineno">  377</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>    <span class="keyword">def </span>_compare_with_regex(request_headers: Union[Mapping[Any, Any], Any]) -&gt; bool:</div>
<div class="line"><span class="lineno">  380</span>        <span class="keywordflow">if</span> strict_match <span class="keywordflow">and</span> len(request_headers) != len(headers):</div>
<div class="line"><span class="lineno">  381</span>            <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>        <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> headers.items():</div>
<div class="line"><span class="lineno">  384</span>            <span class="keywordflow">if</span> request_headers.get(k) <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  385</span>                <span class="keywordflow">if</span> isinstance(v, re.Pattern):</div>
<div class="line"><span class="lineno">  386</span>                    <span class="keywordflow">if</span> re.match(v, request_headers[k]) <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  387</span>                        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  388</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  389</span>                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> v == request_headers[k]:</div>
<div class="line"><span class="lineno">  390</span>                        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  391</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  392</span>                <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  393</span> </div>
<div class="line"><span class="lineno">  394</span>        <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  395</span> </div>
<div class="line"><span class="lineno">  396</span>    <span class="keyword">def </span>match(request: PreparedRequest) -&gt; Tuple[bool, str]:</div>
<div class="line"><span class="lineno">  397</span>        request_headers: Union[Mapping[Any, Any], Any] = request.headers <span class="keywordflow">or</span> {}</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> strict_match:</div>
<div class="line"><span class="lineno">  400</span>            <span class="comment"># filter down to just the headers specified in the matcher</span></div>
<div class="line"><span class="lineno">  401</span>            request_headers = {k: v <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> request_headers.items() <span class="keywordflow">if</span> k <span class="keywordflow">in</span> headers}</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>        valid = _compare_with_regex(request_headers)</div>
<div class="line"><span class="lineno">  404</span> </div>
<div class="line"><span class="lineno">  405</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> valid:</div>
<div class="line"><span class="lineno">  406</span>            <span class="keywordflow">return</span> (</div>
<div class="line"><span class="lineno">  407</span>                <span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  408</span>                f<span class="stringliteral">&quot;Headers do not match: {request_headers} doesn&#39;t match {headers}&quot;</span>,</div>
<div class="line"><span class="lineno">  409</span>            )</div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>        <span class="keywordflow">return</span> valid, <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  412</span> </div>
<div class="line"><span class="lineno">  413</span>    <span class="keywordflow">return</span> match</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac5f4e4357736fd602504e225aa0b32bd" name="ac5f4e4357736fd602504e225aa0b32bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5f4e4357736fd602504e225aa0b32bd">&#9670;&#160;</a></span>json_params_matcher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Callable[..., Any] responses.matchers.json_params_matcher </td>
          <td>(</td>
          <td class="paramtype">Optional[Union[Mapping[str, Any], List[Any]]]</td>          <td class="paramname"><span class="paramname"><em>params</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool </td>          <td class="paramname"><span class="paramname"><em>strict_match</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Matches JSON encoded data of request body.

Parameters
----------
params : dict or list
    JSON object provided to 'json' arg of request or a part of it if used in
    conjunction with ``strict_match=False``.
strict_match : bool, default=True
    Applied only when JSON object is a dictionary.
    If set to ``True``, validates that all keys of JSON object match.
    If set to ``False``, original request may contain additional keys.


Returns
-------
Callable
    Matcher function.
</pre> 
<p class="definition">Definition at line <a class="el" href="matchers_8py_source.html#l00079">79</a> of file <a class="el" href="matchers_8py_source.html">matchers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   81</span>) -&gt; Callable[..., Any]:</div>
<div class="line"><span class="lineno">   82</span>    <span class="stringliteral">&quot;&quot;&quot;Matches JSON encoded data of request body.</span></div>
<div class="line"><span class="lineno">   83</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   84</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">   85</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral">    params : dict or list</span></div>
<div class="line"><span class="lineno">   87</span><span class="stringliteral">        JSON object provided to &#39;json&#39; arg of request or a part of it if used in</span></div>
<div class="line"><span class="lineno">   88</span><span class="stringliteral">        conjunction with ``strict_match=False``.</span></div>
<div class="line"><span class="lineno">   89</span><span class="stringliteral">    strict_match : bool, default=True</span></div>
<div class="line"><span class="lineno">   90</span><span class="stringliteral">        Applied only when JSON object is a dictionary.</span></div>
<div class="line"><span class="lineno">   91</span><span class="stringliteral">        If set to ``True``, validates that all keys of JSON object match.</span></div>
<div class="line"><span class="lineno">   92</span><span class="stringliteral">        If set to ``False``, original request may contain additional keys.</span></div>
<div class="line"><span class="lineno">   93</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   94</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   95</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">   96</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">   97</span><span class="stringliteral">    Callable</span></div>
<div class="line"><span class="lineno">   98</span><span class="stringliteral">        Matcher function.</span></div>
<div class="line"><span class="lineno">   99</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  100</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>    <span class="keyword">def </span>match(request: PreparedRequest) -&gt; Tuple[bool, str]:</div>
<div class="line"><span class="lineno">  103</span>        reason = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  104</span>        request_body = request.body</div>
<div class="line"><span class="lineno">  105</span>        json_params = (params <span class="keywordflow">or</span> {}) <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(params, list) <span class="keywordflow">else</span> params</div>
<div class="line"><span class="lineno">  106</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  107</span>            <span class="keywordflow">if</span> isinstance(request.body, bytes):</div>
<div class="line"><span class="lineno">  108</span>                <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  109</span>                    request_body = request.body.decode(<span class="stringliteral">&quot;utf-8&quot;</span>)</div>
<div class="line"><span class="lineno">  110</span>                <span class="keywordflow">except</span> UnicodeDecodeError:</div>
<div class="line"><span class="lineno">  111</span>                    request_body = gzip.decompress(request.body).decode(<span class="stringliteral">&quot;utf-8&quot;</span>)</div>
<div class="line"><span class="lineno">  112</span>            json_body = json_module.loads(request_body) <span class="keywordflow">if</span> request_body <span class="keywordflow">else</span> {}</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>            <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  115</span>                <span class="keywordflow">not</span> strict_match</div>
<div class="line"><span class="lineno">  116</span>                <span class="keywordflow">and</span> isinstance(json_body, dict)</div>
<div class="line"><span class="lineno">  117</span>                <span class="keywordflow">and</span> isinstance(json_params, dict)</div>
<div class="line"><span class="lineno">  118</span>            ):</div>
<div class="line"><span class="lineno">  119</span>                <span class="comment"># filter down to just the params specified in the matcher</span></div>
<div class="line"><span class="lineno">  120</span>                json_body = _filter_dict_recursively(json_body, json_params)</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>            valid = params <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">if</span> request_body <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">else</span> json_params == json_body</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> valid:</div>
<div class="line"><span class="lineno">  125</span>                reason = f<span class="stringliteral">&quot;request.body doesn&#39;t match: {json_body} doesn&#39;t match {json_params}&quot;</span></div>
<div class="line"><span class="lineno">  126</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> strict_match:</div>
<div class="line"><span class="lineno">  127</span>                    reason += (</div>
<div class="line"><span class="lineno">  128</span>                        <span class="stringliteral">&quot;\nNote: You use non-strict parameters check, &quot;</span></div>
<div class="line"><span class="lineno">  129</span>                        <span class="stringliteral">&quot;to change it use `strict_match=True`.&quot;</span></div>
<div class="line"><span class="lineno">  130</span>                    )</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordflow">except</span> JSONDecodeError:</div>
<div class="line"><span class="lineno">  133</span>            valid = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  134</span>            reason = (</div>
<div class="line"><span class="lineno">  135</span>                <span class="stringliteral">&quot;request.body doesn&#39;t match: JSONDecodeError: Cannot parse request.body&quot;</span></div>
<div class="line"><span class="lineno">  136</span>            )</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>        <span class="keywordflow">return</span> valid, reason</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>    <span class="keywordflow">return</span> match</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="matchers_8py_source.html#l00023">_filter_dict_recursively()</a>.</p>

</div>
</div>
<a id="a0c133d93fb785cde1b9486a9b3619423" name="a0c133d93fb785cde1b9486a9b3619423"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c133d93fb785cde1b9486a9b3619423">&#9670;&#160;</a></span>multipart_matcher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Callable[..., Any] responses.matchers.multipart_matcher </td>
          <td>(</td>
          <td class="paramtype">Mapping[str, Any]</td>          <td class="paramname"><span class="paramname"><em>files</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[Mapping[str, str]] </td>          <td class="paramname"><span class="paramname"><em>data</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Matcher to match 'multipart/form-data' content-type.
This function constructs request body and headers from provided 'data' and 'files'
arguments and compares to actual request

:param files: (dict), same as provided to request
:param data: (dict), same as provided to request
:return: (func) matcher
</pre> 
<p class="definition">Definition at line <a class="el" href="matchers_8py_source.html#l00278">278</a> of file <a class="el" href="matchers_8py_source.html">matchers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  280</span>) -&gt; Callable[..., Any]:</div>
<div class="line"><span class="lineno">  281</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  282</span><span class="stringliteral">    Matcher to match &#39;multipart/form-data&#39; content-type.</span></div>
<div class="line"><span class="lineno">  283</span><span class="stringliteral">    This function constructs request body and headers from provided &#39;data&#39; and &#39;files&#39;</span></div>
<div class="line"><span class="lineno">  284</span><span class="stringliteral">    arguments and compares to actual request</span></div>
<div class="line"><span class="lineno">  285</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  286</span><span class="stringliteral">    :param files: (dict), same as provided to request</span></div>
<div class="line"><span class="lineno">  287</span><span class="stringliteral">    :param data: (dict), same as provided to request</span></div>
<div class="line"><span class="lineno">  288</span><span class="stringliteral">    :return: (func) matcher</span></div>
<div class="line"><span class="lineno">  289</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  290</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> files:</div>
<div class="line"><span class="lineno">  291</span>        <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;files argument cannot be empty&quot;</span>)</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>    prepared = PreparedRequest()</div>
<div class="line"><span class="lineno">  294</span>    prepared.headers = {<span class="stringliteral">&quot;Content-Type&quot;</span>: <span class="stringliteral">&quot;&quot;</span>}  <span class="comment"># type: ignore[assignment]</span></div>
<div class="line"><span class="lineno">  295</span>    prepared.prepare_body(data=data, files=files)</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>    <span class="keyword">def </span>get_boundary(content_type: str) -&gt; str:</div>
<div class="line"><span class="lineno">  298</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  299</span><span class="stringliteral">        Parse &#39;boundary&#39; value from header.</span></div>
<div class="line"><span class="lineno">  300</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  301</span><span class="stringliteral">        :param content_type: (str) headers[&quot;Content-Type&quot;] value</span></div>
<div class="line"><span class="lineno">  302</span><span class="stringliteral">        :return: (str) boundary value</span></div>
<div class="line"><span class="lineno">  303</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  304</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;boundary=&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> content_type:</div>
<div class="line"><span class="lineno">  305</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  306</span> </div>
<div class="line"><span class="lineno">  307</span>        <span class="keywordflow">return</span> content_type.split(<span class="stringliteral">&quot;boundary=&quot;</span>)[1]</div>
<div class="line"><span class="lineno">  308</span> </div>
<div class="line"><span class="lineno">  309</span>    <span class="keyword">def </span>match(request: PreparedRequest) -&gt; Tuple[bool, str]:</div>
<div class="line"><span class="lineno">  310</span>        reason = <span class="stringliteral">&quot;multipart/form-data doesn&#39;t match. &quot;</span></div>
<div class="line"><span class="lineno">  311</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;Content-Type&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> request.headers:</div>
<div class="line"><span class="lineno">  312</span>            <span class="keywordflow">return</span> <span class="keyword">False</span>, reason + <span class="stringliteral">&quot;Request is missing the &#39;Content-Type&#39; header&quot;</span></div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>        request_boundary = get_boundary(request.headers[<span class="stringliteral">&quot;Content-Type&quot;</span>])</div>
<div class="line"><span class="lineno">  315</span>        prepared_boundary = get_boundary(prepared.headers[<span class="stringliteral">&quot;Content-Type&quot;</span>])</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>        <span class="comment"># replace boundary value in header and in body, since by default</span></div>
<div class="line"><span class="lineno">  318</span>        <span class="comment"># urllib3.filepost.encode_multipart_formdata dynamically calculates</span></div>
<div class="line"><span class="lineno">  319</span>        <span class="comment"># random boundary alphanumeric value</span></div>
<div class="line"><span class="lineno">  320</span>        request_content_type = request.headers[<span class="stringliteral">&quot;Content-Type&quot;</span>]</div>
<div class="line"><span class="lineno">  321</span>        prepared_content_type = prepared.headers[<span class="stringliteral">&quot;Content-Type&quot;</span>].replace(</div>
<div class="line"><span class="lineno">  322</span>            prepared_boundary, request_boundary</div>
<div class="line"><span class="lineno">  323</span>        )</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>        request_body = request.body</div>
<div class="line"><span class="lineno">  326</span>        prepared_body = prepared.body <span class="keywordflow">or</span> <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>        <span class="keywordflow">if</span> isinstance(prepared_body, bytes):</div>
<div class="line"><span class="lineno">  329</span>            <span class="comment"># since headers always come as str, need to convert to bytes</span></div>
<div class="line"><span class="lineno">  330</span>            prepared_boundary = prepared_boundary.encode(<span class="stringliteral">&quot;utf-8&quot;</span>)  <span class="comment"># type: ignore[assignment]</span></div>
<div class="line"><span class="lineno">  331</span>            request_boundary = request_boundary.encode(<span class="stringliteral">&quot;utf-8&quot;</span>)  <span class="comment"># type: ignore[assignment]</span></div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>        prepared_body = prepared_body.replace(</div>
<div class="line"><span class="lineno">  334</span>            prepared_boundary, request_boundary  <span class="comment"># type: ignore[arg-type]</span></div>
<div class="line"><span class="lineno">  335</span>        )</div>
<div class="line"><span class="lineno">  336</span> </div>
<div class="line"><span class="lineno">  337</span>        headers_valid = prepared_content_type == request_content_type</div>
<div class="line"><span class="lineno">  338</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> headers_valid:</div>
<div class="line"><span class="lineno">  339</span>            <span class="keywordflow">return</span> (</div>
<div class="line"><span class="lineno">  340</span>                <span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  341</span>                reason</div>
<div class="line"><span class="lineno">  342</span>                + <span class="stringliteral">&quot;Request headers[&#39;Content-Type&#39;] is different. {} isn&#39;t equal to {}&quot;</span>.format(</div>
<div class="line"><span class="lineno">  343</span>                    request_content_type, prepared_content_type</div>
<div class="line"><span class="lineno">  344</span>                ),</div>
<div class="line"><span class="lineno">  345</span>            )</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>        body_valid = prepared_body == request_body</div>
<div class="line"><span class="lineno">  348</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> body_valid:</div>
<div class="line"><span class="lineno">  349</span>            <span class="keywordflow">return</span> (</div>
<div class="line"><span class="lineno">  350</span>                <span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  351</span>                reason</div>
<div class="line"><span class="lineno">  352</span>                + <span class="stringliteral">&quot;Request body differs. {} aren&#39;t equal {}&quot;</span>.format(  <span class="comment"># type: ignore[str-bytes-safe]</span></div>
<div class="line"><span class="lineno">  353</span>                    request_body, prepared_body</div>
<div class="line"><span class="lineno">  354</span>                ),</div>
<div class="line"><span class="lineno">  355</span>            )</div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span>        <span class="keywordflow">return</span> <span class="keyword">True</span>, <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>    <span class="keywordflow">return</span> match</div>
<div class="line"><span class="lineno">  360</span> </div>
<div class="line"><span class="lineno">  361</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_e_n_v_2_lib_2site-packages_2responses_2____init_____8py_source.html#l01322">responses.replace</a>.</p>

</div>
</div>
<a id="a1bce054d6b4bf4959f47e4ed1d8a3113" name="a1bce054d6b4bf4959f47e4ed1d8a3113"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bce054d6b4bf4959f47e4ed1d8a3113">&#9670;&#160;</a></span>query_param_matcher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Callable[..., Any] responses.matchers.query_param_matcher </td>
          <td>(</td>
          <td class="paramtype">Optional[MutableMapping[str, Any]]</td>          <td class="paramname"><span class="paramname"><em>params</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool </td>          <td class="paramname"><span class="paramname"><em>strict_match</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Matcher to match 'params' argument in request.

Parameters
----------
params : dict
    The same as provided to request or a part of it if used in
    conjunction with ``strict_match=False``.
strict_match : bool, default=True
    If set to ``True``, validates that all parameters match.
    If set to ``False``, original request may contain additional parameters.


Returns
-------
Callable
    Matcher function.
</pre> 
<p class="definition">Definition at line <a class="el" href="matchers_8py_source.html#l00165">165</a> of file <a class="el" href="matchers_8py_source.html">matchers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  167</span>) -&gt; Callable[..., Any]:</div>
<div class="line"><span class="lineno">  168</span>    <span class="stringliteral">&quot;&quot;&quot;Matcher to match &#39;params&#39; argument in request.</span></div>
<div class="line"><span class="lineno">  169</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  170</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  171</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  172</span><span class="stringliteral">    params : dict</span></div>
<div class="line"><span class="lineno">  173</span><span class="stringliteral">        The same as provided to request or a part of it if used in</span></div>
<div class="line"><span class="lineno">  174</span><span class="stringliteral">        conjunction with ``strict_match=False``.</span></div>
<div class="line"><span class="lineno">  175</span><span class="stringliteral">    strict_match : bool, default=True</span></div>
<div class="line"><span class="lineno">  176</span><span class="stringliteral">        If set to ``True``, validates that all parameters match.</span></div>
<div class="line"><span class="lineno">  177</span><span class="stringliteral">        If set to ``False``, original request may contain additional parameters.</span></div>
<div class="line"><span class="lineno">  178</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  179</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  180</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  181</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  182</span><span class="stringliteral">    Callable</span></div>
<div class="line"><span class="lineno">  183</span><span class="stringliteral">        Matcher function.</span></div>
<div class="line"><span class="lineno">  184</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  185</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>    params_dict = params <span class="keywordflow">or</span> {}</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>    <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> params_dict.items():</div>
<div class="line"><span class="lineno">  190</span>        <span class="keywordflow">if</span> isinstance(v, (int, float)):</div>
<div class="line"><span class="lineno">  191</span>            params_dict[k] = str(v)</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>    <span class="keyword">def </span>match(request: PreparedRequest) -&gt; Tuple[bool, str]:</div>
<div class="line"><span class="lineno">  194</span>        reason = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  195</span>        request_params = request.params  <span class="comment"># type: ignore[attr-defined]</span></div>
<div class="line"><span class="lineno">  196</span>        request_params_dict = request_params <span class="keywordflow">or</span> {}</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> strict_match:</div>
<div class="line"><span class="lineno">  199</span>            <span class="comment"># filter down to just the params specified in the matcher</span></div>
<div class="line"><span class="lineno">  200</span>            request_params_dict = {</div>
<div class="line"><span class="lineno">  201</span>                k: v <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> request_params_dict.items() <span class="keywordflow">if</span> k <span class="keywordflow">in</span> params_dict</div>
<div class="line"><span class="lineno">  202</span>            }</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>        valid = sorted(params_dict.items()) == sorted(request_params_dict.items())</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> valid:</div>
<div class="line"><span class="lineno">  207</span>            reason = f<span class="stringliteral">&quot;Parameters do not match. {request_params_dict} doesn&#39;t match {params_dict}&quot;</span></div>
<div class="line"><span class="lineno">  208</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> strict_match:</div>
<div class="line"><span class="lineno">  209</span>                reason += (</div>
<div class="line"><span class="lineno">  210</span>                    <span class="stringliteral">&quot;\nYou can use `strict_match=True` to do a strict parameters check.&quot;</span></div>
<div class="line"><span class="lineno">  211</span>                )</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>        <span class="keywordflow">return</span> valid, reason</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>    <span class="keywordflow">return</span> match</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a44317c4ec18c5eefaaf34be9021b5123" name="a44317c4ec18c5eefaaf34be9021b5123"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44317c4ec18c5eefaaf34be9021b5123">&#9670;&#160;</a></span>query_string_matcher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Callable[..., Any] responses.matchers.query_string_matcher </td>
          <td>(</td>
          <td class="paramtype">Optional[str]</td>          <td class="paramname"><span class="paramname"><em>query</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Matcher to match query string part of request

:param query: (str), same as constructed by request
:return: (func) matcher
</pre> 
<p class="definition">Definition at line <a class="el" href="matchers_8py_source.html#l00218">218</a> of file <a class="el" href="matchers_8py_source.html">matchers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  218</span><span class="keyword">def </span>query_string_matcher(query: Optional[str]) -&gt; Callable[..., Any]:</div>
<div class="line"><span class="lineno">  219</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  220</span><span class="stringliteral">    Matcher to match query string part of request</span></div>
<div class="line"><span class="lineno">  221</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  222</span><span class="stringliteral">    :param query: (str), same as constructed by request</span></div>
<div class="line"><span class="lineno">  223</span><span class="stringliteral">    :return: (func) matcher</span></div>
<div class="line"><span class="lineno">  224</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>    <span class="keyword">def </span>match(request: PreparedRequest) -&gt; Tuple[bool, str]:</div>
<div class="line"><span class="lineno">  227</span>        reason = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  228</span>        data = parse_url(request.url <span class="keywordflow">or</span> <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">  229</span>        request_query = data.query</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>        request_qsl = sorted(parse_qsl(request_query)) <span class="keywordflow">if</span> request_query <span class="keywordflow">else</span> {}</div>
<div class="line"><span class="lineno">  232</span>        matcher_qsl = sorted(parse_qsl(query)) <span class="keywordflow">if</span> query <span class="keywordflow">else</span> {}</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>        valid = <span class="keywordflow">not</span> query <span class="keywordflow">if</span> request_query <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">else</span> request_qsl == matcher_qsl</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> valid:</div>
<div class="line"><span class="lineno">  237</span>            reason = (</div>
<div class="line"><span class="lineno">  238</span>                <span class="stringliteral">&quot;Query string doesn&#39;t match. &quot;</span></div>
<div class="line"><span class="lineno">  239</span>                f<span class="stringliteral">&quot;{dict(request_qsl)} doesn&#39;t match {dict(matcher_qsl)}&quot;</span></div>
<div class="line"><span class="lineno">  240</span>            )</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>        <span class="keywordflow">return</span> valid, reason</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>    <span class="keywordflow">return</span> match</div>
<div class="line"><span class="lineno">  245</span> </div>
<div class="line"><span class="lineno">  246</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5da8ef74dcd57531937979464502617" name="ab5da8ef74dcd57531937979464502617"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5da8ef74dcd57531937979464502617">&#9670;&#160;</a></span>request_kwargs_matcher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Callable[..., Any] responses.matchers.request_kwargs_matcher </td>
          <td>(</td>
          <td class="paramtype">Optional[Mapping[str, Any]]</td>          <td class="paramname"><span class="paramname"><em>kwargs</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Matcher to match keyword arguments provided to request

:param kwargs: (dict), keyword arguments, same as provided to request
:return: (func) matcher
</pre> 
<p class="definition">Definition at line <a class="el" href="matchers_8py_source.html#l00247">247</a> of file <a class="el" href="matchers_8py_source.html">matchers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  247</span><span class="keyword">def </span>request_kwargs_matcher(kwargs: Optional[Mapping[str, Any]]) -&gt; Callable[..., Any]:</div>
<div class="line"><span class="lineno">  248</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  249</span><span class="stringliteral">    Matcher to match keyword arguments provided to request</span></div>
<div class="line"><span class="lineno">  250</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  251</span><span class="stringliteral">    :param kwargs: (dict), keyword arguments, same as provided to request</span></div>
<div class="line"><span class="lineno">  252</span><span class="stringliteral">    :return: (func) matcher</span></div>
<div class="line"><span class="lineno">  253</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>    <span class="keyword">def </span>match(request: PreparedRequest) -&gt; Tuple[bool, str]:</div>
<div class="line"><span class="lineno">  256</span>        reason = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  257</span>        kwargs_dict = kwargs <span class="keywordflow">or</span> {}</div>
<div class="line"><span class="lineno">  258</span>        <span class="comment"># validate only kwargs that were requested for comparison, skip defaults</span></div>
<div class="line"><span class="lineno">  259</span>        req_kwargs = request.req_kwargs  <span class="comment"># type: ignore[attr-defined]</span></div>
<div class="line"><span class="lineno">  260</span>        request_kwargs = {k: v <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> req_kwargs.items() <span class="keywordflow">if</span> k <span class="keywordflow">in</span> kwargs_dict}</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>        valid = (</div>
<div class="line"><span class="lineno">  263</span>            <span class="keywordflow">not</span> kwargs_dict</div>
<div class="line"><span class="lineno">  264</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> request_kwargs</div>
<div class="line"><span class="lineno">  265</span>            <span class="keywordflow">else</span> sorted(kwargs_dict.items()) == sorted(request_kwargs.items())</div>
<div class="line"><span class="lineno">  266</span>        )</div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> valid:</div>
<div class="line"><span class="lineno">  269</span>            reason = (</div>
<div class="line"><span class="lineno">  270</span>                f<span class="stringliteral">&quot;Arguments don&#39;t match: {request_kwargs} doesn&#39;t match {kwargs_dict}&quot;</span></div>
<div class="line"><span class="lineno">  271</span>            )</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>        <span class="keywordflow">return</span> valid, reason</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>    <span class="keywordflow">return</span> match</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ebf963eff288d91f61b8f283343d127" name="a4ebf963eff288d91f61b8f283343d127"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ebf963eff288d91f61b8f283343d127">&#9670;&#160;</a></span>urlencoded_params_matcher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Callable[..., Any] responses.matchers.urlencoded_params_matcher </td>
          <td>(</td>
          <td class="paramtype">Optional[Mapping[str, str]]</td>          <td class="paramname"><span class="paramname"><em>params</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool </td>          <td class="paramname"><span class="paramname"><em>allow_blank</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Matches URL encoded data

:param params: (dict) data provided to 'data' arg of request
:return: (func) matcher
</pre> 
<p class="definition">Definition at line <a class="el" href="matchers_8py_source.html#l00049">49</a> of file <a class="el" href="matchers_8py_source.html">matchers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   51</span>) -&gt; Callable[..., Any]:</div>
<div class="line"><span class="lineno">   52</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">    Matches URL encoded data</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral">    :param params: (dict) data provided to &#39;data&#39; arg of request</span></div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">    :return: (func) matcher</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>    <span class="keyword">def </span>match(request: PreparedRequest) -&gt; Tuple[bool, str]:</div>
<div class="line"><span class="lineno">   60</span>        reason = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">   61</span>        request_body = request.body</div>
<div class="line"><span class="lineno">   62</span>        qsl_body = (</div>
<div class="line"><span class="lineno">   63</span>            dict(parse_qsl(request_body, keep_blank_values=allow_blank))  <span class="comment"># type: ignore[type-var]</span></div>
<div class="line"><span class="lineno">   64</span>            <span class="keywordflow">if</span> request_body</div>
<div class="line"><span class="lineno">   65</span>            <span class="keywordflow">else</span> {}</div>
<div class="line"><span class="lineno">   66</span>        )</div>
<div class="line"><span class="lineno">   67</span>        params_dict = params <span class="keywordflow">or</span> {}</div>
<div class="line"><span class="lineno">   68</span>        valid = params <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">if</span> request_body <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">else</span> params_dict == qsl_body</div>
<div class="line"><span class="lineno">   69</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> valid:</div>
<div class="line"><span class="lineno">   70</span>            reason = (</div>
<div class="line"><span class="lineno">   71</span>                f<span class="stringliteral">&quot;request.body doesn&#39;t match: {qsl_body} doesn&#39;t match {params_dict}&quot;</span></div>
<div class="line"><span class="lineno">   72</span>            )</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>        <span class="keywordflow">return</span> valid, reason</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>    <span class="keywordflow">return</span> match</div>
<div class="line"><span class="lineno">   77</span> </div>
<div class="line"><span class="lineno">   78</span> </div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceresponses.html">responses</a></li><li class="navelem"><a class="el" href="namespaceresponses_1_1matchers.html">matchers</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
