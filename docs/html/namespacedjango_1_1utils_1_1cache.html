<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Read&amp;Watch: django.utils.cache Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Read&amp;Watch<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('namespacedjango_1_1utils_1_1cache.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">django.utils.cache Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aeed258ac6eb45119bcc0e128999bda6d" id="r_aeed258ac6eb45119bcc0e128999bda6d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeed258ac6eb45119bcc0e128999bda6d">patch_cache_control</a> (response, **kwargs)</td></tr>
<tr class="separator:aeed258ac6eb45119bcc0e128999bda6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bc9580f2ab5396d254ade370de81f23" id="r_a6bc9580f2ab5396d254ade370de81f23"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6bc9580f2ab5396d254ade370de81f23">get_max_age</a> (response)</td></tr>
<tr class="separator:a6bc9580f2ab5396d254ade370de81f23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad40585b4ba50072b946be8a6b18beeb3" id="r_ad40585b4ba50072b946be8a6b18beeb3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad40585b4ba50072b946be8a6b18beeb3">set_response_etag</a> (response)</td></tr>
<tr class="separator:ad40585b4ba50072b946be8a6b18beeb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacb9341d4684f32c8e6a2b95a7722ac8" id="r_aacb9341d4684f32c8e6a2b95a7722ac8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aacb9341d4684f32c8e6a2b95a7722ac8">_precondition_failed</a> (request)</td></tr>
<tr class="separator:aacb9341d4684f32c8e6a2b95a7722ac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcaa3f3747694ab2c506fe35e865f9fb" id="r_abcaa3f3747694ab2c506fe35e865f9fb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abcaa3f3747694ab2c506fe35e865f9fb">_not_modified</a> (request, response=None)</td></tr>
<tr class="separator:abcaa3f3747694ab2c506fe35e865f9fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebd5e17d06f032dc671d30768d4ef5ae" id="r_aebd5e17d06f032dc671d30768d4ef5ae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aebd5e17d06f032dc671d30768d4ef5ae">get_conditional_response</a> (request, etag=None, last_modified=None, response=None)</td></tr>
<tr class="separator:aebd5e17d06f032dc671d30768d4ef5ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acedd15c812fc840a9c33d339059ba91a" id="r_acedd15c812fc840a9c33d339059ba91a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acedd15c812fc840a9c33d339059ba91a">_if_match_passes</a> (target_etag, etags)</td></tr>
<tr class="separator:acedd15c812fc840a9c33d339059ba91a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69f9a4056e293a694addfc6d16ec60a0" id="r_a69f9a4056e293a694addfc6d16ec60a0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a69f9a4056e293a694addfc6d16ec60a0">_if_unmodified_since_passes</a> (last_modified, if_unmodified_since)</td></tr>
<tr class="separator:a69f9a4056e293a694addfc6d16ec60a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd77bb77ca5a91e3172c1ef14eccd069" id="r_acd77bb77ca5a91e3172c1ef14eccd069"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acd77bb77ca5a91e3172c1ef14eccd069">_if_none_match_passes</a> (target_etag, etags)</td></tr>
<tr class="separator:acd77bb77ca5a91e3172c1ef14eccd069"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab236a0c0116461e24d1070390d46ad5c" id="r_ab236a0c0116461e24d1070390d46ad5c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab236a0c0116461e24d1070390d46ad5c">_if_modified_since_passes</a> (last_modified, if_modified_since)</td></tr>
<tr class="separator:ab236a0c0116461e24d1070390d46ad5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ea4e5b478dfe47016e291195b111123" id="r_a7ea4e5b478dfe47016e291195b111123"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ea4e5b478dfe47016e291195b111123">patch_response_headers</a> (response, cache_timeout=None)</td></tr>
<tr class="separator:a7ea4e5b478dfe47016e291195b111123"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f5e8876e160e1dd5de60be71fa3effa" id="r_a9f5e8876e160e1dd5de60be71fa3effa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f5e8876e160e1dd5de60be71fa3effa">add_never_cache_headers</a> (response)</td></tr>
<tr class="separator:a9f5e8876e160e1dd5de60be71fa3effa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea37e1491ccc46f93c70dcff6ac362e4" id="r_aea37e1491ccc46f93c70dcff6ac362e4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aea37e1491ccc46f93c70dcff6ac362e4">patch_vary_headers</a> (response, newheaders)</td></tr>
<tr class="separator:aea37e1491ccc46f93c70dcff6ac362e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac742d6d77bfc369f976f162b306d6175" id="r_ac742d6d77bfc369f976f162b306d6175"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac742d6d77bfc369f976f162b306d6175">has_vary_header</a> (response, header_query)</td></tr>
<tr class="separator:ac742d6d77bfc369f976f162b306d6175"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa21b2116ec40b6bc5980a83fdeb66c1c" id="r_aa21b2116ec40b6bc5980a83fdeb66c1c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa21b2116ec40b6bc5980a83fdeb66c1c">_i18n_cache_key_suffix</a> (request, cache_key)</td></tr>
<tr class="separator:aa21b2116ec40b6bc5980a83fdeb66c1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a757f75067e9f2f476abe25f68d7f5203" id="r_a757f75067e9f2f476abe25f68d7f5203"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a757f75067e9f2f476abe25f68d7f5203">_generate_cache_key</a> (request, method, headerlist, key_prefix)</td></tr>
<tr class="separator:a757f75067e9f2f476abe25f68d7f5203"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe3f196643bed3c5cae2b0ca66a391fd" id="r_abe3f196643bed3c5cae2b0ca66a391fd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abe3f196643bed3c5cae2b0ca66a391fd">_generate_cache_header_key</a> (key_prefix, request)</td></tr>
<tr class="separator:abe3f196643bed3c5cae2b0ca66a391fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a931c89cb28ebdc8d947b1b7c5d32e395" id="r_a931c89cb28ebdc8d947b1b7c5d32e395"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a931c89cb28ebdc8d947b1b7c5d32e395">get_cache_key</a> (request, key_prefix=None, method=&quot;GET&quot;, cache=None)</td></tr>
<tr class="separator:a931c89cb28ebdc8d947b1b7c5d32e395"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3605307bad4121848c95d84c978e992d" id="r_a3605307bad4121848c95d84c978e992d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3605307bad4121848c95d84c978e992d">learn_cache_key</a> (request, response, cache_timeout=None, key_prefix=None, cache=None)</td></tr>
<tr class="separator:a3605307bad4121848c95d84c978e992d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbc89702a7e4cc09e643b6f096a52aad" id="r_acbc89702a7e4cc09e643b6f096a52aad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acbc89702a7e4cc09e643b6f096a52aad">_to_tuple</a> (s)</td></tr>
<tr class="separator:acbc89702a7e4cc09e643b6f096a52aad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:adf2322fc2c289271b7f92ebda3c7a17a" id="r_adf2322fc2c289271b7f92ebda3c7a17a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adf2322fc2c289271b7f92ebda3c7a17a">cc_delim_re</a> = _lazy_re_compile(r&quot;\s*,\s*&quot;)</td></tr>
<tr class="separator:adf2322fc2c289271b7f92ebda3c7a17a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">This module contains helper functions for controlling caching. It does so by
managing the "Vary" header of responses. It includes functions to patch the
header of response objects directly and decorators that change functions to do
that header-patching themselves.

For information on the Vary header, see RFC 9110 Section 12.5.5.

Essentially, the "Vary" HTTP header defines which headers a cache should take
into account when building its cache key. Requests with the same path but
different header content for headers named in "Vary" need to get different
cache keys to prevent delivery of wrong content.

An example: i18n middleware would need to distinguish caches by the
"Accept-language" header.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="abe3f196643bed3c5cae2b0ca66a391fd" name="abe3f196643bed3c5cae2b0ca66a391fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe3f196643bed3c5cae2b0ca66a391fd">&#9670;&#160;</a></span>_generate_cache_header_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache._generate_cache_header_key </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>key_prefix</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>request</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Return a cache key for the header cache.</pre> 
<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00367">367</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  367</span><span class="keyword">def </span>_generate_cache_header_key(key_prefix, request):</div>
<div class="line"><span class="lineno">  368</span>    <span class="stringliteral">&quot;&quot;&quot;Return a cache key for the header cache.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  369</span>    url = md5(request.build_absolute_uri().encode(<span class="stringliteral">&quot;ascii&quot;</span>), usedforsecurity=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  370</span>    cache_key = <span class="stringliteral">&quot;views.decorators.cache.cache_header.%s.%s&quot;</span> % (</div>
<div class="line"><span class="lineno">  371</span>        key_prefix,</div>
<div class="line"><span class="lineno">  372</span>        url.hexdigest(),</div>
<div class="line"><span class="lineno">  373</span>    )</div>
<div class="line"><span class="lineno">  374</span>    <span class="keywordflow">return</span> _i18n_cache_key_suffix(request, cache_key)</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="django_2utils_2cache_8py_source.html#l00338">_i18n_cache_key_suffix()</a>.</p>

<p class="reference">Referenced by <a class="el" href="django_2utils_2cache_8py_source.html#l00377">get_cache_key()</a>, and <a class="el" href="django_2utils_2cache_8py_source.html#l00399">learn_cache_key()</a>.</p>

</div>
</div>
<a id="a757f75067e9f2f476abe25f68d7f5203" name="a757f75067e9f2f476abe25f68d7f5203"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a757f75067e9f2f476abe25f68d7f5203">&#9670;&#160;</a></span>_generate_cache_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache._generate_cache_key </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>request</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>method</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>headerlist</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>key_prefix</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Return a cache key from the headers given in the header list.</pre> 
<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00350">350</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  350</span><span class="keyword">def </span>_generate_cache_key(request, method, headerlist, key_prefix):</div>
<div class="line"><span class="lineno">  351</span>    <span class="stringliteral">&quot;&quot;&quot;Return a cache key from the headers given in the header list.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  352</span>    ctx = md5(usedforsecurity=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  353</span>    <span class="keywordflow">for</span> header <span class="keywordflow">in</span> headerlist:</div>
<div class="line"><span class="lineno">  354</span>        value = request.META.get(header)</div>
<div class="line"><span class="lineno">  355</span>        <span class="keywordflow">if</span> value <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  356</span>            ctx.update(value.encode())</div>
<div class="line"><span class="lineno">  357</span>    url = md5(request.build_absolute_uri().encode(<span class="stringliteral">&quot;ascii&quot;</span>), usedforsecurity=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  358</span>    cache_key = <span class="stringliteral">&quot;views.decorators.cache.cache_page.%s.%s.%s.%s&quot;</span> % (</div>
<div class="line"><span class="lineno">  359</span>        key_prefix,</div>
<div class="line"><span class="lineno">  360</span>        method,</div>
<div class="line"><span class="lineno">  361</span>        url.hexdigest(),</div>
<div class="line"><span class="lineno">  362</span>        ctx.hexdigest(),</div>
<div class="line"><span class="lineno">  363</span>    )</div>
<div class="line"><span class="lineno">  364</span>    <span class="keywordflow">return</span> _i18n_cache_key_suffix(request, cache_key)</div>
<div class="line"><span class="lineno">  365</span> </div>
<div class="line"><span class="lineno">  366</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="django_2utils_2cache_8py_source.html#l00338">_i18n_cache_key_suffix()</a>.</p>

<p class="reference">Referenced by <a class="el" href="django_2utils_2cache_8py_source.html#l00377">get_cache_key()</a>, and <a class="el" href="django_2utils_2cache_8py_source.html#l00399">learn_cache_key()</a>.</p>

</div>
</div>
<a id="aa21b2116ec40b6bc5980a83fdeb66c1c" name="aa21b2116ec40b6bc5980a83fdeb66c1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa21b2116ec40b6bc5980a83fdeb66c1c">&#9670;&#160;</a></span>_i18n_cache_key_suffix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache._i18n_cache_key_suffix </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>request</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cache_key</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">If necessary, add the current locale or time zone to the cache key.</pre> 
<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00338">338</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  338</span><span class="keyword">def </span>_i18n_cache_key_suffix(request, cache_key):</div>
<div class="line"><span class="lineno">  339</span>    <span class="stringliteral">&quot;&quot;&quot;If necessary, add the current locale or time zone to the cache key.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  340</span>    <span class="keywordflow">if</span> settings.USE_I18N:</div>
<div class="line"><span class="lineno">  341</span>        <span class="comment"># first check if LocaleMiddleware or another middleware added</span></div>
<div class="line"><span class="lineno">  342</span>        <span class="comment"># LANGUAGE_CODE to request, then fall back to the active language</span></div>
<div class="line"><span class="lineno">  343</span>        <span class="comment"># which in turn can also fall back to settings.LANGUAGE_CODE</span></div>
<div class="line"><span class="lineno">  344</span>        cache_key += <span class="stringliteral">&quot;.%s&quot;</span> % getattr(request, <span class="stringliteral">&quot;LANGUAGE_CODE&quot;</span>, get_language())</div>
<div class="line"><span class="lineno">  345</span>    <span class="keywordflow">if</span> settings.USE_TZ:</div>
<div class="line"><span class="lineno">  346</span>        cache_key += <span class="stringliteral">&quot;.%s&quot;</span> % get_current_timezone_name()</div>
<div class="line"><span class="lineno">  347</span>    <span class="keywordflow">return</span> cache_key</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="django_2utils_2cache_8py_source.html#l00367">_generate_cache_header_key()</a>, and <a class="el" href="django_2utils_2cache_8py_source.html#l00350">_generate_cache_key()</a>.</p>

</div>
</div>
<a id="acedd15c812fc840a9c33d339059ba91a" name="acedd15c812fc840a9c33d339059ba91a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acedd15c812fc840a9c33d339059ba91a">&#9670;&#160;</a></span>_if_match_passes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache._if_match_passes </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>target_etag</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>etags</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Test the If-Match comparison as defined in RFC 9110 Section 13.1.1.
</pre> 
<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00214">214</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  214</span><span class="keyword">def </span>_if_match_passes(target_etag, etags):</div>
<div class="line"><span class="lineno">  215</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  216</span><span class="stringliteral">    Test the If-Match comparison as defined in RFC 9110 Section 13.1.1.</span></div>
<div class="line"><span class="lineno">  217</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  218</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> target_etag:</div>
<div class="line"><span class="lineno">  219</span>        <span class="comment"># If there isn&#39;t an ETag, then there can&#39;t be a match.</span></div>
<div class="line"><span class="lineno">  220</span>        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  221</span>    <span class="keywordflow">elif</span> etags == [<span class="stringliteral">&quot;*&quot;</span>]:</div>
<div class="line"><span class="lineno">  222</span>        <span class="comment"># The existence of an ETag means that there is &quot;a current</span></div>
<div class="line"><span class="lineno">  223</span>        <span class="comment"># representation for the target resource&quot;, even if the ETag is weak,</span></div>
<div class="line"><span class="lineno">  224</span>        <span class="comment"># so there is a match to &#39;*&#39;.</span></div>
<div class="line"><span class="lineno">  225</span>        <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  226</span>    <span class="keywordflow">elif</span> target_etag.startswith(<span class="stringliteral">&quot;W/&quot;</span>):</div>
<div class="line"><span class="lineno">  227</span>        <span class="comment"># A weak ETag can never strongly match another ETag.</span></div>
<div class="line"><span class="lineno">  228</span>        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  229</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  230</span>        <span class="comment"># Since the ETag is strong, this will only return True if there&#39;s a</span></div>
<div class="line"><span class="lineno">  231</span>        <span class="comment"># strong match.</span></div>
<div class="line"><span class="lineno">  232</span>        <span class="keywordflow">return</span> target_etag <span class="keywordflow">in</span> etags</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="django_2utils_2cache_8py_source.html#l00164">get_conditional_response()</a>.</p>

</div>
</div>
<a id="ab236a0c0116461e24d1070390d46ad5c" name="ab236a0c0116461e24d1070390d46ad5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab236a0c0116461e24d1070390d46ad5c">&#9670;&#160;</a></span>_if_modified_since_passes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache._if_modified_since_passes </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>last_modified</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>if_modified_since</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Test the If-Modified-Since comparison as defined in RFC 9110 Section
13.1.3.
</pre> 
<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00262">262</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  262</span><span class="keyword">def </span>_if_modified_since_passes(last_modified, if_modified_since):</div>
<div class="line"><span class="lineno">  263</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  264</span><span class="stringliteral">    Test the If-Modified-Since comparison as defined in RFC 9110 Section</span></div>
<div class="line"><span class="lineno">  265</span><span class="stringliteral">    13.1.3.</span></div>
<div class="line"><span class="lineno">  266</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  267</span>    <span class="keywordflow">return</span> <span class="keywordflow">not</span> last_modified <span class="keywordflow">or</span> last_modified &gt; if_modified_since</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="django_2utils_2cache_8py_source.html#l00164">get_conditional_response()</a>.</p>

</div>
</div>
<a id="acd77bb77ca5a91e3172c1ef14eccd069" name="acd77bb77ca5a91e3172c1ef14eccd069"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd77bb77ca5a91e3172c1ef14eccd069">&#9670;&#160;</a></span>_if_none_match_passes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache._if_none_match_passes </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>target_etag</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>etags</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Test the If-None-Match comparison as defined in RFC 9110 Section 13.1.2.
</pre> 
<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00243">243</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  243</span><span class="keyword">def </span>_if_none_match_passes(target_etag, etags):</div>
<div class="line"><span class="lineno">  244</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  245</span><span class="stringliteral">    Test the If-None-Match comparison as defined in RFC 9110 Section 13.1.2.</span></div>
<div class="line"><span class="lineno">  246</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  247</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> target_etag:</div>
<div class="line"><span class="lineno">  248</span>        <span class="comment"># If there isn&#39;t an ETag, then there isn&#39;t a match.</span></div>
<div class="line"><span class="lineno">  249</span>        <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  250</span>    <span class="keywordflow">elif</span> etags == [<span class="stringliteral">&quot;*&quot;</span>]:</div>
<div class="line"><span class="lineno">  251</span>        <span class="comment"># The existence of an ETag means that there is &quot;a current</span></div>
<div class="line"><span class="lineno">  252</span>        <span class="comment"># representation for the target resource&quot;, so there is a match to &#39;*&#39;.</span></div>
<div class="line"><span class="lineno">  253</span>        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  254</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  255</span>        <span class="comment"># The comparison should be weak, so look for a match after stripping</span></div>
<div class="line"><span class="lineno">  256</span>        <span class="comment"># off any weak indicators.</span></div>
<div class="line"><span class="lineno">  257</span>        target_etag = target_etag.strip(<span class="stringliteral">&quot;W/&quot;</span>)</div>
<div class="line"><span class="lineno">  258</span>        etags = (etag.strip(<span class="stringliteral">&quot;W/&quot;</span>) <span class="keywordflow">for</span> etag <span class="keywordflow">in</span> etags)</div>
<div class="line"><span class="lineno">  259</span>        <span class="keywordflow">return</span> target_etag <span class="keywordflow">not</span> <span class="keywordflow">in</span> etags</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="django_2utils_2cache_8py_source.html#l00164">get_conditional_response()</a>.</p>

</div>
</div>
<a id="a69f9a4056e293a694addfc6d16ec60a0" name="a69f9a4056e293a694addfc6d16ec60a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69f9a4056e293a694addfc6d16ec60a0">&#9670;&#160;</a></span>_if_unmodified_since_passes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache._if_unmodified_since_passes </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>last_modified</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>if_unmodified_since</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Test the If-Unmodified-Since comparison as defined in RFC 9110 Section
13.1.4.
</pre> 
<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00235">235</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  235</span><span class="keyword">def </span>_if_unmodified_since_passes(last_modified, if_unmodified_since):</div>
<div class="line"><span class="lineno">  236</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  237</span><span class="stringliteral">    Test the If-Unmodified-Since comparison as defined in RFC 9110 Section</span></div>
<div class="line"><span class="lineno">  238</span><span class="stringliteral">    13.1.4.</span></div>
<div class="line"><span class="lineno">  239</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordflow">return</span> last_modified <span class="keywordflow">and</span> last_modified &lt;= if_unmodified_since</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="django_2utils_2cache_8py_source.html#l00164">get_conditional_response()</a>.</p>

</div>
</div>
<a id="abcaa3f3747694ab2c506fe35e865f9fb" name="abcaa3f3747694ab2c506fe35e865f9fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcaa3f3747694ab2c506fe35e865f9fb">&#9670;&#160;</a></span>_not_modified()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache._not_modified </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>request</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>response</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00138">138</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  138</span><span class="keyword">def </span>_not_modified(request, response=None):</div>
<div class="line"><span class="lineno">  139</span>    new_response = HttpResponseNotModified()</div>
<div class="line"><span class="lineno">  140</span>    <span class="keywordflow">if</span> response:</div>
<div class="line"><span class="lineno">  141</span>        <span class="comment"># Preserve the headers required by RFC 9110 Section 15.4.5, as well as</span></div>
<div class="line"><span class="lineno">  142</span>        <span class="comment"># Last-Modified.</span></div>
<div class="line"><span class="lineno">  143</span>        <span class="keywordflow">for</span> header <span class="keywordflow">in</span> (</div>
<div class="line"><span class="lineno">  144</span>            <span class="stringliteral">&quot;Cache-Control&quot;</span>,</div>
<div class="line"><span class="lineno">  145</span>            <span class="stringliteral">&quot;Content-Location&quot;</span>,</div>
<div class="line"><span class="lineno">  146</span>            <span class="stringliteral">&quot;Date&quot;</span>,</div>
<div class="line"><span class="lineno">  147</span>            <span class="stringliteral">&quot;ETag&quot;</span>,</div>
<div class="line"><span class="lineno">  148</span>            <span class="stringliteral">&quot;Expires&quot;</span>,</div>
<div class="line"><span class="lineno">  149</span>            <span class="stringliteral">&quot;Last-Modified&quot;</span>,</div>
<div class="line"><span class="lineno">  150</span>            <span class="stringliteral">&quot;Vary&quot;</span>,</div>
<div class="line"><span class="lineno">  151</span>        ):</div>
<div class="line"><span class="lineno">  152</span>            <span class="keywordflow">if</span> header <span class="keywordflow">in</span> response:</div>
<div class="line"><span class="lineno">  153</span>                new_response.headers[header] = response.headers[header]</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>        <span class="comment"># Preserve cookies as per the cookie specification: &quot;If a proxy server</span></div>
<div class="line"><span class="lineno">  156</span>        <span class="comment"># receives a response which contains a Set-cookie header, it should</span></div>
<div class="line"><span class="lineno">  157</span>        <span class="comment"># propagate the Set-cookie header to the client, regardless of whether</span></div>
<div class="line"><span class="lineno">  158</span>        <span class="comment"># the response was 304 (Not Modified) or 200 (OK).</span></div>
<div class="line"><span class="lineno">  159</span>        <span class="comment"># https://curl.haxx.se/rfc/cookie_spec.html</span></div>
<div class="line"><span class="lineno">  160</span>        new_response.cookies = response.cookies</div>
<div class="line"><span class="lineno">  161</span>    <span class="keywordflow">return</span> new_response</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="django_2utils_2cache_8py_source.html#l00164">get_conditional_response()</a>.</p>

</div>
</div>
<a id="aacb9341d4684f32c8e6a2b95a7722ac8" name="aacb9341d4684f32c8e6a2b95a7722ac8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacb9341d4684f32c8e6a2b95a7722ac8">&#9670;&#160;</a></span>_precondition_failed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache._precondition_failed </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>request</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00127">127</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  127</span><span class="keyword">def </span>_precondition_failed(request):</div>
<div class="line"><span class="lineno">  128</span>    response = HttpResponse(status=412)</div>
<div class="line"><span class="lineno">  129</span>    log_response(</div>
<div class="line"><span class="lineno">  130</span>        <span class="stringliteral">&quot;Precondition Failed: %s&quot;</span>,</div>
<div class="line"><span class="lineno">  131</span>        request.path,</div>
<div class="line"><span class="lineno">  132</span>        response=response,</div>
<div class="line"><span class="lineno">  133</span>        request=request,</div>
<div class="line"><span class="lineno">  134</span>    )</div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordflow">return</span> response</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="django_2utils_2cache_8py_source.html#l00164">get_conditional_response()</a>.</p>

</div>
</div>
<a id="acbc89702a7e4cc09e643b6f096a52aad" name="acbc89702a7e4cc09e643b6f096a52aad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbc89702a7e4cc09e643b6f096a52aad">&#9670;&#160;</a></span>_to_tuple()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache._to_tuple </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>s</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00440">440</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  440</span><span class="keyword">def </span>_to_tuple(s):</div>
<div class="line"><span class="lineno">  441</span>    t = s.split(<span class="stringliteral">&quot;=&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  442</span>    <span class="keywordflow">if</span> len(t) == 2:</div>
<div class="line"><span class="lineno">  443</span>        <span class="keywordflow">return</span> t[0].lower(), t[1]</div>
<div class="line"><span class="lineno">  444</span>    <span class="keywordflow">return</span> t[0].lower(), <span class="keyword">True</span></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="django_2utils_2cache_8py_source.html#l00103">get_max_age()</a>.</p>

</div>
</div>
<a id="a9f5e8876e160e1dd5de60be71fa3effa" name="a9f5e8876e160e1dd5de60be71fa3effa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f5e8876e160e1dd5de60be71fa3effa">&#9670;&#160;</a></span>add_never_cache_headers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache.add_never_cache_headers </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>response</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add headers to a response to indicate that a page should never be cached.
</pre> 
<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00289">289</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  289</span><span class="keyword">def </span>add_never_cache_headers(response):</div>
<div class="line"><span class="lineno">  290</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  291</span><span class="stringliteral">    Add headers to a response to indicate that a page should never be cached.</span></div>
<div class="line"><span class="lineno">  292</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  293</span>    patch_response_headers(response, cache_timeout=-1)</div>
<div class="line"><span class="lineno">  294</span>    patch_cache_control(</div>
<div class="line"><span class="lineno">  295</span>        response, no_cache=<span class="keyword">True</span>, no_store=<span class="keyword">True</span>, must_revalidate=<span class="keyword">True</span>, private=<span class="keyword">True</span></div>
<div class="line"><span class="lineno">  296</span>    )</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="django_2utils_2cache_8py_source.html#l00034">patch_cache_control()</a>, and <a class="el" href="django_2utils_2cache_8py_source.html#l00270">patch_response_headers()</a>.</p>

</div>
</div>
<a id="a931c89cb28ebdc8d947b1b7c5d32e395" name="a931c89cb28ebdc8d947b1b7c5d32e395"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a931c89cb28ebdc8d947b1b7c5d32e395">&#9670;&#160;</a></span>get_cache_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache.get_cache_key </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>request</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>key_prefix</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>method</em></span><span class="paramdefsep"> = </span><span class="paramdefval">&quot;GET&quot;</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cache</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return a cache key based on the request URL and query. It can be used
in the request phase because it pulls the list of headers to take into
account from the global URL registry and uses those to build a cache key
to check against.

If there isn't a headerlist stored, return None, indicating that the page
needs to be rebuilt.
</pre> 
<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00377">377</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  377</span><span class="keyword">def </span>get_cache_key(request, key_prefix=None, method=&quot;GET&quot;, cache=None):</div>
<div class="line"><span class="lineno">  378</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  379</span><span class="stringliteral">    Return a cache key based on the request URL and query. It can be used</span></div>
<div class="line"><span class="lineno">  380</span><span class="stringliteral">    in the request phase because it pulls the list of headers to take into</span></div>
<div class="line"><span class="lineno">  381</span><span class="stringliteral">    account from the global URL registry and uses those to build a cache key</span></div>
<div class="line"><span class="lineno">  382</span><span class="stringliteral">    to check against.</span></div>
<div class="line"><span class="lineno">  383</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  384</span><span class="stringliteral">    If there isn&#39;t a headerlist stored, return None, indicating that the page</span></div>
<div class="line"><span class="lineno">  385</span><span class="stringliteral">    needs to be rebuilt.</span></div>
<div class="line"><span class="lineno">  386</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  387</span>    <span class="keywordflow">if</span> key_prefix <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  388</span>        key_prefix = settings.CACHE_MIDDLEWARE_KEY_PREFIX</div>
<div class="line"><span class="lineno">  389</span>    cache_key = _generate_cache_header_key(key_prefix, request)</div>
<div class="line"><span class="lineno">  390</span>    <span class="keywordflow">if</span> cache <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  391</span>        cache = caches[settings.CACHE_MIDDLEWARE_ALIAS]</div>
<div class="line"><span class="lineno">  392</span>    headerlist = cache.get(cache_key)</div>
<div class="line"><span class="lineno">  393</span>    <span class="keywordflow">if</span> headerlist <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  394</span>        <span class="keywordflow">return</span> _generate_cache_key(request, method, headerlist, key_prefix)</div>
<div class="line"><span class="lineno">  395</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  396</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="django_2utils_2cache_8py_source.html#l00367">_generate_cache_header_key()</a>, and <a class="el" href="django_2utils_2cache_8py_source.html#l00350">_generate_cache_key()</a>.</p>

</div>
</div>
<a id="aebd5e17d06f032dc671d30768d4ef5ae" name="aebd5e17d06f032dc671d30768d4ef5ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebd5e17d06f032dc671d30768d4ef5ae">&#9670;&#160;</a></span>get_conditional_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache.get_conditional_response </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>request</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>etag</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>last_modified</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>response</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00164">164</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  164</span><span class="keyword">def </span>get_conditional_response(request, etag=None, last_modified=None, response=None):</div>
<div class="line"><span class="lineno">  165</span>    <span class="comment"># Only return conditional responses on successful requests.</span></div>
<div class="line"><span class="lineno">  166</span>    <span class="keywordflow">if</span> response <span class="keywordflow">and</span> <span class="keywordflow">not</span> (200 &lt;= response.status_code &lt; 300):</div>
<div class="line"><span class="lineno">  167</span>        <span class="keywordflow">return</span> response</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>    <span class="comment"># Get HTTP request headers.</span></div>
<div class="line"><span class="lineno">  170</span>    if_match_etags = parse_etags(request.META.get(<span class="stringliteral">&quot;HTTP_IF_MATCH&quot;</span>, <span class="stringliteral">&quot;&quot;</span>))</div>
<div class="line"><span class="lineno">  171</span>    if_unmodified_since = request.META.get(<span class="stringliteral">&quot;HTTP_IF_UNMODIFIED_SINCE&quot;</span>)</div>
<div class="line"><span class="lineno">  172</span>    if_unmodified_since = if_unmodified_since <span class="keywordflow">and</span> parse_http_date_safe(</div>
<div class="line"><span class="lineno">  173</span>        if_unmodified_since</div>
<div class="line"><span class="lineno">  174</span>    )</div>
<div class="line"><span class="lineno">  175</span>    if_none_match_etags = parse_etags(request.META.get(<span class="stringliteral">&quot;HTTP_IF_NONE_MATCH&quot;</span>, <span class="stringliteral">&quot;&quot;</span>))</div>
<div class="line"><span class="lineno">  176</span>    if_modified_since = request.META.get(<span class="stringliteral">&quot;HTTP_IF_MODIFIED_SINCE&quot;</span>)</div>
<div class="line"><span class="lineno">  177</span>    if_modified_since = if_modified_since <span class="keywordflow">and</span> parse_http_date_safe(if_modified_since)</div>
<div class="line"><span class="lineno">  178</span> </div>
<div class="line"><span class="lineno">  179</span>    <span class="comment"># Evaluation of request preconditions below follows RFC 9110 Section</span></div>
<div class="line"><span class="lineno">  180</span>    <span class="comment"># 13.2.2.</span></div>
<div class="line"><span class="lineno">  181</span>    <span class="comment"># Step 1: Test the If-Match precondition.</span></div>
<div class="line"><span class="lineno">  182</span>    <span class="keywordflow">if</span> if_match_etags <span class="keywordflow">and</span> <span class="keywordflow">not</span> _if_match_passes(etag, if_match_etags):</div>
<div class="line"><span class="lineno">  183</span>        <span class="keywordflow">return</span> _precondition_failed(request)</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>    <span class="comment"># Step 2: Test the If-Unmodified-Since precondition.</span></div>
<div class="line"><span class="lineno">  186</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  187</span>        <span class="keywordflow">not</span> if_match_etags</div>
<div class="line"><span class="lineno">  188</span>        <span class="keywordflow">and</span> if_unmodified_since</div>
<div class="line"><span class="lineno">  189</span>        <span class="keywordflow">and</span> <span class="keywordflow">not</span> _if_unmodified_since_passes(last_modified, if_unmodified_since)</div>
<div class="line"><span class="lineno">  190</span>    ):</div>
<div class="line"><span class="lineno">  191</span>        <span class="keywordflow">return</span> _precondition_failed(request)</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>    <span class="comment"># Step 3: Test the If-None-Match precondition.</span></div>
<div class="line"><span class="lineno">  194</span>    <span class="keywordflow">if</span> if_none_match_etags <span class="keywordflow">and</span> <span class="keywordflow">not</span> _if_none_match_passes(etag, if_none_match_etags):</div>
<div class="line"><span class="lineno">  195</span>        <span class="keywordflow">if</span> request.method <span class="keywordflow">in</span> (<span class="stringliteral">&quot;GET&quot;</span>, <span class="stringliteral">&quot;HEAD&quot;</span>):</div>
<div class="line"><span class="lineno">  196</span>            <span class="keywordflow">return</span> _not_modified(request, response)</div>
<div class="line"><span class="lineno">  197</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  198</span>            <span class="keywordflow">return</span> _precondition_failed(request)</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>    <span class="comment"># Step 4: Test the If-Modified-Since precondition.</span></div>
<div class="line"><span class="lineno">  201</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  202</span>        <span class="keywordflow">not</span> if_none_match_etags</div>
<div class="line"><span class="lineno">  203</span>        <span class="keywordflow">and</span> if_modified_since</div>
<div class="line"><span class="lineno">  204</span>        <span class="keywordflow">and</span> <span class="keywordflow">not</span> _if_modified_since_passes(last_modified, if_modified_since)</div>
<div class="line"><span class="lineno">  205</span>        <span class="keywordflow">and</span> request.method <span class="keywordflow">in</span> (<span class="stringliteral">&quot;GET&quot;</span>, <span class="stringliteral">&quot;HEAD&quot;</span>)</div>
<div class="line"><span class="lineno">  206</span>    ):</div>
<div class="line"><span class="lineno">  207</span>        <span class="keywordflow">return</span> _not_modified(request, response)</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>    <span class="comment"># Step 5: Test the If-Range precondition (not supported).</span></div>
<div class="line"><span class="lineno">  210</span>    <span class="comment"># Step 6: Return original response since there isn&#39;t a conditional response.</span></div>
<div class="line"><span class="lineno">  211</span>    <span class="keywordflow">return</span> response</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="django_2utils_2cache_8py_source.html#l00214">_if_match_passes()</a>, <a class="el" href="django_2utils_2cache_8py_source.html#l00262">_if_modified_since_passes()</a>, <a class="el" href="django_2utils_2cache_8py_source.html#l00243">_if_none_match_passes()</a>, <a class="el" href="django_2utils_2cache_8py_source.html#l00235">_if_unmodified_since_passes()</a>, <a class="el" href="django_2utils_2cache_8py_source.html#l00138">_not_modified()</a>, and <a class="el" href="django_2utils_2cache_8py_source.html#l00127">_precondition_failed()</a>.</p>

</div>
</div>
<a id="a6bc9580f2ab5396d254ade370de81f23" name="a6bc9580f2ab5396d254ade370de81f23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bc9580f2ab5396d254ade370de81f23">&#9670;&#160;</a></span>get_max_age()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache.get_max_age </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>response</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return the max-age from the response Cache-Control header as an integer,
or None if it wasn't found or wasn't an integer.
</pre> 
<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00103">103</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  103</span><span class="keyword">def </span>get_max_age(response):</div>
<div class="line"><span class="lineno">  104</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  105</span><span class="stringliteral">    Return the max-age from the response Cache-Control header as an integer,</span></div>
<div class="line"><span class="lineno">  106</span><span class="stringliteral">    or None if it wasn&#39;t found or wasn&#39;t an integer.</span></div>
<div class="line"><span class="lineno">  107</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  108</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> response.has_header(<span class="stringliteral">&quot;Cache-Control&quot;</span>):</div>
<div class="line"><span class="lineno">  109</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  110</span>    cc = dict(</div>
<div class="line"><span class="lineno">  111</span>        _to_tuple(el) <span class="keywordflow">for</span> el <span class="keywordflow">in</span> cc_delim_re.split(response.headers[<span class="stringliteral">&quot;Cache-Control&quot;</span>])</div>
<div class="line"><span class="lineno">  112</span>    )</div>
<div class="line"><span class="lineno">  113</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">return</span> int(cc[<span class="stringliteral">&quot;max-age&quot;</span>])</div>
<div class="line"><span class="lineno">  115</span>    <span class="keywordflow">except</span> (ValueError, TypeError, KeyError):</div>
<div class="line"><span class="lineno">  116</span>        <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="django_2utils_2cache_8py_source.html#l00440">_to_tuple()</a>.</p>

</div>
</div>
<a id="ac742d6d77bfc369f976f162b306d6175" name="ac742d6d77bfc369f976f162b306d6175"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac742d6d77bfc369f976f162b306d6175">&#9670;&#160;</a></span>has_vary_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache.has_vary_header </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>response</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>header_query</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check to see if the response has a given header name in its Vary header.
</pre> 
<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00327">327</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  327</span><span class="keyword">def </span>has_vary_header(response, header_query):</div>
<div class="line"><span class="lineno">  328</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  329</span><span class="stringliteral">    Check to see if the response has a given header name in its Vary header.</span></div>
<div class="line"><span class="lineno">  330</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  331</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> response.has_header(<span class="stringliteral">&quot;Vary&quot;</span>):</div>
<div class="line"><span class="lineno">  332</span>        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  333</span>    vary_headers = cc_delim_re.split(response.headers[<span class="stringliteral">&quot;Vary&quot;</span>])</div>
<div class="line"><span class="lineno">  334</span>    existing_headers = {header.lower() <span class="keywordflow">for</span> header <span class="keywordflow">in</span> vary_headers}</div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordflow">return</span> header_query.lower() <span class="keywordflow">in</span> existing_headers</div>
<div class="line"><span class="lineno">  336</span> </div>
<div class="line"><span class="lineno">  337</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3605307bad4121848c95d84c978e992d" name="a3605307bad4121848c95d84c978e992d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3605307bad4121848c95d84c978e992d">&#9670;&#160;</a></span>learn_cache_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache.learn_cache_key </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>request</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>response</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cache_timeout</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>key_prefix</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cache</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Learn what headers to take into account for some request URL from the
response object. Store those headers in a global URL registry so that
later access to that URL will know what headers to take into account
without building the response object itself. The headers are named in the
Vary header of the response, but we want to prevent response generation.

The list of headers to use for cache key generation is stored in the same
cache as the pages themselves. If the cache ages some data out of the
cache, this just means that we have to build the response once to get at
the Vary header and so at the list of headers to use for the cache key.
</pre> 
<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00399">399</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  399</span><span class="keyword">def </span>learn_cache_key(request, response, cache_timeout=None, key_prefix=None, cache=None):</div>
<div class="line"><span class="lineno">  400</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  401</span><span class="stringliteral">    Learn what headers to take into account for some request URL from the</span></div>
<div class="line"><span class="lineno">  402</span><span class="stringliteral">    response object. Store those headers in a global URL registry so that</span></div>
<div class="line"><span class="lineno">  403</span><span class="stringliteral">    later access to that URL will know what headers to take into account</span></div>
<div class="line"><span class="lineno">  404</span><span class="stringliteral">    without building the response object itself. The headers are named in the</span></div>
<div class="line"><span class="lineno">  405</span><span class="stringliteral">    Vary header of the response, but we want to prevent response generation.</span></div>
<div class="line"><span class="lineno">  406</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  407</span><span class="stringliteral">    The list of headers to use for cache key generation is stored in the same</span></div>
<div class="line"><span class="lineno">  408</span><span class="stringliteral">    cache as the pages themselves. If the cache ages some data out of the</span></div>
<div class="line"><span class="lineno">  409</span><span class="stringliteral">    cache, this just means that we have to build the response once to get at</span></div>
<div class="line"><span class="lineno">  410</span><span class="stringliteral">    the Vary header and so at the list of headers to use for the cache key.</span></div>
<div class="line"><span class="lineno">  411</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  412</span>    <span class="keywordflow">if</span> key_prefix <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  413</span>        key_prefix = settings.CACHE_MIDDLEWARE_KEY_PREFIX</div>
<div class="line"><span class="lineno">  414</span>    <span class="keywordflow">if</span> cache_timeout <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  415</span>        cache_timeout = settings.CACHE_MIDDLEWARE_SECONDS</div>
<div class="line"><span class="lineno">  416</span>    cache_key = _generate_cache_header_key(key_prefix, request)</div>
<div class="line"><span class="lineno">  417</span>    <span class="keywordflow">if</span> cache <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  418</span>        cache = caches[settings.CACHE_MIDDLEWARE_ALIAS]</div>
<div class="line"><span class="lineno">  419</span>    <span class="keywordflow">if</span> response.has_header(<span class="stringliteral">&quot;Vary&quot;</span>):</div>
<div class="line"><span class="lineno">  420</span>        is_accept_language_redundant = settings.USE_I18N</div>
<div class="line"><span class="lineno">  421</span>        <span class="comment"># If i18n is used, the generated cache key will be suffixed with the</span></div>
<div class="line"><span class="lineno">  422</span>        <span class="comment"># current locale. Adding the raw value of Accept-Language is redundant</span></div>
<div class="line"><span class="lineno">  423</span>        <span class="comment"># in that case and would result in storing the same content under</span></div>
<div class="line"><span class="lineno">  424</span>        <span class="comment"># multiple keys in the cache. See #18191 for details.</span></div>
<div class="line"><span class="lineno">  425</span>        headerlist = []</div>
<div class="line"><span class="lineno">  426</span>        <span class="keywordflow">for</span> header <span class="keywordflow">in</span> cc_delim_re.split(response.headers[<span class="stringliteral">&quot;Vary&quot;</span>]):</div>
<div class="line"><span class="lineno">  427</span>            header = header.upper().replace(<span class="stringliteral">&quot;-&quot;</span>, <span class="stringliteral">&quot;_&quot;</span>)</div>
<div class="line"><span class="lineno">  428</span>            <span class="keywordflow">if</span> header != <span class="stringliteral">&quot;ACCEPT_LANGUAGE&quot;</span> <span class="keywordflow">or</span> <span class="keywordflow">not</span> is_accept_language_redundant:</div>
<div class="line"><span class="lineno">  429</span>                headerlist.append(<span class="stringliteral">&quot;HTTP_&quot;</span> + header)</div>
<div class="line"><span class="lineno">  430</span>        headerlist.sort()</div>
<div class="line"><span class="lineno">  431</span>        cache.set(cache_key, headerlist, cache_timeout)</div>
<div class="line"><span class="lineno">  432</span>        <span class="keywordflow">return</span> _generate_cache_key(request, request.method, headerlist, key_prefix)</div>
<div class="line"><span class="lineno">  433</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  434</span>        <span class="comment"># if there is no Vary header, we still need a cache key</span></div>
<div class="line"><span class="lineno">  435</span>        <span class="comment"># for the request.build_absolute_uri()</span></div>
<div class="line"><span class="lineno">  436</span>        cache.set(cache_key, [], cache_timeout)</div>
<div class="line"><span class="lineno">  437</span>        <span class="keywordflow">return</span> _generate_cache_key(request, request.method, [], key_prefix)</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="django_2utils_2cache_8py_source.html#l00367">_generate_cache_header_key()</a>, and <a class="el" href="django_2utils_2cache_8py_source.html#l00350">_generate_cache_key()</a>.</p>

</div>
</div>
<a id="aeed258ac6eb45119bcc0e128999bda6d" name="aeed258ac6eb45119bcc0e128999bda6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeed258ac6eb45119bcc0e128999bda6d">&#9670;&#160;</a></span>patch_cache_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache.patch_cache_control </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>response</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**</td>          <td class="paramname"><span class="paramname"><em>kwargs</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Patch the Cache-Control header by adding all keyword arguments to it.
The transformation is as follows:

* All keyword parameter names are turned to lowercase, and underscores
  are converted to hyphens.
* If the value of a parameter is True (exactly True, not just a
  true value), only the parameter name is added to the header.
* All other parameters are added with their value, after applying
  str() to it.
</pre> 
<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00034">34</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   34</span><span class="keyword">def </span>patch_cache_control(response, **kwargs):</div>
<div class="line"><span class="lineno">   35</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   36</span><span class="stringliteral">    Patch the Cache-Control header by adding all keyword arguments to it.</span></div>
<div class="line"><span class="lineno">   37</span><span class="stringliteral">    The transformation is as follows:</span></div>
<div class="line"><span class="lineno">   38</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   39</span><span class="stringliteral">    * All keyword parameter names are turned to lowercase, and underscores</span></div>
<div class="line"><span class="lineno">   40</span><span class="stringliteral">      are converted to hyphens.</span></div>
<div class="line"><span class="lineno">   41</span><span class="stringliteral">    * If the value of a parameter is True (exactly True, not just a</span></div>
<div class="line"><span class="lineno">   42</span><span class="stringliteral">      true value), only the parameter name is added to the header.</span></div>
<div class="line"><span class="lineno">   43</span><span class="stringliteral">    * All other parameters are added with their value, after applying</span></div>
<div class="line"><span class="lineno">   44</span><span class="stringliteral">      str() to it.</span></div>
<div class="line"><span class="lineno">   45</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   46</span> </div>
<div class="line"><span class="lineno">   47</span>    <span class="keyword">def </span>dictitem(s):</div>
<div class="line"><span class="lineno">   48</span>        t = s.split(<span class="stringliteral">&quot;=&quot;</span>, 1)</div>
<div class="line"><span class="lineno">   49</span>        <span class="keywordflow">if</span> len(t) &gt; 1:</div>
<div class="line"><span class="lineno">   50</span>            <span class="keywordflow">return</span> (t[0].lower(), t[1])</div>
<div class="line"><span class="lineno">   51</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   52</span>            <span class="keywordflow">return</span> (t[0].lower(), <span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">   53</span> </div>
<div class="line"><span class="lineno">   54</span>    <span class="keyword">def </span>dictvalue(*t):</div>
<div class="line"><span class="lineno">   55</span>        <span class="keywordflow">if</span> t[1] <span class="keywordflow">is</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">   56</span>            <span class="keywordflow">return</span> t[0]</div>
<div class="line"><span class="lineno">   57</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   58</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;%s=%s&quot;</span> % (t[0], t[1])</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>    cc = defaultdict(set)</div>
<div class="line"><span class="lineno">   61</span>    <span class="keywordflow">if</span> response.get(<span class="stringliteral">&quot;Cache-Control&quot;</span>):</div>
<div class="line"><span class="lineno">   62</span>        <span class="keywordflow">for</span> field <span class="keywordflow">in</span> cc_delim_re.split(response.headers[<span class="stringliteral">&quot;Cache-Control&quot;</span>]):</div>
<div class="line"><span class="lineno">   63</span>            directive, value = dictitem(field)</div>
<div class="line"><span class="lineno">   64</span>            <span class="keywordflow">if</span> directive == <span class="stringliteral">&quot;no-cache&quot;</span>:</div>
<div class="line"><span class="lineno">   65</span>                <span class="comment"># no-cache supports multiple field names.</span></div>
<div class="line"><span class="lineno">   66</span>                cc[directive].add(value)</div>
<div class="line"><span class="lineno">   67</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   68</span>                cc[directive] = value</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span>    <span class="comment"># If there&#39;s already a max-age header but we&#39;re being asked to set a new</span></div>
<div class="line"><span class="lineno">   71</span>    <span class="comment"># max-age, use the minimum of the two ages. In practice this happens when</span></div>
<div class="line"><span class="lineno">   72</span>    <span class="comment"># a decorator and a piece of middleware both operate on a given view.</span></div>
<div class="line"><span class="lineno">   73</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;max-age&quot;</span> <span class="keywordflow">in</span> cc <span class="keywordflow">and</span> <span class="stringliteral">&quot;max_age&quot;</span> <span class="keywordflow">in</span> kwargs:</div>
<div class="line"><span class="lineno">   74</span>        kwargs[<span class="stringliteral">&quot;max_age&quot;</span>] = min(int(cc[<span class="stringliteral">&quot;max-age&quot;</span>]), kwargs[<span class="stringliteral">&quot;max_age&quot;</span>])</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>    <span class="comment"># Allow overriding private caching and vice versa</span></div>
<div class="line"><span class="lineno">   77</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;private&quot;</span> <span class="keywordflow">in</span> cc <span class="keywordflow">and</span> <span class="stringliteral">&quot;public&quot;</span> <span class="keywordflow">in</span> kwargs:</div>
<div class="line"><span class="lineno">   78</span>        del cc[<span class="stringliteral">&quot;private&quot;</span>]</div>
<div class="line"><span class="lineno">   79</span>    <span class="keywordflow">elif</span> <span class="stringliteral">&quot;public&quot;</span> <span class="keywordflow">in</span> cc <span class="keywordflow">and</span> <span class="stringliteral">&quot;private&quot;</span> <span class="keywordflow">in</span> kwargs:</div>
<div class="line"><span class="lineno">   80</span>        del cc[<span class="stringliteral">&quot;public&quot;</span>]</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>    <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> kwargs.items():</div>
<div class="line"><span class="lineno">   83</span>        directive = k.replace(<span class="stringliteral">&quot;_&quot;</span>, <span class="stringliteral">&quot;-&quot;</span>)</div>
<div class="line"><span class="lineno">   84</span>        <span class="keywordflow">if</span> directive == <span class="stringliteral">&quot;no-cache&quot;</span>:</div>
<div class="line"><span class="lineno">   85</span>            <span class="comment"># no-cache supports multiple field names.</span></div>
<div class="line"><span class="lineno">   86</span>            cc[directive].add(v)</div>
<div class="line"><span class="lineno">   87</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   88</span>            cc[directive] = v</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>    directives = []</div>
<div class="line"><span class="lineno">   91</span>    <span class="keywordflow">for</span> directive, values <span class="keywordflow">in</span> cc.items():</div>
<div class="line"><span class="lineno">   92</span>        <span class="keywordflow">if</span> isinstance(values, set):</div>
<div class="line"><span class="lineno">   93</span>            <span class="keywordflow">if</span> <span class="keyword">True</span> <span class="keywordflow">in</span> values:</div>
<div class="line"><span class="lineno">   94</span>                <span class="comment"># True takes precedence.</span></div>
<div class="line"><span class="lineno">   95</span>                values = {<span class="keyword">True</span>}</div>
<div class="line"><span class="lineno">   96</span>            directives.extend([dictvalue(directive, value) <span class="keywordflow">for</span> value <span class="keywordflow">in</span> values])</div>
<div class="line"><span class="lineno">   97</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   98</span>            directives.append(dictvalue(directive, values))</div>
<div class="line"><span class="lineno">   99</span>    cc = <span class="stringliteral">&quot;, &quot;</span>.join(directives)</div>
<div class="line"><span class="lineno">  100</span>    response.headers[<span class="stringliteral">&quot;Cache-Control&quot;</span>] = cc</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="django_2utils_2cache_8py_source.html#l00289">add_never_cache_headers()</a>, and <a class="el" href="django_2utils_2cache_8py_source.html#l00270">patch_response_headers()</a>.</p>

</div>
</div>
<a id="a7ea4e5b478dfe47016e291195b111123" name="a7ea4e5b478dfe47016e291195b111123"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ea4e5b478dfe47016e291195b111123">&#9670;&#160;</a></span>patch_response_headers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache.patch_response_headers </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>response</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cache_timeout</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add HTTP caching headers to the given HttpResponse: Expires and
Cache-Control.

Each header is only added if it isn't already set.

cache_timeout is in seconds. The CACHE_MIDDLEWARE_SECONDS setting is used
by default.
</pre> 
<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00270">270</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  270</span><span class="keyword">def </span>patch_response_headers(response, cache_timeout=None):</div>
<div class="line"><span class="lineno">  271</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  272</span><span class="stringliteral">    Add HTTP caching headers to the given HttpResponse: Expires and</span></div>
<div class="line"><span class="lineno">  273</span><span class="stringliteral">    Cache-Control.</span></div>
<div class="line"><span class="lineno">  274</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  275</span><span class="stringliteral">    Each header is only added if it isn&#39;t already set.</span></div>
<div class="line"><span class="lineno">  276</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  277</span><span class="stringliteral">    cache_timeout is in seconds. The CACHE_MIDDLEWARE_SECONDS setting is used</span></div>
<div class="line"><span class="lineno">  278</span><span class="stringliteral">    by default.</span></div>
<div class="line"><span class="lineno">  279</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  280</span>    <span class="keywordflow">if</span> cache_timeout <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  281</span>        cache_timeout = settings.CACHE_MIDDLEWARE_SECONDS</div>
<div class="line"><span class="lineno">  282</span>    <span class="keywordflow">if</span> cache_timeout &lt; 0:</div>
<div class="line"><span class="lineno">  283</span>        cache_timeout = 0  <span class="comment"># Can&#39;t have max-age negative</span></div>
<div class="line"><span class="lineno">  284</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> response.has_header(<span class="stringliteral">&quot;Expires&quot;</span>):</div>
<div class="line"><span class="lineno">  285</span>        response.headers[<span class="stringliteral">&quot;Expires&quot;</span>] = http_date(time.time() + cache_timeout)</div>
<div class="line"><span class="lineno">  286</span>    patch_cache_control(response, max_age=cache_timeout)</div>
<div class="line"><span class="lineno">  287</span> </div>
<div class="line"><span class="lineno">  288</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="django_2utils_2cache_8py_source.html#l00034">patch_cache_control()</a>.</p>

<p class="reference">Referenced by <a class="el" href="django_2utils_2cache_8py_source.html#l00289">add_never_cache_headers()</a>.</p>

</div>
</div>
<a id="aea37e1491ccc46f93c70dcff6ac362e4" name="aea37e1491ccc46f93c70dcff6ac362e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea37e1491ccc46f93c70dcff6ac362e4">&#9670;&#160;</a></span>patch_vary_headers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache.patch_vary_headers </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>response</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>newheaders</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add (or update) the "Vary" header in the given HttpResponse object.
newheaders is a list of header names that should be in "Vary". If headers
contains an asterisk, then "Vary" header will consist of a single asterisk
'*'. Otherwise, existing headers in "Vary" aren't removed.
</pre> 
<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00299">299</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  299</span><span class="keyword">def </span>patch_vary_headers(response, newheaders):</div>
<div class="line"><span class="lineno">  300</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  301</span><span class="stringliteral">    Add (or update) the &quot;Vary&quot; header in the given HttpResponse object.</span></div>
<div class="line"><span class="lineno">  302</span><span class="stringliteral">    newheaders is a list of header names that should be in &quot;Vary&quot;. If headers</span></div>
<div class="line"><span class="lineno">  303</span><span class="stringliteral">    contains an asterisk, then &quot;Vary&quot; header will consist of a single asterisk</span></div>
<div class="line"><span class="lineno">  304</span><span class="stringliteral">    &#39;*&#39;. Otherwise, existing headers in &quot;Vary&quot; aren&#39;t removed.</span></div>
<div class="line"><span class="lineno">  305</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  306</span>    <span class="comment"># Note that we need to keep the original order intact, because cache</span></div>
<div class="line"><span class="lineno">  307</span>    <span class="comment"># implementations may rely on the order of the Vary contents in, say,</span></div>
<div class="line"><span class="lineno">  308</span>    <span class="comment"># computing an MD5 hash.</span></div>
<div class="line"><span class="lineno">  309</span>    <span class="keywordflow">if</span> response.has_header(<span class="stringliteral">&quot;Vary&quot;</span>):</div>
<div class="line"><span class="lineno">  310</span>        vary_headers = cc_delim_re.split(response.headers[<span class="stringliteral">&quot;Vary&quot;</span>])</div>
<div class="line"><span class="lineno">  311</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  312</span>        vary_headers = []</div>
<div class="line"><span class="lineno">  313</span>    <span class="comment"># Use .lower() here so we treat headers as case-insensitive.</span></div>
<div class="line"><span class="lineno">  314</span>    existing_headers = {header.lower() <span class="keywordflow">for</span> header <span class="keywordflow">in</span> vary_headers}</div>
<div class="line"><span class="lineno">  315</span>    additional_headers = [</div>
<div class="line"><span class="lineno">  316</span>        newheader</div>
<div class="line"><span class="lineno">  317</span>        <span class="keywordflow">for</span> newheader <span class="keywordflow">in</span> newheaders</div>
<div class="line"><span class="lineno">  318</span>        <span class="keywordflow">if</span> newheader.lower() <span class="keywordflow">not</span> <span class="keywordflow">in</span> existing_headers</div>
<div class="line"><span class="lineno">  319</span>    ]</div>
<div class="line"><span class="lineno">  320</span>    vary_headers += additional_headers</div>
<div class="line"><span class="lineno">  321</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;*&quot;</span> <span class="keywordflow">in</span> vary_headers:</div>
<div class="line"><span class="lineno">  322</span>        response.headers[<span class="stringliteral">&quot;Vary&quot;</span>] = <span class="stringliteral">&quot;*&quot;</span></div>
<div class="line"><span class="lineno">  323</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  324</span>        response.headers[<span class="stringliteral">&quot;Vary&quot;</span>] = <span class="stringliteral">&quot;, &quot;</span>.join(vary_headers)</div>
<div class="line"><span class="lineno">  325</span> </div>
<div class="line"><span class="lineno">  326</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad40585b4ba50072b946be8a6b18beeb3" name="ad40585b4ba50072b946be8a6b18beeb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad40585b4ba50072b946be8a6b18beeb3">&#9670;&#160;</a></span>set_response_etag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache.set_response_etag </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>response</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00119">119</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  119</span><span class="keyword">def </span>set_response_etag(response):</div>
<div class="line"><span class="lineno">  120</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> response.streaming <span class="keywordflow">and</span> response.content:</div>
<div class="line"><span class="lineno">  121</span>        response.headers[<span class="stringliteral">&quot;ETag&quot;</span>] = quote_etag(</div>
<div class="line"><span class="lineno">  122</span>            md5(response.content, usedforsecurity=<span class="keyword">False</span>).hexdigest(),</div>
<div class="line"><span class="lineno">  123</span>        )</div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">return</span> response</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="adf2322fc2c289271b7f92ebda3c7a17a" name="adf2322fc2c289271b7f92ebda3c7a17a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf2322fc2c289271b7f92ebda3c7a17a">&#9670;&#160;</a></span>cc_delim_re</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.utils.cache.cc_delim_re = _lazy_re_compile(r&quot;\s*,\s*&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="django_2utils_2cache_8py_source.html#l00031">31</a> of file <a class="el" href="django_2utils_2cache_8py_source.html">cache.py</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacedjango.html">django</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1utils.html">utils</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1utils_1_1cache.html">cache</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
