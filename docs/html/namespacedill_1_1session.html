<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Read&amp;Watch: dill.session Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Read&amp;Watch<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('namespacedill_1_1session.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">dill.session Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdill_1_1session_1_1___peekable_reader.html">_PeekableReader</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac47d4a94b4e9d4651602ea0e6adbedcb" id="r_ac47d4a94b4e9d4651602ea0e6adbedcb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac47d4a94b4e9d4651602ea0e6adbedcb">_module_map</a> ()</td></tr>
<tr class="separator:ac47d4a94b4e9d4651602ea0e6adbedcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a343dac7579411a4667ea0b76b09e5888" id="r_a343dac7579411a4667ea0b76b09e5888"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a343dac7579411a4667ea0b76b09e5888">_lookup_module</a> (modmap, name, obj, main_module)</td></tr>
<tr class="separator:a343dac7579411a4667ea0b76b09e5888"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf519528ea5af1f1d90dfd4ab1a4b532" id="r_acf519528ea5af1f1d90dfd4ab1a4b532"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acf519528ea5af1f1d90dfd4ab1a4b532">_stash_modules</a> (main_module)</td></tr>
<tr class="separator:acf519528ea5af1f1d90dfd4ab1a4b532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf0f390a7c82448fc4542da4fcd18d2c" id="r_adf0f390a7c82448fc4542da4fcd18d2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adf0f390a7c82448fc4542da4fcd18d2c">_restore_modules</a> (unpickler, main_module)</td></tr>
<tr class="separator:adf0f390a7c82448fc4542da4fcd18d2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad074e36d4464a9503967b89901b46c38" id="r_ad074e36d4464a9503967b89901b46c38"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad074e36d4464a9503967b89901b46c38">dump_module</a> (Union[str, os.PathLike] filename=None, Optional[Union[ModuleType, str]] module=None, bool refimported=False, **kwds)</td></tr>
<tr class="separator:ad074e36d4464a9503967b89901b46c38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a338add9bd3167a713ca6d72931cf89c9" id="r_a338add9bd3167a713ca6d72931cf89c9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a338add9bd3167a713ca6d72931cf89c9">dump_session</a> (filename=None, main=None, byref=False, **kwds)</td></tr>
<tr class="separator:a338add9bd3167a713ca6d72931cf89c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77441660a9bd87386174788b96f14b21" id="r_a77441660a9bd87386174788b96f14b21"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a77441660a9bd87386174788b96f14b21">_make_peekable</a> (stream)</td></tr>
<tr class="separator:a77441660a9bd87386174788b96f14b21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b53736bcafcef9820d12674fda0a0ae" id="r_a6b53736bcafcef9820d12674fda0a0ae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6b53736bcafcef9820d12674fda0a0ae">_identify_module</a> (file, main=None)</td></tr>
<tr class="separator:a6b53736bcafcef9820d12674fda0a0ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d58b2bd77f57f388638ecf1271c6fd4" id="r_a7d58b2bd77f57f388638ecf1271c6fd4"><td class="memItemLeft" align="right" valign="top">Optional[ModuleType]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7d58b2bd77f57f388638ecf1271c6fd4">load_module</a> (Union[str, os.PathLike] filename=None, Optional[Union[ModuleType, str]] module=None, **kwds)</td></tr>
<tr class="separator:a7d58b2bd77f57f388638ecf1271c6fd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8f2f9d6560dac8b0ba2f4e6d9443dba" id="r_ad8f2f9d6560dac8b0ba2f4e6d9443dba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad8f2f9d6560dac8b0ba2f4e6d9443dba">load_session</a> (filename=None, main=None, **kwds)</td></tr>
<tr class="separator:ad8f2f9d6560dac8b0ba2f4e6d9443dba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82e29fe6cdc81ffd664d228b48f94beb" id="r_a82e29fe6cdc81ffd664d228b48f94beb"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a82e29fe6cdc81ffd664d228b48f94beb">load_module_asdict</a> (Union[str, os.PathLike] filename=None, bool update=False, **kwds)</td></tr>
<tr class="separator:a82e29fe6cdc81ffd664d228b48f94beb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a27b1258e7e69acee7802ee10f54c1a9d" id="r_a27b1258e7e69acee7802ee10f54c1a9d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a27b1258e7e69acee7802ee10f54c1a9d">TEMPDIR</a> = pathlib.PurePath(tempfile.gettempdir())</td></tr>
<tr class="separator:a27b1258e7e69acee7802ee10f54c1a9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ae63499697f17e79758ccd0421c9b53" id="r_a2ae63499697f17e79758ccd0421c9b53"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2ae63499697f17e79758ccd0421c9b53">IMPORTED_AS_TYPES</a> = (ModuleType, TypeType, FunctionType, MethodType, BuiltinMethodType)</td></tr>
<tr class="separator:a2ae63499697f17e79758ccd0421c9b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38f8b63fb2ba6dc808f9b4fae1932312" id="r_a38f8b63fb2ba6dc808f9b4fae1932312"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a38f8b63fb2ba6dc808f9b4fae1932312">IMPORTED_AS_MODULES</a></td></tr>
<tr class="separator:a38f8b63fb2ba6dc808f9b4fae1932312"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Pickle and restore the intepreter session.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a6b53736bcafcef9820d12674fda0a0ae" name="a6b53736bcafcef9820d12674fda0a0ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b53736bcafcef9820d12674fda0a0ae">&#9670;&#160;</a></span>_identify_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dill.session._identify_module </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>file</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>main</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">identify the name of the module stored in the given file-type object</pre> 
<p class="definition">Definition at line <a class="el" href="dill_2session_8py_source.html#l00305">305</a> of file <a class="el" href="dill_2session_8py_source.html">session.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  305</span><span class="keyword">def </span>_identify_module(file, main=None):</div>
<div class="line"><span class="lineno">  306</span>    <span class="stringliteral">&quot;&quot;&quot;identify the name of the module stored in the given file-type object&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  307</span>    <span class="keyword">from</span> pickletools <span class="keyword">import</span> genops</div>
<div class="line"><span class="lineno">  308</span>    UNICODE = {<span class="stringliteral">&#39;UNICODE&#39;</span>, <span class="stringliteral">&#39;BINUNICODE&#39;</span>, <span class="stringliteral">&#39;SHORT_BINUNICODE&#39;</span>}</div>
<div class="line"><span class="lineno">  309</span>    found_import = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  310</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  311</span>        <span class="keywordflow">for</span> opcode, arg, pos <span class="keywordflow">in</span> genops(file.peek(256)):</div>
<div class="line"><span class="lineno">  312</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> found_import:</div>
<div class="line"><span class="lineno">  313</span>                <span class="keywordflow">if</span> opcode.name <span class="keywordflow">in</span> (<span class="stringliteral">&#39;GLOBAL&#39;</span>, <span class="stringliteral">&#39;SHORT_BINUNICODE&#39;</span>) <span class="keywordflow">and</span> \</div>
<div class="line"><span class="lineno">  314</span>                        arg.endswith(<span class="stringliteral">&#39;_import_module&#39;</span>):</div>
<div class="line"><span class="lineno">  315</span>                    found_import = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  316</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  317</span>                <span class="keywordflow">if</span> opcode.name <span class="keywordflow">in</span> UNICODE:</div>
<div class="line"><span class="lineno">  318</span>                    <span class="keywordflow">return</span> arg</div>
<div class="line"><span class="lineno">  319</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  320</span>            <span class="keywordflow">raise</span> UnpicklingError(<span class="stringliteral">&quot;reached STOP without finding main module&quot;</span>)</div>
<div class="line"><span class="lineno">  321</span>    <span class="keywordflow">except</span> (NotImplementedError, ValueError) <span class="keyword">as</span> error:</div>
<div class="line"><span class="lineno">  322</span>        <span class="comment"># ValueError occours when the end of the chunk is reached (without a STOP).</span></div>
<div class="line"><span class="lineno">  323</span>        <span class="keywordflow">if</span> isinstance(error, NotImplementedError) <span class="keywordflow">and</span> main <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  324</span>            <span class="comment"># file is not peekable, but we have main.</span></div>
<div class="line"><span class="lineno">  325</span>            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  326</span>        <span class="keywordflow">raise</span> UnpicklingError(<span class="stringliteral">&quot;unable to identify main module&quot;</span>) <span class="keyword">from</span> error</div>
<div class="line"><span class="lineno">  327</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="dill_2session_8py_source.html#l00332">load_module()</a>, and <a class="el" href="dill_2session_8py_source.html#l00518">load_module_asdict()</a>.</p>

</div>
</div>
<a id="a343dac7579411a4667ea0b76b09e5888" name="a343dac7579411a4667ea0b76b09e5888"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a343dac7579411a4667ea0b76b09e5888">&#9670;&#160;</a></span>_lookup_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dill.session._lookup_module </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>modmap</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>obj</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>main_module</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">lookup name or id of obj if module is imported</pre> 
<p class="definition">Definition at line <a class="el" href="dill_2session_8py_source.html#l00063">63</a> of file <a class="el" href="dill_2session_8py_source.html">session.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   63</span><span class="keyword">def </span>_lookup_module(modmap, name, obj, main_module):</div>
<div class="line"><span class="lineno">   64</span>    <span class="stringliteral">&quot;&quot;&quot;lookup name or id of obj if module is imported&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordflow">for</span> modobj, modname <span class="keywordflow">in</span> modmap.by_name[name]:</div>
<div class="line"><span class="lineno">   66</span>        <span class="keywordflow">if</span> modobj <span class="keywordflow">is</span> obj <span class="keywordflow">and</span> sys.modules[modname] <span class="keywordflow">is</span> <span class="keywordflow">not</span> main_module:</div>
<div class="line"><span class="lineno">   67</span>            <span class="keywordflow">return</span> modname, name</div>
<div class="line"><span class="lineno">   68</span>    __module__ = getattr(obj, <span class="stringliteral">&#39;__module__&#39;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">   69</span>    <span class="keywordflow">if</span> isinstance(obj, IMPORTED_AS_TYPES) <span class="keywordflow">or</span> (__module__ <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   70</span>            <span class="keywordflow">and</span> any(regex.fullmatch(__module__) <span class="keywordflow">for</span> regex <span class="keywordflow">in</span> IMPORTED_AS_MODULES)):</div>
<div class="line"><span class="lineno">   71</span>        <span class="keywordflow">for</span> modobj, objname, modname <span class="keywordflow">in</span> modmap.by_id[id(obj)]:</div>
<div class="line"><span class="lineno">   72</span>            <span class="keywordflow">if</span> sys.modules[modname] <span class="keywordflow">is</span> <span class="keywordflow">not</span> main_module:</div>
<div class="line"><span class="lineno">   73</span>                <span class="keywordflow">return</span> modname, objname</div>
<div class="line"><span class="lineno">   74</span>    <span class="keywordflow">return</span> <span class="keywordtype">None</span>, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   75</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="dill_2session_8py_source.html#l00076">_stash_modules()</a>.</p>

</div>
</div>
<a id="a77441660a9bd87386174788b96f14b21" name="a77441660a9bd87386174788b96f14b21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77441660a9bd87386174788b96f14b21">&#9670;&#160;</a></span>_make_peekable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dill.session._make_peekable </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>stream</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">return stream as an object with a peek() method</pre> 
<p class="definition">Definition at line <a class="el" href="dill_2session_8py_source.html#l00293">293</a> of file <a class="el" href="dill_2session_8py_source.html">session.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  293</span><span class="keyword">def </span>_make_peekable(stream):</div>
<div class="line"><span class="lineno">  294</span>    <span class="stringliteral">&quot;&quot;&quot;return stream as an object with a peek() method&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  295</span>    <span class="keyword">import</span> io</div>
<div class="line"><span class="lineno">  296</span>    <span class="keywordflow">if</span> hasattr(stream, <span class="stringliteral">&#39;peek&#39;</span>):</div>
<div class="line"><span class="lineno">  297</span>        <span class="keywordflow">return</span> stream</div>
<div class="line"><span class="lineno">  298</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> (hasattr(stream, <span class="stringliteral">&#39;tell&#39;</span>) <span class="keywordflow">and</span> hasattr(stream, <span class="stringliteral">&#39;seek&#39;</span>)):</div>
<div class="line"><span class="lineno">  299</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  300</span>            <span class="keywordflow">return</span> io.BufferedReader(stream)</div>
<div class="line"><span class="lineno">  301</span>        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><span class="lineno">  302</span>            <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  303</span>    <span class="keywordflow">return</span> _PeekableReader(stream)</div>
<div class="line"><span class="lineno">  304</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="dill_2session_8py_source.html#l00332">load_module()</a>, and <a class="el" href="dill_2session_8py_source.html#l00518">load_module_asdict()</a>.</p>

</div>
</div>
<a id="ac47d4a94b4e9d4651602ea0e6adbedcb" name="ac47d4a94b4e9d4651602ea0e6adbedcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac47d4a94b4e9d4651602ea0e6adbedcb">&#9670;&#160;</a></span>_module_map()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dill.session._module_map </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">get map of imported modules</pre> 
<p class="definition">Definition at line <a class="el" href="dill_2session_8py_source.html#l00037">37</a> of file <a class="el" href="dill_2session_8py_source.html">session.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   37</span><span class="keyword">def </span>_module_map():</div>
<div class="line"><span class="lineno">   38</span>    <span class="stringliteral">&quot;&quot;&quot;get map of imported modules&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   39</span>    <span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</div>
<div class="line"><span class="lineno">   40</span>    <span class="keyword">from</span> types <span class="keyword">import</span> SimpleNamespace</div>
<div class="line"><span class="lineno">   41</span>    modmap = SimpleNamespace(</div>
<div class="line"><span class="lineno">   42</span>        by_name=defaultdict(list),</div>
<div class="line"><span class="lineno">   43</span>        by_id=defaultdict(list),</div>
<div class="line"><span class="lineno">   44</span>        top_level={},</div>
<div class="line"><span class="lineno">   45</span>    )</div>
<div class="line"><span class="lineno">   46</span>    <span class="keywordflow">for</span> modname, module <span class="keywordflow">in</span> sys.modules.items():</div>
<div class="line"><span class="lineno">   47</span>        <span class="keywordflow">if</span> modname <span class="keywordflow">in</span> (<span class="stringliteral">&#39;__main__&#39;</span>, <span class="stringliteral">&#39;__mp_main__&#39;</span>) <span class="keywordflow">or</span> <span class="keywordflow">not</span> isinstance(module, ModuleType):</div>
<div class="line"><span class="lineno">   48</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">   49</span>        <span class="keywordflow">if</span> <span class="stringliteral">&#39;.&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> modname:</div>
<div class="line"><span class="lineno">   50</span>            modmap.top_level[id(module)] = modname</div>
<div class="line"><span class="lineno">   51</span>        <span class="keywordflow">for</span> objname, modobj <span class="keywordflow">in</span> module.__dict__.items():</div>
<div class="line"><span class="lineno">   52</span>            modmap.by_name[objname].append((modobj, modname))</div>
<div class="line"><span class="lineno">   53</span>            modmap.by_id[id(modobj)].append((modobj, objname, modname))</div>
<div class="line"><span class="lineno">   54</span>    <span class="keywordflow">return</span> modmap</div>
<div class="line"><span class="lineno">   55</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="dill_2session_8py_source.html#l00076">_stash_modules()</a>.</p>

</div>
</div>
<a id="adf0f390a7c82448fc4542da4fcd18d2c" name="adf0f390a7c82448fc4542da4fcd18d2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf0f390a7c82448fc4542da4fcd18d2c">&#9670;&#160;</a></span>_restore_modules()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dill.session._restore_modules </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>unpickler</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>main_module</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dill_2session_8py_source.html#l00118">118</a> of file <a class="el" href="dill_2session_8py_source.html">session.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  118</span><span class="keyword">def </span>_restore_modules(unpickler, main_module):</div>
<div class="line"><span class="lineno">  119</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  120</span>        <span class="keywordflow">for</span> modname, name <span class="keywordflow">in</span> main_module.__dict__.pop(<span class="stringliteral">&#39;__dill_imported&#39;</span>):</div>
<div class="line"><span class="lineno">  121</span>            main_module.__dict__[name] = unpickler.find_class(modname, name)</div>
<div class="line"><span class="lineno">  122</span>        <span class="keywordflow">for</span> modname, objname, name <span class="keywordflow">in</span> main_module.__dict__.pop(<span class="stringliteral">&#39;__dill_imported_as&#39;</span>):</div>
<div class="line"><span class="lineno">  123</span>            main_module.__dict__[name] = unpickler.find_class(modname, objname)</div>
<div class="line"><span class="lineno">  124</span>        <span class="keywordflow">for</span> modname, name <span class="keywordflow">in</span> main_module.__dict__.pop(<span class="stringliteral">&#39;__dill_imported_top_level&#39;</span>):</div>
<div class="line"><span class="lineno">  125</span>            main_module.__dict__[name] = __import__(modname)</div>
<div class="line"><span class="lineno">  126</span>    <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><span class="lineno">  127</span>        <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span><span class="comment">#NOTE: 06/03/15 renamed main_module to main</span></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="dill_2session_8py_source.html#l00332">load_module()</a>.</p>

</div>
</div>
<a id="acf519528ea5af1f1d90dfd4ab1a4b532" name="acf519528ea5af1f1d90dfd4ab1a4b532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf519528ea5af1f1d90dfd4ab1a4b532">&#9670;&#160;</a></span>_stash_modules()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dill.session._stash_modules </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>main_module</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dill_2session_8py_source.html#l00076">76</a> of file <a class="el" href="dill_2session_8py_source.html">session.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   76</span><span class="keyword">def </span>_stash_modules(main_module):</div>
<div class="line"><span class="lineno">   77</span>    modmap = _module_map()</div>
<div class="line"><span class="lineno">   78</span>    newmod = ModuleType(main_module.__name__)</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>    imported = []</div>
<div class="line"><span class="lineno">   81</span>    imported_as = []</div>
<div class="line"><span class="lineno">   82</span>    imported_top_level = []  <span class="comment"># keep separated for backward compatibility</span></div>
<div class="line"><span class="lineno">   83</span>    original = {}</div>
<div class="line"><span class="lineno">   84</span>    <span class="keywordflow">for</span> name, obj <span class="keywordflow">in</span> main_module.__dict__.items():</div>
<div class="line"><span class="lineno">   85</span>        <span class="keywordflow">if</span> obj <span class="keywordflow">is</span> main_module:</div>
<div class="line"><span class="lineno">   86</span>            original[name] = newmod  <span class="comment"># self-reference</span></div>
<div class="line"><span class="lineno">   87</span>        <span class="keywordflow">elif</span> obj <span class="keywordflow">is</span> main_module.__dict__:</div>
<div class="line"><span class="lineno">   88</span>            original[name] = newmod.__dict__</div>
<div class="line"><span class="lineno">   89</span>        <span class="comment"># Avoid incorrectly matching a singleton value in another package (ex.: __doc__).</span></div>
<div class="line"><span class="lineno">   90</span>        <span class="keywordflow">elif</span> any(obj <span class="keywordflow">is</span> singleton <span class="keywordflow">for</span> singleton <span class="keywordflow">in</span> (<span class="keywordtype">None</span>, <span class="keyword">False</span>, <span class="keyword">True</span>)) \</div>
<div class="line"><span class="lineno">   91</span>                <span class="keywordflow">or</span> isinstance(obj, ModuleType) <span class="keywordflow">and</span> _is_builtin_module(obj):  <span class="comment"># always saved by ref</span></div>
<div class="line"><span class="lineno">   92</span>            original[name] = obj</div>
<div class="line"><span class="lineno">   93</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   94</span>            source_module, objname = _lookup_module(modmap, name, obj, main_module)</div>
<div class="line"><span class="lineno">   95</span>            <span class="keywordflow">if</span> source_module <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   96</span>                <span class="keywordflow">if</span> objname == name:</div>
<div class="line"><span class="lineno">   97</span>                    imported.append((source_module, name))</div>
<div class="line"><span class="lineno">   98</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   99</span>                    imported_as.append((source_module, objname, name))</div>
<div class="line"><span class="lineno">  100</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  101</span>                <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  102</span>                    imported_top_level.append((modmap.top_level[id(obj)], name))</div>
<div class="line"><span class="lineno">  103</span>                <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><span class="lineno">  104</span>                    original[name] = obj</div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span>    <span class="keywordflow">if</span> len(original) &lt; len(main_module.__dict__):</div>
<div class="line"><span class="lineno">  107</span>        newmod.__dict__.update(original)</div>
<div class="line"><span class="lineno">  108</span>        newmod.__dill_imported = imported</div>
<div class="line"><span class="lineno">  109</span>        newmod.__dill_imported_as = imported_as</div>
<div class="line"><span class="lineno">  110</span>        newmod.__dill_imported_top_level = imported_top_level</div>
<div class="line"><span class="lineno">  111</span>        <span class="keywordflow">if</span> getattr(newmod, <span class="stringliteral">&#39;__loader__&#39;</span>, <span class="keywordtype">None</span>) <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> _is_imported_module(main_module):</div>
<div class="line"><span class="lineno">  112</span>            <span class="comment"># Trick _is_imported_module() to force saving as an imported module.</span></div>
<div class="line"><span class="lineno">  113</span>            newmod.__loader__ = <span class="keyword">True</span>  <span class="comment"># will be discarded by save_module()</span></div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">return</span> newmod</div>
<div class="line"><span class="lineno">  115</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  116</span>        <span class="keywordflow">return</span> main_module</div>
<div class="line"><span class="lineno">  117</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dill_2session_8py_source.html#l00063">_lookup_module()</a>, and <a class="el" href="dill_2session_8py_source.html#l00037">_module_map()</a>.</p>

<p class="reference">Referenced by <a class="el" href="dill_2session_8py_source.html#l00135">dump_module()</a>, and <a class="el" href="test__session_8py_source.html#l00194">dill.tests.test_session.test_runtime_module()</a>.</p>

</div>
</div>
<a id="ad074e36d4464a9503967b89901b46c38" name="ad074e36d4464a9503967b89901b46c38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad074e36d4464a9503967b89901b46c38">&#9670;&#160;</a></span>dump_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None dill.session.dump_module </td>
          <td>(</td>
          <td class="paramtype">Union[str, os.PathLike] </td>          <td class="paramname"><span class="paramname"><em>filename</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[Union[ModuleType, str]] </td>          <td class="paramname"><span class="paramname"><em>module</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool </td>          <td class="paramname"><span class="paramname"><em>refimported</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**</td>          <td class="paramname"><span class="paramname"><em>kwds</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Pickle the current state of :py:mod:`__main__` or another module to a file.

Save the contents of :py:mod:`__main__` (e.g. from an interactive
interpreter session), an imported module, or a module-type object (e.g.
built with :py:class:`~types.ModuleType`), to a file. The pickled
module can then be restored with the function :py:func:`load_module`.

Args:
    filename: a path-like object or a writable stream. If `None`
        (the default), write to a named file in a temporary directory.
    module: a module object or the name of an importable module. If `None`
        (the default), :py:mod:`__main__` is saved.
    refimported: if `True`, all objects identified as having been imported
        into the module's namespace are saved by reference. *Note:* this is
        similar but independent from ``dill.settings[`byref`]``, as
        ``refimported`` refers to virtually all imported objects, while
        ``byref`` only affects select objects.
    **kwds: extra keyword arguments passed to :py:class:`Pickler()`.

Raises:
   :py:exc:`PicklingError`: if pickling fails.

Examples:

    - Save current interpreter session state:

      &gt;&gt;&gt; import dill
      &gt;&gt;&gt; squared = lambda x: x*x
      &gt;&gt;&gt; dill.dump_module() # save state of __main__ to /tmp/session.pkl

    - Save the state of an imported/importable module:

      &gt;&gt;&gt; import dill
      &gt;&gt;&gt; import pox
      &gt;&gt;&gt; pox.plus_one = lambda x: x+1
      &gt;&gt;&gt; dill.dump_module('pox_session.pkl', module=pox)

    - Save the state of a non-importable, module-type object:

      &gt;&gt;&gt; import dill
      &gt;&gt;&gt; from types import ModuleType
      &gt;&gt;&gt; foo = ModuleType('foo')
      &gt;&gt;&gt; foo.values = [1,2,3]
      &gt;&gt;&gt; import math
      &gt;&gt;&gt; foo.sin = math.sin
      &gt;&gt;&gt; dill.dump_module('foo_session.pkl', module=foo, refimported=True)

    - Restore the state of the saved modules:

      &gt;&gt;&gt; import dill
      &gt;&gt;&gt; dill.load_module()
      &gt;&gt;&gt; squared(2)
      4
      &gt;&gt;&gt; pox = dill.load_module('pox_session.pkl')
      &gt;&gt;&gt; pox.plus_one(1)
      2
      &gt;&gt;&gt; foo = dill.load_module('foo_session.pkl')
      &gt;&gt;&gt; [foo.sin(x) for x in foo.values]
      [0.8414709848078965, 0.9092974268256817, 0.1411200080598672]

    - Use `refimported` to save imported objects by reference:

      &gt;&gt;&gt; import dill
      &gt;&gt;&gt; from html.entities import html5
      &gt;&gt;&gt; type(html5), len(html5)
      (dict, 2231)
      &gt;&gt;&gt; import io
      &gt;&gt;&gt; buf = io.BytesIO()
      &gt;&gt;&gt; dill.dump_module(buf) # saves __main__, with html5 saved by value
      &gt;&gt;&gt; len(buf.getvalue()) # pickle size in bytes
      71665
      &gt;&gt;&gt; buf = io.BytesIO()
      &gt;&gt;&gt; dill.dump_module(buf, refimported=True) # html5 saved by reference
      &gt;&gt;&gt; len(buf.getvalue())
      438

*Changed in version 0.3.6:* Function ``dump_session()`` was renamed to
``dump_module()``.  Parameters ``main`` and ``byref`` were renamed to
``module`` and ``refimported``, respectively.

Note:
    Currently, ``dill.settings['byref']`` and ``dill.settings['recurse']``
    don't apply to this function.
</pre> 
<p class="definition">Definition at line <a class="el" href="dill_2session_8py_source.html#l00130">130</a> of file <a class="el" href="dill_2session_8py_source.html">session.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  135</span>) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  136</span>    <span class="stringliteral">&quot;&quot;&quot;Pickle the current state of :py:mod:`__main__` or another module to a file.</span></div>
<div class="line"><span class="lineno">  137</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  138</span><span class="stringliteral">    Save the contents of :py:mod:`__main__` (e.g. from an interactive</span></div>
<div class="line"><span class="lineno">  139</span><span class="stringliteral">    interpreter session), an imported module, or a module-type object (e.g.</span></div>
<div class="line"><span class="lineno">  140</span><span class="stringliteral">    built with :py:class:`~types.ModuleType`), to a file. The pickled</span></div>
<div class="line"><span class="lineno">  141</span><span class="stringliteral">    module can then be restored with the function :py:func:`load_module`.</span></div>
<div class="line"><span class="lineno">  142</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  143</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  144</span><span class="stringliteral">        filename: a path-like object or a writable stream. If `None`</span></div>
<div class="line"><span class="lineno">  145</span><span class="stringliteral">            (the default), write to a named file in a temporary directory.</span></div>
<div class="line"><span class="lineno">  146</span><span class="stringliteral">        module: a module object or the name of an importable module. If `None`</span></div>
<div class="line"><span class="lineno">  147</span><span class="stringliteral">            (the default), :py:mod:`__main__` is saved.</span></div>
<div class="line"><span class="lineno">  148</span><span class="stringliteral">        refimported: if `True`, all objects identified as having been imported</span></div>
<div class="line"><span class="lineno">  149</span><span class="stringliteral">            into the module&#39;s namespace are saved by reference. *Note:* this is</span></div>
<div class="line"><span class="lineno">  150</span><span class="stringliteral">            similar but independent from ``dill.settings[`byref`]``, as</span></div>
<div class="line"><span class="lineno">  151</span><span class="stringliteral">            ``refimported`` refers to virtually all imported objects, while</span></div>
<div class="line"><span class="lineno">  152</span><span class="stringliteral">            ``byref`` only affects select objects.</span></div>
<div class="line"><span class="lineno">  153</span><span class="stringliteral">        **kwds: extra keyword arguments passed to :py:class:`Pickler()`.</span></div>
<div class="line"><span class="lineno">  154</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  155</span><span class="stringliteral">    Raises:</span></div>
<div class="line"><span class="lineno">  156</span><span class="stringliteral">       :py:exc:`PicklingError`: if pickling fails.</span></div>
<div class="line"><span class="lineno">  157</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  158</span><span class="stringliteral">    Examples:</span></div>
<div class="line"><span class="lineno">  159</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  160</span><span class="stringliteral">        - Save current interpreter session state:</span></div>
<div class="line"><span class="lineno">  161</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  162</span><span class="stringliteral">          &gt;&gt;&gt; import dill</span></div>
<div class="line"><span class="lineno">  163</span><span class="stringliteral">          &gt;&gt;&gt; squared = lambda x: x*x</span></div>
<div class="line"><span class="lineno">  164</span><span class="stringliteral">          &gt;&gt;&gt; dill.dump_module() # save state of __main__ to /tmp/session.pkl</span></div>
<div class="line"><span class="lineno">  165</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  166</span><span class="stringliteral">        - Save the state of an imported/importable module:</span></div>
<div class="line"><span class="lineno">  167</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  168</span><span class="stringliteral">          &gt;&gt;&gt; import dill</span></div>
<div class="line"><span class="lineno">  169</span><span class="stringliteral">          &gt;&gt;&gt; import pox</span></div>
<div class="line"><span class="lineno">  170</span><span class="stringliteral">          &gt;&gt;&gt; pox.plus_one = lambda x: x+1</span></div>
<div class="line"><span class="lineno">  171</span><span class="stringliteral">          &gt;&gt;&gt; dill.dump_module(&#39;pox_session.pkl&#39;, module=pox)</span></div>
<div class="line"><span class="lineno">  172</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  173</span><span class="stringliteral">        - Save the state of a non-importable, module-type object:</span></div>
<div class="line"><span class="lineno">  174</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  175</span><span class="stringliteral">          &gt;&gt;&gt; import dill</span></div>
<div class="line"><span class="lineno">  176</span><span class="stringliteral">          &gt;&gt;&gt; from types import ModuleType</span></div>
<div class="line"><span class="lineno">  177</span><span class="stringliteral">          &gt;&gt;&gt; foo = ModuleType(&#39;foo&#39;)</span></div>
<div class="line"><span class="lineno">  178</span><span class="stringliteral">          &gt;&gt;&gt; foo.values = [1,2,3]</span></div>
<div class="line"><span class="lineno">  179</span><span class="stringliteral">          &gt;&gt;&gt; import math</span></div>
<div class="line"><span class="lineno">  180</span><span class="stringliteral">          &gt;&gt;&gt; foo.sin = math.sin</span></div>
<div class="line"><span class="lineno">  181</span><span class="stringliteral">          &gt;&gt;&gt; dill.dump_module(&#39;foo_session.pkl&#39;, module=foo, refimported=True)</span></div>
<div class="line"><span class="lineno">  182</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  183</span><span class="stringliteral">        - Restore the state of the saved modules:</span></div>
<div class="line"><span class="lineno">  184</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  185</span><span class="stringliteral">          &gt;&gt;&gt; import dill</span></div>
<div class="line"><span class="lineno">  186</span><span class="stringliteral">          &gt;&gt;&gt; dill.load_module()</span></div>
<div class="line"><span class="lineno">  187</span><span class="stringliteral">          &gt;&gt;&gt; squared(2)</span></div>
<div class="line"><span class="lineno">  188</span><span class="stringliteral">          4</span></div>
<div class="line"><span class="lineno">  189</span><span class="stringliteral">          &gt;&gt;&gt; pox = dill.load_module(&#39;pox_session.pkl&#39;)</span></div>
<div class="line"><span class="lineno">  190</span><span class="stringliteral">          &gt;&gt;&gt; pox.plus_one(1)</span></div>
<div class="line"><span class="lineno">  191</span><span class="stringliteral">          2</span></div>
<div class="line"><span class="lineno">  192</span><span class="stringliteral">          &gt;&gt;&gt; foo = dill.load_module(&#39;foo_session.pkl&#39;)</span></div>
<div class="line"><span class="lineno">  193</span><span class="stringliteral">          &gt;&gt;&gt; [foo.sin(x) for x in foo.values]</span></div>
<div class="line"><span class="lineno">  194</span><span class="stringliteral">          [0.8414709848078965, 0.9092974268256817, 0.1411200080598672]</span></div>
<div class="line"><span class="lineno">  195</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  196</span><span class="stringliteral">        - Use `refimported` to save imported objects by reference:</span></div>
<div class="line"><span class="lineno">  197</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  198</span><span class="stringliteral">          &gt;&gt;&gt; import dill</span></div>
<div class="line"><span class="lineno">  199</span><span class="stringliteral">          &gt;&gt;&gt; from html.entities import html5</span></div>
<div class="line"><span class="lineno">  200</span><span class="stringliteral">          &gt;&gt;&gt; type(html5), len(html5)</span></div>
<div class="line"><span class="lineno">  201</span><span class="stringliteral">          (dict, 2231)</span></div>
<div class="line"><span class="lineno">  202</span><span class="stringliteral">          &gt;&gt;&gt; import io</span></div>
<div class="line"><span class="lineno">  203</span><span class="stringliteral">          &gt;&gt;&gt; buf = io.BytesIO()</span></div>
<div class="line"><span class="lineno">  204</span><span class="stringliteral">          &gt;&gt;&gt; dill.dump_module(buf) # saves __main__, with html5 saved by value</span></div>
<div class="line"><span class="lineno">  205</span><span class="stringliteral">          &gt;&gt;&gt; len(buf.getvalue()) # pickle size in bytes</span></div>
<div class="line"><span class="lineno">  206</span><span class="stringliteral">          71665</span></div>
<div class="line"><span class="lineno">  207</span><span class="stringliteral">          &gt;&gt;&gt; buf = io.BytesIO()</span></div>
<div class="line"><span class="lineno">  208</span><span class="stringliteral">          &gt;&gt;&gt; dill.dump_module(buf, refimported=True) # html5 saved by reference</span></div>
<div class="line"><span class="lineno">  209</span><span class="stringliteral">          &gt;&gt;&gt; len(buf.getvalue())</span></div>
<div class="line"><span class="lineno">  210</span><span class="stringliteral">          438</span></div>
<div class="line"><span class="lineno">  211</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  212</span><span class="stringliteral">    *Changed in version 0.3.6:* Function ``dump_session()`` was renamed to</span></div>
<div class="line"><span class="lineno">  213</span><span class="stringliteral">    ``dump_module()``.  Parameters ``main`` and ``byref`` were renamed to</span></div>
<div class="line"><span class="lineno">  214</span><span class="stringliteral">    ``module`` and ``refimported``, respectively.</span></div>
<div class="line"><span class="lineno">  215</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  216</span><span class="stringliteral">    Note:</span></div>
<div class="line"><span class="lineno">  217</span><span class="stringliteral">        Currently, ``dill.settings[&#39;byref&#39;]`` and ``dill.settings[&#39;recurse&#39;]``</span></div>
<div class="line"><span class="lineno">  218</span><span class="stringliteral">        don&#39;t apply to this function.</span></div>
<div class="line"><span class="lineno">  219</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  220</span>    <span class="keywordflow">for</span> old_par, par <span class="keywordflow">in</span> [(<span class="stringliteral">&#39;main&#39;</span>, <span class="stringliteral">&#39;module&#39;</span>), (<span class="stringliteral">&#39;byref&#39;</span>, <span class="stringliteral">&#39;refimported&#39;</span>)]:</div>
<div class="line"><span class="lineno">  221</span>        <span class="keywordflow">if</span> old_par <span class="keywordflow">in</span> kwds:</div>
<div class="line"><span class="lineno">  222</span>            message = <span class="stringliteral">&quot;The argument %r has been renamed %r&quot;</span> % (old_par, par)</div>
<div class="line"><span class="lineno">  223</span>            <span class="keywordflow">if</span> old_par == <span class="stringliteral">&#39;byref&#39;</span>:</div>
<div class="line"><span class="lineno">  224</span>                message += <span class="stringliteral">&quot; to distinguish it from dill.settings[&#39;byref&#39;]&quot;</span></div>
<div class="line"><span class="lineno">  225</span>            warnings.warn(message + <span class="stringliteral">&quot;.&quot;</span>, PendingDeprecationWarning)</div>
<div class="line"><span class="lineno">  226</span>            <span class="keywordflow">if</span> locals()[par]:  <span class="comment"># the defaults are None and False</span></div>
<div class="line"><span class="lineno">  227</span>                <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;both %r and %r arguments were used&quot;</span> % (par, old_par))</div>
<div class="line"><span class="lineno">  228</span>    refimported = kwds.pop(<span class="stringliteral">&#39;byref&#39;</span>, refimported)</div>
<div class="line"><span class="lineno">  229</span>    module = kwds.pop(<span class="stringliteral">&#39;main&#39;</span>, module)</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>    <span class="keyword">from</span> .settings <span class="keyword">import</span> settings</div>
<div class="line"><span class="lineno">  232</span>    protocol = settings[<span class="stringliteral">&#39;protocol&#39;</span>]</div>
<div class="line"><span class="lineno">  233</span>    main = module</div>
<div class="line"><span class="lineno">  234</span>    <span class="keywordflow">if</span> main <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  235</span>        main = _main_module</div>
<div class="line"><span class="lineno">  236</span>    <span class="keywordflow">elif</span> isinstance(main, str):</div>
<div class="line"><span class="lineno">  237</span>        main = _import_module(main)</div>
<div class="line"><span class="lineno">  238</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(main, ModuleType):</div>
<div class="line"><span class="lineno">  239</span>        <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;%r is not a module&quot;</span> % main)</div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordflow">if</span> hasattr(filename, <span class="stringliteral">&#39;write&#39;</span>):</div>
<div class="line"><span class="lineno">  241</span>        file = filename</div>
<div class="line"><span class="lineno">  242</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  243</span>        <span class="keywordflow">if</span> filename <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  244</span>            filename = str(TEMPDIR/<span class="stringliteral">&#39;session.pkl&#39;</span>)</div>
<div class="line"><span class="lineno">  245</span>        file = open(filename, <span class="stringliteral">&#39;wb&#39;</span>)</div>
<div class="line"><span class="lineno">  246</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  247</span>        pickler = Pickler(file, protocol, **kwds)</div>
<div class="line"><span class="lineno">  248</span>        pickler._original_main = main</div>
<div class="line"><span class="lineno">  249</span>        <span class="keywordflow">if</span> refimported:</div>
<div class="line"><span class="lineno">  250</span>            main = _stash_modules(main)</div>
<div class="line"><span class="lineno">  251</span>        pickler._main = main     <span class="comment">#FIXME: dill.settings are disabled</span></div>
<div class="line"><span class="lineno">  252</span>        pickler._byref = <span class="keyword">False</span>   <span class="comment"># disable pickling by name reference</span></div>
<div class="line"><span class="lineno">  253</span>        pickler._recurse = <span class="keyword">False</span> <span class="comment"># disable pickling recursion for globals</span></div>
<div class="line"><span class="lineno">  254</span>        pickler._session = <span class="keyword">True</span>  <span class="comment"># is best indicator of when pickling a session</span></div>
<div class="line"><span class="lineno">  255</span>        pickler._first_pass = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  256</span>        pickler._main_modified = main <span class="keywordflow">is</span> <span class="keywordflow">not</span> pickler._original_main</div>
<div class="line"><span class="lineno">  257</span>        pickler.dump(main)</div>
<div class="line"><span class="lineno">  258</span>    <span class="keywordflow">finally</span>:</div>
<div class="line"><span class="lineno">  259</span>        <span class="keywordflow">if</span> file <span class="keywordflow">is</span> <span class="keywordflow">not</span> filename:  <span class="comment"># if newly opened file</span></div>
<div class="line"><span class="lineno">  260</span>            file.close()</div>
<div class="line"><span class="lineno">  261</span>    <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span><span class="comment"># Backward compatibility.</span></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dill_2session_8py_source.html#l00076">_stash_modules()</a>.</p>

<p class="reference">Referenced by <a class="el" href="dill_2session_8py_source.html#l00264">dump_session()</a>.</p>

</div>
</div>
<a id="a338add9bd3167a713ca6d72931cf89c9" name="a338add9bd3167a713ca6d72931cf89c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a338add9bd3167a713ca6d72931cf89c9">&#9670;&#160;</a></span>dump_session()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dill.session.dump_session </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>filename</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>main</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>byref</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**</td>          <td class="paramname"><span class="paramname"><em>kwds</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dill_2session_8py_source.html#l00264">264</a> of file <a class="el" href="dill_2session_8py_source.html">session.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  264</span><span class="keyword">def </span>dump_session(filename=None, main=None, byref=False, **kwds):</div>
<div class="line"><span class="lineno">  265</span>    warnings.warn(<span class="stringliteral">&quot;dump_session() has been renamed dump_module()&quot;</span>, PendingDeprecationWarning)</div>
<div class="line"><span class="lineno">  266</span>    dump_module(filename, module=main, refimported=byref, **kwds)</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dill_2session_8py_source.html#l00135">dump_module()</a>.</p>

</div>
</div>
<a id="a7d58b2bd77f57f388638ecf1271c6fd4" name="a7d58b2bd77f57f388638ecf1271c6fd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d58b2bd77f57f388638ecf1271c6fd4">&#9670;&#160;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Optional[ModuleType] dill.session.load_module </td>
          <td>(</td>
          <td class="paramtype">Union[str, os.PathLike] </td>          <td class="paramname"><span class="paramname"><em>filename</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[Union[ModuleType, str]] </td>          <td class="paramname"><span class="paramname"><em>module</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**</td>          <td class="paramname"><span class="paramname"><em>kwds</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Update the selected module (default is :py:mod:`__main__`) with
the state saved at ``filename``.

Restore a module to the state saved with :py:func:`dump_module`. The
saved module can be :py:mod:`__main__` (e.g. an interpreter session),
an imported module, or a module-type object (e.g. created with
:py:class:`~types.ModuleType`).

When restoring the state of a non-importable module-type object, the
current instance of this module may be passed as the argument ``main``.
Otherwise, a new instance is created with :py:class:`~types.ModuleType`
and returned.

Args:
    filename: a path-like object or a readable stream. If `None`
        (the default), read from a named file in a temporary directory.
    module: a module object or the name of an importable module;
        the module name and kind (i.e. imported or non-imported) must
        match the name and kind of the module stored at ``filename``.
    **kwds: extra keyword arguments passed to :py:class:`Unpickler()`.

Raises:
    :py:exc:`UnpicklingError`: if unpickling fails.
    :py:exc:`ValueError`: if the argument ``main`` and module saved
        at ``filename`` are incompatible.

Returns:
    A module object, if the saved module is not :py:mod:`__main__` or
    a module instance wasn't provided with the argument ``main``.

Examples:

    - Save the state of some modules:

      &gt;&gt;&gt; import dill
      &gt;&gt;&gt; squared = lambda x: x*x
      &gt;&gt;&gt; dill.dump_module() # save state of __main__ to /tmp/session.pkl
      &gt;&gt;&gt;
      &gt;&gt;&gt; import pox # an imported module
      &gt;&gt;&gt; pox.plus_one = lambda x: x+1
      &gt;&gt;&gt; dill.dump_module('pox_session.pkl', module=pox)
      &gt;&gt;&gt;
      &gt;&gt;&gt; from types import ModuleType
      &gt;&gt;&gt; foo = ModuleType('foo') # a module-type object
      &gt;&gt;&gt; foo.values = [1,2,3]
      &gt;&gt;&gt; import math
      &gt;&gt;&gt; foo.sin = math.sin
      &gt;&gt;&gt; dill.dump_module('foo_session.pkl', module=foo, refimported=True)

    - Restore the state of the interpreter:

      &gt;&gt;&gt; import dill
      &gt;&gt;&gt; dill.load_module() # updates __main__ from /tmp/session.pkl
      &gt;&gt;&gt; squared(2)
      4

    - Load the saved state of an importable module:

      &gt;&gt;&gt; import dill
      &gt;&gt;&gt; pox = dill.load_module('pox_session.pkl')
      &gt;&gt;&gt; pox.plus_one(1)
      2
      &gt;&gt;&gt; import sys
      &gt;&gt;&gt; pox in sys.modules.values()
      True

    - Load the saved state of a non-importable module-type object:

      &gt;&gt;&gt; import dill
      &gt;&gt;&gt; foo = dill.load_module('foo_session.pkl')
      &gt;&gt;&gt; [foo.sin(x) for x in foo.values]
      [0.8414709848078965, 0.9092974268256817, 0.1411200080598672]
      &gt;&gt;&gt; import math
      &gt;&gt;&gt; foo.sin is math.sin # foo.sin was saved by reference
      True
      &gt;&gt;&gt; import sys
      &gt;&gt;&gt; foo in sys.modules.values()
      False

    - Update the state of a non-importable module-type object:

      &gt;&gt;&gt; import dill
      &gt;&gt;&gt; from types import ModuleType
      &gt;&gt;&gt; foo = ModuleType('foo')
      &gt;&gt;&gt; foo.values = ['a','b']
      &gt;&gt;&gt; foo.sin = lambda x: x*x
      &gt;&gt;&gt; dill.load_module('foo_session.pkl', module=foo)
      &gt;&gt;&gt; [foo.sin(x) for x in foo.values]
      [0.8414709848078965, 0.9092974268256817, 0.1411200080598672]

*Changed in version 0.3.6:* Function ``load_session()`` was renamed to
``load_module()``. Parameter ``main`` was renamed to ``module``.

See also:
    :py:func:`load_module_asdict` to load the contents of module saved
    with :py:func:`dump_module` into a dictionary.
</pre> 
<p class="definition">Definition at line <a class="el" href="dill_2session_8py_source.html#l00328">328</a> of file <a class="el" href="dill_2session_8py_source.html">session.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  332</span>) -&gt; Optional[ModuleType]:</div>
<div class="line"><span class="lineno">  333</span>    <span class="stringliteral">&quot;&quot;&quot;Update the selected module (default is :py:mod:`__main__`) with</span></div>
<div class="line"><span class="lineno">  334</span><span class="stringliteral">    the state saved at ``filename``.</span></div>
<div class="line"><span class="lineno">  335</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  336</span><span class="stringliteral">    Restore a module to the state saved with :py:func:`dump_module`. The</span></div>
<div class="line"><span class="lineno">  337</span><span class="stringliteral">    saved module can be :py:mod:`__main__` (e.g. an interpreter session),</span></div>
<div class="line"><span class="lineno">  338</span><span class="stringliteral">    an imported module, or a module-type object (e.g. created with</span></div>
<div class="line"><span class="lineno">  339</span><span class="stringliteral">    :py:class:`~types.ModuleType`).</span></div>
<div class="line"><span class="lineno">  340</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  341</span><span class="stringliteral">    When restoring the state of a non-importable module-type object, the</span></div>
<div class="line"><span class="lineno">  342</span><span class="stringliteral">    current instance of this module may be passed as the argument ``main``.</span></div>
<div class="line"><span class="lineno">  343</span><span class="stringliteral">    Otherwise, a new instance is created with :py:class:`~types.ModuleType`</span></div>
<div class="line"><span class="lineno">  344</span><span class="stringliteral">    and returned.</span></div>
<div class="line"><span class="lineno">  345</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  346</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  347</span><span class="stringliteral">        filename: a path-like object or a readable stream. If `None`</span></div>
<div class="line"><span class="lineno">  348</span><span class="stringliteral">            (the default), read from a named file in a temporary directory.</span></div>
<div class="line"><span class="lineno">  349</span><span class="stringliteral">        module: a module object or the name of an importable module;</span></div>
<div class="line"><span class="lineno">  350</span><span class="stringliteral">            the module name and kind (i.e. imported or non-imported) must</span></div>
<div class="line"><span class="lineno">  351</span><span class="stringliteral">            match the name and kind of the module stored at ``filename``.</span></div>
<div class="line"><span class="lineno">  352</span><span class="stringliteral">        **kwds: extra keyword arguments passed to :py:class:`Unpickler()`.</span></div>
<div class="line"><span class="lineno">  353</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  354</span><span class="stringliteral">    Raises:</span></div>
<div class="line"><span class="lineno">  355</span><span class="stringliteral">        :py:exc:`UnpicklingError`: if unpickling fails.</span></div>
<div class="line"><span class="lineno">  356</span><span class="stringliteral">        :py:exc:`ValueError`: if the argument ``main`` and module saved</span></div>
<div class="line"><span class="lineno">  357</span><span class="stringliteral">            at ``filename`` are incompatible.</span></div>
<div class="line"><span class="lineno">  358</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  359</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  360</span><span class="stringliteral">        A module object, if the saved module is not :py:mod:`__main__` or</span></div>
<div class="line"><span class="lineno">  361</span><span class="stringliteral">        a module instance wasn&#39;t provided with the argument ``main``.</span></div>
<div class="line"><span class="lineno">  362</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  363</span><span class="stringliteral">    Examples:</span></div>
<div class="line"><span class="lineno">  364</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  365</span><span class="stringliteral">        - Save the state of some modules:</span></div>
<div class="line"><span class="lineno">  366</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  367</span><span class="stringliteral">          &gt;&gt;&gt; import dill</span></div>
<div class="line"><span class="lineno">  368</span><span class="stringliteral">          &gt;&gt;&gt; squared = lambda x: x*x</span></div>
<div class="line"><span class="lineno">  369</span><span class="stringliteral">          &gt;&gt;&gt; dill.dump_module() # save state of __main__ to /tmp/session.pkl</span></div>
<div class="line"><span class="lineno">  370</span><span class="stringliteral">          &gt;&gt;&gt;</span></div>
<div class="line"><span class="lineno">  371</span><span class="stringliteral">          &gt;&gt;&gt; import pox # an imported module</span></div>
<div class="line"><span class="lineno">  372</span><span class="stringliteral">          &gt;&gt;&gt; pox.plus_one = lambda x: x+1</span></div>
<div class="line"><span class="lineno">  373</span><span class="stringliteral">          &gt;&gt;&gt; dill.dump_module(&#39;pox_session.pkl&#39;, module=pox)</span></div>
<div class="line"><span class="lineno">  374</span><span class="stringliteral">          &gt;&gt;&gt;</span></div>
<div class="line"><span class="lineno">  375</span><span class="stringliteral">          &gt;&gt;&gt; from types import ModuleType</span></div>
<div class="line"><span class="lineno">  376</span><span class="stringliteral">          &gt;&gt;&gt; foo = ModuleType(&#39;foo&#39;) # a module-type object</span></div>
<div class="line"><span class="lineno">  377</span><span class="stringliteral">          &gt;&gt;&gt; foo.values = [1,2,3]</span></div>
<div class="line"><span class="lineno">  378</span><span class="stringliteral">          &gt;&gt;&gt; import math</span></div>
<div class="line"><span class="lineno">  379</span><span class="stringliteral">          &gt;&gt;&gt; foo.sin = math.sin</span></div>
<div class="line"><span class="lineno">  380</span><span class="stringliteral">          &gt;&gt;&gt; dill.dump_module(&#39;foo_session.pkl&#39;, module=foo, refimported=True)</span></div>
<div class="line"><span class="lineno">  381</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  382</span><span class="stringliteral">        - Restore the state of the interpreter:</span></div>
<div class="line"><span class="lineno">  383</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  384</span><span class="stringliteral">          &gt;&gt;&gt; import dill</span></div>
<div class="line"><span class="lineno">  385</span><span class="stringliteral">          &gt;&gt;&gt; dill.load_module() # updates __main__ from /tmp/session.pkl</span></div>
<div class="line"><span class="lineno">  386</span><span class="stringliteral">          &gt;&gt;&gt; squared(2)</span></div>
<div class="line"><span class="lineno">  387</span><span class="stringliteral">          4</span></div>
<div class="line"><span class="lineno">  388</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  389</span><span class="stringliteral">        - Load the saved state of an importable module:</span></div>
<div class="line"><span class="lineno">  390</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  391</span><span class="stringliteral">          &gt;&gt;&gt; import dill</span></div>
<div class="line"><span class="lineno">  392</span><span class="stringliteral">          &gt;&gt;&gt; pox = dill.load_module(&#39;pox_session.pkl&#39;)</span></div>
<div class="line"><span class="lineno">  393</span><span class="stringliteral">          &gt;&gt;&gt; pox.plus_one(1)</span></div>
<div class="line"><span class="lineno">  394</span><span class="stringliteral">          2</span></div>
<div class="line"><span class="lineno">  395</span><span class="stringliteral">          &gt;&gt;&gt; import sys</span></div>
<div class="line"><span class="lineno">  396</span><span class="stringliteral">          &gt;&gt;&gt; pox in sys.modules.values()</span></div>
<div class="line"><span class="lineno">  397</span><span class="stringliteral">          True</span></div>
<div class="line"><span class="lineno">  398</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  399</span><span class="stringliteral">        - Load the saved state of a non-importable module-type object:</span></div>
<div class="line"><span class="lineno">  400</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  401</span><span class="stringliteral">          &gt;&gt;&gt; import dill</span></div>
<div class="line"><span class="lineno">  402</span><span class="stringliteral">          &gt;&gt;&gt; foo = dill.load_module(&#39;foo_session.pkl&#39;)</span></div>
<div class="line"><span class="lineno">  403</span><span class="stringliteral">          &gt;&gt;&gt; [foo.sin(x) for x in foo.values]</span></div>
<div class="line"><span class="lineno">  404</span><span class="stringliteral">          [0.8414709848078965, 0.9092974268256817, 0.1411200080598672]</span></div>
<div class="line"><span class="lineno">  405</span><span class="stringliteral">          &gt;&gt;&gt; import math</span></div>
<div class="line"><span class="lineno">  406</span><span class="stringliteral">          &gt;&gt;&gt; foo.sin is math.sin # foo.sin was saved by reference</span></div>
<div class="line"><span class="lineno">  407</span><span class="stringliteral">          True</span></div>
<div class="line"><span class="lineno">  408</span><span class="stringliteral">          &gt;&gt;&gt; import sys</span></div>
<div class="line"><span class="lineno">  409</span><span class="stringliteral">          &gt;&gt;&gt; foo in sys.modules.values()</span></div>
<div class="line"><span class="lineno">  410</span><span class="stringliteral">          False</span></div>
<div class="line"><span class="lineno">  411</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  412</span><span class="stringliteral">        - Update the state of a non-importable module-type object:</span></div>
<div class="line"><span class="lineno">  413</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  414</span><span class="stringliteral">          &gt;&gt;&gt; import dill</span></div>
<div class="line"><span class="lineno">  415</span><span class="stringliteral">          &gt;&gt;&gt; from types import ModuleType</span></div>
<div class="line"><span class="lineno">  416</span><span class="stringliteral">          &gt;&gt;&gt; foo = ModuleType(&#39;foo&#39;)</span></div>
<div class="line"><span class="lineno">  417</span><span class="stringliteral">          &gt;&gt;&gt; foo.values = [&#39;a&#39;,&#39;b&#39;]</span></div>
<div class="line"><span class="lineno">  418</span><span class="stringliteral">          &gt;&gt;&gt; foo.sin = lambda x: x*x</span></div>
<div class="line"><span class="lineno">  419</span><span class="stringliteral">          &gt;&gt;&gt; dill.load_module(&#39;foo_session.pkl&#39;, module=foo)</span></div>
<div class="line"><span class="lineno">  420</span><span class="stringliteral">          &gt;&gt;&gt; [foo.sin(x) for x in foo.values]</span></div>
<div class="line"><span class="lineno">  421</span><span class="stringliteral">          [0.8414709848078965, 0.9092974268256817, 0.1411200080598672]</span></div>
<div class="line"><span class="lineno">  422</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  423</span><span class="stringliteral">    *Changed in version 0.3.6:* Function ``load_session()`` was renamed to</span></div>
<div class="line"><span class="lineno">  424</span><span class="stringliteral">    ``load_module()``. Parameter ``main`` was renamed to ``module``.</span></div>
<div class="line"><span class="lineno">  425</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  426</span><span class="stringliteral">    See also:</span></div>
<div class="line"><span class="lineno">  427</span><span class="stringliteral">        :py:func:`load_module_asdict` to load the contents of module saved</span></div>
<div class="line"><span class="lineno">  428</span><span class="stringliteral">        with :py:func:`dump_module` into a dictionary.</span></div>
<div class="line"><span class="lineno">  429</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  430</span>    <span class="keywordflow">if</span> <span class="stringliteral">&#39;main&#39;</span> <span class="keywordflow">in</span> kwds:</div>
<div class="line"><span class="lineno">  431</span>        warnings.warn(</div>
<div class="line"><span class="lineno">  432</span>            <span class="stringliteral">&quot;The argument &#39;main&#39; has been renamed &#39;module&#39;.&quot;</span>,</div>
<div class="line"><span class="lineno">  433</span>            PendingDeprecationWarning</div>
<div class="line"><span class="lineno">  434</span>        )</div>
<div class="line"><span class="lineno">  435</span>        <span class="keywordflow">if</span> module <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  436</span>            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;both &#39;module&#39; and &#39;main&#39; arguments were used&quot;</span>)</div>
<div class="line"><span class="lineno">  437</span>        module = kwds.pop(<span class="stringliteral">&#39;main&#39;</span>)</div>
<div class="line"><span class="lineno">  438</span>    main = module</div>
<div class="line"><span class="lineno">  439</span>    <span class="keywordflow">if</span> hasattr(filename, <span class="stringliteral">&#39;read&#39;</span>):</div>
<div class="line"><span class="lineno">  440</span>        file = filename</div>
<div class="line"><span class="lineno">  441</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  442</span>        <span class="keywordflow">if</span> filename <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  443</span>            filename = str(TEMPDIR/<span class="stringliteral">&#39;session.pkl&#39;</span>)</div>
<div class="line"><span class="lineno">  444</span>        file = open(filename, <span class="stringliteral">&#39;rb&#39;</span>)</div>
<div class="line"><span class="lineno">  445</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  446</span>        file = _make_peekable(file)</div>
<div class="line"><span class="lineno">  447</span>        <span class="comment">#FIXME: dill.settings are disabled</span></div>
<div class="line"><span class="lineno">  448</span>        unpickler = Unpickler(file, **kwds)</div>
<div class="line"><span class="lineno">  449</span>        unpickler._session = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>        <span class="comment"># Resolve unpickler._main</span></div>
<div class="line"><span class="lineno">  452</span>        pickle_main = _identify_module(file, main)</div>
<div class="line"><span class="lineno">  453</span>        <span class="keywordflow">if</span> main <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> pickle_main <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  454</span>            main = pickle_main</div>
<div class="line"><span class="lineno">  455</span>        <span class="keywordflow">if</span> isinstance(main, str):</div>
<div class="line"><span class="lineno">  456</span>            <span class="keywordflow">if</span> main.startswith(<span class="stringliteral">&#39;__runtime__.&#39;</span>):</div>
<div class="line"><span class="lineno">  457</span>                <span class="comment"># Create runtime module to load the session into.</span></div>
<div class="line"><span class="lineno">  458</span>                main = ModuleType(main.partition(<span class="stringliteral">&#39;.&#39;</span>)[-1])</div>
<div class="line"><span class="lineno">  459</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  460</span>                main = _import_module(main)</div>
<div class="line"><span class="lineno">  461</span>        <span class="keywordflow">if</span> main <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  462</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(main, ModuleType):</div>
<div class="line"><span class="lineno">  463</span>                <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;%r is not a module&quot;</span> % main)</div>
<div class="line"><span class="lineno">  464</span>            unpickler._main = main</div>
<div class="line"><span class="lineno">  465</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  466</span>            main = unpickler._main</div>
<div class="line"><span class="lineno">  467</span> </div>
<div class="line"><span class="lineno">  468</span>        <span class="comment"># Check against the pickle&#39;s main.</span></div>
<div class="line"><span class="lineno">  469</span>        is_main_imported = _is_imported_module(main)</div>
<div class="line"><span class="lineno">  470</span>        <span class="keywordflow">if</span> pickle_main <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  471</span>            is_runtime_mod = pickle_main.startswith(<span class="stringliteral">&#39;__runtime__.&#39;</span>)</div>
<div class="line"><span class="lineno">  472</span>            <span class="keywordflow">if</span> is_runtime_mod:</div>
<div class="line"><span class="lineno">  473</span>                pickle_main = pickle_main.partition(<span class="stringliteral">&#39;.&#39;</span>)[-1]</div>
<div class="line"><span class="lineno">  474</span>            error_msg = <span class="stringliteral">&quot;can&#39;t update{} module{} %r with the saved state of{} module{} %r&quot;</span></div>
<div class="line"><span class="lineno">  475</span>            <span class="keywordflow">if</span> is_runtime_mod <span class="keywordflow">and</span> is_main_imported:</div>
<div class="line"><span class="lineno">  476</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  477</span>                    error_msg.format(<span class="stringliteral">&quot; imported&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;-type object&quot;</span>)</div>
<div class="line"><span class="lineno">  478</span>                    % (main.__name__, pickle_main)</div>
<div class="line"><span class="lineno">  479</span>                )</div>
<div class="line"><span class="lineno">  480</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> is_runtime_mod <span class="keywordflow">and</span> <span class="keywordflow">not</span> is_main_imported:</div>
<div class="line"><span class="lineno">  481</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  482</span>                    error_msg.format(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;-type object&quot;</span>, <span class="stringliteral">&quot; imported&quot;</span>, <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">  483</span>                    % (pickle_main, main.__name__)</div>
<div class="line"><span class="lineno">  484</span>                )</div>
<div class="line"><span class="lineno">  485</span>            <span class="keywordflow">if</span> main.__name__ != pickle_main:</div>
<div class="line"><span class="lineno">  486</span>                <span class="keywordflow">raise</span> ValueError(error_msg.format(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>) % (main.__name__, pickle_main))</div>
<div class="line"><span class="lineno">  487</span> </div>
<div class="line"><span class="lineno">  488</span>        <span class="comment"># This is for find_class() to be able to locate it.</span></div>
<div class="line"><span class="lineno">  489</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> is_main_imported:</div>
<div class="line"><span class="lineno">  490</span>            runtime_main = <span class="stringliteral">&#39;__runtime__.%s&#39;</span> % main.__name__</div>
<div class="line"><span class="lineno">  491</span>            sys.modules[runtime_main] = main</div>
<div class="line"><span class="lineno">  492</span> </div>
<div class="line"><span class="lineno">  493</span>        loaded = unpickler.load()</div>
<div class="line"><span class="lineno">  494</span>    <span class="keywordflow">finally</span>:</div>
<div class="line"><span class="lineno">  495</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(filename, <span class="stringliteral">&#39;read&#39;</span>):  <span class="comment"># if newly opened file</span></div>
<div class="line"><span class="lineno">  496</span>            file.close()</div>
<div class="line"><span class="lineno">  497</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  498</span>            del sys.modules[runtime_main]</div>
<div class="line"><span class="lineno">  499</span>        <span class="keywordflow">except</span> (KeyError, NameError):</div>
<div class="line"><span class="lineno">  500</span>            <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  501</span>    <span class="keyword">assert</span> loaded <span class="keywordflow">is</span> main</div>
<div class="line"><span class="lineno">  502</span>    _restore_modules(unpickler, main)</div>
<div class="line"><span class="lineno">  503</span>    <span class="keywordflow">if</span> main <span class="keywordflow">is</span> _main_module <span class="keywordflow">or</span> main <span class="keywordflow">is</span> module:</div>
<div class="line"><span class="lineno">  504</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  505</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  506</span>        <span class="keywordflow">return</span> main</div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span><span class="comment"># Backward compatibility.</span></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dill_2session_8py_source.html#l00305">_identify_module()</a>, <a class="el" href="dill_2session_8py_source.html#l00293">_make_peekable()</a>, and <a class="el" href="dill_2session_8py_source.html#l00118">_restore_modules()</a>.</p>

<p class="reference">Referenced by <a class="el" href="dill_2session_8py_source.html#l00518">load_module_asdict()</a>, and <a class="el" href="dill_2session_8py_source.html#l00509">load_session()</a>.</p>

</div>
</div>
<a id="a82e29fe6cdc81ffd664d228b48f94beb" name="a82e29fe6cdc81ffd664d228b48f94beb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82e29fe6cdc81ffd664d228b48f94beb">&#9670;&#160;</a></span>load_module_asdict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict dill.session.load_module_asdict </td>
          <td>(</td>
          <td class="paramtype">Union[str, os.PathLike] </td>          <td class="paramname"><span class="paramname"><em>filename</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool </td>          <td class="paramname"><span class="paramname"><em>update</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**</td>          <td class="paramname"><span class="paramname"><em>kwds</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Load the contents of a saved module into a dictionary.

``load_module_asdict()`` is the near-equivalent of::

    lambda filename: vars(dill.load_module(filename)).copy()

however, does not alter the original module. Also, the path of
the loaded module is stored in the ``__session__`` attribute.

Args:
    filename: a path-like object or a readable stream. If `None`
        (the default), read from a named file in a temporary directory.
    update: if `True`, initialize the dictionary with the current state
        of the module prior to loading the state stored at filename.
    **kwds: extra keyword arguments passed to :py:class:`Unpickler()`

Raises:
    :py:exc:`UnpicklingError`: if unpickling fails

Returns:
    A copy of the restored module's dictionary.

Note:
    If ``update`` is True, the corresponding module may first be imported
    into the current namespace before the saved state is loaded from
    filename to the dictionary. Note that any module that is imported into
    the current namespace as a side-effect of using ``update`` will not be
    modified by loading the saved module in filename to a dictionary.

Example:
    &gt;&gt;&gt; import dill
    &gt;&gt;&gt; alist = [1, 2, 3]
    &gt;&gt;&gt; anum = 42
    &gt;&gt;&gt; dill.dump_module()
    &gt;&gt;&gt; anum = 0
    &gt;&gt;&gt; new_var = 'spam'
    &gt;&gt;&gt; main = dill.load_module_asdict()
    &gt;&gt;&gt; main['__name__'], main['__session__']
    ('__main__', '/tmp/session.pkl')
    &gt;&gt;&gt; main is globals() # loaded objects don't reference globals
    False
    &gt;&gt;&gt; main['alist'] == alist
    True
    &gt;&gt;&gt; main['alist'] is alist # was saved by value
    False
    &gt;&gt;&gt; main['anum'] == anum # changed after the session was saved
    False
    &gt;&gt;&gt; new_var in main # would be True if the option 'update' was set
    False
</pre> 
<p class="definition">Definition at line <a class="el" href="dill_2session_8py_source.html#l00514">514</a> of file <a class="el" href="dill_2session_8py_source.html">session.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  518</span>) -&gt; dict:</div>
<div class="line"><span class="lineno">  519</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  520</span><span class="stringliteral">    Load the contents of a saved module into a dictionary.</span></div>
<div class="line"><span class="lineno">  521</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  522</span><span class="stringliteral">    ``load_module_asdict()`` is the near-equivalent of::</span></div>
<div class="line"><span class="lineno">  523</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  524</span><span class="stringliteral">        lambda filename: vars(dill.load_module(filename)).copy()</span></div>
<div class="line"><span class="lineno">  525</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  526</span><span class="stringliteral">    however, does not alter the original module. Also, the path of</span></div>
<div class="line"><span class="lineno">  527</span><span class="stringliteral">    the loaded module is stored in the ``__session__`` attribute.</span></div>
<div class="line"><span class="lineno">  528</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  529</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  530</span><span class="stringliteral">        filename: a path-like object or a readable stream. If `None`</span></div>
<div class="line"><span class="lineno">  531</span><span class="stringliteral">            (the default), read from a named file in a temporary directory.</span></div>
<div class="line"><span class="lineno">  532</span><span class="stringliteral">        update: if `True`, initialize the dictionary with the current state</span></div>
<div class="line"><span class="lineno">  533</span><span class="stringliteral">            of the module prior to loading the state stored at filename.</span></div>
<div class="line"><span class="lineno">  534</span><span class="stringliteral">        **kwds: extra keyword arguments passed to :py:class:`Unpickler()`</span></div>
<div class="line"><span class="lineno">  535</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  536</span><span class="stringliteral">    Raises:</span></div>
<div class="line"><span class="lineno">  537</span><span class="stringliteral">        :py:exc:`UnpicklingError`: if unpickling fails</span></div>
<div class="line"><span class="lineno">  538</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  539</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  540</span><span class="stringliteral">        A copy of the restored module&#39;s dictionary.</span></div>
<div class="line"><span class="lineno">  541</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  542</span><span class="stringliteral">    Note:</span></div>
<div class="line"><span class="lineno">  543</span><span class="stringliteral">        If ``update`` is True, the corresponding module may first be imported</span></div>
<div class="line"><span class="lineno">  544</span><span class="stringliteral">        into the current namespace before the saved state is loaded from</span></div>
<div class="line"><span class="lineno">  545</span><span class="stringliteral">        filename to the dictionary. Note that any module that is imported into</span></div>
<div class="line"><span class="lineno">  546</span><span class="stringliteral">        the current namespace as a side-effect of using ``update`` will not be</span></div>
<div class="line"><span class="lineno">  547</span><span class="stringliteral">        modified by loading the saved module in filename to a dictionary.</span></div>
<div class="line"><span class="lineno">  548</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  549</span><span class="stringliteral">    Example:</span></div>
<div class="line"><span class="lineno">  550</span><span class="stringliteral">        &gt;&gt;&gt; import dill</span></div>
<div class="line"><span class="lineno">  551</span><span class="stringliteral">        &gt;&gt;&gt; alist = [1, 2, 3]</span></div>
<div class="line"><span class="lineno">  552</span><span class="stringliteral">        &gt;&gt;&gt; anum = 42</span></div>
<div class="line"><span class="lineno">  553</span><span class="stringliteral">        &gt;&gt;&gt; dill.dump_module()</span></div>
<div class="line"><span class="lineno">  554</span><span class="stringliteral">        &gt;&gt;&gt; anum = 0</span></div>
<div class="line"><span class="lineno">  555</span><span class="stringliteral">        &gt;&gt;&gt; new_var = &#39;spam&#39;</span></div>
<div class="line"><span class="lineno">  556</span><span class="stringliteral">        &gt;&gt;&gt; main = dill.load_module_asdict()</span></div>
<div class="line"><span class="lineno">  557</span><span class="stringliteral">        &gt;&gt;&gt; main[&#39;__name__&#39;], main[&#39;__session__&#39;]</span></div>
<div class="line"><span class="lineno">  558</span><span class="stringliteral">        (&#39;__main__&#39;, &#39;/tmp/session.pkl&#39;)</span></div>
<div class="line"><span class="lineno">  559</span><span class="stringliteral">        &gt;&gt;&gt; main is globals() # loaded objects don&#39;t reference globals</span></div>
<div class="line"><span class="lineno">  560</span><span class="stringliteral">        False</span></div>
<div class="line"><span class="lineno">  561</span><span class="stringliteral">        &gt;&gt;&gt; main[&#39;alist&#39;] == alist</span></div>
<div class="line"><span class="lineno">  562</span><span class="stringliteral">        True</span></div>
<div class="line"><span class="lineno">  563</span><span class="stringliteral">        &gt;&gt;&gt; main[&#39;alist&#39;] is alist # was saved by value</span></div>
<div class="line"><span class="lineno">  564</span><span class="stringliteral">        False</span></div>
<div class="line"><span class="lineno">  565</span><span class="stringliteral">        &gt;&gt;&gt; main[&#39;anum&#39;] == anum # changed after the session was saved</span></div>
<div class="line"><span class="lineno">  566</span><span class="stringliteral">        False</span></div>
<div class="line"><span class="lineno">  567</span><span class="stringliteral">        &gt;&gt;&gt; new_var in main # would be True if the option &#39;update&#39; was set</span></div>
<div class="line"><span class="lineno">  568</span><span class="stringliteral">        False</span></div>
<div class="line"><span class="lineno">  569</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  570</span>    <span class="keywordflow">if</span> <span class="stringliteral">&#39;module&#39;</span> <span class="keywordflow">in</span> kwds:</div>
<div class="line"><span class="lineno">  571</span>        <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;&#39;module&#39; is an invalid keyword argument for load_module_asdict()&quot;</span>)</div>
<div class="line"><span class="lineno">  572</span>    <span class="keywordflow">if</span> hasattr(filename, <span class="stringliteral">&#39;read&#39;</span>):</div>
<div class="line"><span class="lineno">  573</span>        file = filename</div>
<div class="line"><span class="lineno">  574</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  575</span>        <span class="keywordflow">if</span> filename <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  576</span>            filename = str(TEMPDIR/<span class="stringliteral">&#39;session.pkl&#39;</span>)</div>
<div class="line"><span class="lineno">  577</span>        file = open(filename, <span class="stringliteral">&#39;rb&#39;</span>)</div>
<div class="line"><span class="lineno">  578</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  579</span>        file = _make_peekable(file)</div>
<div class="line"><span class="lineno">  580</span>        main_name = _identify_module(file)</div>
<div class="line"><span class="lineno">  581</span>        old_main = sys.modules.get(main_name)</div>
<div class="line"><span class="lineno">  582</span>        main = ModuleType(main_name)</div>
<div class="line"><span class="lineno">  583</span>        <span class="keywordflow">if</span> update:</div>
<div class="line"><span class="lineno">  584</span>            <span class="keywordflow">if</span> old_main <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  585</span>                old_main = _import_module(main_name)</div>
<div class="line"><span class="lineno">  586</span>            main.__dict__.update(old_main.__dict__)</div>
<div class="line"><span class="lineno">  587</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  588</span>            main.__builtins__ = __builtin__</div>
<div class="line"><span class="lineno">  589</span>        sys.modules[main_name] = main</div>
<div class="line"><span class="lineno">  590</span>        load_module(file, **kwds)</div>
<div class="line"><span class="lineno">  591</span>    <span class="keywordflow">finally</span>:</div>
<div class="line"><span class="lineno">  592</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(filename, <span class="stringliteral">&#39;read&#39;</span>):  <span class="comment"># if newly opened file</span></div>
<div class="line"><span class="lineno">  593</span>            file.close()</div>
<div class="line"><span class="lineno">  594</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  595</span>            <span class="keywordflow">if</span> old_main <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  596</span>                del sys.modules[main_name]</div>
<div class="line"><span class="lineno">  597</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  598</span>                sys.modules[main_name] = old_main</div>
<div class="line"><span class="lineno">  599</span>        <span class="keywordflow">except</span> NameError:  <span class="comment"># failed before setting old_main</span></div>
<div class="line"><span class="lineno">  600</span>            <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  601</span>    main.__session__ = str(filename)</div>
<div class="line"><span class="lineno">  602</span>    <span class="keywordflow">return</span> main.__dict__</div>
<div class="line"><span class="lineno">  603</span> </div>
<div class="line"><span class="lineno">  604</span> </div>
<div class="line"><span class="lineno">  605</span><span class="comment"># Internal exports for backward compatibility with dill v0.3.5.1</span></div>
<div class="line"><span class="lineno">  606</span><span class="comment"># Can&#39;t be placed in dill._dill because of circular import problems.</span></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dill_2session_8py_source.html#l00305">_identify_module()</a>, <a class="el" href="dill_2session_8py_source.html#l00293">_make_peekable()</a>, and <a class="el" href="dill_2session_8py_source.html#l00332">load_module()</a>.</p>

</div>
</div>
<a id="ad8f2f9d6560dac8b0ba2f4e6d9443dba" name="ad8f2f9d6560dac8b0ba2f4e6d9443dba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8f2f9d6560dac8b0ba2f4e6d9443dba">&#9670;&#160;</a></span>load_session()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dill.session.load_session </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>filename</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>main</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**</td>          <td class="paramname"><span class="paramname"><em>kwds</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dill_2session_8py_source.html#l00509">509</a> of file <a class="el" href="dill_2session_8py_source.html">session.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  509</span><span class="keyword">def </span>load_session(filename=None, main=None, **kwds):</div>
<div class="line"><span class="lineno">  510</span>    warnings.warn(<span class="stringliteral">&quot;load_session() has been renamed load_module().&quot;</span>, PendingDeprecationWarning)</div>
<div class="line"><span class="lineno">  511</span>    load_module(filename, module=main, **kwds)</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dill_2session_8py_source.html#l00332">load_module()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a38f8b63fb2ba6dc808f9b4fae1932312" name="a38f8b63fb2ba6dc808f9b4fae1932312"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38f8b63fb2ba6dc808f9b4fae1932312">&#9670;&#160;</a></span>IMPORTED_AS_MODULES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dill.session.IMPORTED_AS_MODULES</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  (<span class="stringliteral">&#39;ctypes&#39;</span>, <span class="stringliteral">&#39;typing&#39;</span>, <span class="stringliteral">&#39;subprocess&#39;</span>, <span class="stringliteral">&#39;threading&#39;</span>,</div>
<div class="line"><span class="lineno">    2</span>                               <span class="stringliteral">r&#39;concurrent\.futures(\.\w+)?&#39;</span>, <span class="stringliteral">r&#39;multiprocessing(\.\w+)?&#39;</span>)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="dill_2session_8py_source.html#l00059">59</a> of file <a class="el" href="dill_2session_8py_source.html">session.py</a>.</p>

</div>
</div>
<a id="a2ae63499697f17e79758ccd0421c9b53" name="a2ae63499697f17e79758ccd0421c9b53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ae63499697f17e79758ccd0421c9b53">&#9670;&#160;</a></span>IMPORTED_AS_TYPES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tuple dill.session.IMPORTED_AS_TYPES = (ModuleType, TypeType, FunctionType, MethodType, BuiltinMethodType)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dill_2session_8py_source.html#l00056">56</a> of file <a class="el" href="dill_2session_8py_source.html">session.py</a>.</p>

</div>
</div>
<a id="a27b1258e7e69acee7802ee10f54c1a9d" name="a27b1258e7e69acee7802ee10f54c1a9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27b1258e7e69acee7802ee10f54c1a9d">&#9670;&#160;</a></span>TEMPDIR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dill.session.TEMPDIR = pathlib.PurePath(tempfile.gettempdir())</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dill_2session_8py_source.html#l00025">25</a> of file <a class="el" href="dill_2session_8py_source.html">session.py</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacedill.html">dill</a></li><li class="navelem"><a class="el" href="namespacedill_1_1session.html">session</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
