<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Read&amp;Watch: django.db.models.sql.query.JoinPromoter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Read&amp;Watch<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classdjango_1_1db_1_1models_1_1sql_1_1query_1_1_join_promoter.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classdjango_1_1db_1_1models_1_1sql_1_1query_1_1_join_promoter-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">django.db.models.sql.query.JoinPromoter Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a24331cb7900c91d5bbf815188c9f79b1" id="r_a24331cb7900c91d5bbf815188c9f79b1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a24331cb7900c91d5bbf815188c9f79b1">__init__</a> (self, <a class="el" href="#af9002d37dd306f4f9c4371b5c9776edf">connector</a>, <a class="el" href="#a749c14f70bd7676fdc34f8714d4a02bc">num_children</a>, <a class="el" href="#a6ee132d8c121408df66cb3b86f893e6d">negated</a>)</td></tr>
<tr class="separator:a24331cb7900c91d5bbf815188c9f79b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a959a1999c057052d02afb0421d0d1b50" id="r_a959a1999c057052d02afb0421d0d1b50"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a959a1999c057052d02afb0421d0d1b50">__repr__</a> (self)</td></tr>
<tr class="separator:a959a1999c057052d02afb0421d0d1b50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46b9db5021990b5db7b276f84b9e87fb" id="r_a46b9db5021990b5db7b276f84b9e87fb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a46b9db5021990b5db7b276f84b9e87fb">add_votes</a> (self, <a class="el" href="#ad18e99de0bcb0a72fe5eee82db815a11">votes</a>)</td></tr>
<tr class="separator:a46b9db5021990b5db7b276f84b9e87fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30da6182968be5a04d664c9e62e292ab" id="r_a30da6182968be5a04d664c9e62e292ab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a30da6182968be5a04d664c9e62e292ab">update_join_types</a> (self, query)</td></tr>
<tr class="separator:a30da6182968be5a04d664c9e62e292ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:af9002d37dd306f4f9c4371b5c9776edf" id="r_af9002d37dd306f4f9c4371b5c9776edf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af9002d37dd306f4f9c4371b5c9776edf">connector</a> = connector</td></tr>
<tr class="separator:af9002d37dd306f4f9c4371b5c9776edf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ee132d8c121408df66cb3b86f893e6d" id="r_a6ee132d8c121408df66cb3b86f893e6d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6ee132d8c121408df66cb3b86f893e6d">negated</a> = negated</td></tr>
<tr class="separator:a6ee132d8c121408df66cb3b86f893e6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa403d1e8f5d037b7e7c7b88484f03951" id="r_aa403d1e8f5d037b7e7c7b88484f03951"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa403d1e8f5d037b7e7c7b88484f03951">effective_connector</a> = OR</td></tr>
<tr class="separator:aa403d1e8f5d037b7e7c7b88484f03951"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a749c14f70bd7676fdc34f8714d4a02bc" id="r_a749c14f70bd7676fdc34f8714d4a02bc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a749c14f70bd7676fdc34f8714d4a02bc">num_children</a> = num_children</td></tr>
<tr class="separator:a749c14f70bd7676fdc34f8714d4a02bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad18e99de0bcb0a72fe5eee82db815a11" id="r_ad18e99de0bcb0a72fe5eee82db815a11"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad18e99de0bcb0a72fe5eee82db815a11">votes</a> = Counter()</td></tr>
<tr class="separator:ad18e99de0bcb0a72fe5eee82db815a11"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">A class to abstract away join promotion problems for complex filter
conditions.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02646">2646</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a24331cb7900c91d5bbf815188c9f79b1" name="a24331cb7900c91d5bbf815188c9f79b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24331cb7900c91d5bbf815188c9f79b1">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.JoinPromoter.__init__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>connector</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>num_children</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>negated</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02652">2652</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2652</span>    <span class="keyword">def </span>__init__(self, connector, num_children, negated):</div>
<div class="line"><span class="lineno"> 2653</span>        self.connector = connector</div>
<div class="line"><span class="lineno"> 2654</span>        self.negated = negated</div>
<div class="line"><span class="lineno"> 2655</span>        <span class="keywordflow">if</span> self.negated:</div>
<div class="line"><span class="lineno"> 2656</span>            <span class="keywordflow">if</span> connector == AND:</div>
<div class="line"><span class="lineno"> 2657</span>                self.effective_connector = OR</div>
<div class="line"><span class="lineno"> 2658</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2659</span>                self.effective_connector = AND</div>
<div class="line"><span class="lineno"> 2660</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2661</span>            self.effective_connector = self.connector</div>
<div class="line"><span class="lineno"> 2662</span>        self.num_children = num_children</div>
<div class="line"><span class="lineno"> 2663</span>        <span class="comment"># Maps of table alias to how many times it is seen as required for</span></div>
<div class="line"><span class="lineno"> 2664</span>        <span class="comment"># inner and/or outer joins.</span></div>
<div class="line"><span class="lineno"> 2665</span>        self.votes = Counter()</div>
<div class="line"><span class="lineno"> 2666</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="typing__extensions_8py_source.html#l02793">pip._vendor.typing_extensions.deprecated.__call__()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a959a1999c057052d02afb0421d0d1b50" name="a959a1999c057052d02afb0421d0d1b50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a959a1999c057052d02afb0421d0d1b50">&#9670;&#160;</a></span>__repr__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.JoinPromoter.__repr__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02667">2667</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2667</span>    <span class="keyword">def </span>__repr__(self):</div>
<div class="line"><span class="lineno"> 2668</span>        <span class="keywordflow">return</span> (</div>
<div class="line"><span class="lineno"> 2669</span>            f<span class="stringliteral">&quot;{self.__class__.__qualname__}(connector={self.connector!r}, &quot;</span></div>
<div class="line"><span class="lineno"> 2670</span>            f<span class="stringliteral">&quot;num_children={self.num_children!r}, negated={self.negated!r})&quot;</span></div>
<div class="line"><span class="lineno"> 2671</span>        )</div>
<div class="line"><span class="lineno"> 2672</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a46b9db5021990b5db7b276f84b9e87fb" name="a46b9db5021990b5db7b276f84b9e87fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46b9db5021990b5db7b276f84b9e87fb">&#9670;&#160;</a></span>add_votes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.JoinPromoter.add_votes </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>votes</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add single vote per item to self.votes. Parameter can be any
iterable.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02673">2673</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2673</span>    <span class="keyword">def </span>add_votes(self, votes):</div>
<div class="line"><span class="lineno"> 2674</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2675</span><span class="stringliteral">        Add single vote per item to self.votes. Parameter can be any</span></div>
<div class="line"><span class="lineno"> 2676</span><span class="stringliteral">        iterable.</span></div>
<div class="line"><span class="lineno"> 2677</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2678</span>        self.votes.update(votes)</div>
<div class="line"><span class="lineno"> 2679</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l02665">votes</a>.</p>

</div>
</div>
<a id="a30da6182968be5a04d664c9e62e292ab" name="a30da6182968be5a04d664c9e62e292ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30da6182968be5a04d664c9e62e292ab">&#9670;&#160;</a></span>update_join_types()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.JoinPromoter.update_join_types </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>query</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Change join types so that the generated query is as efficient as
possible, but still correct. So, change as many joins as possible
to INNER, but don't make OUTER joins INNER if that could remove
results from the query.
</pre> 
<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02680">2680</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2680</span>    <span class="keyword">def </span>update_join_types(self, query):</div>
<div class="line"><span class="lineno"> 2681</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2682</span><span class="stringliteral">        Change join types so that the generated query is as efficient as</span></div>
<div class="line"><span class="lineno"> 2683</span><span class="stringliteral">        possible, but still correct. So, change as many joins as possible</span></div>
<div class="line"><span class="lineno"> 2684</span><span class="stringliteral">        to INNER, but don&#39;t make OUTER joins INNER if that could remove</span></div>
<div class="line"><span class="lineno"> 2685</span><span class="stringliteral">        results from the query.</span></div>
<div class="line"><span class="lineno"> 2686</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2687</span>        to_promote = set()</div>
<div class="line"><span class="lineno"> 2688</span>        to_demote = set()</div>
<div class="line"><span class="lineno"> 2689</span>        <span class="comment"># The effective_connector is used so that NOT (a AND b) is treated</span></div>
<div class="line"><span class="lineno"> 2690</span>        <span class="comment"># similarly to (a OR b) for join promotion.</span></div>
<div class="line"><span class="lineno"> 2691</span>        <span class="keywordflow">for</span> table, votes <span class="keywordflow">in</span> self.votes.items():</div>
<div class="line"><span class="lineno"> 2692</span>            <span class="comment"># We must use outer joins in OR case when the join isn&#39;t contained</span></div>
<div class="line"><span class="lineno"> 2693</span>            <span class="comment"># in all of the joins. Otherwise the INNER JOIN itself could remove</span></div>
<div class="line"><span class="lineno"> 2694</span>            <span class="comment"># valid results. Consider the case where a model with rel_a and</span></div>
<div class="line"><span class="lineno"> 2695</span>            <span class="comment"># rel_b relations is queried with rel_a__col=1 | rel_b__col=2. Now,</span></div>
<div class="line"><span class="lineno"> 2696</span>            <span class="comment"># if rel_a join doesn&#39;t produce any results is null (for example</span></div>
<div class="line"><span class="lineno"> 2697</span>            <span class="comment"># reverse foreign key or null value in direct foreign key), and</span></div>
<div class="line"><span class="lineno"> 2698</span>            <span class="comment"># there is a matching row in rel_b with col=2, then an INNER join</span></div>
<div class="line"><span class="lineno"> 2699</span>            <span class="comment"># to rel_a would remove a valid match from the query. So, we need</span></div>
<div class="line"><span class="lineno"> 2700</span>            <span class="comment"># to promote any existing INNER to LOUTER (it is possible this</span></div>
<div class="line"><span class="lineno"> 2701</span>            <span class="comment"># promotion in turn will be demoted later on).</span></div>
<div class="line"><span class="lineno"> 2702</span>            <span class="keywordflow">if</span> self.effective_connector == OR <span class="keywordflow">and</span> votes &lt; self.num_children:</div>
<div class="line"><span class="lineno"> 2703</span>                to_promote.add(table)</div>
<div class="line"><span class="lineno"> 2704</span>            <span class="comment"># If connector is AND and there is a filter that can match only</span></div>
<div class="line"><span class="lineno"> 2705</span>            <span class="comment"># when there is a joinable row, then use INNER. For example, in</span></div>
<div class="line"><span class="lineno"> 2706</span>            <span class="comment"># rel_a__col=1 &amp; rel_b__col=2, if either of the rels produce NULL</span></div>
<div class="line"><span class="lineno"> 2707</span>            <span class="comment"># as join output, then the col=1 or col=2 can&#39;t match (as</span></div>
<div class="line"><span class="lineno"> 2708</span>            <span class="comment"># NULL=anything is always false).</span></div>
<div class="line"><span class="lineno"> 2709</span>            <span class="comment"># For the OR case, if all children voted for a join to be inner,</span></div>
<div class="line"><span class="lineno"> 2710</span>            <span class="comment"># then we can use INNER for the join. For example:</span></div>
<div class="line"><span class="lineno"> 2711</span>            <span class="comment">#     (rel_a__col__icontains=Alex | rel_a__col__icontains=Russell)</span></div>
<div class="line"><span class="lineno"> 2712</span>            <span class="comment"># then if rel_a doesn&#39;t produce any rows, the whole condition</span></div>
<div class="line"><span class="lineno"> 2713</span>            <span class="comment"># can&#39;t match. Hence we can safely use INNER join.</span></div>
<div class="line"><span class="lineno"> 2714</span>            <span class="keywordflow">if</span> self.effective_connector == AND <span class="keywordflow">or</span> (</div>
<div class="line"><span class="lineno"> 2715</span>                self.effective_connector == OR <span class="keywordflow">and</span> votes == self.num_children</div>
<div class="line"><span class="lineno"> 2716</span>            ):</div>
<div class="line"><span class="lineno"> 2717</span>                to_demote.add(table)</div>
<div class="line"><span class="lineno"> 2718</span>            <span class="comment"># Finally, what happens in cases where we have:</span></div>
<div class="line"><span class="lineno"> 2719</span>            <span class="comment">#    (rel_a__col=1|rel_b__col=2) &amp; rel_a__col__gte=0</span></div>
<div class="line"><span class="lineno"> 2720</span>            <span class="comment"># Now, we first generate the OR clause, and promote joins for it</span></div>
<div class="line"><span class="lineno"> 2721</span>            <span class="comment"># in the first if branch above. Both rel_a and rel_b are promoted</span></div>
<div class="line"><span class="lineno"> 2722</span>            <span class="comment"># to LOUTER joins. After that we do the AND case. The OR case</span></div>
<div class="line"><span class="lineno"> 2723</span>            <span class="comment"># voted no inner joins but the rel_a__col__gte=0 votes inner join</span></div>
<div class="line"><span class="lineno"> 2724</span>            <span class="comment"># for rel_a. We demote it back to INNER join (in AND case a single</span></div>
<div class="line"><span class="lineno"> 2725</span>            <span class="comment"># vote is enough). The demotion is OK, if rel_a doesn&#39;t produce</span></div>
<div class="line"><span class="lineno"> 2726</span>            <span class="comment"># rows, then the rel_a__col__gte=0 clause can&#39;t be true, and thus</span></div>
<div class="line"><span class="lineno"> 2727</span>            <span class="comment"># the whole clause must be false. So, it is safe to use INNER</span></div>
<div class="line"><span class="lineno"> 2728</span>            <span class="comment"># join.</span></div>
<div class="line"><span class="lineno"> 2729</span>            <span class="comment"># Note that in this example we could just as well have the __gte</span></div>
<div class="line"><span class="lineno"> 2730</span>            <span class="comment"># clause and the OR clause swapped. Or we could replace the __gte</span></div>
<div class="line"><span class="lineno"> 2731</span>            <span class="comment"># clause with an OR clause containing rel_a__col=1|rel_a__col=2,</span></div>
<div class="line"><span class="lineno"> 2732</span>            <span class="comment"># and again we could safely demote to INNER.</span></div>
<div class="line"><span class="lineno"> 2733</span>        query.promote_joins(to_promote)</div>
<div class="line"><span class="lineno"> 2734</span>        query.demote_joins(to_demote)</div>
<div class="line"><span class="lineno"> 2735</span>        <span class="keywordflow">return</span> to_demote</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sql_2query_8py_source.html#l02657">effective_connector</a>, <a class="el" href="sql_2query_8py_source.html#l02662">num_children</a>, and <a class="el" href="sql_2query_8py_source.html#l02665">votes</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af9002d37dd306f4f9c4371b5c9776edf" name="af9002d37dd306f4f9c4371b5c9776edf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9002d37dd306f4f9c4371b5c9776edf">&#9670;&#160;</a></span>connector</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.JoinPromoter.connector = connector</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02653">2653</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="django_2utils_2tree_8py_source.html#l00047">django.utils.tree.Node.__copy__()</a>, <a class="el" href="django_2utils_2tree_8py_source.html#l00054">django.utils.tree.Node.__deepcopy__()</a>, <a class="el" href="django_2utils_2tree_8py_source.html#l00071">django.utils.tree.Node.__eq__()</a>, <a class="el" href="django_2utils_2tree_8py_source.html#l00079">django.utils.tree.Node.__hash__()</a>, <a class="el" href="django_2utils_2tree_8py_source.html#l00040">django.utils.tree.Node.__str__()</a>, <a class="el" href="django_2utils_2tree_8py_source.html#l00089">django.utils.tree.Node.add()</a>, <a class="el" href="where_8py_source.html#l00217">django.db.models.sql.where.WhereNode.clone()</a>, <a class="el" href="query__utils_8py_source.html#l00145">django.db.models.query_utils.Q.deconstruct()</a>, and <a class="el" href="where_8py_source.html#l00230">django.db.models.sql.where.WhereNode.replace_expressions()</a>.</p>

</div>
</div>
<a id="aa403d1e8f5d037b7e7c7b88484f03951" name="aa403d1e8f5d037b7e7c7b88484f03951"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa403d1e8f5d037b7e7c7b88484f03951">&#9670;&#160;</a></span>effective_connector</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.JoinPromoter.effective_connector = OR</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02657">2657</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02680">update_join_types()</a>.</p>

</div>
</div>
<a id="a6ee132d8c121408df66cb3b86f893e6d" name="a6ee132d8c121408df66cb3b86f893e6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ee132d8c121408df66cb3b86f893e6d">&#9670;&#160;</a></span>negated</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.JoinPromoter.negated = negated</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02654">2654</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="django_2utils_2tree_8py_source.html#l00047">django.utils.tree.Node.__copy__()</a>, <a class="el" href="django_2utils_2tree_8py_source.html#l00054">django.utils.tree.Node.__deepcopy__()</a>, <a class="el" href="django_2utils_2tree_8py_source.html#l00071">django.utils.tree.Node.__eq__()</a>, <a class="el" href="django_2utils_2tree_8py_source.html#l00079">django.utils.tree.Node.__hash__()</a>, <a class="el" href="django_2utils_2tree_8py_source.html#l00040">django.utils.tree.Node.__str__()</a>, <a class="el" href="where_8py_source.html#l00217">django.db.models.sql.where.WhereNode.clone()</a>, <a class="el" href="django_2utils_2tree_8py_source.html#l00124">django.utils.tree.Node.negate()</a>, and <a class="el" href="where_8py_source.html#l00230">django.db.models.sql.where.WhereNode.replace_expressions()</a>.</p>

</div>
</div>
<a id="a749c14f70bd7676fdc34f8714d4a02bc" name="a749c14f70bd7676fdc34f8714d4a02bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a749c14f70bd7676fdc34f8714d4a02bc">&#9670;&#160;</a></span>num_children</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.JoinPromoter.num_children = num_children</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02662">2662</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02680">update_join_types()</a>.</p>

</div>
</div>
<a id="ad18e99de0bcb0a72fe5eee82db815a11" name="ad18e99de0bcb0a72fe5eee82db815a11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad18e99de0bcb0a72fe5eee82db815a11">&#9670;&#160;</a></span>votes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.models.sql.query.JoinPromoter.votes = Counter()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sql_2query_8py_source.html#l02665">2665</a> of file <a class="el" href="sql_2query_8py_source.html">query.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="sql_2query_8py_source.html#l02673">add_votes()</a>, and <a class="el" href="sql_2query_8py_source.html#l02680">update_join_types()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>project/ENV/Lib/site-packages/django/db/models/sql/<a class="el" href="sql_2query_8py_source.html">query.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacedjango.html">django</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1db.html">db</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1db_1_1models.html">models</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1db_1_1models_1_1sql.html">sql</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1db_1_1models_1_1sql_1_1query.html">query</a></li><li class="navelem"><a class="el" href="classdjango_1_1db_1_1models_1_1sql_1_1query_1_1_join_promoter.html">JoinPromoter</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
