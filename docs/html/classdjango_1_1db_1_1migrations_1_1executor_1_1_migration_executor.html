<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Read&amp;Watch: django.db.migrations.executor.MigrationExecutor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Read&amp;Watch<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classdjango_1_1db_1_1migrations_1_1executor_1_1_migration_executor.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classdjango_1_1db_1_1migrations_1_1executor_1_1_migration_executor-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">django.db.migrations.executor.MigrationExecutor Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1477a333393bf6937872bfbcf6e92eae" id="r_a1477a333393bf6937872bfbcf6e92eae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1477a333393bf6937872bfbcf6e92eae">__init__</a> (self, <a class="el" href="#a6c746bbe3762aa973593a8c156130657">connection</a>, <a class="el" href="#a49c027b7985d0e8ea73200698de3279a">progress_callback</a>=None)</td></tr>
<tr class="separator:a1477a333393bf6937872bfbcf6e92eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a631428a359bc1bc8ddb42461653cca" id="r_a6a631428a359bc1bc8ddb42461653cca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a631428a359bc1bc8ddb42461653cca">migration_plan</a> (self, targets, clean_start=False)</td></tr>
<tr class="separator:a6a631428a359bc1bc8ddb42461653cca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d41c1ebde143043232873af2bef51a1" id="r_a3d41c1ebde143043232873af2bef51a1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3d41c1ebde143043232873af2bef51a1">migrate</a> (self, targets, plan=None, state=None, fake=False, fake_initial=False)</td></tr>
<tr class="separator:a3d41c1ebde143043232873af2bef51a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fb41ce1752ad66bbd077781881cc1b7" id="r_a5fb41ce1752ad66bbd077781881cc1b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5fb41ce1752ad66bbd077781881cc1b7">apply_migration</a> (self, state, migration, fake=False, fake_initial=False)</td></tr>
<tr class="separator:a5fb41ce1752ad66bbd077781881cc1b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17528206250c4c61af03400234fe3991" id="r_a17528206250c4c61af03400234fe3991"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a17528206250c4c61af03400234fe3991">record_migration</a> (self, migration)</td></tr>
<tr class="separator:a17528206250c4c61af03400234fe3991"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfa1f8f366a5596c93f9336c04255dfb" id="r_adfa1f8f366a5596c93f9336c04255dfb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adfa1f8f366a5596c93f9336c04255dfb">unapply_migration</a> (self, state, migration, fake=False)</td></tr>
<tr class="separator:adfa1f8f366a5596c93f9336c04255dfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d362323af6b5606d8ec498a3609e6e6" id="r_a7d362323af6b5606d8ec498a3609e6e6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7d362323af6b5606d8ec498a3609e6e6">check_replacements</a> (self)</td></tr>
<tr class="separator:a7d362323af6b5606d8ec498a3609e6e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5187f7d12375bec66bd59e906b6fa84" id="r_ae5187f7d12375bec66bd59e906b6fa84"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae5187f7d12375bec66bd59e906b6fa84">detect_soft_applied</a> (self, project_state, migration)</td></tr>
<tr class="separator:ae5187f7d12375bec66bd59e906b6fa84"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a6c746bbe3762aa973593a8c156130657" id="r_a6c746bbe3762aa973593a8c156130657"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c746bbe3762aa973593a8c156130657">connection</a> = connection</td></tr>
<tr class="separator:a6c746bbe3762aa973593a8c156130657"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb4f0e2105923a3274fb795b1667f9eb" id="r_adb4f0e2105923a3274fb795b1667f9eb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adb4f0e2105923a3274fb795b1667f9eb">loader</a> = <a class="el" href="classdjango_1_1db_1_1migrations_1_1loader_1_1_migration_loader.html">MigrationLoader</a>(self.connection)</td></tr>
<tr class="separator:adb4f0e2105923a3274fb795b1667f9eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7e13a39158fef3f62da91ee964b612a" id="r_ac7e13a39158fef3f62da91ee964b612a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac7e13a39158fef3f62da91ee964b612a">recorder</a> = <a class="el" href="classdjango_1_1db_1_1migrations_1_1recorder_1_1_migration_recorder.html">MigrationRecorder</a>(self.connection)</td></tr>
<tr class="separator:ac7e13a39158fef3f62da91ee964b612a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49c027b7985d0e8ea73200698de3279a" id="r_a49c027b7985d0e8ea73200698de3279a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a49c027b7985d0e8ea73200698de3279a">progress_callback</a> = progress_callback</td></tr>
<tr class="separator:a49c027b7985d0e8ea73200698de3279a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:afaf30aa5a76cba76ebcdb61c9cdc6733" id="r_afaf30aa5a76cba76ebcdb61c9cdc6733"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afaf30aa5a76cba76ebcdb61c9cdc6733">_create_project_state</a> (self, with_applied_migrations=False)</td></tr>
<tr class="separator:afaf30aa5a76cba76ebcdb61c9cdc6733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6394e1f1c0780231233cfcf879892a9c" id="r_a6394e1f1c0780231233cfcf879892a9c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6394e1f1c0780231233cfcf879892a9c">_migrate_all_forwards</a> (self, state, plan, full_plan, fake, fake_initial)</td></tr>
<tr class="separator:a6394e1f1c0780231233cfcf879892a9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0de959c3ef56dd5973ad2f87e6ad8ad2" id="r_a0de959c3ef56dd5973ad2f87e6ad8ad2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0de959c3ef56dd5973ad2f87e6ad8ad2">_migrate_all_backwards</a> (self, plan, full_plan, fake)</td></tr>
<tr class="separator:a0de959c3ef56dd5973ad2f87e6ad8ad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">End-to-end migration execution - load migrations and run them up or down
to a specified set of targets.
</pre> 
<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00010">10</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1477a333393bf6937872bfbcf6e92eae" name="a1477a333393bf6937872bfbcf6e92eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1477a333393bf6937872bfbcf6e92eae">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.migrations.executor.MigrationExecutor.__init__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>connection</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>progress_callback</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00016">16</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   16</span>    <span class="keyword">def </span>__init__(self, connection, progress_callback=None):</div>
<div class="line"><span class="lineno">   17</span>        self.connection = connection</div>
<div class="line"><span class="lineno">   18</span>        self.loader = MigrationLoader(self.connection)</div>
<div class="line"><span class="lineno">   19</span>        self.recorder = MigrationRecorder(self.connection)</div>
<div class="line"><span class="lineno">   20</span>        self.progress_callback = progress_callback</div>
<div class="line"><span class="lineno">   21</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="typing__extensions_8py_source.html#l02793">pip._vendor.typing_extensions.deprecated.__call__()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="afaf30aa5a76cba76ebcdb61c9cdc6733" name="afaf30aa5a76cba76ebcdb61c9cdc6733"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaf30aa5a76cba76ebcdb61c9cdc6733">&#9670;&#160;</a></span>_create_project_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.migrations.executor.MigrationExecutor._create_project_state </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>with_applied_migrations</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Create a project state including all the applications without
migrations and applied migrations if with_applied_migrations=True.
</pre> 
<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00073">73</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   73</span>    <span class="keyword">def </span>_create_project_state(self, with_applied_migrations=False):</div>
<div class="line"><span class="lineno">   74</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   75</span><span class="stringliteral">        Create a project state including all the applications without</span></div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral">        migrations and applied migrations if with_applied_migrations=True.</span></div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   78</span>        state = ProjectState(real_apps=self.loader.unmigrated_apps)</div>
<div class="line"><span class="lineno">   79</span>        <span class="keywordflow">if</span> with_applied_migrations:</div>
<div class="line"><span class="lineno">   80</span>            <span class="comment"># Create the forwards plan Django would follow on an empty database</span></div>
<div class="line"><span class="lineno">   81</span>            full_plan = self.migration_plan(</div>
<div class="line"><span class="lineno">   82</span>                self.loader.graph.leaf_nodes(), clean_start=<span class="keyword">True</span></div>
<div class="line"><span class="lineno">   83</span>            )</div>
<div class="line"><span class="lineno">   84</span>            applied_migrations = {</div>
<div class="line"><span class="lineno">   85</span>                self.loader.graph.nodes[key]</div>
<div class="line"><span class="lineno">   86</span>                <span class="keywordflow">for</span> key <span class="keywordflow">in</span> self.loader.applied_migrations</div>
<div class="line"><span class="lineno">   87</span>                <span class="keywordflow">if</span> key <span class="keywordflow">in</span> self.loader.graph.nodes</div>
<div class="line"><span class="lineno">   88</span>            }</div>
<div class="line"><span class="lineno">   89</span>            <span class="keywordflow">for</span> migration, _ <span class="keywordflow">in</span> full_plan:</div>
<div class="line"><span class="lineno">   90</span>                <span class="keywordflow">if</span> migration <span class="keywordflow">in</span> applied_migrations:</div>
<div class="line"><span class="lineno">   91</span>                    migration.mutate_state(state, preserve=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">   92</span>        <span class="keywordflow">return</span> state</div>
<div class="line"><span class="lineno">   93</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="executor_8py_source.html#l00018">loader</a>, and <a class="el" href="executor_8py_source.html#l00022">migration_plan()</a>.</p>

<p class="reference">Referenced by <a class="el" href="executor_8py_source.html#l00174">_migrate_all_backwards()</a>, and <a class="el" href="executor_8py_source.html#l00094">migrate()</a>.</p>

</div>
</div>
<a id="a0de959c3ef56dd5973ad2f87e6ad8ad2" name="a0de959c3ef56dd5973ad2f87e6ad8ad2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0de959c3ef56dd5973ad2f87e6ad8ad2">&#9670;&#160;</a></span>_migrate_all_backwards()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.migrations.executor.MigrationExecutor._migrate_all_backwards </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>plan</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>full_plan</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>fake</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Take a list of 2-tuples of the form (migration instance, True) and
unapply them in reverse order they occur in the full_plan.

Since unapplying a migration requires the project state prior to that
migration, Django will compute the migration states before each of them
in a first run over the plan and then unapply them in a second run over
the plan.
</pre> 
<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00174">174</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  174</span>    <span class="keyword">def </span>_migrate_all_backwards(self, plan, full_plan, fake):</div>
<div class="line"><span class="lineno">  175</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  176</span><span class="stringliteral">        Take a list of 2-tuples of the form (migration instance, True) and</span></div>
<div class="line"><span class="lineno">  177</span><span class="stringliteral">        unapply them in reverse order they occur in the full_plan.</span></div>
<div class="line"><span class="lineno">  178</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  179</span><span class="stringliteral">        Since unapplying a migration requires the project state prior to that</span></div>
<div class="line"><span class="lineno">  180</span><span class="stringliteral">        migration, Django will compute the migration states before each of them</span></div>
<div class="line"><span class="lineno">  181</span><span class="stringliteral">        in a first run over the plan and then unapply them in a second run over</span></div>
<div class="line"><span class="lineno">  182</span><span class="stringliteral">        the plan.</span></div>
<div class="line"><span class="lineno">  183</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  184</span>        migrations_to_run = {m[0] <span class="keywordflow">for</span> m <span class="keywordflow">in</span> plan}</div>
<div class="line"><span class="lineno">  185</span>        <span class="comment"># Holds all migration states prior to the migrations being unapplied</span></div>
<div class="line"><span class="lineno">  186</span>        states = {}</div>
<div class="line"><span class="lineno">  187</span>        state = self._create_project_state()</div>
<div class="line"><span class="lineno">  188</span>        applied_migrations = {</div>
<div class="line"><span class="lineno">  189</span>            self.loader.graph.nodes[key]</div>
<div class="line"><span class="lineno">  190</span>            <span class="keywordflow">for</span> key <span class="keywordflow">in</span> self.loader.applied_migrations</div>
<div class="line"><span class="lineno">  191</span>            <span class="keywordflow">if</span> key <span class="keywordflow">in</span> self.loader.graph.nodes</div>
<div class="line"><span class="lineno">  192</span>        }</div>
<div class="line"><span class="lineno">  193</span>        <span class="keywordflow">if</span> self.progress_callback:</div>
<div class="line"><span class="lineno">  194</span>            self.progress_callback(<span class="stringliteral">&quot;render_start&quot;</span>)</div>
<div class="line"><span class="lineno">  195</span>        <span class="keywordflow">for</span> migration, _ <span class="keywordflow">in</span> full_plan:</div>
<div class="line"><span class="lineno">  196</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> migrations_to_run:</div>
<div class="line"><span class="lineno">  197</span>                <span class="comment"># We remove every migration that we applied from this set so</span></div>
<div class="line"><span class="lineno">  198</span>                <span class="comment"># that we can bail out once the last migration has been applied</span></div>
<div class="line"><span class="lineno">  199</span>                <span class="comment"># and don&#39;t always run until the very end of the migration</span></div>
<div class="line"><span class="lineno">  200</span>                <span class="comment"># process.</span></div>
<div class="line"><span class="lineno">  201</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  202</span>            <span class="keywordflow">if</span> migration <span class="keywordflow">in</span> migrations_to_run:</div>
<div class="line"><span class="lineno">  203</span>                <span class="keywordflow">if</span> <span class="stringliteral">&quot;apps&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> state.__dict__:</div>
<div class="line"><span class="lineno">  204</span>                    state.apps  <span class="comment"># Render all -- performance critical</span></div>
<div class="line"><span class="lineno">  205</span>                <span class="comment"># The state before this migration</span></div>
<div class="line"><span class="lineno">  206</span>                states[migration] = state</div>
<div class="line"><span class="lineno">  207</span>                <span class="comment"># The old state keeps as-is, we continue with the new state</span></div>
<div class="line"><span class="lineno">  208</span>                state = migration.mutate_state(state, preserve=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  209</span>                migrations_to_run.remove(migration)</div>
<div class="line"><span class="lineno">  210</span>            <span class="keywordflow">elif</span> migration <span class="keywordflow">in</span> applied_migrations:</div>
<div class="line"><span class="lineno">  211</span>                <span class="comment"># Only mutate the state if the migration is actually applied</span></div>
<div class="line"><span class="lineno">  212</span>                <span class="comment"># to make sure the resulting state doesn&#39;t include changes</span></div>
<div class="line"><span class="lineno">  213</span>                <span class="comment"># from unrelated migrations.</span></div>
<div class="line"><span class="lineno">  214</span>                migration.mutate_state(state, preserve=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  215</span>        <span class="keywordflow">if</span> self.progress_callback:</div>
<div class="line"><span class="lineno">  216</span>            self.progress_callback(<span class="stringliteral">&quot;render_success&quot;</span>)</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>        <span class="keywordflow">for</span> migration, _ <span class="keywordflow">in</span> plan:</div>
<div class="line"><span class="lineno">  219</span>            self.unapply_migration(states[migration], migration, fake=fake)</div>
<div class="line"><span class="lineno">  220</span>            applied_migrations.remove(migration)</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>        <span class="comment"># Generate the post migration state by starting from the state before</span></div>
<div class="line"><span class="lineno">  223</span>        <span class="comment"># the last migration is unapplied and mutating it to include all the</span></div>
<div class="line"><span class="lineno">  224</span>        <span class="comment"># remaining applied migrations.</span></div>
<div class="line"><span class="lineno">  225</span>        last_unapplied_migration = plan[-1][0]</div>
<div class="line"><span class="lineno">  226</span>        state = states[last_unapplied_migration]</div>
<div class="line"><span class="lineno">  227</span>        <span class="comment"># Avoid mutating state with apps rendered as it&#39;s an expensive</span></div>
<div class="line"><span class="lineno">  228</span>        <span class="comment"># operation.</span></div>
<div class="line"><span class="lineno">  229</span>        del state.apps</div>
<div class="line"><span class="lineno">  230</span>        <span class="keywordflow">for</span> index, (migration, _) <span class="keywordflow">in</span> enumerate(full_plan):</div>
<div class="line"><span class="lineno">  231</span>            <span class="keywordflow">if</span> migration == last_unapplied_migration:</div>
<div class="line"><span class="lineno">  232</span>                <span class="keywordflow">for</span> migration, _ <span class="keywordflow">in</span> full_plan[index:]:</div>
<div class="line"><span class="lineno">  233</span>                    <span class="keywordflow">if</span> migration <span class="keywordflow">in</span> applied_migrations:</div>
<div class="line"><span class="lineno">  234</span>                        migration.mutate_state(state, preserve=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  235</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>        <span class="keywordflow">return</span> state</div>
<div class="line"><span class="lineno">  238</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="executor_8py_source.html#l00073">_create_project_state()</a>, <a class="el" href="executor_8py_source.html#l00018">loader</a>, <a class="el" href="executor_8py_source.html#l00020">progress_callback</a>, and <a class="el" href="executor_8py_source.html#l00274">unapply_migration()</a>.</p>

<p class="reference">Referenced by <a class="el" href="executor_8py_source.html#l00094">migrate()</a>.</p>

</div>
</div>
<a id="a6394e1f1c0780231233cfcf879892a9c" name="a6394e1f1c0780231233cfcf879892a9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6394e1f1c0780231233cfcf879892a9c">&#9670;&#160;</a></span>_migrate_all_forwards()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">django.db.migrations.executor.MigrationExecutor._migrate_all_forwards </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>plan</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>full_plan</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>fake</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>fake_initial</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Take a list of 2-tuples of the form (migration instance, False) and
apply them in the order they occur in the full_plan.
</pre> 
<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00147">147</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  147</span>    <span class="keyword">def </span>_migrate_all_forwards(self, state, plan, full_plan, fake, fake_initial):</div>
<div class="line"><span class="lineno">  148</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  149</span><span class="stringliteral">        Take a list of 2-tuples of the form (migration instance, False) and</span></div>
<div class="line"><span class="lineno">  150</span><span class="stringliteral">        apply them in the order they occur in the full_plan.</span></div>
<div class="line"><span class="lineno">  151</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  152</span>        migrations_to_run = {m[0] <span class="keywordflow">for</span> m <span class="keywordflow">in</span> plan}</div>
<div class="line"><span class="lineno">  153</span>        <span class="keywordflow">for</span> migration, _ <span class="keywordflow">in</span> full_plan:</div>
<div class="line"><span class="lineno">  154</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> migrations_to_run:</div>
<div class="line"><span class="lineno">  155</span>                <span class="comment"># We remove every migration that we applied from these sets so</span></div>
<div class="line"><span class="lineno">  156</span>                <span class="comment"># that we can bail out once the last migration has been applied</span></div>
<div class="line"><span class="lineno">  157</span>                <span class="comment"># and don&#39;t always run until the very end of the migration</span></div>
<div class="line"><span class="lineno">  158</span>                <span class="comment"># process.</span></div>
<div class="line"><span class="lineno">  159</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  160</span>            <span class="keywordflow">if</span> migration <span class="keywordflow">in</span> migrations_to_run:</div>
<div class="line"><span class="lineno">  161</span>                <span class="keywordflow">if</span> <span class="stringliteral">&quot;apps&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> state.__dict__:</div>
<div class="line"><span class="lineno">  162</span>                    <span class="keywordflow">if</span> self.progress_callback:</div>
<div class="line"><span class="lineno">  163</span>                        self.progress_callback(<span class="stringliteral">&quot;render_start&quot;</span>)</div>
<div class="line"><span class="lineno">  164</span>                    state.apps  <span class="comment"># Render all -- performance critical</span></div>
<div class="line"><span class="lineno">  165</span>                    <span class="keywordflow">if</span> self.progress_callback:</div>
<div class="line"><span class="lineno">  166</span>                        self.progress_callback(<span class="stringliteral">&quot;render_success&quot;</span>)</div>
<div class="line"><span class="lineno">  167</span>                state = self.apply_migration(</div>
<div class="line"><span class="lineno">  168</span>                    state, migration, fake=fake, fake_initial=fake_initial</div>
<div class="line"><span class="lineno">  169</span>                )</div>
<div class="line"><span class="lineno">  170</span>                migrations_to_run.remove(migration)</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>        <span class="keywordflow">return</span> state</div>
<div class="line"><span class="lineno">  173</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="executor_8py_source.html#l00239">apply_migration()</a>, and <a class="el" href="executor_8py_source.html#l00020">progress_callback</a>.</p>

<p class="reference">Referenced by <a class="el" href="executor_8py_source.html#l00094">migrate()</a>.</p>

</div>
</div>
<a id="a5fb41ce1752ad66bbd077781881cc1b7" name="a5fb41ce1752ad66bbd077781881cc1b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fb41ce1752ad66bbd077781881cc1b7">&#9670;&#160;</a></span>apply_migration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.migrations.executor.MigrationExecutor.apply_migration </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>migration</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>fake</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>fake_initial</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Run a migration forwards.</pre> 
<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00239">239</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  239</span>    <span class="keyword">def </span>apply_migration(self, state, migration, fake=False, fake_initial=False):</div>
<div class="line"><span class="lineno">  240</span>        <span class="stringliteral">&quot;&quot;&quot;Run a migration forwards.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  241</span>        migration_recorded = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  242</span>        <span class="keywordflow">if</span> self.progress_callback:</div>
<div class="line"><span class="lineno">  243</span>            self.progress_callback(<span class="stringliteral">&quot;apply_start&quot;</span>, migration, fake)</div>
<div class="line"><span class="lineno">  244</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> fake:</div>
<div class="line"><span class="lineno">  245</span>            <span class="keywordflow">if</span> fake_initial:</div>
<div class="line"><span class="lineno">  246</span>                <span class="comment"># Test to see if this is an already-applied initial migration</span></div>
<div class="line"><span class="lineno">  247</span>                applied, state = self.detect_soft_applied(state, migration)</div>
<div class="line"><span class="lineno">  248</span>                <span class="keywordflow">if</span> applied:</div>
<div class="line"><span class="lineno">  249</span>                    fake = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  250</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> fake:</div>
<div class="line"><span class="lineno">  251</span>                <span class="comment"># Alright, do it normally</span></div>
<div class="line"><span class="lineno">  252</span>                <span class="keyword">with</span> self.connection.schema_editor(</div>
<div class="line"><span class="lineno">  253</span>                    atomic=migration.atomic</div>
<div class="line"><span class="lineno">  254</span>                ) <span class="keyword">as</span> schema_editor:</div>
<div class="line"><span class="lineno">  255</span>                    state = migration.apply(state, schema_editor)</div>
<div class="line"><span class="lineno">  256</span>                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> schema_editor.deferred_sql:</div>
<div class="line"><span class="lineno">  257</span>                        self.record_migration(migration)</div>
<div class="line"><span class="lineno">  258</span>                        migration_recorded = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  259</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> migration_recorded:</div>
<div class="line"><span class="lineno">  260</span>            self.record_migration(migration)</div>
<div class="line"><span class="lineno">  261</span>        <span class="comment"># Report progress</span></div>
<div class="line"><span class="lineno">  262</span>        <span class="keywordflow">if</span> self.progress_callback:</div>
<div class="line"><span class="lineno">  263</span>            self.progress_callback(<span class="stringliteral">&quot;apply_success&quot;</span>, migration, fake)</div>
<div class="line"><span class="lineno">  264</span>        <span class="keywordflow">return</span> state</div>
<div class="line"><span class="lineno">  265</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="contrib_2gis_2db_2backends_2base_2operations_8py_source.html#l00190">django.contrib.gis.db.backends.base.operations.BaseSpatialOperations.connection</a>, <a class="el" href="contrib_2gis_2db_2backends_2mysql_2operations_8py_source.html#l00114">django.contrib.gis.db.backends.mysql.operations.MySQLOperations.connection</a>, <a class="el" href="contrib_2gis_2db_2backends_2oracle_2operations_8py_source.html#l00183">django.contrib.gis.db.backends.oracle.operations.OracleOperations.connection</a>, <a class="el" href="django_2contrib_2gis_2db_2backends_2postgis_2base_8py_source.html#l00123">django.contrib.gis.db.backends.postgis.base.DatabaseWrapper.connection</a>, <a class="el" href="contrib_2gis_2db_2backends_2spatialite_2operations_8py_source.html#l00134">django.contrib.gis.db.backends.spatialite.operations.SpatiaLiteOperations.connection</a>, <a class="el" href="smtp_8py_source.html#l00052">django.core.mail.backends.smtp.EmailBackend.connection</a>, <a class="el" href="django_2core_2mail_2message_8py_source.html#l00252">django.core.mail.message.EmailMessage.connection</a>, <a class="el" href="django_2db_2backends_2base_2base_8py_source.html#l00056">django.db.backends.base.base.BaseDatabaseWrapper.connection</a>, <a class="el" href="db_2backends_2base_2client_8py_source.html#l00014">django.db.backends.base.client.BaseDatabaseClient.connection</a>, <a class="el" href="base_2creation_8py_source.html#l00024">django.db.backends.base.creation.BaseDatabaseCreation.connection</a>, <a class="el" href="django_2db_2backends_2base_2features_8py_source.html#l00393">django.db.backends.base.features.BaseDatabaseFeatures.connection</a>, <a class="el" href="db_2backends_2base_2introspection_8py_source.html#l00020">django.db.backends.base.introspection.BaseDatabaseIntrospection.connection</a>, <a class="el" href="db_2backends_2base_2operations_8py_source.html#l00062">django.db.backends.base.operations.BaseDatabaseOperations.connection</a>, <a class="el" href="db_2backends_2base_2schema_8py_source.html#l00149">django.db.backends.base.schema.BaseDatabaseSchemaEditor.connection</a>, <a class="el" href="base_2validation_8py_source.html#l00005">django.db.backends.base.validation.BaseDatabaseValidation.connection</a>, <a class="el" href="django_2db_2backends_2oracle_2base_8py_source.html#l00305">django.db.backends.oracle.base.DatabaseWrapper.connection</a>, <a class="el" href="django_2db_2backends_2postgresql_2base_8py_source.html#l00349">django.db.backends.postgresql.base.DatabaseWrapper.connection</a>, <a class="el" href="db_2backends_2postgresql_2operations_8py_source.html#l00076">django.db.backends.postgresql.operations.DatabaseOperations.connection</a>, <a class="el" href="db_2backends_2postgresql_2schema_8py_source.html#l00070">django.db.backends.postgresql.schema.DatabaseSchemaEditor.connection</a>, <a class="el" href="executor_8py_source.html#l00017">connection</a>, <a class="el" href="executor_8py_source.html#l00310">detect_soft_applied()</a>, <a class="el" href="executor_8py_source.html#l00020">progress_callback</a>, and <a class="el" href="executor_8py_source.html#l00266">record_migration()</a>.</p>

<p class="reference">Referenced by <a class="el" href="executor_8py_source.html#l00147">_migrate_all_forwards()</a>.</p>

</div>
</div>
<a id="a7d362323af6b5606d8ec498a3609e6e6" name="a7d362323af6b5606d8ec498a3609e6e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d362323af6b5606d8ec498a3609e6e6">&#9670;&#160;</a></span>check_replacements()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.migrations.executor.MigrationExecutor.check_replacements </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Mark replacement migrations applied if their replaced set all are.

Do this unconditionally on every migrate, rather than just when
migrations are applied or unapplied, to correctly handle the case
when a new squash migration is pushed to a deployment that already had
all its replaced migrations applied. In this case no new migration will
be applied, but the applied state of the squashed migration must be
maintained.
</pre> 
<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00293">293</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  293</span>    <span class="keyword">def </span>check_replacements(self):</div>
<div class="line"><span class="lineno">  294</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  295</span><span class="stringliteral">        Mark replacement migrations applied if their replaced set all are.</span></div>
<div class="line"><span class="lineno">  296</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  297</span><span class="stringliteral">        Do this unconditionally on every migrate, rather than just when</span></div>
<div class="line"><span class="lineno">  298</span><span class="stringliteral">        migrations are applied or unapplied, to correctly handle the case</span></div>
<div class="line"><span class="lineno">  299</span><span class="stringliteral">        when a new squash migration is pushed to a deployment that already had</span></div>
<div class="line"><span class="lineno">  300</span><span class="stringliteral">        all its replaced migrations applied. In this case no new migration will</span></div>
<div class="line"><span class="lineno">  301</span><span class="stringliteral">        be applied, but the applied state of the squashed migration must be</span></div>
<div class="line"><span class="lineno">  302</span><span class="stringliteral">        maintained.</span></div>
<div class="line"><span class="lineno">  303</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  304</span>        applied = self.recorder.applied_migrations()</div>
<div class="line"><span class="lineno">  305</span>        <span class="keywordflow">for</span> key, migration <span class="keywordflow">in</span> self.loader.replacements.items():</div>
<div class="line"><span class="lineno">  306</span>            all_applied = all(m <span class="keywordflow">in</span> applied <span class="keywordflow">for</span> m <span class="keywordflow">in</span> migration.replaces)</div>
<div class="line"><span class="lineno">  307</span>            <span class="keywordflow">if</span> all_applied <span class="keywordflow">and</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> applied:</div>
<div class="line"><span class="lineno">  308</span>                self.recorder.record_applied(*key)</div>
<div class="line"><span class="lineno">  309</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="executor_8py_source.html#l00018">loader</a>, and <a class="el" href="executor_8py_source.html#l00019">recorder</a>.</p>

<p class="reference">Referenced by <a class="el" href="executor_8py_source.html#l00094">migrate()</a>.</p>

</div>
</div>
<a id="ae5187f7d12375bec66bd59e906b6fa84" name="ae5187f7d12375bec66bd59e906b6fa84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5187f7d12375bec66bd59e906b6fa84">&#9670;&#160;</a></span>detect_soft_applied()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.migrations.executor.MigrationExecutor.detect_soft_applied </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>project_state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>migration</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test whether a migration has been implicitly applied - that the
tables or columns it would create exist. This is intended only for use
on initial migrations (as it only looks for CreateModel and AddField).
</pre> 
<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00310">310</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  310</span>    <span class="keyword">def </span>detect_soft_applied(self, project_state, migration):</div>
<div class="line"><span class="lineno">  311</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  312</span><span class="stringliteral">        Test whether a migration has been implicitly applied - that the</span></div>
<div class="line"><span class="lineno">  313</span><span class="stringliteral">        tables or columns it would create exist. This is intended only for use</span></div>
<div class="line"><span class="lineno">  314</span><span class="stringliteral">        on initial migrations (as it only looks for CreateModel and AddField).</span></div>
<div class="line"><span class="lineno">  315</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>        <span class="keyword">def </span>should_skip_detecting_model(migration, model):</div>
<div class="line"><span class="lineno">  318</span>            <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  319</span><span class="stringliteral">            No need to detect tables for proxy models, unmanaged models, or</span></div>
<div class="line"><span class="lineno">  320</span><span class="stringliteral">            models that can&#39;t be migrated on the current database.</span></div>
<div class="line"><span class="lineno">  321</span><span class="stringliteral">            &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  322</span>            <span class="keywordflow">return</span> (</div>
<div class="line"><span class="lineno">  323</span>                model._meta.proxy</div>
<div class="line"><span class="lineno">  324</span>                <span class="keywordflow">or</span> <span class="keywordflow">not</span> model._meta.managed</div>
<div class="line"><span class="lineno">  325</span>                <span class="keywordflow">or</span> <span class="keywordflow">not</span> router.allow_migrate(</div>
<div class="line"><span class="lineno">  326</span>                    self.connection.alias,</div>
<div class="line"><span class="lineno">  327</span>                    migration.app_label,</div>
<div class="line"><span class="lineno">  328</span>                    model_name=model._meta.model_name,</div>
<div class="line"><span class="lineno">  329</span>                )</div>
<div class="line"><span class="lineno">  330</span>            )</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>        <span class="keywordflow">if</span> migration.initial <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  333</span>            <span class="comment"># Bail if the migration isn&#39;t the first one in its app</span></div>
<div class="line"><span class="lineno">  334</span>            <span class="keywordflow">if</span> any(app == migration.app_label <span class="keywordflow">for</span> app, name <span class="keywordflow">in</span> migration.dependencies):</div>
<div class="line"><span class="lineno">  335</span>                <span class="keywordflow">return</span> <span class="keyword">False</span>, project_state</div>
<div class="line"><span class="lineno">  336</span>        <span class="keywordflow">elif</span> migration.initial <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  337</span>            <span class="comment"># Bail if it&#39;s NOT an initial migration</span></div>
<div class="line"><span class="lineno">  338</span>            <span class="keywordflow">return</span> <span class="keyword">False</span>, project_state</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>        <span class="keywordflow">if</span> project_state <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  341</span>            after_state = self.loader.project_state(</div>
<div class="line"><span class="lineno">  342</span>                (migration.app_label, migration.name), at_end=<span class="keyword">True</span></div>
<div class="line"><span class="lineno">  343</span>            )</div>
<div class="line"><span class="lineno">  344</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  345</span>            after_state = migration.mutate_state(project_state)</div>
<div class="line"><span class="lineno">  346</span>        apps = after_state.apps</div>
<div class="line"><span class="lineno">  347</span>        found_create_model_migration = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  348</span>        found_add_field_migration = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  349</span>        fold_identifier_case = self.connection.features.ignores_table_name_case</div>
<div class="line"><span class="lineno">  350</span>        <span class="keyword">with</span> self.connection.cursor() <span class="keyword">as</span> cursor:</div>
<div class="line"><span class="lineno">  351</span>            existing_table_names = set(</div>
<div class="line"><span class="lineno">  352</span>                self.connection.introspection.table_names(cursor)</div>
<div class="line"><span class="lineno">  353</span>            )</div>
<div class="line"><span class="lineno">  354</span>            <span class="keywordflow">if</span> fold_identifier_case:</div>
<div class="line"><span class="lineno">  355</span>                existing_table_names = {</div>
<div class="line"><span class="lineno">  356</span>                    name.casefold() <span class="keywordflow">for</span> name <span class="keywordflow">in</span> existing_table_names</div>
<div class="line"><span class="lineno">  357</span>                }</div>
<div class="line"><span class="lineno">  358</span>        <span class="comment"># Make sure all create model and add field operations are done</span></div>
<div class="line"><span class="lineno">  359</span>        <span class="keywordflow">for</span> operation <span class="keywordflow">in</span> migration.operations:</div>
<div class="line"><span class="lineno">  360</span>            <span class="keywordflow">if</span> isinstance(operation, migrations.CreateModel):</div>
<div class="line"><span class="lineno">  361</span>                model = apps.get_model(migration.app_label, operation.name)</div>
<div class="line"><span class="lineno">  362</span>                <span class="keywordflow">if</span> model._meta.swapped:</div>
<div class="line"><span class="lineno">  363</span>                    <span class="comment"># We have to fetch the model to test with from the</span></div>
<div class="line"><span class="lineno">  364</span>                    <span class="comment"># main app cache, as it&#39;s not a direct dependency.</span></div>
<div class="line"><span class="lineno">  365</span>                    model = global_apps.get_model(model._meta.swapped)</div>
<div class="line"><span class="lineno">  366</span>                <span class="keywordflow">if</span> should_skip_detecting_model(migration, model):</div>
<div class="line"><span class="lineno">  367</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  368</span>                db_table = model._meta.db_table</div>
<div class="line"><span class="lineno">  369</span>                <span class="keywordflow">if</span> fold_identifier_case:</div>
<div class="line"><span class="lineno">  370</span>                    db_table = db_table.casefold()</div>
<div class="line"><span class="lineno">  371</span>                <span class="keywordflow">if</span> db_table <span class="keywordflow">not</span> <span class="keywordflow">in</span> existing_table_names:</div>
<div class="line"><span class="lineno">  372</span>                    <span class="keywordflow">return</span> <span class="keyword">False</span>, project_state</div>
<div class="line"><span class="lineno">  373</span>                found_create_model_migration = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  374</span>            <span class="keywordflow">elif</span> isinstance(operation, migrations.AddField):</div>
<div class="line"><span class="lineno">  375</span>                model = apps.get_model(migration.app_label, operation.model_name)</div>
<div class="line"><span class="lineno">  376</span>                <span class="keywordflow">if</span> model._meta.swapped:</div>
<div class="line"><span class="lineno">  377</span>                    <span class="comment"># We have to fetch the model to test with from the</span></div>
<div class="line"><span class="lineno">  378</span>                    <span class="comment"># main app cache, as it&#39;s not a direct dependency.</span></div>
<div class="line"><span class="lineno">  379</span>                    model = global_apps.get_model(model._meta.swapped)</div>
<div class="line"><span class="lineno">  380</span>                <span class="keywordflow">if</span> should_skip_detecting_model(migration, model):</div>
<div class="line"><span class="lineno">  381</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>                table = model._meta.db_table</div>
<div class="line"><span class="lineno">  384</span>                field = model._meta.get_field(operation.name)</div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span>                <span class="comment"># Handle implicit many-to-many tables created by AddField.</span></div>
<div class="line"><span class="lineno">  387</span>                <span class="keywordflow">if</span> field.many_to_many:</div>
<div class="line"><span class="lineno">  388</span>                    through_db_table = field.remote_field.through._meta.db_table</div>
<div class="line"><span class="lineno">  389</span>                    <span class="keywordflow">if</span> fold_identifier_case:</div>
<div class="line"><span class="lineno">  390</span>                        through_db_table = through_db_table.casefold()</div>
<div class="line"><span class="lineno">  391</span>                    <span class="keywordflow">if</span> through_db_table <span class="keywordflow">not</span> <span class="keywordflow">in</span> existing_table_names:</div>
<div class="line"><span class="lineno">  392</span>                        <span class="keywordflow">return</span> <span class="keyword">False</span>, project_state</div>
<div class="line"><span class="lineno">  393</span>                    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  394</span>                        found_add_field_migration = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  395</span>                        <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  396</span>                <span class="keyword">with</span> self.connection.cursor() <span class="keyword">as</span> cursor:</div>
<div class="line"><span class="lineno">  397</span>                    columns = self.connection.introspection.get_table_description(</div>
<div class="line"><span class="lineno">  398</span>                        cursor, table</div>
<div class="line"><span class="lineno">  399</span>                    )</div>
<div class="line"><span class="lineno">  400</span>                <span class="keywordflow">for</span> column <span class="keywordflow">in</span> columns:</div>
<div class="line"><span class="lineno">  401</span>                    field_column = field.column</div>
<div class="line"><span class="lineno">  402</span>                    column_name = column.name</div>
<div class="line"><span class="lineno">  403</span>                    <span class="keywordflow">if</span> fold_identifier_case:</div>
<div class="line"><span class="lineno">  404</span>                        column_name = column_name.casefold()</div>
<div class="line"><span class="lineno">  405</span>                        field_column = field_column.casefold()</div>
<div class="line"><span class="lineno">  406</span>                    <span class="keywordflow">if</span> column_name == field_column:</div>
<div class="line"><span class="lineno">  407</span>                        found_add_field_migration = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  408</span>                        <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  409</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  410</span>                    <span class="keywordflow">return</span> <span class="keyword">False</span>, project_state</div>
<div class="line"><span class="lineno">  411</span>        <span class="comment"># If we get this far and we found at least one CreateModel or AddField</span></div>
<div class="line"><span class="lineno">  412</span>        <span class="comment"># migration, the migration is considered implicitly applied.</span></div>
<div class="line"><span class="lineno">  413</span>        <span class="keywordflow">return</span> (found_create_model_migration <span class="keywordflow">or</span> found_add_field_migration), after_state</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="contrib_2gis_2db_2backends_2base_2operations_8py_source.html#l00190">django.contrib.gis.db.backends.base.operations.BaseSpatialOperations.connection</a>, <a class="el" href="contrib_2gis_2db_2backends_2mysql_2operations_8py_source.html#l00114">django.contrib.gis.db.backends.mysql.operations.MySQLOperations.connection</a>, <a class="el" href="contrib_2gis_2db_2backends_2oracle_2operations_8py_source.html#l00183">django.contrib.gis.db.backends.oracle.operations.OracleOperations.connection</a>, <a class="el" href="django_2contrib_2gis_2db_2backends_2postgis_2base_8py_source.html#l00123">django.contrib.gis.db.backends.postgis.base.DatabaseWrapper.connection</a>, <a class="el" href="contrib_2gis_2db_2backends_2spatialite_2operations_8py_source.html#l00134">django.contrib.gis.db.backends.spatialite.operations.SpatiaLiteOperations.connection</a>, <a class="el" href="smtp_8py_source.html#l00052">django.core.mail.backends.smtp.EmailBackend.connection</a>, <a class="el" href="django_2core_2mail_2message_8py_source.html#l00252">django.core.mail.message.EmailMessage.connection</a>, <a class="el" href="django_2db_2backends_2base_2base_8py_source.html#l00056">django.db.backends.base.base.BaseDatabaseWrapper.connection</a>, <a class="el" href="db_2backends_2base_2client_8py_source.html#l00014">django.db.backends.base.client.BaseDatabaseClient.connection</a>, <a class="el" href="base_2creation_8py_source.html#l00024">django.db.backends.base.creation.BaseDatabaseCreation.connection</a>, <a class="el" href="django_2db_2backends_2base_2features_8py_source.html#l00393">django.db.backends.base.features.BaseDatabaseFeatures.connection</a>, <a class="el" href="db_2backends_2base_2introspection_8py_source.html#l00020">django.db.backends.base.introspection.BaseDatabaseIntrospection.connection</a>, <a class="el" href="db_2backends_2base_2operations_8py_source.html#l00062">django.db.backends.base.operations.BaseDatabaseOperations.connection</a>, <a class="el" href="db_2backends_2base_2schema_8py_source.html#l00149">django.db.backends.base.schema.BaseDatabaseSchemaEditor.connection</a>, <a class="el" href="base_2validation_8py_source.html#l00005">django.db.backends.base.validation.BaseDatabaseValidation.connection</a>, <a class="el" href="django_2db_2backends_2oracle_2base_8py_source.html#l00305">django.db.backends.oracle.base.DatabaseWrapper.connection</a>, <a class="el" href="django_2db_2backends_2postgresql_2base_8py_source.html#l00349">django.db.backends.postgresql.base.DatabaseWrapper.connection</a>, <a class="el" href="db_2backends_2postgresql_2operations_8py_source.html#l00076">django.db.backends.postgresql.operations.DatabaseOperations.connection</a>, <a class="el" href="db_2backends_2postgresql_2schema_8py_source.html#l00070">django.db.backends.postgresql.schema.DatabaseSchemaEditor.connection</a>, <a class="el" href="executor_8py_source.html#l00017">connection</a>, and <a class="el" href="executor_8py_source.html#l00018">loader</a>.</p>

<p class="reference">Referenced by <a class="el" href="executor_8py_source.html#l00239">apply_migration()</a>.</p>

</div>
</div>
<a id="a3d41c1ebde143043232873af2bef51a1" name="a3d41c1ebde143043232873af2bef51a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d41c1ebde143043232873af2bef51a1">&#9670;&#160;</a></span>migrate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.migrations.executor.MigrationExecutor.migrate </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>targets</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>plan</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>state</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>fake</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>fake_initial</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Migrate the database up to the given targets.

Django first needs to create all project states before a migration is
(un)applied and in a second step run all the database operations.
</pre> 
<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00094">94</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   94</span>    <span class="keyword">def </span>migrate(self, targets, plan=None, state=None, fake=False, fake_initial=False):</div>
<div class="line"><span class="lineno">   95</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   96</span><span class="stringliteral">        Migrate the database up to the given targets.</span></div>
<div class="line"><span class="lineno">   97</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   98</span><span class="stringliteral">        Django first needs to create all project states before a migration is</span></div>
<div class="line"><span class="lineno">   99</span><span class="stringliteral">        (un)applied and in a second step run all the database operations.</span></div>
<div class="line"><span class="lineno">  100</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  101</span>        <span class="comment"># The django_migrations table must be present to record applied</span></div>
<div class="line"><span class="lineno">  102</span>        <span class="comment"># migrations, but don&#39;t create it if there are no migrations to apply.</span></div>
<div class="line"><span class="lineno">  103</span>        <span class="keywordflow">if</span> plan == []:</div>
<div class="line"><span class="lineno">  104</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.recorder.has_table():</div>
<div class="line"><span class="lineno">  105</span>                <span class="keywordflow">return</span> self._create_project_state(with_applied_migrations=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  106</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  107</span>            self.recorder.ensure_schema()</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>        <span class="keywordflow">if</span> plan <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  110</span>            plan = self.migration_plan(targets)</div>
<div class="line"><span class="lineno">  111</span>        <span class="comment"># Create the forwards plan Django would follow on an empty database</span></div>
<div class="line"><span class="lineno">  112</span>        full_plan = self.migration_plan(</div>
<div class="line"><span class="lineno">  113</span>            self.loader.graph.leaf_nodes(), clean_start=<span class="keyword">True</span></div>
<div class="line"><span class="lineno">  114</span>        )</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>        all_forwards = all(<span class="keywordflow">not</span> backwards <span class="keywordflow">for</span> mig, backwards <span class="keywordflow">in</span> plan)</div>
<div class="line"><span class="lineno">  117</span>        all_backwards = all(backwards <span class="keywordflow">for</span> mig, backwards <span class="keywordflow">in</span> plan)</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> plan:</div>
<div class="line"><span class="lineno">  120</span>            <span class="keywordflow">if</span> state <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  121</span>                <span class="comment"># The resulting state should include applied migrations.</span></div>
<div class="line"><span class="lineno">  122</span>                state = self._create_project_state(with_applied_migrations=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  123</span>        <span class="keywordflow">elif</span> all_forwards == all_backwards:</div>
<div class="line"><span class="lineno">  124</span>            <span class="comment"># This should only happen if there&#39;s a mixed plan</span></div>
<div class="line"><span class="lineno">  125</span>            <span class="keywordflow">raise</span> InvalidMigrationPlan(</div>
<div class="line"><span class="lineno">  126</span>                <span class="stringliteral">&quot;Migration plans with both forwards and backwards migrations &quot;</span></div>
<div class="line"><span class="lineno">  127</span>                <span class="stringliteral">&quot;are not supported. Please split your migration process into &quot;</span></div>
<div class="line"><span class="lineno">  128</span>                <span class="stringliteral">&quot;separate plans of only forwards OR backwards migrations.&quot;</span>,</div>
<div class="line"><span class="lineno">  129</span>                plan,</div>
<div class="line"><span class="lineno">  130</span>            )</div>
<div class="line"><span class="lineno">  131</span>        <span class="keywordflow">elif</span> all_forwards:</div>
<div class="line"><span class="lineno">  132</span>            <span class="keywordflow">if</span> state <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  133</span>                <span class="comment"># The resulting state should still include applied migrations.</span></div>
<div class="line"><span class="lineno">  134</span>                state = self._create_project_state(with_applied_migrations=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  135</span>            state = self._migrate_all_forwards(</div>
<div class="line"><span class="lineno">  136</span>                state, plan, full_plan, fake=fake, fake_initial=fake_initial</div>
<div class="line"><span class="lineno">  137</span>            )</div>
<div class="line"><span class="lineno">  138</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  139</span>            <span class="comment"># No need to check for `elif all_backwards` here, as that condition</span></div>
<div class="line"><span class="lineno">  140</span>            <span class="comment"># would always evaluate to true.</span></div>
<div class="line"><span class="lineno">  141</span>            state = self._migrate_all_backwards(plan, full_plan, fake=fake)</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>        self.check_replacements()</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>        <span class="keywordflow">return</span> state</div>
<div class="line"><span class="lineno">  146</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="executor_8py_source.html#l00073">_create_project_state()</a>, <a class="el" href="executor_8py_source.html#l00174">_migrate_all_backwards()</a>, <a class="el" href="executor_8py_source.html#l00147">_migrate_all_forwards()</a>, <a class="el" href="executor_8py_source.html#l00293">check_replacements()</a>, <a class="el" href="executor_8py_source.html#l00018">loader</a>, <a class="el" href="executor_8py_source.html#l00022">migration_plan()</a>, and <a class="el" href="executor_8py_source.html#l00019">recorder</a>.</p>

</div>
</div>
<a id="a6a631428a359bc1bc8ddb42461653cca" name="a6a631428a359bc1bc8ddb42461653cca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a631428a359bc1bc8ddb42461653cca">&#9670;&#160;</a></span>migration_plan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.migrations.executor.MigrationExecutor.migration_plan </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>targets</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>clean_start</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Given a set of targets, return a list of (Migration instance, backwards?).
</pre> 
<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00022">22</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   22</span>    <span class="keyword">def </span>migration_plan(self, targets, clean_start=False):</div>
<div class="line"><span class="lineno">   23</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   24</span><span class="stringliteral">        Given a set of targets, return a list of (Migration instance, backwards?).</span></div>
<div class="line"><span class="lineno">   25</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   26</span>        plan = []</div>
<div class="line"><span class="lineno">   27</span>        <span class="keywordflow">if</span> clean_start:</div>
<div class="line"><span class="lineno">   28</span>            applied = {}</div>
<div class="line"><span class="lineno">   29</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   30</span>            applied = dict(self.loader.applied_migrations)</div>
<div class="line"><span class="lineno">   31</span>        <span class="keywordflow">for</span> target <span class="keywordflow">in</span> targets:</div>
<div class="line"><span class="lineno">   32</span>            <span class="comment"># If the target is (app_label, None), that means unmigrate everything</span></div>
<div class="line"><span class="lineno">   33</span>            <span class="keywordflow">if</span> target[1] <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   34</span>                <span class="keywordflow">for</span> root <span class="keywordflow">in</span> self.loader.graph.root_nodes():</div>
<div class="line"><span class="lineno">   35</span>                    <span class="keywordflow">if</span> root[0] == target[0]:</div>
<div class="line"><span class="lineno">   36</span>                        <span class="keywordflow">for</span> migration <span class="keywordflow">in</span> self.loader.graph.backwards_plan(root):</div>
<div class="line"><span class="lineno">   37</span>                            <span class="keywordflow">if</span> migration <span class="keywordflow">in</span> applied:</div>
<div class="line"><span class="lineno">   38</span>                                plan.append((self.loader.graph.nodes[migration], <span class="keyword">True</span>))</div>
<div class="line"><span class="lineno">   39</span>                                applied.pop(migration)</div>
<div class="line"><span class="lineno">   40</span>            <span class="comment"># If the migration is already applied, do backwards mode,</span></div>
<div class="line"><span class="lineno">   41</span>            <span class="comment"># otherwise do forwards mode.</span></div>
<div class="line"><span class="lineno">   42</span>            <span class="keywordflow">elif</span> target <span class="keywordflow">in</span> applied:</div>
<div class="line"><span class="lineno">   43</span>                <span class="comment"># If the target is missing, it&#39;s likely a replaced migration.</span></div>
<div class="line"><span class="lineno">   44</span>                <span class="comment"># Reload the graph without replacements.</span></div>
<div class="line"><span class="lineno">   45</span>                <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">   46</span>                    self.loader.replace_migrations</div>
<div class="line"><span class="lineno">   47</span>                    <span class="keywordflow">and</span> target <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.loader.graph.node_map</div>
<div class="line"><span class="lineno">   48</span>                ):</div>
<div class="line"><span class="lineno">   49</span>                    self.loader.replace_migrations = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">   50</span>                    self.loader.build_graph()</div>
<div class="line"><span class="lineno">   51</span>                    <span class="keywordflow">return</span> self.migration_plan(targets, clean_start=clean_start)</div>
<div class="line"><span class="lineno">   52</span>                <span class="comment"># Don&#39;t migrate backwards all the way to the target node (that</span></div>
<div class="line"><span class="lineno">   53</span>                <span class="comment"># may roll back dependencies in other apps that don&#39;t need to</span></div>
<div class="line"><span class="lineno">   54</span>                <span class="comment"># be rolled back); instead roll back through target&#39;s immediate</span></div>
<div class="line"><span class="lineno">   55</span>                <span class="comment"># child(ren) in the same app, and no further.</span></div>
<div class="line"><span class="lineno">   56</span>                next_in_app = sorted(</div>
<div class="line"><span class="lineno">   57</span>                    n</div>
<div class="line"><span class="lineno">   58</span>                    <span class="keywordflow">for</span> n <span class="keywordflow">in</span> self.loader.graph.node_map[target].children</div>
<div class="line"><span class="lineno">   59</span>                    <span class="keywordflow">if</span> n[0] == target[0]</div>
<div class="line"><span class="lineno">   60</span>                )</div>
<div class="line"><span class="lineno">   61</span>                <span class="keywordflow">for</span> node <span class="keywordflow">in</span> next_in_app:</div>
<div class="line"><span class="lineno">   62</span>                    <span class="keywordflow">for</span> migration <span class="keywordflow">in</span> self.loader.graph.backwards_plan(node):</div>
<div class="line"><span class="lineno">   63</span>                        <span class="keywordflow">if</span> migration <span class="keywordflow">in</span> applied:</div>
<div class="line"><span class="lineno">   64</span>                            plan.append((self.loader.graph.nodes[migration], <span class="keyword">True</span>))</div>
<div class="line"><span class="lineno">   65</span>                            applied.pop(migration)</div>
<div class="line"><span class="lineno">   66</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   67</span>                <span class="keywordflow">for</span> migration <span class="keywordflow">in</span> self.loader.graph.forwards_plan(target):</div>
<div class="line"><span class="lineno">   68</span>                    <span class="keywordflow">if</span> migration <span class="keywordflow">not</span> <span class="keywordflow">in</span> applied:</div>
<div class="line"><span class="lineno">   69</span>                        plan.append((self.loader.graph.nodes[migration], <span class="keyword">False</span>))</div>
<div class="line"><span class="lineno">   70</span>                        applied[migration] = self.loader.graph.nodes[migration]</div>
<div class="line"><span class="lineno">   71</span>        <span class="keywordflow">return</span> plan</div>
<div class="line"><span class="lineno">   72</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="executor_8py_source.html#l00018">loader</a>, and <a class="el" href="executor_8py_source.html#l00022">migration_plan()</a>.</p>

<p class="reference">Referenced by <a class="el" href="executor_8py_source.html#l00073">_create_project_state()</a>, <a class="el" href="executor_8py_source.html#l00094">migrate()</a>, and <a class="el" href="executor_8py_source.html#l00022">migration_plan()</a>.</p>

</div>
</div>
<a id="a17528206250c4c61af03400234fe3991" name="a17528206250c4c61af03400234fe3991"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17528206250c4c61af03400234fe3991">&#9670;&#160;</a></span>record_migration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.migrations.executor.MigrationExecutor.record_migration </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>migration</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00266">266</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  266</span>    <span class="keyword">def </span>record_migration(self, migration):</div>
<div class="line"><span class="lineno">  267</span>        <span class="comment"># For replacement migrations, record individual statuses</span></div>
<div class="line"><span class="lineno">  268</span>        <span class="keywordflow">if</span> migration.replaces:</div>
<div class="line"><span class="lineno">  269</span>            <span class="keywordflow">for</span> app_label, name <span class="keywordflow">in</span> migration.replaces:</div>
<div class="line"><span class="lineno">  270</span>                self.recorder.record_applied(app_label, name)</div>
<div class="line"><span class="lineno">  271</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  272</span>            self.recorder.record_applied(migration.app_label, migration.name)</div>
<div class="line"><span class="lineno">  273</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="executor_8py_source.html#l00019">recorder</a>.</p>

<p class="reference">Referenced by <a class="el" href="executor_8py_source.html#l00239">apply_migration()</a>.</p>

</div>
</div>
<a id="adfa1f8f366a5596c93f9336c04255dfb" name="adfa1f8f366a5596c93f9336c04255dfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfa1f8f366a5596c93f9336c04255dfb">&#9670;&#160;</a></span>unapply_migration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.migrations.executor.MigrationExecutor.unapply_migration </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>migration</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>fake</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Run a migration backwards.</pre> 
<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00274">274</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  274</span>    <span class="keyword">def </span>unapply_migration(self, state, migration, fake=False):</div>
<div class="line"><span class="lineno">  275</span>        <span class="stringliteral">&quot;&quot;&quot;Run a migration backwards.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  276</span>        <span class="keywordflow">if</span> self.progress_callback:</div>
<div class="line"><span class="lineno">  277</span>            self.progress_callback(<span class="stringliteral">&quot;unapply_start&quot;</span>, migration, fake)</div>
<div class="line"><span class="lineno">  278</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> fake:</div>
<div class="line"><span class="lineno">  279</span>            <span class="keyword">with</span> self.connection.schema_editor(</div>
<div class="line"><span class="lineno">  280</span>                atomic=migration.atomic</div>
<div class="line"><span class="lineno">  281</span>            ) <span class="keyword">as</span> schema_editor:</div>
<div class="line"><span class="lineno">  282</span>                state = migration.unapply(state, schema_editor)</div>
<div class="line"><span class="lineno">  283</span>        <span class="comment"># For replacement migrations, also record individual statuses.</span></div>
<div class="line"><span class="lineno">  284</span>        <span class="keywordflow">if</span> migration.replaces:</div>
<div class="line"><span class="lineno">  285</span>            <span class="keywordflow">for</span> app_label, name <span class="keywordflow">in</span> migration.replaces:</div>
<div class="line"><span class="lineno">  286</span>                self.recorder.record_unapplied(app_label, name)</div>
<div class="line"><span class="lineno">  287</span>        self.recorder.record_unapplied(migration.app_label, migration.name)</div>
<div class="line"><span class="lineno">  288</span>        <span class="comment"># Report progress</span></div>
<div class="line"><span class="lineno">  289</span>        <span class="keywordflow">if</span> self.progress_callback:</div>
<div class="line"><span class="lineno">  290</span>            self.progress_callback(<span class="stringliteral">&quot;unapply_success&quot;</span>, migration, fake)</div>
<div class="line"><span class="lineno">  291</span>        <span class="keywordflow">return</span> state</div>
<div class="line"><span class="lineno">  292</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="contrib_2gis_2db_2backends_2base_2operations_8py_source.html#l00190">django.contrib.gis.db.backends.base.operations.BaseSpatialOperations.connection</a>, <a class="el" href="contrib_2gis_2db_2backends_2mysql_2operations_8py_source.html#l00114">django.contrib.gis.db.backends.mysql.operations.MySQLOperations.connection</a>, <a class="el" href="contrib_2gis_2db_2backends_2oracle_2operations_8py_source.html#l00183">django.contrib.gis.db.backends.oracle.operations.OracleOperations.connection</a>, <a class="el" href="django_2contrib_2gis_2db_2backends_2postgis_2base_8py_source.html#l00123">django.contrib.gis.db.backends.postgis.base.DatabaseWrapper.connection</a>, <a class="el" href="contrib_2gis_2db_2backends_2spatialite_2operations_8py_source.html#l00134">django.contrib.gis.db.backends.spatialite.operations.SpatiaLiteOperations.connection</a>, <a class="el" href="smtp_8py_source.html#l00052">django.core.mail.backends.smtp.EmailBackend.connection</a>, <a class="el" href="django_2core_2mail_2message_8py_source.html#l00252">django.core.mail.message.EmailMessage.connection</a>, <a class="el" href="django_2db_2backends_2base_2base_8py_source.html#l00056">django.db.backends.base.base.BaseDatabaseWrapper.connection</a>, <a class="el" href="db_2backends_2base_2client_8py_source.html#l00014">django.db.backends.base.client.BaseDatabaseClient.connection</a>, <a class="el" href="base_2creation_8py_source.html#l00024">django.db.backends.base.creation.BaseDatabaseCreation.connection</a>, <a class="el" href="django_2db_2backends_2base_2features_8py_source.html#l00393">django.db.backends.base.features.BaseDatabaseFeatures.connection</a>, <a class="el" href="db_2backends_2base_2introspection_8py_source.html#l00020">django.db.backends.base.introspection.BaseDatabaseIntrospection.connection</a>, <a class="el" href="db_2backends_2base_2operations_8py_source.html#l00062">django.db.backends.base.operations.BaseDatabaseOperations.connection</a>, <a class="el" href="db_2backends_2base_2schema_8py_source.html#l00149">django.db.backends.base.schema.BaseDatabaseSchemaEditor.connection</a>, <a class="el" href="base_2validation_8py_source.html#l00005">django.db.backends.base.validation.BaseDatabaseValidation.connection</a>, <a class="el" href="django_2db_2backends_2oracle_2base_8py_source.html#l00305">django.db.backends.oracle.base.DatabaseWrapper.connection</a>, <a class="el" href="django_2db_2backends_2postgresql_2base_8py_source.html#l00349">django.db.backends.postgresql.base.DatabaseWrapper.connection</a>, <a class="el" href="db_2backends_2postgresql_2operations_8py_source.html#l00076">django.db.backends.postgresql.operations.DatabaseOperations.connection</a>, <a class="el" href="db_2backends_2postgresql_2schema_8py_source.html#l00070">django.db.backends.postgresql.schema.DatabaseSchemaEditor.connection</a>, <a class="el" href="executor_8py_source.html#l00017">connection</a>, <a class="el" href="executor_8py_source.html#l00020">progress_callback</a>, and <a class="el" href="executor_8py_source.html#l00019">recorder</a>.</p>

<p class="reference">Referenced by <a class="el" href="executor_8py_source.html#l00174">_migrate_all_backwards()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6c746bbe3762aa973593a8c156130657" name="a6c746bbe3762aa973593a8c156130657"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c746bbe3762aa973593a8c156130657">&#9670;&#160;</a></span>connection</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.migrations.executor.MigrationExecutor.connection = connection</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00017">17</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="_e_n_v_2_lib_2site-packages_2django_2test_2utils_8py_source.html#l00725">django.test.utils.CaptureQueriesContext.__exit__()</a>, <a class="el" href="django_2contrib_2gis_2db_2backends_2base_2features_8py_source.html#l00106">django.contrib.gis.db.backends.base.features.BaseSpatialFeatures.__getattr__()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00316">django.db.models.sql.compiler.SQLCompiler._order_by_pairs()</a>, <a class="el" href="urllib3_2contrib_2pyopenssl_8py_source.html#l00378">urllib3.contrib.pyopenssl.WrappedSocket._real_close()</a>, <a class="el" href="pip_2__vendor_2urllib3_2contrib_2pyopenssl_8py_source.html#l00351">pip._vendor.urllib3.contrib.pyopenssl.WrappedSocket._send_until_done()</a>, <a class="el" href="urllib3_2contrib_2pyopenssl_8py_source.html#l00350">urllib3.contrib.pyopenssl.WrappedSocket._send_until_done()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l01505">django.db.models.sql.compiler.SQLCompiler.apply_converters()</a>, <a class="el" href="executor_8py_source.html#l00239">apply_migration()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00736">django.db.models.sql.compiler.SQLCompiler.as_sql()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l01906">django.db.models.sql.compiler.SQLDeleteCompiler.as_sql()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l01745">django.db.models.sql.compiler.SQLInsertCompiler.as_sql()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l01932">django.db.models.sql.compiler.SQLUpdateCompiler.as_sql()</a>, <a class="el" href="backends_2mysql_2compiler_8py_source.html#l00007">django.db.backends.mysql.compiler.SQLCompiler.as_subquery_condition()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l01610">django.db.models.sql.compiler.SQLCompiler.as_subquery_condition()</a>, <a class="el" href="django_2db_2migrations_2loader_8py_source.html#l00222">django.db.migrations.loader.MigrationLoader.build_graph()</a>, <a class="el" href="pip_2__vendor_2urllib3_2contrib_2pyopenssl_8py_source.html#l00374">pip._vendor.urllib3.contrib.pyopenssl.WrappedSocket.close()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00197">django.db.models.sql.compiler.SQLCompiler.collapse_group_by()</a>, <a class="el" href="django_2db_2migrations_2loader_8py_source.html#l00365">django.db.migrations.loader.MigrationLoader.collect_sql()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00552">django.db.models.sql.compiler.SQLCompiler.compile()</a>, <a class="el" href="executor_8py_source.html#l00310">detect_soft_applied()</a>, <a class="el" href="testcases_8py_source.html#l00288">django.test.testcases.SimpleTestCase.ensure_connection_patch_method()</a>, <a class="el" href="recorder_8py_source.html#l00069">django.db.migrations.recorder.MigrationRecorder.ensure_schema()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l01546">django.db.models.sql.compiler.SQLCompiler.execute_sql()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l01825">django.db.models.sql.compiler.SQLInsertCompiler.execute_sql()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l01640">django.db.models.sql.compiler.SQLInsertCompiler.field_as_sql()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00560">django.db.models.sql.compiler.SQLCompiler.get_combinator_sql()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l01495">django.db.models.sql.compiler.SQLCompiler.get_converters()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l01013">django.db.models.sql.compiler.SQLCompiler.get_distinct()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00094">django.db.models.sql.compiler.SQLCompiler.get_group_by()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00640">django.db.models.sql.compiler.SQLCompiler.get_qualify_sql()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l01389">django.db.models.sql.compiler.SQLCompiler.get_select_for_update_of_arguments()</a>, <a class="el" href="pip_2__vendor_2urllib3_2contrib_2pyopenssl_8py_source.html#l00384">pip._vendor.urllib3.contrib.pyopenssl.WrappedSocket.getpeercert()</a>, <a class="el" href="urllib3_2contrib_2pyopenssl_8py_source.html#l00386">urllib3.contrib.pyopenssl.WrappedSocket.getpeercert()</a>, <a class="el" href="recorder_8py_source.html#l00056">django.db.migrations.recorder.MigrationRecorder.has_table()</a>, <a class="el" href="recorder_8py_source.html#l00053">django.db.migrations.recorder.MigrationRecorder.migration_qs()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l02017">django.db.models.sql.compiler.SQLUpdateCompiler.pre_sql_setup()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l01672">django.db.models.sql.compiler.SQLInsertCompiler.prepare_value()</a>, <a class="el" href="models_2sql_2compiler_8py_source.html#l00530">django.db.models.sql.compiler.SQLCompiler.quote_name_unless_alias()</a>, <a class="el" href="pip_2__vendor_2urllib3_2contrib_2pyopenssl_8py_source.html#l00300">pip._vendor.urllib3.contrib.pyopenssl.WrappedSocket.recv()</a>, <a class="el" href="urllib3_2contrib_2pyopenssl_8py_source.html#l00299">urllib3.contrib.pyopenssl.WrappedSocket.recv()</a>, <a class="el" href="pip_2__vendor_2urllib3_2contrib_2pyopenssl_8py_source.html#l00325">pip._vendor.urllib3.contrib.pyopenssl.WrappedSocket.recv_into()</a>, <a class="el" href="urllib3_2contrib_2pyopenssl_8py_source.html#l00324">urllib3.contrib.pyopenssl.WrappedSocket.recv_into()</a>, <a class="el" href="urllib3_2contrib_2pyopenssl_8py_source.html#l00403">urllib3.contrib.pyopenssl.WrappedSocket.selected_alpn_protocol()</a>, <a class="el" href="utils_2log_8py_source.html#l00137">django.utils.log.AdminEmailHandler.send_mail()</a>, <a class="el" href="pip_2__vendor_2urllib3_2contrib_2pyopenssl_8py_source.html#l00370">pip._vendor.urllib3.contrib.pyopenssl.WrappedSocket.shutdown()</a>, <a class="el" href="urllib3_2contrib_2pyopenssl_8py_source.html#l00369">urllib3.contrib.pyopenssl.WrappedSocket.shutdown()</a>, <a class="el" href="django_2contrib_2gis_2db_2backends_2spatialite_2features_8py_source.html#l00013">django.contrib.gis.db.backends.spatialite.features.DatabaseFeatures.supports_area_geodetic()</a>, <a class="el" href="django_2contrib_2gis_2db_2backends_2base_2features_8py_source.html#l00062">django.contrib.gis.db.backends.base.features.BaseSpatialFeatures.supports_bbcontains_lookup()</a>, <a class="el" href="django_2contrib_2gis_2db_2backends_2base_2features_8py_source.html#l00091">django.contrib.gis.db.backends.base.features.BaseSpatialFeatures.supports_collect_aggr()</a>, <a class="el" href="django_2contrib_2gis_2db_2backends_2base_2features_8py_source.html#l00066">django.contrib.gis.db.backends.base.features.BaseSpatialFeatures.supports_contained_lookup()</a>, <a class="el" href="django_2contrib_2gis_2db_2backends_2base_2features_8py_source.html#l00070">django.contrib.gis.db.backends.base.features.BaseSpatialFeatures.supports_crosses_lookup()</a>, <a class="el" href="django_2contrib_2gis_2db_2backends_2base_2features_8py_source.html#l00078">django.contrib.gis.db.backends.base.features.BaseSpatialFeatures.supports_dwithin_lookup()</a>, <a class="el" href="django_2contrib_2gis_2db_2backends_2base_2features_8py_source.html#l00095">django.contrib.gis.db.backends.base.features.BaseSpatialFeatures.supports_extent_aggr()</a>, <a class="el" href="django_2contrib_2gis_2db_2backends_2mysql_2features_8py_source.html#l00019">django.contrib.gis.db.backends.mysql.features.DatabaseFeatures.supports_geometry_field_unique_index()</a>, <a class="el" href="django_2contrib_2gis_2db_2backends_2base_2features_8py_source.html#l00099">django.contrib.gis.db.backends.base.features.BaseSpatialFeatures.supports_make_line_aggr()</a>, <a class="el" href="django_2contrib_2gis_2db_2backends_2base_2features_8py_source.html#l00082">django.contrib.gis.db.backends.base.features.BaseSpatialFeatures.supports_relate_lookup()</a>, <a class="el" href="django_2contrib_2gis_2db_2backends_2base_2features_8py_source.html#l00103">django.contrib.gis.db.backends.base.features.BaseSpatialFeatures.supports_union_aggr()</a>, <a class="el" href="executor_8py_source.html#l00274">unapply_migration()</a>, <a class="el" href="pip_2__vendor_2urllib3_2contrib_2pyopenssl_8py_source.html#l00398">pip._vendor.urllib3.contrib.pyopenssl.WrappedSocket.version()</a>, and <a class="el" href="urllib3_2contrib_2pyopenssl_8py_source.html#l00400">urllib3.contrib.pyopenssl.WrappedSocket.version()</a>.</p>

</div>
</div>
<a id="adb4f0e2105923a3274fb795b1667f9eb" name="adb4f0e2105923a3274fb795b1667f9eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb4f0e2105923a3274fb795b1667f9eb">&#9670;&#160;</a></span>loader</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.migrations.executor.MigrationExecutor.loader = <a class="el" href="classdjango_1_1db_1_1migrations_1_1loader_1_1_migration_loader.html">MigrationLoader</a>(self.connection)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00018">18</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="django_2template_2base_8py_source.html#l00122">django.template.base.Origin.__eq__()</a>, <a class="el" href="resources_8py_source.html#l00212">pip._vendor.distlib.resources.ZipResourceFinder.__init__()</a>, <a class="el" href="executor_8py_source.html#l00073">_create_project_state()</a>, <a class="el" href="resources_8py_source.html#l00226">pip._vendor.distlib.resources.ZipResourceFinder._find()</a>, <a class="el" href="executor_8py_source.html#l00174">_migrate_all_backwards()</a>, <a class="el" href="executor_8py_source.html#l00293">check_replacements()</a>, <a class="el" href="executor_8py_source.html#l00310">detect_soft_applied()</a>, <a class="el" href="resources_8py_source.html#l00249">pip._vendor.distlib.resources.ZipResourceFinder.get_bytes()</a>, <a class="el" href="resources_8py_source.html#l00244">pip._vendor.distlib.resources.ZipResourceFinder.get_cache_info()</a>, <a class="el" href="django_2template_2base_8py_source.html#l00130">django.template.base.Origin.loader_name()</a>, <a class="el" href="executor_8py_source.html#l00094">migrate()</a>, and <a class="el" href="executor_8py_source.html#l00022">migration_plan()</a>.</p>

</div>
</div>
<a id="a49c027b7985d0e8ea73200698de3279a" name="a49c027b7985d0e8ea73200698de3279a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49c027b7985d0e8ea73200698de3279a">&#9670;&#160;</a></span>progress_callback</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.migrations.executor.MigrationExecutor.progress_callback = progress_callback</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00020">20</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="executor_8py_source.html#l00174">_migrate_all_backwards()</a>, <a class="el" href="executor_8py_source.html#l00147">_migrate_all_forwards()</a>, <a class="el" href="executor_8py_source.html#l00239">apply_migration()</a>, and <a class="el" href="executor_8py_source.html#l00274">unapply_migration()</a>.</p>

</div>
</div>
<a id="ac7e13a39158fef3f62da91ee964b612a" name="ac7e13a39158fef3f62da91ee964b612a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7e13a39158fef3f62da91ee964b612a">&#9670;&#160;</a></span>recorder</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">django.db.migrations.executor.MigrationExecutor.recorder = <a class="el" href="classdjango_1_1db_1_1migrations_1_1recorder_1_1_migration_recorder.html">MigrationRecorder</a>(self.connection)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="executor_8py_source.html#l00019">19</a> of file <a class="el" href="executor_8py_source.html">executor.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="executor_8py_source.html#l00293">check_replacements()</a>, <a class="el" href="executor_8py_source.html#l00094">migrate()</a>, <a class="el" href="executor_8py_source.html#l00266">record_migration()</a>, and <a class="el" href="executor_8py_source.html#l00274">unapply_migration()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>project/ENV/Lib/site-packages/django/db/migrations/<a class="el" href="executor_8py_source.html">executor.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacedjango.html">django</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1db.html">db</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1db_1_1migrations.html">migrations</a></li><li class="navelem"><a class="el" href="namespacedjango_1_1db_1_1migrations_1_1executor.html">executor</a></li><li class="navelem"><a class="el" href="classdjango_1_1db_1_1migrations_1_1executor_1_1_migration_executor.html">MigrationExecutor</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
