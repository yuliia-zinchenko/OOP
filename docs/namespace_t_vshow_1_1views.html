<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Read&amp;Watch: TVshow.views Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Read&amp;Watch
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('namespace_t_vshow_1_1views.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">TVshow.views Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9bdaaa4cd719508dfd2ffab6a8b56fe8" id="r_a9bdaaa4cd719508dfd2ffab6a8b56fe8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9bdaaa4cd719508dfd2ffab6a8b56fe8">add_or_update_show</a> (request)</td></tr>
<tr class="separator:a9bdaaa4cd719508dfd2ffab6a8b56fe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadf626e12bf0fed597b7ecd608a5b9de" id="r_aadf626e12bf0fed597b7ecd608a5b9de"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aadf626e12bf0fed597b7ecd608a5b9de">delete_show</a> (request, show_id)</td></tr>
<tr class="separator:aadf626e12bf0fed597b7ecd608a5b9de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add4c46aee4e453fb239400ebfd4a06ed" id="r_add4c46aee4e453fb239400ebfd4a06ed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#add4c46aee4e453fb239400ebfd4a06ed">show_detail</a> (request, show_id)</td></tr>
<tr class="separator:add4c46aee4e453fb239400ebfd4a06ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd3f019fbfbbe6ec97c9133e494facbc" id="r_acd3f019fbfbbe6ec97c9133e494facbc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acd3f019fbfbbe6ec97c9133e494facbc">show_main</a> (request)</td></tr>
<tr class="separator:acd3f019fbfbbe6ec97c9133e494facbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75db6de22030d434f468ec448f17d4c7" id="r_a75db6de22030d434f468ec448f17d4c7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a75db6de22030d434f468ec448f17d4c7">show_recommendations</a> (request)</td></tr>
<tr class="separator:a75db6de22030d434f468ec448f17d4c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2152561db66060e61c30491b5e6d62a" id="r_ae2152561db66060e61c30491b5e6d62a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae2152561db66060e61c30491b5e6d62a">TVshow_search</a> (request)</td></tr>
<tr class="separator:ae2152561db66060e61c30491b5e6d62a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9bdaaa4cd719508dfd2ffab6a8b56fe8" name="a9bdaaa4cd719508dfd2ffab6a8b56fe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bdaaa4cd719508dfd2ffab6a8b56fe8">&#9670;&#160;</a></span>add_or_update_show()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">add_or_update_show </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>request</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Adds or updates a TV show for the user.

This view processes the incoming data for adding a new show or updating an existing 
show's status. It returns a JSON response indicating success or failure.

@param request The HTTP request object containing the show data.
@return JSON response with a success or error message.
</pre> 
<p class="definition">Definition at line <a class="el" href="_t_vshow_2views_8py_source.html#l00109">109</a> of file <a class="el" href="_t_vshow_2views_8py_source.html">views.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  109</span><span class="keyword">def </span>add_or_update_show(request):</div>
<div class="line"><span class="lineno">  110</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  111</span><span class="stringliteral">    @brief Adds or updates a TV show for the user.</span></div>
<div class="line"><span class="lineno">  112</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  113</span><span class="stringliteral">    This view processes the incoming data for adding a new show or updating an existing </span></div>
<div class="line"><span class="lineno">  114</span><span class="stringliteral">    show&#39;s status. It returns a JSON response indicating success or failure.</span></div>
<div class="line"><span class="lineno">  115</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  116</span><span class="stringliteral">    @param request The HTTP request object containing the show data.</span></div>
<div class="line"><span class="lineno">  117</span><span class="stringliteral">    @return JSON response with a success or error message.</span></div>
<div class="line"><span class="lineno">  118</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  119</span>    <span class="keywordflow">if</span> request.method == <span class="stringliteral">&#39;POST&#39;</span>:</div>
<div class="line"><span class="lineno">  120</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  121</span>            data = json.loads(request.body)</div>
<div class="line"><span class="lineno">  122</span>            user = request.user</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>            show_id = data.get(<span class="stringliteral">&#39;show_id&#39;</span>)</div>
<div class="line"><span class="lineno">  125</span>            title = data.get(<span class="stringliteral">&#39;title&#39;</span>)</div>
<div class="line"><span class="lineno">  126</span>            first_air_date = data.get(<span class="stringliteral">&#39;first_air_date&#39;</span>)</div>
<div class="line"><span class="lineno">  127</span>            description = data.get(<span class="stringliteral">&#39;description&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)</div>
<div class="line"><span class="lineno">  128</span>            poster_url = data.get(<span class="stringliteral">&#39;poster_url&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)</div>
<div class="line"><span class="lineno">  129</span>            status = data.get(<span class="stringliteral">&#39;status&#39;</span>)</div>
<div class="line"><span class="lineno">  130</span>            print(f<span class="stringliteral">&quot;Received status: {status}&quot;</span>) </div>
<div class="line"><span class="lineno">  131</span>            print(f<span class="stringliteral">&quot;Show ID: {show_id}&quot;</span>)</div>
<div class="line"><span class="lineno">  132</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> show_id <span class="keywordflow">or</span> <span class="keywordflow">not</span> isinstance(show_id, int):</div>
<div class="line"><span class="lineno">  133</span>                <span class="keywordflow">return</span> JsonResponse({<span class="stringliteral">&quot;error&quot;</span>: <span class="stringliteral">&quot;Valid show ID is required&quot;</span>}, status=400)</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>            show, created = TVshow.objects.get_or_create(</div>
<div class="line"><span class="lineno">  136</span>                user=user,</div>
<div class="line"><span class="lineno">  137</span>                show_id=show_id,</div>
<div class="line"><span class="lineno">  138</span>                defaults={</div>
<div class="line"><span class="lineno">  139</span>                    <span class="stringliteral">&#39;title&#39;</span>: title,</div>
<div class="line"><span class="lineno">  140</span>                    <span class="stringliteral">&#39;first_air_date&#39;</span>: first_air_date,</div>
<div class="line"><span class="lineno">  141</span>                    <span class="stringliteral">&#39;description&#39;</span>: description,</div>
<div class="line"><span class="lineno">  142</span>                    <span class="stringliteral">&#39;poster_url&#39;</span>: poster_url,</div>
<div class="line"><span class="lineno">  143</span>                    <span class="stringliteral">&#39;status&#39;</span>: status,</div>
<div class="line"><span class="lineno">  144</span>                }</div>
<div class="line"><span class="lineno">  145</span>            )</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> created:</div>
<div class="line"><span class="lineno">  148</span>                show.status = status</div>
<div class="line"><span class="lineno">  149</span>                show.save()</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>            <span class="keywordflow">return</span> JsonResponse({<span class="stringliteral">&#39;message&#39;</span>: <span class="stringliteral">&#39;TV Show added or updated successfully&#39;</span>, <span class="stringliteral">&#39;status&#39;</span>: show.status})</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>        <span class="keywordflow">except</span> json.JSONDecodeError:</div>
<div class="line"><span class="lineno">  154</span>            <span class="keywordflow">return</span> JsonResponse({<span class="stringliteral">&#39;error&#39;</span>: <span class="stringliteral">&#39;Invalid JSON data&#39;</span>}, status=400)</div>
<div class="line"><span class="lineno">  155</span>        <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  156</span>            <span class="keywordflow">return</span> JsonResponse({<span class="stringliteral">&#39;error&#39;</span>: str(e)}, status=500)</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>    <span class="keywordflow">return</span> JsonResponse({<span class="stringliteral">&#39;error&#39;</span>: <span class="stringliteral">&#39;Invalid request&#39;</span>}, status=400)</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span><span class="preprocessor">@login_required</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aadf626e12bf0fed597b7ecd608a5b9de" name="aadf626e12bf0fed597b7ecd608a5b9de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadf626e12bf0fed597b7ecd608a5b9de">&#9670;&#160;</a></span>delete_show()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">delete_show </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>request</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>show_id</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Deletes a TV show for the user.

This view deletes a TV show from the user's list. It returns a JSON response 
indicating success or failure.

@param request The HTTP request object.
@param show_id The ID of the show to delete.
@return JSON response with a success or error message.
</pre> 
<p class="definition">Definition at line <a class="el" href="_t_vshow_2views_8py_source.html#l00200">200</a> of file <a class="el" href="_t_vshow_2views_8py_source.html">views.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  200</span><span class="keyword">def </span>delete_show(request, show_id):</div>
<div class="line"><span class="lineno">  201</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  202</span><span class="stringliteral">    @brief Deletes a TV show for the user.</span></div>
<div class="line"><span class="lineno">  203</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  204</span><span class="stringliteral">    This view deletes a TV show from the user&#39;s list. It returns a JSON response </span></div>
<div class="line"><span class="lineno">  205</span><span class="stringliteral">    indicating success or failure.</span></div>
<div class="line"><span class="lineno">  206</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  207</span><span class="stringliteral">    @param request The HTTP request object.</span></div>
<div class="line"><span class="lineno">  208</span><span class="stringliteral">    @param show_id The ID of the show to delete.</span></div>
<div class="line"><span class="lineno">  209</span><span class="stringliteral">    @return JSON response with a success or error message.</span></div>
<div class="line"><span class="lineno">  210</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  211</span>    <span class="keywordflow">if</span> request.method == <span class="stringliteral">&#39;DELETE&#39;</span>:</div>
<div class="line"><span class="lineno">  212</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  213</span>            show = get_object_or_404(TVshow, user=request.user, show_id=show_id)</div>
<div class="line"><span class="lineno">  214</span>            show.delete()</div>
<div class="line"><span class="lineno">  215</span>            <span class="keywordflow">return</span> JsonResponse({<span class="stringliteral">&#39;message&#39;</span>: <span class="stringliteral">&#39;Show deleted successfully&#39;</span>}, status=200)</div>
<div class="line"><span class="lineno">  216</span>        <span class="keywordflow">except</span> Http404:</div>
<div class="line"><span class="lineno">  217</span>            <span class="keywordflow">return</span> JsonResponse({<span class="stringliteral">&#39;error&#39;</span>: <span class="stringliteral">&#39;Failed to delete show: Show matching query does not exist.&#39;</span>}, status=404)</div>
<div class="line"><span class="lineno">  218</span>        <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  219</span>            <span class="keywordflow">return</span> JsonResponse({<span class="stringliteral">&#39;error&#39;</span>: f<span class="stringliteral">&#39;Failed to delete show: {str(e)}&#39;</span>}, status=500)</div>
<div class="line"><span class="lineno">  220</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  221</span>        <span class="keywordflow">return</span> JsonResponse({<span class="stringliteral">&#39;error&#39;</span>: <span class="stringliteral">&#39;Invalid request method&#39;</span>}, status=400)</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span><span class="preprocessor">@login_required</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="add4c46aee4e453fb239400ebfd4a06ed" name="add4c46aee4e453fb239400ebfd4a06ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add4c46aee4e453fb239400ebfd4a06ed">&#9670;&#160;</a></span>show_detail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">show_detail </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>request</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>show_id</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Displays the details of a specific TV show.

This view either retrieves TV show details from the database if the user has added 
it or fetches data from an external API. It also adds the show to the user's recently viewed list.

@param request The HTTP request object.
@param show_id The ID of the TV show.
@return Renders the show detail page with the TV show data.
</pre> 
<p class="definition">Definition at line <a class="el" href="_t_vshow_2views_8py_source.html#l00056">56</a> of file <a class="el" href="_t_vshow_2views_8py_source.html">views.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   56</span><span class="keyword">def </span>show_detail(request, show_id):</div>
<div class="line"><span class="lineno">   57</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   58</span><span class="stringliteral">    @brief Displays the details of a specific TV show.</span></div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   60</span><span class="stringliteral">    This view either retrieves TV show details from the database if the user has added </span></div>
<div class="line"><span class="lineno">   61</span><span class="stringliteral">    it or fetches data from an external API. It also adds the show to the user&#39;s recently viewed list.</span></div>
<div class="line"><span class="lineno">   62</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   63</span><span class="stringliteral">    @param request The HTTP request object.</span></div>
<div class="line"><span class="lineno">   64</span><span class="stringliteral">    @param show_id The ID of the TV show.</span></div>
<div class="line"><span class="lineno">   65</span><span class="stringliteral">    @return Renders the show detail page with the TV show data.</span></div>
<div class="line"><span class="lineno">   66</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   67</span>    user = request.user</div>
<div class="line"><span class="lineno">   68</span>    show = <span class="keywordtype">None</span>  </div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   71</span>        show = TVshow.objects.get(id=show_id, user=user)  </div>
<div class="line"><span class="lineno">   72</span>    <span class="keywordflow">except</span> TVshow.DoesNotExist:</div>
<div class="line"><span class="lineno">   73</span>        show = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>    <span class="keywordflow">if</span> show:</div>
<div class="line"><span class="lineno">   76</span>        show_data = {</div>
<div class="line"><span class="lineno">   77</span>            <span class="stringliteral">&#39;id&#39;</span>: show.show_id,</div>
<div class="line"><span class="lineno">   78</span>            <span class="stringliteral">&#39;name&#39;</span>: show.title,</div>
<div class="line"><span class="lineno">   79</span>            <span class="stringliteral">&#39;first_air_date&#39;</span>: show.first_air_date,</div>
<div class="line"><span class="lineno">   80</span>            <span class="stringliteral">&#39;overview&#39;</span>: show.description,</div>
<div class="line"><span class="lineno">   81</span>            <span class="stringliteral">&#39;poster_path&#39;</span>: show.poster_url,</div>
<div class="line"><span class="lineno">   82</span>        }</div>
<div class="line"><span class="lineno">   83</span>        cover_image_url = show.poster_url</div>
<div class="line"><span class="lineno">   84</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>        api_data = get_tv_show_from_api(show_id)</div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span>        <span class="keywordflow">if</span> api_data <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   89</span>            <span class="keywordflow">raise</span> Http404(<span class="stringliteral">&quot;Unavailable&quot;</span>)</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>        show_data = {</div>
<div class="line"><span class="lineno">   92</span>            <span class="stringliteral">&#39;id&#39;</span>: api_data.get(<span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;No ID&#39;</span>),</div>
<div class="line"><span class="lineno">   93</span>            <span class="stringliteral">&#39;name&#39;</span>: api_data.get(<span class="stringliteral">&#39;name&#39;</span>, <span class="stringliteral">&#39;No name&#39;</span>),</div>
<div class="line"><span class="lineno">   94</span>            <span class="stringliteral">&#39;first_air_date&#39;</span>: api_data.get(<span class="stringliteral">&#39;first_air_date&#39;</span>, <span class="stringliteral">&#39;Unknown&#39;</span>),</div>
<div class="line"><span class="lineno">   95</span>            <span class="stringliteral">&#39;overview&#39;</span>: api_data.get(<span class="stringliteral">&#39;overview&#39;</span>, <span class="stringliteral">&#39;Unavailable&#39;</span>),</div>
<div class="line"><span class="lineno">   96</span>            <span class="stringliteral">&#39;poster_path&#39;</span>: f<span class="stringliteral">&quot;https://image.tmdb.org/t/p/w500{api_data.get(&#39;poster_path&#39;)}&quot;</span> <span class="keywordflow">if</span> api_data.get(<span class="stringliteral">&#39;poster_path&#39;</span>) <span class="keywordflow">else</span> <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno">   97</span>        }</div>
<div class="line"><span class="lineno">   98</span>        cover_image_url = show_data[<span class="stringliteral">&#39;poster_path&#39;</span>]</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>    <span class="comment">#cover_image_url=f&quot;https://image.tmdb.org/t/p/w500{api_data.get(&#39;poster_path&#39;)}&quot; if api_data.get(&#39;poster_path&#39;) else None</span></div>
<div class="line"><span class="lineno">  101</span>    add_to_recently_viewed(user, <span class="stringliteral">&#39;show&#39;</span>, show_data[<span class="stringliteral">&#39;id&#39;</span>], show_data[<span class="stringliteral">&#39;name&#39;</span>], cover_image_url)</div>
<div class="line"><span class="lineno">  102</span> </div>
<div class="line"><span class="lineno">  103</span>    <span class="keywordflow">return</span> render(request, <span class="stringliteral">&#39;TVshow/show_detail.html&#39;</span>, {<span class="stringliteral">&#39;show&#39;</span>: show_data})</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span><span class="preprocessor">@login_required</span></div>
<div class="line"><span class="lineno">  108</span><span class="preprocessor">@csrf_exempt</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd3f019fbfbbe6ec97c9133e494facbc" name="acd3f019fbfbbe6ec97c9133e494facbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd3f019fbfbbe6ec97c9133e494facbc">&#9670;&#160;</a></span>show_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">show_main </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>request</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Displays the main TV show page with a list of user's shows.

This view renders a list of TV shows that the user has added, with the option to 
filter by status and sort by title or date. It also includes a random quote for the day.

@param request The HTTP request object.
@return Renders the main page with the user's TV shows, sorted and filtered.
</pre> 
<p class="definition">Definition at line <a class="el" href="_t_vshow_2views_8py_source.html#l00161">161</a> of file <a class="el" href="_t_vshow_2views_8py_source.html">views.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  161</span><span class="keyword">def </span>show_main(request):</div>
<div class="line"><span class="lineno">  162</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  163</span><span class="stringliteral">    @brief Displays the main TV show page with a list of user&#39;s shows.</span></div>
<div class="line"><span class="lineno">  164</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  165</span><span class="stringliteral">    This view renders a list of TV shows that the user has added, with the option to </span></div>
<div class="line"><span class="lineno">  166</span><span class="stringliteral">    filter by status and sort by title or date. It also includes a random quote for the day.</span></div>
<div class="line"><span class="lineno">  167</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  168</span><span class="stringliteral">    @param request The HTTP request object.</span></div>
<div class="line"><span class="lineno">  169</span><span class="stringliteral">    @return Renders the main page with the user&#39;s TV shows, sorted and filtered.</span></div>
<div class="line"><span class="lineno">  170</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  171</span>    user = request.user</div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>    status = request.GET.get(<span class="stringliteral">&#39;status&#39;</span>)</div>
<div class="line"><span class="lineno">  174</span>    sort_by = request.GET.get(<span class="stringliteral">&#39;sort_by&#39;</span>, <span class="stringliteral">&#39;added_at&#39;</span>)  </div>
<div class="line"><span class="lineno">  175</span>    total_quotes = Quote.objects.count()</div>
<div class="line"><span class="lineno">  176</span>    </div>
<div class="line"><span class="lineno">  177</span>    <span class="keywordflow">if</span> total_quotes &gt; 0:</div>
<div class="line"><span class="lineno">  178</span>        quote = Quote.objects.all()[date.today().day % total_quotes] </div>
<div class="line"><span class="lineno">  179</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  180</span>        quote = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>    tvshows = TVshow.objects.filter(user=user)</div>
<div class="line"><span class="lineno">  183</span>    <span class="keywordflow">if</span> status:</div>
<div class="line"><span class="lineno">  184</span>        tvshows = tvshows.filter(status=status)</div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span>    <span class="keywordflow">if</span> sort_by == <span class="stringliteral">&#39;title&#39;</span>:</div>
<div class="line"><span class="lineno">  187</span>        tvshows = tvshows.order_by(<span class="stringliteral">&#39;title&#39;</span>) </div>
<div class="line"><span class="lineno">  188</span>    <span class="keywordflow">elif</span> sort_by == <span class="stringliteral">&#39;date&#39;</span>:</div>
<div class="line"><span class="lineno">  189</span>        tvshows = tvshows.order_by(<span class="stringliteral">&#39;-last_updated&#39;</span>)  </div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>    context = {</div>
<div class="line"><span class="lineno">  192</span>        <span class="stringliteral">&#39;tvshows&#39;</span>: tvshows,</div>
<div class="line"><span class="lineno">  193</span>        <span class="stringliteral">&#39;status&#39;</span>: status,</div>
<div class="line"><span class="lineno">  194</span>        <span class="stringliteral">&#39;sort_by&#39;</span>: sort_by, </div>
<div class="line"><span class="lineno">  195</span>        <span class="stringliteral">&#39;quote&#39;</span>: quote, </div>
<div class="line"><span class="lineno">  196</span>    }</div>
<div class="line"><span class="lineno">  197</span>    <span class="keywordflow">return</span> render(request, <span class="stringliteral">&#39;tvshow/show_main.html&#39;</span>, context)</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span><span class="preprocessor">@csrf_exempt</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a75db6de22030d434f468ec448f17d4c7" name="a75db6de22030d434f468ec448f17d4c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75db6de22030d434f468ec448f17d4c7">&#9670;&#160;</a></span>show_recommendations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">show_recommendations </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>request</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Displays TV show recommendations based on genre and sorting options.

This view retrieves TV shows based on the selected genre and sort criteria, 
filtering out shows the user has already added to their list. The results are 
cached to improve performance.

@param request The HTTP request object containing the genre and sorting options.
@return Renders the recommendations page with a list of filtered TV shows.
</pre> 
<p class="definition">Definition at line <a class="el" href="_t_vshow_2views_8py_source.html#l00225">225</a> of file <a class="el" href="_t_vshow_2views_8py_source.html">views.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  225</span><span class="keyword">def </span>show_recommendations(request):</div>
<div class="line"><span class="lineno">  226</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  227</span><span class="stringliteral">    @brief Displays TV show recommendations based on genre and sorting options.</span></div>
<div class="line"><span class="lineno">  228</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  229</span><span class="stringliteral">    This view retrieves TV shows based on the selected genre and sort criteria, </span></div>
<div class="line"><span class="lineno">  230</span><span class="stringliteral">    filtering out shows the user has already added to their list. The results are </span></div>
<div class="line"><span class="lineno">  231</span><span class="stringliteral">    cached to improve performance.</span></div>
<div class="line"><span class="lineno">  232</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  233</span><span class="stringliteral">    @param request The HTTP request object containing the genre and sorting options.</span></div>
<div class="line"><span class="lineno">  234</span><span class="stringliteral">    @return Renders the recommendations page with a list of filtered TV shows.</span></div>
<div class="line"><span class="lineno">  235</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  236</span>    genre_id = request.GET.get(<span class="stringliteral">&#39;genre&#39;</span>, <span class="stringliteral">&#39;18&#39;</span>) </div>
<div class="line"><span class="lineno">  237</span>    sort_by = request.GET.get(<span class="stringliteral">&#39;sort_by&#39;</span>, <span class="stringliteral">&#39;vote_average.desc&#39;</span>)  </div>
<div class="line"><span class="lineno">  238</span>    page = int(request.GET.get(<span class="stringliteral">&#39;page&#39;</span>, 1)) </div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordflow">if</span> page &lt; 1: </div>
<div class="line"><span class="lineno">  241</span>        page = 1</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>    cache_key = f<span class="stringliteral">&quot;shows_{genre_id}_{sort_by}_{page}&quot;</span></div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>    cached_shows = cache.get(cache_key)</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>    <span class="keywordflow">if</span> cached_shows <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  248</span>        filtered_series = cached_shows</div>
<div class="line"><span class="lineno">  249</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  250</span>        saved_series_ids = set(TVshow.objects.filter(user=request.user).values_list(<span class="stringliteral">&#39;show_id&#39;</span>, flat=<span class="keyword">True</span>))</div>
<div class="line"><span class="lineno">  251</span> </div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>        series = get_series_by_genre(genre_id, sort_by=sort_by, page=page)</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>        filtered_series = [tv_show <span class="keywordflow">for</span> tv_show <span class="keywordflow">in</span> series <span class="keywordflow">if</span> tv_show[<span class="stringliteral">&#39;id&#39;</span>] <span class="keywordflow">not</span> <span class="keywordflow">in</span> saved_series_ids]</div>
<div class="line"><span class="lineno">  256</span>        <span class="keywordflow">while</span> len(filtered_series) &lt; 20:</div>
<div class="line"><span class="lineno">  257</span>            page += 1  </div>
<div class="line"><span class="lineno">  258</span>            more_series = get_series_by_genre(genre_id, sort_by=sort_by, page=page)</div>
<div class="line"><span class="lineno">  259</span>            </div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>            more_series = [tv_show <span class="keywordflow">for</span> tv_show <span class="keywordflow">in</span> more_series <span class="keywordflow">if</span> tv_show[<span class="stringliteral">&#39;id&#39;</span>] <span class="keywordflow">not</span> <span class="keywordflow">in</span> saved_series_ids]</div>
<div class="line"><span class="lineno">  262</span>            </div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>            filtered_series.extend(more_series)</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>        filtered_series = filtered_series[:20]</div>
<div class="line"><span class="lineno">  267</span>        cache.set(cache_key, filtered_series, timeout=600)</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>    genre_choices = [</div>
<div class="line"><span class="lineno">  270</span>        {<span class="stringliteral">&#39;id&#39;</span>: <span class="stringliteral">&#39;18&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>: <span class="stringliteral">&#39;Drama&#39;</span>},</div>
<div class="line"><span class="lineno">  271</span>        {<span class="stringliteral">&#39;id&#39;</span>: <span class="stringliteral">&#39;35&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>: <span class="stringliteral">&#39;Comedy&#39;</span>},</div>
<div class="line"><span class="lineno">  272</span>        {<span class="stringliteral">&#39;id&#39;</span>: <span class="stringliteral">&#39;10765&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>: <span class="stringliteral">&#39;Sci-Fi &amp; Fantasy&#39;</span>},</div>
<div class="line"><span class="lineno">  273</span>        {<span class="stringliteral">&#39;id&#39;</span>: <span class="stringliteral">&#39;80&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>: <span class="stringliteral">&#39;Crime&#39;</span>},</div>
<div class="line"><span class="lineno">  274</span>        {<span class="stringliteral">&#39;id&#39;</span>: <span class="stringliteral">&#39;16&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>: <span class="stringliteral">&#39;Animation&#39;</span>},</div>
<div class="line"><span class="lineno">  275</span>    ]</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>    sort_choices = [</div>
<div class="line"><span class="lineno">  278</span>        {<span class="stringliteral">&#39;id&#39;</span>: <span class="stringliteral">&#39;vote_average.desc&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>: <span class="stringliteral">&#39;Top Rated&#39;</span>},</div>
<div class="line"><span class="lineno">  279</span>        {<span class="stringliteral">&#39;id&#39;</span>: <span class="stringliteral">&#39;first_air_date.desc&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>: <span class="stringliteral">&#39;Latest Releases&#39;</span>},</div>
<div class="line"><span class="lineno">  280</span>    ]</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>    selected_genre = next((g[<span class="stringliteral">&#39;name&#39;</span>] <span class="keywordflow">for</span> g <span class="keywordflow">in</span> genre_choices <span class="keywordflow">if</span> g[<span class="stringliteral">&#39;id&#39;</span>] == genre_id), <span class="stringliteral">&quot;Unknown Genre&quot;</span>)</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>    <span class="keywordflow">return</span> render(request, <span class="stringliteral">&#39;TVshow/show_recommendations.html&#39;</span>, {</div>
<div class="line"><span class="lineno">  286</span>        <span class="stringliteral">&#39;series&#39;</span>: filtered_series,</div>
<div class="line"><span class="lineno">  287</span>        <span class="stringliteral">&#39;genre_choices&#39;</span>: genre_choices,</div>
<div class="line"><span class="lineno">  288</span>        <span class="stringliteral">&#39;sort_choices&#39;</span>: sort_choices,</div>
<div class="line"><span class="lineno">  289</span>        <span class="stringliteral">&#39;selected_genre&#39;</span>: selected_genre,</div>
<div class="line"><span class="lineno">  290</span>        <span class="stringliteral">&#39;current_genre&#39;</span>: genre_id,</div>
<div class="line"><span class="lineno">  291</span>        <span class="stringliteral">&#39;current_sort&#39;</span>: sort_by,</div>
<div class="line"><span class="lineno">  292</span>        <span class="stringliteral">&#39;page&#39;</span>: page,</div>
<div class="line"><span class="lineno">  293</span>    })</div>
<div class="line"><span class="lineno">  294</span> </div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae2152561db66060e61c30491b5e6d62a" name="ae2152561db66060e61c30491b5e6d62a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2152561db66060e61c30491b5e6d62a">&#9670;&#160;</a></span>TVshow_search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TVshow_search </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>request</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Handles the TV show search functionality.

This view allows users to search for TV shows based on a query. It retrieves results 
from an external API and displays them, along with the user's recently viewed shows.

@param request The HTTP request object.
@return Renders the TV show search page with search results and recent shows.
</pre> 
<p class="definition">Definition at line <a class="el" href="_t_vshow_2views_8py_source.html#l00022">22</a> of file <a class="el" href="_t_vshow_2views_8py_source.html">views.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   22</span><span class="keyword">def </span>TVshow_search(request):</div>
<div class="line"><span class="lineno">   23</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   24</span><span class="stringliteral">    @brief Handles the TV show search functionality.</span></div>
<div class="line"><span class="lineno">   25</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   26</span><span class="stringliteral">    This view allows users to search for TV shows based on a query. It retrieves results </span></div>
<div class="line"><span class="lineno">   27</span><span class="stringliteral">    from an external API and displays them, along with the user&#39;s recently viewed shows.</span></div>
<div class="line"><span class="lineno">   28</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   29</span><span class="stringliteral">    @param request The HTTP request object.</span></div>
<div class="line"><span class="lineno">   30</span><span class="stringliteral">    @return Renders the TV show search page with search results and recent shows.</span></div>
<div class="line"><span class="lineno">   31</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   32</span>    results = []</div>
<div class="line"><span class="lineno">   33</span>    recently_viewed_shows = RecentlyViewed.objects.filter(user=request.user, content_type=<span class="stringliteral">&#39;show&#39;</span>).order_by(<span class="stringliteral">&#39;-viewed_at&#39;</span>)[:20]</div>
<div class="line"><span class="lineno">   34</span>    form_data = request.GET.get(<span class="stringliteral">&#39;query&#39;</span>, <span class="stringliteral">&#39;&#39;</span>).strip() </div>
<div class="line"><span class="lineno">   35</span> </div>
<div class="line"><span class="lineno">   36</span>    <span class="keywordflow">if</span> form_data:</div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span>        load_dotenv()</div>
<div class="line"><span class="lineno">   39</span>        api_key = os.getenv(<span class="stringliteral">&#39;SHOW_API_KEY&#39;</span>)</div>
<div class="line"><span class="lineno">   40</span> </div>
<div class="line"><span class="lineno">   41</span>        url = f<span class="stringliteral">&quot;https://api.themoviedb.org/3/search/tv?query={form_data}&amp;api_key={api_key}&amp;language=en-US&quot;</span></div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span>        response = requests.get(url)</div>
<div class="line"><span class="lineno">   44</span>        <span class="keywordflow">if</span> response.status_code == 200:</div>
<div class="line"><span class="lineno">   45</span>            data = response.json()</div>
<div class="line"><span class="lineno">   46</span>            results = data.get(<span class="stringliteral">&#39;results&#39;</span>, []) </div>
<div class="line"><span class="lineno">   47</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   48</span>            error_message = f<span class="stringliteral">&quot;API Error: {response.status_code}&quot;</span></div>
<div class="line"><span class="lineno">   49</span>            print(error_message)</div>
<div class="line"><span class="lineno">   50</span>            <span class="keywordflow">return</span> render(request, <span class="stringliteral">&#39;TVshow/TVshow_search.html&#39;</span>, {<span class="stringliteral">&#39;results&#39;</span>: results, <span class="stringliteral">&#39;query&#39;</span>: form_data, <span class="stringliteral">&#39;recently_viewed_shows&#39;</span>: recently_viewed_shows, <span class="stringliteral">&#39;error_message&#39;</span>: error_message})</div>
<div class="line"><span class="lineno">   51</span> </div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordflow">return</span> render(request, <span class="stringliteral">&#39;TVshow/TVshow_search.html&#39;</span>, {<span class="stringliteral">&#39;results&#39;</span>: results, <span class="stringliteral">&#39;query&#39;</span>: form_data, <span class="stringliteral">&#39;recently_viewed_shows&#39;</span>: recently_viewed_shows})</div>
<div class="line"><span class="lineno">   53</span> </div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span><span class="preprocessor">@login_required</span></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_t_vshow.html">TVshow</a></li><li class="navelem"><a class="el" href="namespace_t_vshow_1_1views.html">views</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
